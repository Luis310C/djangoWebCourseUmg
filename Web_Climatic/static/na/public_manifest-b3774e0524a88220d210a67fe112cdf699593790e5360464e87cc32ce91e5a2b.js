/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
// @ sourceMappingURL=jquery-1.10.2.min.map
*/
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function recaptchaLoaded(){console.log("loaded recaptcha")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function titleize(str){var words=str.split(/[\s_-]/g);return(words=words.map(function(word){return word.charAt(0).toUpperCase()+word.slice(1).toLowerCase()})).join(" ")}function singularize(plural){return/s$/.test(plural)?plural.replace(/s$/,""):plural}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function debounce(fn,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout(function(){fn.apply(context,args)},delay)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}!function(e,t){function M(e){var t=e.length,n=x.type(e);return!x.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||"string"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),("object"==typeof n||"function"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),"string"==typeof n?null==(o=a[n])&&(o=a[x.camelCase(n)]):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:t=(t=x.camelCase(t))in r?[t]:t.split(" "),i=t.length;for(;i--;)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function $(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(P,"-$1").toLowerCase();if("string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:B.test(r)?x.parseJSON(r):r)}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if(("data"!==t||!x.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}function pt(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function Lt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ht(e){return e.type=(null!==x.find.attr(e,"type"))+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){for(var n,r=0;null!=(n=e[r]);r++)x._data(n,"globalEval",!t||x._data(t[r],"globalEval"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r]);a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){for(r in(i=x._data(t)).events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;i--;)if((t=en[i]+n)in e)return t;return r}function nn(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function rn(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)(r=e[a]).style&&(o[a]=x._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=x._data(r,"olddisplay",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&x._data(r,"olddisplay",i?n:x.css(r,"display"))));for(a=0;s>a;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=x.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=x.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=x.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=x.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if((0>(i=Wt(e,t,o))||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function ln(e){var t=a,n=Gt[e];return n||("none"!==(n=un(e,t))&&n||((t=((Pt=(Pt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement))[0].contentWindow||Pt[0].contentDocument).document).write("<!doctype html><html><body>"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}var o={},a=e===jn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}function Mn(e,n,r){for(var i,o,a,s,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){for(var r,i=(Qn[t]||[]).concat(Qn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),o=1-(n/u.duration||0),a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=x.camelCase(n)],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,"fxshow");for(r in n.queue||(null==(s=x._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c))for(r in d?"hidden"in d&&(f=d.hidden):d=x._data(e,"fxshow",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;for(t in x._removeData(e,"fxshow"),c)x.style(e,t,c[t])}),c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)r["margin"+(n=Zt[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return x.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f="1.10.2",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^[\],:{}\s]*$/,S=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,j=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,D=/^-ms-/,L=/-([\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||"load"===e.type||"complete"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener("DOMContentLoaded",q,!1),e.removeEventListener("load",q,!1)):(a.detachEvent("onreadystatechange",q),e.detachEvent("onload",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e))||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if((o=a.getElementById(i[2]))&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],s!==(r=o[i])&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(!0===e?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,!0!==e&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray||function(e){return"array"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&((n=x.trim(n))&&E.test(n.replace(A,"@").replace(j,"]").replace(S,"")))?Function("return "+n)():(x.error("Invalid JSON: "+n),t)},parseXML:function(n){var r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?r=(new DOMParser).parseFromString(n,"text/xml"):((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,o=e.length,a=M(e);if(n){if(a)for(;o>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(a)for(;o>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:b&&!b.call("\ufeff\xa0")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var i=[],o=0,a=e.length;for(n=!!n;a>o;o++)n!==!!t(e[o],o)&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,s=[];if(M(e))for(;o>i;i++)null!=(r=t(e[i],i,n))&&(s[s.length]=r);else for(i in e)null!=(r=t(e[i],i,n))&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),(i=function(){return e.apply(n||this,r.concat(g.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if("object"===x.type(r))for(l in o=!0,r)x.access(e,n,l,r[l],!0,a,s);else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),"complete"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener("DOMContentLoaded",q,!1),e.addEventListener("load",q,!1);else{a.attachEvent("onreadystatechange",q),e.attachEvent("onload",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()}),r=x(a),function(e,t){function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=(t=t||f).nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(!(a=t.getElementById(s))||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(c=mt(e),(d=t.getAttribute("id"))?m=d.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",u=c.length;u--;)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(",")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,n,i)}function st(){function t(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){for(var n=e.split("|"),r=e.length;r--;)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function gt(){}function mt(e,t){var n,r,i,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=o.preFilter;s;){for(a in(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length)),o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+" "+a;if(s){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if((u=(c=t[b]||(t[b]={}))[r])&&u[0]===p){if(!0===(l=u[1])||l===i)return!0===l}else if((u=c[r]=[p])[1]=e(t,n,s)||i,!0===u[1])return!0}}function bt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r)for(u=xt(y,d),r(u,[],s,l),c=u.length;c--;)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p));if(o){if(i||e){if(i){for(u=[],c=y.length;c--;)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}for(c=y.length;c--;)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){for(var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[" "],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if((n=o.filter[e[l].type].apply(null,e[l].matches))[b]){for(r=++l;i>r&&!o.relative[e[r].type];r++);return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG("*",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){for(g=0;m=e[g++];)if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){for(g=0;m=t[g++];)m(x,y,l,c);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}function Nt(e,t,n){for(var r=0,i=t.length;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if((s=f[0]=f[0].slice(0)).length>2&&"ID"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(!(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0]))return n;e=e.slice(s.shift().value.length)}for(a=Q.needsContext.test(e)?0:s.length;a--&&(u=s[a],!o.relative[c=u.type]);)if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),!(e=i.length&&yt(s)))return M.apply(n,i),n;break}}return l(e,f)(i,t,!h,n,V.test(e)),n}var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b="sizzle"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W=R.replace("w","w#"),$="\\["+P+"*("+R+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+P+"*\\]",I=":("+R+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),X=RegExp("^"+P+"*,"+P+"*"),U=RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=RegExp(P+"*[+~]"),Y=RegExp("="+P+"*([^\\]'\"]*)"+P+"*\\]","g"),J=RegExp(I),G=RegExp("^"+W+"$"),Q={ID:RegExp("^#("+R+")"),CLASS:RegExp("^\\.("+R+")"),TAG:RegExp("^("+R.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}for(n in s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){p()}),r.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+P+"*(?:value|"+B+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ut(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+P+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,"div"),
y.call(e,"[s!='']:x"),m.push("!=",I)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;s[i]===l[i];)i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,"='$1']"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},(o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(d=(u=(c=m[b]||(m[b]={}))[e]||[])[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else for(;(p=++d&&p&&p[g]||(f=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(v&&((p[b]||(p[b]={}))[e]=[T,f]),p!==t)););return(f-=i)===r||0==f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=F.call(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,"$1"));return r[b]?lt(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||"")||at.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}}).pseudos.nth=o.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);gt.prototype=o.filters=o.pseudos,o.setFilters=new gt,l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){for(t||(t=mt(e)),n=t.length;n--;)(o=Tt(t[n]))[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o},r.sortStable=b.split("").sort(A).join("")===b,r.detectDuplicates=S,p(),r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:!0===e[n]?n.toLowerCase():null}),x.find=at,x.expr=at.selectors,x.expr[":"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};x.Callbacks=function(e){e="string"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(!1===l[a].apply(t[0],t[1])&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function i(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){for(var r;(r=x.inArray(t,l,r))>-1;)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=[e,(t=t||[]).slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var s,l,u,t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}};if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],!(r=d.getElementsByTagName("a")[0])||!r.style||!n.length)return t;u=(s=a.createElement("select")).appendChild(a.createElement("option")),o=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==a.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}for(f in(o=a.createElement("input")).setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),(l=a.createDocumentFragment()).appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||!1===d.attributes[c].expando;for(f in d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,x(t))break;return t.ownLast="0"!==f,x(function(){var n,r,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=a.getElementsByTagName("body")[0];l&&((n=a.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(o=d.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,(r=d.appendChild(a.createElement("div"))).style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t}({});var B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;x.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?x.cache[e[x.expando]]:e[x.expando])&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>a;a++)0===(i=r[a].name).indexOf("data-")&&$(s,i=x.camelCase(i.slice(5)),o[i]);x._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}}),x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks("once memory").add(function(){x._removeData(e,t+"queue"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx&&x.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)(r=x._data(a[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\t\r\n\f]/g,V=/\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(r=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(r=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,o=x(this),a=e.match(T)||[];t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===i||"boolean"===n)&&(this.className&&x._data(this,"__className__",this.className),this.className=this.className||!1===e?"":x._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,x(this).val()):e)?o="":"number"==typeof o?o+="":x.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),(r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))})):o?(r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()])&&"get"in r&&(n=r.get(o,"value"))!==t?n:"string"==typeof(n=o.value)?n.replace(V,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(!(!(n=r[l]).selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)((r=i[a]).selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&"get"in o&&null!==(a=o.get(e,n))?a:null==(a=x.find.attr(e,n))?t:a:null!==r?o&&"set"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)for(;n=o[i++];)r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase("default-"+n)]=e[r]=!1:x.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return(1!==s||!x.isXMLDoc(e))&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return!1===t?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase("default-"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase("default-"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""!==t&&t,n)}},x.each(["width","height"],function(e,n){x.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),x.support.hrefNormalized||x.each(["href","src"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype="encoding"),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){for(r.handler&&(r=(c=r).handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||((f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)}).elem=e),u=(n=(n||"").match(T)||[""]).length;u--;)g=y=(s=rt.exec(n[u])||[])[1],m=(s[2]||"").split(".").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=l[g])||((h=l[g]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,o,m,f)||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(T)||[""]).length;u--;)if(d=g=(s=rt.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d){for(p=x.event.special[d]||{},f=c[d=(r?p.delegateType:p.bindType)||d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,m.handle)||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(g=(m=g.split(".")).shift(),m.sort()),l=0>g.indexOf(":")&&"on"+g,(n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n)).isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||!1!==p.trigger.apply(i,r))){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}for(d=0;(u=h[d++])&&!n.isPropagationStopped();)n.type=d>1?c:p.bindType||g,(s=(x._data(u,"events")||{})[n.type]&&x._data(u,"handle"))&&s.apply(u,r),(s=l&&u[l])&&x.acceptData(u)&&s.apply&&!1===s.apply(u,r)&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||!1===p._default.apply(h.pop(),r))&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){(f=i[l])&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=x.event.handlers.call(this,e,u),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,(r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l))!==t&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(o=[],a=0;l>a;a++)o[r=(i=n[a]).selector+" "]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(o=(i=e.target.ownerDocument||a).documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return x.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={setup:function(){return!x.nodeName(this,"form")&&(x.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=x.nodeName(n,"input")||x.nodeName(n,"button")?n.form:t;r&&!x._data(r,"submitBubbles")&&(x.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),x._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!x.nodeName(this,"form")&&(x.event.remove(this,"._submit"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(x.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate("change",this,e,!0)})),!1):(x.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,"changeBubbles")&&(x.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate("change",this.parentNode,e,!0)}),x._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,"._change"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){
0==n++&&a.addEventListener(e,r,!0)},teardown:function(){0==--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=t),e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),!1===i)i=ot;else if(!i)return this;return 1===o&&(s=i,(i=function(e){return x().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(!1===n||"function"==typeof n)&&(r=n,n=t),!1===r&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\[\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return(n=this.pushStack(i>1?x.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?x(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:x.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Dt=dt(a).appendChild(a.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lt(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?x.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&x.cleanData(Ft(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&x.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)1===(n=this[r]||{}).nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||"string"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this)).firstChild,1===l.childNodes.length&&(l=r),r)){for(o=(a=x.map(Ft(l,"script"),Ht)).length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,"script"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||"")&&!x._data(i,"globalEval")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||"").replace(St,"")));l=r=null}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=0,i=[],o=x(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}}),x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return(r=Ft(o,"script")).length>0&&_t(r,!l&&Ft(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;p>h;h++)if((o=e[h])||0===o)if("object"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody)for(i=(o="table"!==l||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild)&&o.childNodes.length;i--;)x.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(x.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));for(s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,"input"),Bt),h=0;o=d[h++];)if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),"script"),a&&_t(s),n))for(i=0;o=s[i++];)kt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(a=(o=n[l])&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);u[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+w+")(.*)$","i"),Yt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+w+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:x.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if("string"===(a=typeof r)&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),(s=x.cssHooks[n]||x.cssHooks[l])&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),!0===r||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,(a=(o=e.runtimeStyle)&&o.left)&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=i,a&&(o.left=a)),""===l?"auto":l}),x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,"display"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===x.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+"px":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||x.css(e,"display"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")},x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,yn,vn=x.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=o.href}catch(Ln){(yn=a.createElement("a")).href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[],x.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&((T=C.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=T),(T=C.getResponseHeader("etag"))&&(x.etag[o]=T)),204===e||"HEAD"===p.type?N="nocontent":304===e?N="notmodified":(N=w.state,y=w.data,c=!(v=w.error))):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+"",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks("once memory"),m=p.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Tn.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;for(i in(l=p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&C.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]),p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(!1===p.beforeSend.call(f,C,p)||2===b))return C.abort();for(i in w="abort",{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,"No Transport");return C},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}}),x.each(["get","post"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),x.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=a.head||x("head")[0]||a.documentElement;return{send:function(t,i){(n=a.createElement("script")).async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||x.expando+"_"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,l=!1!==n.jsonp&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,"$1"+o):!1!==n.jsonp&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&"withCredentials"in Rn,(Rn=x.support.ajax=!!Rn)&&x.ajaxTransport(function(n){var r;if(!n.crossDomain||x.support.cors)return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),a=(x.cssNumber[e]||"px"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",x.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}}),x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=x._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)(e=n[r])()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;return s?(n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},x.offset={setOffset:function(e,t,n){var r=x.css(e,"position");"static"===r&&(e.style.position="relative");var p,f,i=x(e),o=i.offset(),a=x.css(e,"top"),s=x.css(e,"left"),u={},c={};("absolute"===r||"fixed"===r)&&x.inArray("auto",[a,s])>-1?(p=(c=i.position()).top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),"using"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===x.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(n=e.offset()),n.top+=x.css(e[0],"borderTopWidth",!0),n.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-x.css(r,"marginTop",!0),left:t.left-n.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s;e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position");)e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(!0===i||!0===o?"margin":"border");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}))}(window),window.console&&console.log||function(){for(var noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console={};length--;)console[methods[length]]=noop}(),function(e,n,t){function o(e){var n=T.className,t=Modernizr._config.classPrefix||"";if(C&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}
Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),C?T.className.baseVal=n:T.className=n)}function r(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):C?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function i(e,n){return typeof e===n}function s(){var e,n,t,o,r,a;for(var l in w){if(e=[],(n=w[l]).name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=i(n.fn,"function")?n.fn():n.fn,r=0;r<e.length;r++)1===(a=e[r].split(".")).length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),x.push((o?"":"no-")+a.join("-"))}}function a(){var e=n.body;return e||((e=r(C?"svg":"body")).fake=!0),e}function l(e,n){if("object"==typeof e)for(var t in e)P(e,t)&&l(t,e[t]);else{var r=(e=e.toLowerCase()).split("."),i=Modernizr[r[0]];if(2==r.length&&(i=i[r[1]]),void 0!==i)return Modernizr;n="function"==typeof n?n():n,1==r.length?Modernizr[r[0]]=n:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=n),o([(n&&0!=n?"":"no-")+r.join("-")]),Modernizr._trigger(e,n)}return Modernizr}function c(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function f(e,t,o,i){var s,l,c,f,d="modernizr",u=r("div"),p=a();if(parseInt(o,10))for(;o--;)(c=r("div")).id=i?i[o]:d+(o+1),u.appendChild(c);return(s=r("style")).type="text/css",s.id="s"+d,(p.fake?p:u).appendChild(s),p.appendChild(u),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),u.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",f=T.style.overflow,T.style.overflow="hidden",T.appendChild(p)),l=t(u,e),p.fake?(p.parentNode.removeChild(p),T.style.overflow=f,T.offsetHeight):u.parentNode.removeChild(u),!!l}function d(e,n){return!!~(""+e).indexOf(n)}function u(e,n){return function(){return e.apply(n,arguments)}}function p(e,n,t){var o;for(var r in e)if(e[r]in n)return!1===t?e[r]:i(o=n[e[r]],"function")?u(o,t||n):o;return!1}function v(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(n,o){var r=n.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(v(n[r]),o))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];r--;)i.push("("+v(n[r])+":"+o+")");return f("@supports ("+(i=i.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return t}function m(e,n,o,s){function a(){f&&(delete O.style,delete O.modElem)}if(s=!i(s,"undefined")&&s,!i(o,"undefined")){var l=h(e,o);if(!i(l,"undefined"))return l}for(var f,u,p,v,m,g=["modernizr","tspan"];!O.style;)f=!0,O.modElem=r(g.shift()),O.style=O.modElem.style;for(p=e.length,u=0;p>u;u++)if(v=e[u],m=O.style[v],d(v,"-")&&(v=c(v)),O.style[v]!==t){if(s||i(o,"undefined"))return a(),"pfx"!=n||v;try{O.style[v]=o}catch(y){}if(O.style[v]!=m)return a(),"pfx"!=n||v}return a(),!1}function g(e,n,t,o,r){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+z.join(s+" ")+s).split(" ");return i(n,"string")||i(n,"undefined")?m(a,n,o,r):p(a=(e+" "+A.join(s+" ")+s).split(" "),n,t)}function y(e,n,o){return g(e,t,t,n,o)}var x=[],w=[],b={_version:"3.0.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){w.push({name:e,fn:n,options:t})},addAsyncTest:function(e){w.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=b,(Modernizr=new Modernizr).addTest("cookies",function(){try{n.cookie="cookietest=1";var e=-1!=n.cookie.indexOf("cookietest=");return n.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}}),Modernizr.addTest("geolocation","geolocation"in navigator),Modernizr.addTest("svg",!!n.createElementNS&&!!n.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Modernizr.addTest("picture","HTMLPictureElement"in e);var T=n.documentElement,C="svg"===T.nodeName.toLowerCase();Modernizr.addTest("canvas",function(){var e=r("canvas");return!(!e.getContext||!e.getContext("2d"))}),Modernizr.addTest("video",function(){var e=r("video"),n=!1;try{(n=!!e.canPlayType)&&((n=new Boolean(n)).ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),n.vp9=e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),n.hls=e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(t){}return n}),Modernizr.addTest("webgl",function(){var n=r("canvas"),t="probablySupportsContext"in n?"probablySupportsContext":"supportsContext";return t in n?n[t]("webgl")||n[t]("experimental-webgl"):"WebGLRenderingContext"in e}),Modernizr.addTest("srcdoc","srcdoc"in r("iframe"));var S=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];b._prefixes=S;var P,_="CSS"in e&&"supports"in e.CSS,k="supportsCSS"in e;Modernizr.addTest("supports",_||k),function(){var e={}.hasOwnProperty;P=i(e,"undefined")||i(e.call,"undefined")?function(e,n){return n in e&&i(e.constructor.prototype[n],"undefined")}:function(n,t){return e.call(n,t)}}(),b._l={},b.on=function(e,n){this._l[e]||(this._l[e]=[]),this._l[e].push(n),Modernizr.hasOwnProperty(e)&&setTimeout(function(){Modernizr._trigger(e,Modernizr[e])},0)},b._trigger=function(e,n){if(this._l[e]){var t=this._l[e];setTimeout(function(){var e;for(e=0;e<t.length;e++)(0,t[e])(n)},0),delete this._l[e]}},Modernizr._q.push(function(){b.addTest=l}),Modernizr.addAsyncTest(function(){var o,i=function(e){e.fake&&e.parentNode&&e.parentNode.removeChild(e)},s=function(e,n){var t=!!e;if(t&&((t=new Boolean(t)).blocked="blocked"===e),l("flash",function(){return t}),n&&p.contains(n)){for(;n.parentNode!==p;)n=n.parentNode;p.removeChild(n)}};try{o="ActiveXObject"in e&&"Pan"in new e.ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(c){}if(!("plugins"in navigator&&"Shockwave Flash"in navigator.plugins||o)||C)s(!1);else{var f,d,u=r("embed"),p=a();if(u.type="application/x-shockwave-flash",p.appendChild(u),T.appendChild(p),!("Pan"in u||o))return s("blocked",u),void i(p);f=function(){return T.contains(p)?(T.contains(u)?(d=u.style.cssText,s(""===d||"blocked",u)):s("blocked"),void i(p)):(p=n.body||p,(u=r("embed")).type="application/x-shockwave-flash",p.appendChild(u),setTimeout(f,1e3))},setTimeout(f,10)}});var E=b.testStyles=f;Modernizr.addTest("hiddenscroll",function(){return E("#modernizr {width:100px;height:100px;overflow:scroll}",function(e){return e.offsetWidth===e.clientWidth})}),Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",S.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");E(o,function(e){t=9===e.offsetTop})}return t});var N="Moz O ms Webkit",z=b._config.usePrefixes?N.split(" "):[];b._cssomPrefixes=z;var j=function(n){var o,r=S.length,i=e.CSSRule;if(void 0===i)return t;if(!n)return!1;if((o=(n=n.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in i)return"@"+n;for(var s=0;r>s;s++){var a=S[s];if(a.toUpperCase()+"_"+o in i)return"@-"+a.toLowerCase()+"-"+n}return!1};b.atRule=j;var A=b._config.usePrefixes?N.toLowerCase().split(" "):[];b._domPrefixes=A;var L={elem:r("modernizr")};Modernizr._q.push(function(){delete L.elem});var O={style:L.elem.style};Modernizr._q.unshift(function(){delete O.style}),b.testAllProps=g;var R=b.prefixed=function(e,n,t){return 0===e.indexOf("@")?j(e):(-1!=e.indexOf("-")&&(e=c(e)),n?g(e,n,t):g(e,"pfx"))};Modernizr.addTest("fullscreen",!(!R("exitFullscreen",n,!1)&&!R("cancelFullScreen",n,!1))),b.testAllProps=y,Modernizr.addTest("flexbox",y("flexBasis","1px",!0)),Modernizr.addTest("cssanimations",y("animationName","a",!0)),Modernizr.addTest("flexboxlegacy",y("boxDirection","reverse",!0)),Modernizr.addTest("flexboxtweener",y("flexAlign","end",!0)),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&y("transform","scale(1)",!0)}),Modernizr.addTest("csstransforms3d",function(){var t,e=!!y("perspective","1px",!0),n=Modernizr._config.usePrefixes;e&&(!n||"webkitPerspective"in T.style)&&(Modernizr.supports?t="@supports (perspective: 1px)":(t="@media (transform-3d)",n&&(t+=",(-webkit-transform-3d)")),E(t+="{#modernizr{left:9px;position:absolute;height:5px;margin:0;padding:0;border:0}}",function(n){e=9===n.offsetLeft&&5===n.offsetHeight}));return e}),Modernizr.addTest("csstransitions",y("transition","all",!0)),Modernizr.addTest("preserve3d",y("transformStyle","preserve-3d")),s(),o(x),delete b.addTest,delete b.addAsyncTest;for(var $=0;$<Modernizr._q.length;$++)Modernizr._q[$]();e.Modernizr=Modernizr}(window,document),function($){function parseBackgroundPosition(c){var d=(c||"").split(/ /),e={center:"50%",left:"0%",right:"100%",top:"0%",bottom:"100%"},f=function(a){var b=(e[d[a]]||d[a]||"50%").match(/^([+-]=)?([+-]?\d+(\.\d*)?)(.*)$/);d[a]=[b[1],parseFloat(b[2]),b[4]||"px"]};return 1==d.length&&$.inArray(d[0],["top","bottom"])>-1&&(d[1]=d[0],d[0]="50%"),f(0),f(1),d}function setBackgroundPosition(a){a.set||initBackgroundPosition(a),$(a.elem).css("background-position",a.pos*(a.end[0][1]-a.start[0][1])+a.start[0][1]+a.end[0][2]+" "+(a.pos*(a.end[1][1]-a.start[1][1])+a.start[1][1]+a.end[1][2]))}function initBackgroundPosition(a){a.start=parseBackgroundPosition($(a.elem).css("backgroundPosition")),a.end=parseBackgroundPosition(a.end);for(var i=0;i<a.end.length;i++)a.end[i][0]&&(a.end[i][1]=a.start[i][1]+("-="==a.end[i][0]?-1:1)*a.end[i][1]);a.set=!0}!!$.Tween?$.Tween.propHooks.backgroundPosition={get:function(a){return parseBackgroundPosition($(a.elem).css(a.prop))},set:setBackgroundPosition}:$.fx.step.backgroundPosition=setBackgroundPosition}(jQuery),
/*
 * SimpleModal 1.4.4 - jQuery Plugin
 * http://simplemodal.com/
 * Copyright (c) 2013 Eric Martin
 * Licensed under MIT and GPL
 * Date: Sun, Jan 20 2013 15:58:56 -0800
 */
function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(function(b){var m,r,j=[],n=b(document),k=navigator.userAgent.toLowerCase(),l=b(window),g=[],o=null,p=/msie/.test(k)&&!/opera/.test(k),q=/opera/.test(k);m=p&&/msie 6./.test(k)&&"object"!=typeof window.XMLHttpRequest,r=p&&/msie 7.0/.test(k),b.modal=function(a,h){return b.modal.impl.init(a,h)},b.modal.close=function(){b.modal.impl.close()},b.modal.focus=function(a){b.modal.impl.focus(a)},b.modal.setContainerDimensions=function(){b.modal.impl.setContainerDimensions()},b.modal.setPosition=function(){b.modal.impl.setPosition()},b.modal.update=function(a,h){b.modal.impl.update(a,h)},b.fn.modal=function(a){return b.modal.impl.init(this,a)},b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null},b.modal.impl={d:{},init:function(a,h){if(this.d.data)return!1;if(o=p&&!b.support.boxModel,this.o=b.extend({},b.modal.defaults,h),this.zIndex=this.o.zIndex,this.occb=!1,"object"==typeof a)a=a instanceof b?a:b(a),this.d.placeholder=!1,0<a.parent().parent().size()&&(a.before(b("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=a.css("display"),!this.o.persist)&&(this.d.orig=a.clone(!0));else{if("string"!=typeof a&&"number"!=typeof a)return alert("SimpleModal Error: Unsupported data type: "+typeof a),this;a=b("<div></div>").html(a)}return this.create(a),this.open(),b.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]),this},create:function(a){this.getDimensions(),this.o.modal&&m&&(this.d.iframe=b('<iframe src="javascript:false;"></iframe>').css(b.extend(this.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:g[0],width:g[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo)),this.d.overlay=b("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(b.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?j[0]:0,width:this.o.modal?j[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo),this.d.container=b("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(b.extend({position:this.o.fixed?"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?b(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo),this.d.wrap=b("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container),this.d.data=a.attr("id",a.attr("id")||this.o.dataId).addClass("simplemodal-data").css(b.extend(this.o.dataCss,{display:"none"})).appendTo("body"),this.setContainerDimensions(),this.d.data.appendTo(this.d.wrap),(m||o)&&this.fixIE()},bindEvents:function(){var a=this;b("."+a.o.closeClass).bind("click.simplemodal",function(b){b.preventDefault(),a.close()}),a.o.modal&&a.o.close&&a.o.overlayClose&&a.d.overlay.bind("click.simplemodal",function(b){b.preventDefault(),a.close()}),n.bind("keydown.simplemodal",function(b){a.o.modal&&9===b.keyCode?a.watchTab(b):a.o.close&&a.o.escClose&&27===b.keyCode&&(b.preventDefault(),a.close())}),l.bind("resize.simplemodal orientationchange.simplemodal",function(){a.getDimensions(),a.o.autoResize?a.setContainerDimensions():a.o.autoPosition&&a.setPosition(),m||o?a.fixIE():a.o.modal&&(a.d.iframe&&a.d.iframe.css({height:g[0],width:g[1]}),a.d.overlay.css({height:j[0],width:j[1]}))})},unbindEvents:function(){b("."+this.o.closeClass).unbind("click.simplemodal"),n.unbind("keydown.simplemodal"),l.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var a=this.o.position;b.each([this.d.iframe||null,this.o.modal?this.d.overlay:null,"fixed"===this.d.container.css("position")?this.d.container:null],function(b,e){if(e){var c,d,f=e[0].style;if(f.position="absolute",2>b)f.removeExpression("height"),f.removeExpression("width"),f.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),f.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else a&&a.constructor===Array?(c=-1===(c=a[0]?"number"==typeof a[0]?a[0].toString():a[0].replace(/px/,""):e.css("top").replace(/px/,"")).indexOf("%")?c+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(c.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',a[1]&&(d=-1===(d="number"==typeof a[1]?a[1].toString():a[1].replace(/px/,"")).indexOf("%")?d+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(d.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(c='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',d='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"'),f.removeExpression("top"),f.removeExpression("left"),f.setExpression("top",c),f.setExpression("left",d)}})},focus:function(a){var h=this,e=(a=a&&-1!==b.inArray(a,["first","last"])?a:"first",b(":input:enabled:visible:"+a,h.d.wrap));setTimeout(function(){0<e.length?e.focus():h.d.wrap.focus()},10)},getDimensions:function(){var a="undefined"==typeof window.innerHeight?l.height():window.innerHeight;j=[n.height(),n.width()],g=[a,l.width()]},getVal:function(a,b){return a?"number"==typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?g[0]:g[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){if(!this.d.data)return!1;this.d.origHeight=this.getVal(a,"h"),this.d.origWidth=this.getVal(b,"w"),this.d.data.hide(),a&&this.d.container.css("height",a),b&&this.d.container.css("width",b),this.setContainerDimensions(),this.d.data.show(),this.o.focus&&this.focus(),this.unbindEvents(),this.bindEvents()},setContainerDimensions:function(){var a=m||r,b=this.d.origHeight?this.d.origHeight:q?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),e=(a=this.d.origWidth?this.d.origWidth:q?this.d.container.width():this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),this.d.data.outerHeight(!0)),f=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||b,this.d.origWidth=this.d.origWidth||a;var c=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,d=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,i=(c=c&&c<g[0]?c:g[0],d=d&&d<g[1]?d:g[1],this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto");b=b?this.o.autoResize&&b>c?c:b<i?i:b:e?e>c?c:this.o.minHeight&&"auto"!==i&&e<i?i:e:i,c=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>d?d:a<c?c:a:f?f>d?d:this.o.minWidth&&"auto"!==c&&f<c?c:f:c;this.d.container.css({height:b,width:a}),this.d.wrap.css({overflow:e>b||f>a?"auto":"visible"}),this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=g[0]/2-this.d.container.outerHeight(!0)/2,b=g[1]/2-this.d.container.outerWidth(!0)/2;var e="fixed"!==this.d.container.css("position")?l.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(a=e+(this.o.position[0]||a),b=this.o.position[1]||b):a=e+a,this.d.container.css({left:b,top:a})},watchTab:function(a){0<b(a.target).parents(".simplemodal-container").length?(this.inputs=b(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),(!a.shiftKey&&a.target===this.inputs[this.inputs.length-1]||a.shiftKey&&a.target===this.inputs[0]||0===this.inputs.length)&&(a.preventDefault(),this.focus(a.shiftKey?"last":"first"))):(a.preventDefault(),this.focus())},open:function(){this.d.iframe&&this.d.iframe.show(),b.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show()),this.o.focus&&this.focus(),this.bindEvents()},close:function(){if(!this.d.data)return!1;if(this.unbindEvents(),b.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var a=b("#simplemodal-placeholder");this.o.persist?a.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),a.replaceWith(this.d.orig))}else this.d.data.hide().remove();this.d.container.hide().remove(),this.d.overlay.hide(),this.d.iframe&&this.d.iframe.hide().remove(),this.d.overlay.remove(),this.d={}}}}}),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(require("jquery")):i(t.jQuery)}(this,function(t){"use strict";function i(t,i){return typeof t===i}function e(t,i){return!!~(""+t).indexOf(i)}function s(t,i){for(var s in t){var o=t[s];if(!e(o,"-")&&void 0!==p[o])return"pfx"!=i||o}return!1}function o(t,e,s){for(var o in t){var n=e[t[o]];if(void 0!==n)return!1===s?t[o]:i(n,"function")?n.bind(s||e):n}return!1}function n(t,e,n){var r=t.charAt(0).toUpperCase()+t.slice(1),h=(t+" "+H.join(r+" ")+r).split(" ");return i(e,"string")||i(e,"undefined")?s(h,e):o(h=(t+" "+w.join(r+" ")+r).split(" "),e,n)}var r,h,l={image:null,imageAttribute:"image",holderClass:"imageHolder",imgClass:"img-holder-img",container:t("body"),windowObject:t(window),speed:.2,coverRatio:.75,holderMinHeight:200,holderMaxHeight:null,extraHeight:0,mediaWidth:1600,mediaHeight:900,parallax:!0,touch:!1},a="imageScroll",d="plugin_"+a,c=function(t,i){return function(){return t.apply(i,arguments)}},g={},m=document.documentElement,f="imageScrollModernizr",p=document.createElement(f).style,v="Webkit Moz O ms",H=v.split(" "),w=v.toLowerCase().split(" "),b={},y=0,x="",$=function(t,i,e,s){var o,n,r,h,l=document.createElement("div"),a=document.body,d=a||document.createElement("body");if(parseInt(e,10))for(;e--;)(r=document.createElement("div")).id=s?s[e]:f+(e+1),l.appendChild(r);return o=["&#173;",'<style id="s',f,'">',t,"</style>"].join(""),l.id=f,(a?l:d).innerHTML+=o,d.appendChild(l),a||(d.style.background="",d.style.overflow="hidden",h=m.style.overflow,m.style.overflow="hidden",m.appendChild(d)),n=i(l,t),a?l.parentNode.removeChild(l):(d.parentNode.removeChild(d),m.style.overflow=h),!!n};return b.csstransforms=function(){return!!n("transform")},b.csstransforms3d=function(){var t=!!n("perspective");return t&&"webkitPerspective"in m.style&&$("@media (transform-3d),(-webkit-transform-3d){#imageScrollModernizr{left:9px;position:absolute;height:3px;}}",function(i){t=9===i.offsetLeft&&3===i.offsetHeight}),t},g.prefixed=function(t,i,e){return i?n(t,i,e):n(t,"pfx")},window.requestAnimationFrame=g.prefixed("requestAnimationFrame",window)||function(t){var i=(new Date).getTime(),e=Math.max(0,16-(i-y)),s=window.setTimeout(function(){t(i+e)},e);return y=i+e,s},b.csstransforms3d()?x="csstransforms3d":b.csstransforms()&&(x="csstransforms"),""!==x&&(h=g.prefixed("transform")),r=function(i,e){this.$imageHolder=t(i),this.settings=t.extend({},l,e),this.image=this.$imageHolder.data(this.settings.imageAttribute)||this.settings.image,this.mediaWidth=this.$imageHolder.data("width")||this.settings.mediaWidth,this.mediaHeight=this.$imageHolder.data("height")||this.settings.mediaHeight,this.coverRatio=this.$imageHolder.data("cover-ratio")||this.settings.coverRatio,this.holderMinHeight=this.$imageHolder.data("min-height")||this.settings.holderMinHeight,this.holderMaxHeight=this.$imageHolder.data("max-height")||this.settings.holderMaxHeight,this.extraHeight=this.$imageHolder.data("extra-height")||this.settings.extraHeight,this.ticking=!1,this.refresh=c(this.refresh,this),this._onScroll=c(this._onScroll,this),this._defaults=l,this._name=a,this.init()},t.extend(r.prototype,{constructor:r,init:function(){if(!this.image)throw new Error("You need to provide either a data-img attr or an image option");this.$scrollingElement=t("<img/>",{src:this.image}).addClass(this.settings.imgClass),!0===this.settings.touch?this.$scrollingElement.css({maxWidth:"100%"}).prependTo(this.$imageHolder):!0===this.settings.parallax?(this.$scrollerHolder=t("<div/>",{html:this.$imageHolder.html()}).css({top:0,visibility:"hidden",position:"fixed",overflow:"hidden"}).addClass(this.settings.holderClass).prependTo(this.settings.container),this.$imageHolder.css("visibility","hidden").empty(),this.$scrollingElement.css({position:"absolute",top:0,left:0,visibility:"hidden",maxWidth:"none"}).prependTo(this.$scrollerHolder)):(this.$scrollerHolder=this.$imageHolder.css({overflow:"hidden"}),this.$scrollingElement.css({position:"relative",overflow:"hidden"}).prependTo(this.$imageHolder)),!1===this.settings.touch&&(this._bindEvents(),this.refresh())},_adjustImgHolderHeights:function(){var t,i,e,s,o,n,r,h,l,a=this.settings.windowObject.height(),d=this.settings.windowObject.width()-this.settings.container.offset().left,c=this.coverRatio*a;c=null===this.holderMaxHeight||this.holderMaxHeight>c?Math.floor(c):this.holderMaxHeight,c=this.holderMinHeight<c?Math.floor(c):this.holderMinHeight,c+=this.extraHeight,h=Math.floor(a-(a-c)*this.settings.speed),(n=Math.round(this.mediaWidth*(h/this.mediaHeight)))>=d?r=h:(n=d,r=Math.round(this.mediaHeight*(n/this.mediaWidth))),l=h-c,o=a+c,s=2*a*(1-this.settings.speed)-l,t=-(l/2+(r-h)/2),i=Math.round(-.5*(n-d)),e=t-s/2,this.$scrollingElement.css({height:r,width:n}),this.$imageHolder.height(c),this.$scrollerHolder.css({height:c,width:n}),this.scrollingState={winHeight:a,fromY:e,imgTopPos:t,imgLeftPos:i,imgHolderHeight:c,imgScrollingDistance:s,travelDistance:o,holderDistanceFromTop:this.$imageHolder.offset().top-this.settings.windowObject.scrollTop()}},_bindEvents:function(){this.settings.windowObject.on("resize",this.refresh),!0===this.settings.parallax&&this.settings.windowObject.on("scroll",this._onScroll)},_unBindEvents:function(){this.settings.windowObject.off("resize",this.refresh),!0===this.settings.parallax&&this.settings.windowObject.off("scroll",this._onScroll)},_onScroll:function(){this.scrollingState.holderDistanceFromTop=this.$imageHolder.offset().top-this.settings.windowObject.scrollTop(),this._requestTick()},_requestTick:function(){var t=this;this.ticking||(this.ticking=!0,requestAnimationFrame(function(){t._updatePositions()}))},_updatePositions:function(){if(this.scrollingState.holderDistanceFromTop<=this.scrollingState.winHeight&&this.scrollingState.holderDistanceFromTop>=-this.scrollingState.imgHolderHeight){var i=(this.scrollingState.holderDistanceFromTop+this.scrollingState.imgHolderHeight)/this.scrollingState.travelDistance,e=Math.round(this.scrollingState.fromY+this.scrollingState.imgScrollingDistance*(1-i)),s=this.settings.container.offset().left;this.$scrollerHolder.css(this._getCSSObject({transform:h,left:s,x:Math.ceil(this.scrollingState.imgLeftPos)+(""===x&&s>0?s:0),y:Math.round(this.scrollingState.holderDistanceFromTop),visibility:"visible"})),this.$scrollingElement.css(this._getCSSObject({transform:h,x:0,y:e,visibility:"visible"}))}else this.$scrollerHolder.css({visibility:"hidden"}),this.$scrollingElement.css({visibility:"hidden"});this.ticking=!1},_updateFallbackPositions:function(){this.$scrollerHolder.css({width:"100%"}),this.$scrollingElement.css({top:this.scrollingState.imgTopPos,left:this.scrollingState.imgLeftPos})},_getCSSObject:function(t){return"csstransforms3d"===x?t.transform="translate3d("+t.x+"px, "+t.y+"px, 0)":"csstransforms"===x?t.transform="translate("+t.x+"px, "+t.y+"px)":(t.top=t.y,t.left=t.x),delete t.x,delete t.y,t},enable:function(){!1===this.settings.touch&&(this._bindEvents(),this.refresh())},disable:function(){!1===this.settings.touch&&this._unBindEvents()},refresh:function(){!1===this.settings.touch&&(this._adjustImgHolderHeights(),!0===this.settings.parallax?this._requestTick():this._updateFallbackPositions())},destroy:function(){!1===this.settings.touch&&this._unBindEvents(),!0===this.settings.touch?(this.$imageHolder.removeAttr("style"),this.$scrollingElement.remove()):!0===this.settings.parallax?(this.$scrollerHolder.find("."+this.settings.imgClass).remove(),this.$imageHolder.css({visibility:"visible",height:"auto"}).html(this.$scrollerHolder.html()),this.$scrollerHolder.remove()):(this.$imageHolder.css({overflow:"auto"}).removeAttr("style"),this.$scrollingElement.remove()),this.$imageHolder.removeData()}}),t.fn[a]=function(i){return void 0===i||"object"==typeof i?this.each(function(){t.data(this,d)||t.data(this,d,new r(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?this.each(function(){var e=t.data(this,d);e instanceof r&&"function"==typeof e[i]&&e[i].apply(e,Array.prototype.slice.call(arguments,1))}):void 0},t.fn[a].defaults=r.defaults=l,t.fn[a].Plugin=r,r}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};(b=function(){function b(b,d){var e,f,g=this;if(g.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(b),appendDots:a(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,pauseOnHover:!0,pauseOnDotsHover:!1,responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:300,swipe:!0,touchMove:!0,touchThreshold:5,useCSS:!0,vertical:!1,waitForAnimate:!0},g.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentSlide:0,currentLeft:null,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},a.extend(g,g.initials),g.activeBreakpoint=null,g.animType=null,g.animProp=null,g.breakpoints=[],g.breakpointSettings=[],g.cssTransitions=!1,g.paused=!1,g.positionProp=null,g.$slider=a(b),g.$slidesCache=null,g.transformType=null,g.transitionType=null,g.windowWidth=0,g.windowTimer=null,g.options=a.extend({},g.defaults,d),g.originalSettings=g.options,(e=g.options.responsive||null)&&e.length>-1){for(f in e)e.hasOwnProperty(f)&&(g.breakpoints.push(e[f].breakpoint),g.breakpointSettings[e[f].breakpoint]=e[f].settings);g.breakpoints.sort(function(a,b){return b-a})}g.autoPlay=a.proxy(g.autoPlay,g),g.autoPlayClear=a.proxy(g.autoPlayClear,g),g.changeSlide=a.proxy(g.changeSlide,g),g.selectHandler=a.proxy(g.selectHandler,g),g.setPosition=a.proxy(g.setPosition,g),g.swipeHandler=a.proxy(g.swipeHandler,g),g.dragHandler=a.proxy(g.dragHandler,g),g.keyHandler=a.proxy(g.keyHandler,g),g.autoPlayIterator=a.proxy(g.autoPlayIterator,g),g.instanceUid=c++,g.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,g.init()}var c=0;return b}()).prototype.addSlide=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):!0===d?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateSlide=function(b,c){var d={},e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var f=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:f},e.options.speed)}!0===e.options.rtl&&!1===e.options.vertical&&(b=-b),!1===e.transformsEnabled?!1===e.options.vertical?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):!1===e.cssTransitions?a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){!1===e.options.vertical?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}}):(e.applyTransition(),d[e.animType]=!1===e.options.vertical?"translate3d("+b+"px, 0px, 0px)":"translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.applyTransition=function(a){var b=this,c={};c[b.transitionType]=!1===b.options.fade?b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:"opacity "+b.options.speed+"ms "+b.options.cssEase,!1===b.options.fade?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&!0!==a.paused&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var b=this,c=null!=b.options.asNavFor?a(b.options.asNavFor).getSlick():null;!1===b.options.infinite?1===b.direction?(b.currentSlide+1===b.slideCount-1&&(b.direction=0),b.slideHandler(b.currentSlide+b.options.slidesToScroll),null!=c&&c.slideHandler(c.currentSlide+c.options.slidesToScroll)):(0==b.currentSlide-1&&(b.direction=1),b.slideHandler(b.currentSlide-b.options.slidesToScroll),null!=c&&c.slideHandler(c.currentSlide-c.options.slidesToScroll)):(b.slideHandler(b.currentSlide+b.options.slidesToScroll),null!=c&&c.slideHandler(c.currentSlide+c.options.slidesToScroll))},b.prototype.buildArrows=function(){var b=this;!0===b.options.arrows&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow=a(b.options.prevArrow),b.$nextArrow=a(b.options.nextArrow),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.appendTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),!0!==b.options.infinite&&b.$prevArrow.addClass("slick-disabled"))},b.prototype.buildDots=function(){var b,c,d=this;if(!0===d.options.dots&&d.slideCount>d.options.slidesToShow){for(c='<ul class="'+d.options.dotsClass+'">',b=0;b<=d.getDotCount();b+=1)c+="<li>"+d.options.customPaging.call(this,d,b)+"</li>";c+="</ul>",d.$dots=a(c).appendTo(d.options.appendDots),d.$dots.find("li").first().addClass("slick-active")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("index",b)}),b.$slidesCache=b.$slides,b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),!0===b.options.centerMode&&(b.options.slidesToScroll=1,0==b.options.slidesToShow%2&&(b.options.slidesToShow=3)),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),!0===b.options.accessibility&&b.$list.prop("tabIndex",0),b.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),!0===b.options.draggable&&b.$list.addClass("draggable")},b.prototype.checkResponsive=function(){var b,c,d=this;if(d.originalSettings.responsive&&d.originalSettings.responsive.length>-1&&null!==d.originalSettings.responsive){for(b in c=null,d.breakpoints)d.breakpoints.hasOwnProperty(b)&&a(window).width()<d.breakpoints[b]&&(c=d.breakpoints[b]);null!==c?null!==d.activeBreakpoint?c!==d.activeBreakpoint&&(d.activeBreakpoint=c,d.options=a.extend({},d.options,d.breakpointSettings[c]),d.refresh()):(d.activeBreakpoint=c,d.options=a.extend({},d.options,d.breakpointSettings[c]),d.refresh()):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=a.extend({},d.options,d.originalSettings),d.refresh())}},b.prototype.changeSlide=function(b){var c=this,d=a(b.target),e=null!=c.options.asNavFor?a(c.options.asNavFor).getSlick():null;switch(d.is("a")&&b.preventDefault(),b.data.message){case"previous":c.slideCount>c.options.slidesToShow&&(c.slideHandler(c.currentSlide-c.options.slidesToScroll),null!=e&&e.slideHandler(e.currentSlide-e.options.slidesToScroll));break;case"next":c.slideCount>c.options.slidesToShow&&(c.slideHandler(c.currentSlide+c.options.slidesToScroll),null!=e&&e.slideHandler(e.currentSlide+e.options.slidesToScroll));break;case"index":var f=0===b.data.index?0:b.data.index||a(b.target).parent().index()*c.options.slidesToScroll;c.slideHandler(f),null!=e&&e.slideHandler(f);default:return!1}},b.prototype.destroy=function(){var b=this;b.autoPlayClear(),b.touchObject={},a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&(b.$prevArrow.remove(),b.$nextArrow.remove()),b.$slides.parent().hasClass("slick-track")&&b.$slides.unwrap().unwrap(),b.$slides.removeClass("slick-slide slick-active slick-visible").css("width",""),b.$slider.removeClass("slick-slider"),b.$slider.removeClass("slick-initialized"),b.$list.off(".slick"),a(window).off(".slick-"+b.instanceUid),a(document).off(".slick-"+b.instanceUid)},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",!1===b.options.fade?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;!1===c.cssTransitions?(c.$slides.eq(a).css({zIndex:1e3}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:1e3}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.filterSlides=function(a){var b=this;null!==a&&(b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=function(){return this.currentSlide},b.prototype.getDotCount=function(){var a,b=this,c=0,d=0,e=0;for(a=!0===b.options.infinite?b.slideCount+b.options.slidesToShow-b.options.slidesToScroll:b.slideCount;a>c;)e++,c=(d+=b.options.slidesToScroll)+b.options.slidesToShow;return e},b.prototype.getLeft=function(a){var c,d=this,e=0;return d.slideOffset=0,c=d.$slides.first().outerHeight(),!0===d.options.infinite?(d.slideCount>d.options.slidesToShow&&(d.slideOffset=-1*d.slideWidth*d.options.slidesToShow,e=-1*c*d.options.slidesToShow),0!=d.slideCount%d.options.slidesToScroll&&a+d.options.slidesToScroll>d.slideCount&&d.slideCount>d.options.slidesToShow&&(d.slideOffset=-1*d.slideCount%d.options.slidesToShow*d.slideWidth,e=-1*d.slideCount%d.options.slidesToShow*c)):0!=d.slideCount%d.options.slidesToShow&&a+d.options.slidesToScroll>d.slideCount&&d.slideCount>d.options.slidesToShow&&(d.slideOffset=d.options.slidesToShow*d.slideWidth-d.slideCount%d.options.slidesToShow*d.slideWidth,e=d.slideCount%d.options.slidesToShow*c),!0===d.options.centerMode&&!0===d.options.infinite?d.slideOffset+=d.slideWidth*Math.floor(d.options.slidesToShow/2)-d.slideWidth:!0===d.options.centerMode&&(d.slideOffset+=d.slideWidth*Math.floor(d.options.slidesToShow/2)),!1===d.options.vertical?-1*a*d.slideWidth+d.slideOffset:-1*a*c+e},b.prototype.init=function(){var b=this;a(b.$slider).hasClass("slick-initialized")||(a(b.$slider).addClass("slick-initialized"),b.buildOut(),b.setProps(),b.startLoad(),b.loadSlider(),b.initializeEvents(),b.checkResponsive()),null!==b.options.onInit&&b.options.onInit.call(this,b)},b.prototype.initArrowEvents=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;!0===b.options.dots&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),!0===b.options.dots&&!0===b.options.pauseOnDotsHover&&!0===b.options.autoplay&&a("li",b.$dots).on("mouseenter.slick",b.autoPlayClear).on("mouseleave.slick",b.autoPlay)},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),!0===b.options.pauseOnHover&&!0===b.options.autoplay&&(b.$list.on("mouseenter.slick",b.autoPlayClear),b.$list.on("mouseleave.slick",b.autoPlay)),!0===b.options.accessibility&&b.$list.on("keydown.slick",b.keyHandler),!0===b.options.focusOnSelect&&a(b.options.slide,b.$slideTrack).on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,function(){b.checkResponsive(),b.setPosition()}),a(window).on("resize.slick.slick-"+b.instanceUid,function(){a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.setPosition()},50))}),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),!0===a.options.dots&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),!0===a.options.autoplay&&a.autoPlay()},b.prototype.keyHandler=function(a){var b=this;37===a.keyCode?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&b.changeSlide({data:{message:"next"}})},b.prototype.lazyLoad=function(){function b(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy")+"?"+(new Date).getTime();b.load(function(){b.animate({opacity:1},200)}).css({opacity:0}).attr("src",c).removeAttr("data-lazy").removeClass("slick-loading")})}var e,f,g=this;!0===g.options.centerMode?!0===g.options.infinite?f=(e=g.currentSlide+(g.options.slidesToShow/2+1))+g.options.slidesToShow+2:(e=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),f=g.options.slidesToShow/2+1+2+g.currentSlide):(f=(e=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide)+g.options.slidesToShow,!0===g.options.fade&&(e>0&&e--,f<=g.slideCount&&f++)),b(g.$slider.find(".slick-slide").slice(e,f)),g.slideCount<=g.options.slidesToShow?b(g.$slider.find(".slick-slide")):g.currentSlide>=g.slideCount-g.options.slidesToShow?b(g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow)):0===g.currentSlide&&b(g.$slider.find(".slick-cloned").slice(-1*g.options.slidesToShow))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.postSlide=function(a){var b=this;null!==b.options.onAfterChange&&b.options.onAfterChange.call(this,b,a),b.animating=!1,b.setPosition(),b.swipeLeft=null,!0===b.options.autoplay&&!1===b.paused&&b.autoPlay()},b.prototype.progressiveLazyLoad=function(){var c,d=this;a("img[data-lazy]").length>0&&(c=a("img[data-lazy]",d.$slider).first()).attr("src",c.attr("data-lazy")).removeClass("slick-loading").load(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad()}).error(function(){c.removeAttr("data-lazy"),d.progressiveLazyLoad()})},
b.prototype.refresh=function(){var a=this,b=a.currentSlide,c=a.slideCount,d=a.options.slidesToShow;a.destroy(),$.extend(a,a.initials),!0!==a.options.infinite&&b>c-d&&(b=c-d),a.currentSlide=b,a.init(),a.updateArrows()},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),!0===b.options.focusOnSelect&&a(b.options.slide,b.$slideTrack).on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),null!==b.options.onReInit&&b.options.onReInit.call(this,b)},b.prototype.removeSlide=function(a,b){var c=this;return"boolean"==typeof a?a=!0===(b=a)?0:c.slideCount-1:a=!0===b?--a:a,!(c.slideCount<1||0>a||a>c.slideCount-1)&&(c.unload(),c.$slideTrack.children(this.options.slide).eq(a).remove(),c.$slides=c.$slideTrack.children(this.options.slide),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.append(c.$slides),c.$slidesCache=c.$slides,void c.reinit())},b.prototype.setCSS=function(a){var b,c,d=this,e={};!0===d.options.rtl&&(a=-a),b="left"==d.positionProp?a+"px":"0px",c="top"==d.positionProp?a+"px":"0px",e[d.positionProp]=a,!1===d.transformsEnabled?d.$slideTrack.css(e):(e={},!1===d.cssTransitions?(e[d.animType]="translate("+b+", "+c+")",d.$slideTrack.css(e)):(e[d.animType]="translate3d("+b+", "+c+", 0px)",d.$slideTrack.css(e)))},b.prototype.setDimensions=function(){var a=this;!1===a.options.vertical?!0===a.options.centerMode&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),!0===a.options.centerMode&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),!1===a.options.vertical?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var b,c=this;c.$slides.each(function(d,e){b=-1*c.slideWidth*d,a(e).css({position:"relative",left:b,top:0,zIndex:800,opacity:0})}),c.$slides.eq(c.currentSlide).css({zIndex:900,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&!0===a.options.adaptiveHeight&&!1===a.options.vertical){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),!1===a.options.fade?a.setCSS(a.getLeft(a.currentSlide)):a.setFade()},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=!0===a.options.vertical?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&!0===a.options.useCSS&&(a.cssTransitions=!0),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&!1!==a.animType&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=null!==a.animType&&!1!==a.animType},b.prototype.setSlideClasses=function(a){var b,c,d,e,f=this;f.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),c=f.$slider.find(".slick-slide"),!0===f.options.centerMode?(b=Math.floor(f.options.slidesToShow/2),!0===f.options.infinite&&(a>=b&&a<=f.slideCount-1-b?f.$slides.slice(a-b,a+b+1).addClass("slick-active"):(d=f.options.slidesToShow+a,c.slice(d-b+1,d+b+2).addClass("slick-active")),0===a?c.eq(c.length-1-f.options.slidesToShow).addClass("slick-center"):a===f.slideCount-1&&c.eq(f.options.slidesToShow).addClass("slick-center")),f.$slides.eq(a).addClass("slick-center")):a>=0&&a<=f.slideCount-f.options.slidesToShow?f.$slides.slice(a,a+f.options.slidesToShow).addClass("slick-active"):c.length<=f.options.slidesToShow?c.addClass("slick-active"):(e=f.slideCount%f.options.slidesToShow,d=!0===f.options.infinite?f.options.slidesToShow+a:a,f.options.slidesToShow==f.options.slidesToScroll&&f.slideCount-a<f.options.slidesToShow?c.slice(d-(f.options.slidesToShow-e),d+e).addClass("slick-active"):c.slice(d,d+f.options.slidesToShow).addClass("slick-active")),"ondemand"===f.options.lazyLoad&&f.lazyLoad()},b.prototype.setupInfinite=function(){var b,c,d,e=this;if((!0===e.options.fade||!0===e.options.vertical)&&(e.options.centerMode=!1),!0===e.options.infinite&&!1===e.options.fade&&(c=null,e.slideCount>e.options.slidesToShow)){for(d=!0===e.options.centerMode?e.options.slidesToShow+1:e.options.slidesToShow,b=e.slideCount;b>e.slideCount-d;b-=1)c=b-1,a(e.$slides[c]).clone(!0).attr("id","").attr("index",c-e.slideCount).prependTo(e.$slideTrack).addClass("slick-cloned");for(b=0;d>b;b+=1)c=b,a(e.$slides[c]).clone(!0).attr("id","").attr("index",c+e.slideCount).appendTo(e.$slideTrack).addClass("slick-cloned");e.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.selectHandler=function(b){var c=this,d=null!=c.options.asNavFor?a(c.options.asNavFor).getSlick():null,e=parseInt(a(b.target).parents(".slick-slide").attr("index"));if(e||(e=0),!(c.slideCount<=c.options.slidesToShow)&&(c.slideHandler(e),null!=d)){if(d.slideCount<=d.options.slidesToShow)return;d.slideHandler(e)}},b.prototype.slideHandler=function(a){var b,c,d,e,f=null,g=this;return(!0!==g.animating||!0!==g.options.waitForAnimate)&&(b=a,f=g.getLeft(b),d=g.getLeft(g.currentSlide),e=0!=g.slideCount%g.options.slidesToScroll?g.options.slidesToScroll:0,g.currentLeft=null===g.swipeLeft?d:g.swipeLeft,!1===g.options.infinite&&!1===g.options.centerMode&&(0>a||a>g.slideCount-g.options.slidesToShow+e)?(!1===g.options.fade&&(b=g.currentSlide,g.animateSlide(d,function(){g.postSlide(b)})),!1):!1===g.options.infinite&&!0===g.options.centerMode&&(0>a||a>g.slideCount-g.options.slidesToScroll)?(!1===g.options.fade&&(b=g.currentSlide,g.animateSlide(d,function(){g.postSlide(b)})),!1):(!0===g.options.autoplay&&clearInterval(g.autoPlayTimer),c=0>b?0!=g.slideCount%g.options.slidesToScroll?g.slideCount-g.slideCount%g.options.slidesToScroll:g.slideCount-g.options.slidesToScroll:b>g.slideCount-1?0:b,g.animating=!0,null!==g.options.onBeforeChange&&a!==g.currentSlide&&g.options.onBeforeChange.call(this,g,g.currentSlide,c),g.currentSlide=c,g.setSlideClasses(g.currentSlide),g.updateDots(),g.updateArrows(),!0===g.options.fade?(g.fadeSlide(c,function(){g.postSlide(c)}),!1):void g.animateSlide(f,function(){g.postSlide(c)})))},b.prototype.startLoad=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),!0===a.options.dots&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),0>(d=Math.round(180*c/Math.PI))&&(d=360-Math.abs(d)),45>=d&&d>=0?"left":360>=d&&d>=315?"left":d>=135&&225>=d?"right":"vertical"},b.prototype.swipeEnd=function(b){var c=this,d=null!=c.options.asNavFor?a(c.options.asNavFor).getSlick():null;if(c.dragging=!1,void 0===c.touchObject.curX)return!1;if(c.touchObject.swipeLength>=c.touchObject.minSwipe)switch(a(b.target).on("click.slick",function(b){b.stopImmediatePropagation(),b.stopPropagation(),b.preventDefault(),a(b.target).off("click.slick")}),c.swipeDirection()){case"left":c.slideHandler(c.currentSlide+c.options.slidesToScroll),null!=d&&d.slideHandler(d.currentSlide+d.options.slidesToScroll),c.touchObject={};break;case"right":c.slideHandler(c.currentSlide-c.options.slidesToScroll),null!=d&&d.slideHandler(d.currentSlide-d.options.slidesToScroll),c.touchObject={}}else c.touchObject.startX!==c.touchObject.curX&&(c.slideHandler(c.currentSlide),null!=d&&d.slideHandler(d.currentSlide),c.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(!1===b.options.swipe||"ontouchend"in document&&!1===b.options.swipe||!1===b.options.draggable&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var b,d,e,f=this;return e=void 0!==a.originalEvent?a.originalEvent.touches:null,b=f.getLeft(f.currentSlide),!(!f.dragging||e&&1!==e.length)&&(f.touchObject.curX=void 0!==e?e[0].pageX:a.clientX,f.touchObject.curY=void 0!==e?e[0].pageY:a.clientY,f.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(f.touchObject.curX-f.touchObject.startX,2))),"vertical"!==f.swipeDirection()?(void 0!==a.originalEvent&&f.touchObject.swipeLength>4&&a.preventDefault(),d=f.touchObject.curX>f.touchObject.startX?1:-1,f.swipeLeft=!1===f.options.vertical?b+f.touchObject.swipeLength*d:b+f.touchObject.swipeLength*(f.$list.height()/f.listWidth)*d,!0!==f.options.fade&&!1!==f.options.touchMove&&(!0===f.animating?(f.swipeLeft=null,!1):void f.setCSS(f.swipeLeft))):void 0)},b.prototype.swipeStart=function(a){var b,c=this;return 1!==c.touchObject.fingerCount||c.slideCount<=c.options.slidesToShow?(c.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]),c.touchObject.startX=c.touchObject.curX=void 0!==b?b.pageX:a.clientX,c.touchObject.startY=c.touchObject.curY=void 0!==b?b.pageY:a.clientY,void(c.dragging=!0))},b.prototype.unfilterSlides=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&(b.$prevArrow.remove(),b.$nextArrow.remove()),b.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},b.prototype.updateArrows=function(){var a=this;!0===a.options.arrows&&!0!==a.options.infinite&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.removeClass("slick-disabled"),a.$nextArrow.removeClass("slick-disabled"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled"),a.$nextArrow.removeClass("slick-disabled")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&(a.$nextArrow.addClass("slick-disabled"),a.$prevArrow.removeClass("slick-disabled")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active"))},a.fn.slick=function(a){return this.each(function(c,d){d.slick=new b(d,a)})},a.fn.slickAdd=function(a,b,c){return this.each(function(d,e){e.slick.addSlide(a,b,c)})},a.fn.slickCurrentSlide=function(){return this.get(0).slick.getCurrent()},a.fn.slickFilter=function(a){return this.each(function(b,c){c.slick.filterSlides(a)})},a.fn.slickGoTo=function(a){return this.each(function(b,c){c.slick.changeSlide({data:{message:"index",index:a}})})},a.fn.slickNext=function(){return this.each(function(a,b){b.slick.changeSlide({data:{message:"next"}})})},a.fn.slickPause=function(){return this.each(function(a,b){b.slick.autoPlayClear(),b.slick.paused=!0})},a.fn.slickPlay=function(){return this.each(function(a,b){b.slick.paused=!1,b.slick.autoPlay()})},a.fn.slickPrev=function(){return this.each(function(a,b){b.slick.changeSlide({data:{message:"previous"}})})},a.fn.slickRemove=function(a,b){return this.each(function(c,d){d.slick.removeSlide(a,b)})},a.fn.slickGetOption=function(a){return this.get(0).slick.options[a]},a.fn.slickSetOption=function(a,b,c){return this.each(function(d,e){e.slick.options[a]=b,!0===c&&(e.slick.unload(),e.slick.reinit())})},a.fn.slickUnfilter=function(){return this.each(function(a,b){b.slick.unfilterSlides()})},a.fn.unslick=function(){return this.each(function(a,b){b.slick&&b.slick.destroy()})},a.fn.getSlick=function(){var a=null;return this.each(function(b,c){a=c.slick}),a}}),
/*!
 * Master Slider  Responsive Touch Swipe Slider
 * @author Averta (www.averta.net)
 * Copyright  All Rights Reserved, Averta Ltd.
 *
 * @version 1.5.7
 * @date 3/31/2014
 */
window.averta={},function($){function getVendorPrefix(){if("result"in arguments.callee)return arguments.callee.result;var regex=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,someScript=document.getElementsByTagName("script")[0];for(var prop in someScript.style)if(regex.test(prop))return arguments.callee.result=prop.match(regex)[0];return"WebkitOpacity"in someScript.style?arguments.callee.result="Webkit":"KhtmlOpacity"in someScript.style?arguments.callee.result="Khtml":arguments.callee.result=""}function checkStyleValue(prop){var s=(document.body||document.documentElement).style,p=prop;if("string"==typeof s[p])return!0;v=["Moz","Webkit","Khtml","O","ms"],p=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof s[v[i]+p])return!0;return!1}function supportsTransitions(){return checkStyleValue("transition")}function supportsTransforms(){return checkStyleValue("transform")}function supports3DTransforms(){if(!supportsTransforms())return!1;var has3d,el=document.createElement("p"),transforms={WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MSTransform:"-ms-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",Transform:"transform",transform:"transform"};for(var t in document.body.insertBefore(el,null),transforms)el.style[t]!==undefined&&(el.style[t]="translate3d(1px,1px,1px)",has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]));return document.body.removeChild(el),null!=has3d&&has3d.length>0&&"none"!==has3d}window["package"]=function(name){window[name]||(window[name]={})};var extend=function(target,object){for(var key in object)target[key]=object[key]};Function.prototype.extend=function(superclass){"function"==typeof superclass.prototype.constructor?(extend(this.prototype,superclass.prototype),this.prototype.constructor=this):(this.prototype.extend(superclass),this.prototype.constructor=this)};var trans={Moz:"-moz-",Webkit:"-webkit-",Khtml:"-khtml-",O:"-o-",ms:"-ms-",Icab:"-icab-"};$(document).ready(function(){window._jcsspfx=getVendorPrefix(),window._csspfx=trans[window._jcsspfx],window._cssanim=supportsTransitions(),window._css3d=supports3DTransforms(),window._css2d=supportsTransforms(),window._mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),window._touch="ontouchstart"in document}),window.parseQueryString=function(url){var queryString={};return url.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function($0,$1,$2,$3){queryString[$1]=$3}),queryString};var fps60=50/3;(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,fps60)}),window.getComputedStyle||(window.getComputedStyle=function(el){return this.el=el,this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;return"float"==prop&&(prop="styleFloat"),re.test(prop)&&(prop=prop.replace(re,function(){return arguments[2].toUpperCase()})),el.currentStyle[prop]?el.currentStyle[prop]:null},el.currentStyle}),Array.prototype.indexOf||(Array.prototype.indexOf=function(elt){var len=this.length>>>0,from=Number(arguments[1])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in this&&this[from]===elt)return from;return-1}),jQuery)&&($.jqLoadFix=function(){if(this.complete){var that=this;setTimeout(function(){$(that).load()},1)}},jQuery.uaMatch=jQuery.uaMatch||function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),!!navigator.userAgent.match(/Trident\/7\./)&&(browser.msie="true",delete browser.mozilla),jQuery.browser=browser,$.fn.preloadImg=function(src,_event){return this.each(function(){var $this=$(this),self=this,img=new Image;img.onload=function(event){null==event&&(event={}),$this.attr("src",src),event.width=img.width,event.height=img.height,setTimeout(function(){_event.call(self,event)},50),img=null},img.src=src}),this})}(jQuery),function(){"use strict";averta.EventDispatcher=function(){this.listeners={}},averta.EventDispatcher.extend=function(_proto){var instance=new averta.EventDispatcher;for(var key in instance)"constructor"!=key&&(_proto[key]=averta.EventDispatcher.prototype[key])},averta.EventDispatcher.prototype={constructor:averta.EventDispatcher,addEventListener:function(event,listener,ref){this.listeners[event]||(this.listeners[event]=[]),this.listeners[event].push({listener:listener,ref:ref})},removeEventListener:function(event,listener,ref){if(this.listeners[event]){for(var i=0,l=this.listeners[event].length;i<l;++i)listener==this.listeners[event][i].listener&&ref==this.listeners[event][i].ref&&this.listeners[event].splice(i);0==this.listeners[event].length&&delete this.listeners[event]}},dispatchEvent:function(event){if(event.target=this,this.listeners[event.type])for(var i=0,l=this.listeners[event.type].length;i<l;++i)this.listeners[event.type][i].listener.call(this.listeners[event.type][i].ref,event)}}}(),function($){"use strict";var isTouch="ontouchstart"in document,msPoiner=!1,ev_start=msPoiner?"MSPointerDown":isTouch?"touchstart":"mousedown",ev_move=msPoiner?"MSPointerMove":isTouch?"touchmove":"mousemove",ev_end=msPoiner?"MSPointerUp":isTouch?"touchend":"mouseup",ev_cancel=msPoiner?"MSPointerUp":"touchcancel";averta.TouchSwipe=function($element){this.$element=$element,this.enabled=!0,$element.bind(ev_start,{target:this},this.__touchStart),$element[0].swipe=this,this.onSwipe=null,this.swipeType="horizontal",this.lastStatus={}};var p=averta.TouchSwipe.prototype;p.getDirection=function(new_x,new_y){switch(this.swipeType){case"horizontal":return new_x<=this.start_x?"left":"right";case"vertical":return new_y<=this.start_y?"up":"down";case"all":return Math.abs(new_x-this.start_x)>Math.abs(new_y-this.start_y)?new_x<=this.start_x?"left":"right":new_y<=this.start_y?"up":"down"}},p.priventDefultEvent=function(new_x,new_y){var horiz=Math.abs(new_x-this.start_x)>Math.abs(new_y-this.start_y);return"horizontal"===this.swipeType&&horiz||"vertical"===this.swipeType&&!horiz},p.createStatusObject=function(evt){var temp_x,temp_y,status_data={};return temp_x=this.lastStatus.distanceX||0,temp_y=this.lastStatus.distanceY||0,status_data.distanceX=evt.pageX-this.start_x,status_data.distanceY=evt.pageY-this.start_y,status_data.moveX=status_data.distanceX-temp_x,status_data.moveY=status_data.distanceY-temp_y,status_data.distance=parseInt(Math.sqrt(Math.pow(status_data.distanceX,2)+Math.pow(status_data.distanceY,2))),status_data.duration=(new Date).getTime()-this.start_time,status_data.direction=this.getDirection(evt.pageX,evt.pageY),status_data},p.__reset=function(event,jqevt){this.reset=!1,this.lastStatus={},this.start_time=(new Date).getTime(),this.start_x=isTouch?event.touches[0].pageX:jqevt.pageX,this.start_y=isTouch?event.touches[0].pageY:jqevt.pageY},p.__touchStart=function(event){var swipe=event.data.target,jqevt=event;if(swipe.enabled)if(event=event.originalEvent,swipe.onSwipe){if(!swipe.touchStarted){swipe.start_x=isTouch?event.touches[0].pageX:jqevt.pageX,swipe.start_y=isTouch?event.touches[0].pageY:jqevt.pageY,swipe.start_time=(new Date).getTime(),$(document).bind(ev_end,{target:swipe},swipe.__touchEnd).bind(ev_move,{target:swipe},swipe.__touchMove).bind(ev_cancel,{target:swipe},swipe.__touchCancel);var evt=isTouch?event.touches[0]:jqevt,status=swipe.createStatusObject(evt);status.phase="start",swipe.onSwipe.call(null,status),isTouch||jqevt.preventDefault(),swipe.lastStatus=status,swipe.touchStarted=!0}}else $.error("Swipe listener is undefined")},p.__touchMove=function(event){var swipe=event.data.target,jqevt=event;if(event=event.originalEvent,swipe.touchStarted){clearTimeout(swipe.timo),swipe.timo=setTimeout(function(){swipe.__reset(event,jqevt)},60);var evt=isTouch?event.touches[0]:jqevt,status=swipe.createStatusObject(evt);swipe.priventDefultEvent(evt.pageX,evt.pageY)&&jqevt.preventDefault(),status.phase="move",swipe.lastStatus=status,swipe.onSwipe.call(null,status)}},p.__touchEnd=function(event){var swipe=event.data.target,jqevt=event;event=event.originalEvent,clearTimeout(swipe.timo);isTouch&&event.touches[0];var status=swipe.lastStatus;isTouch||jqevt.preventDefault(),status.phase="end",swipe.touchStarted=!1,swipe.priventEvt=null,$(document).unbind(ev_end,swipe.__touchEnd).unbind(ev_move,swipe.__touchMove).unbind(ev_cancel,swipe.__touchCancel),status.speed=status.distance/status.duration,swipe.onSwipe.call(null,status)},p.__touchCancel=function(event){event.data.target.__touchEnd(event)},p.enable=function(){this.enabled||(this.enabled=!0)},p.disable=function(){this.enabled&&(this.enabled=!1)}}(jQuery),function(){"use strict";averta.Ticker=function(){};var st=averta.Ticker,list=[],__stopped=!0;st.add=function(listener,ref){return list.push([listener,ref]),1===list.length&&st.start(),list.length},st.remove=function(listener,ref){for(var i=0,l=list.length;i<l;++i)list[i]&&list[i][0]===listener&&list[i][1]===ref&&list.splice(i,1)},st.start=function(){__stopped&&(__stopped=!1,__tick())},st.stop=function(){__stopped=!0};var __tick=function(){if(!st.__stopped){for(var i=0;i<list.length;++i)list[i][0].call(list[i][1]);requestAnimationFrame(__tick)}}}(),function(){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()}),averta.Timer=function(delay,autoStart){this.delay=delay,this.currentCount=0,this.paused=!1,this.onTimer=null,this.refrence=null,autoStart&&this.start()},averta.Timer.prototype={constructor:averta.Timer,start:function(){this.paused=!1,this.lastTime=Date.now(),averta.Ticker.add(this.update,this)},stop:function(){this.paused=!0,averta.Ticker.remove(this.update,this)},reset:function(){this.currentCount=0,this.paused=!0,this.lastTime=Date.now()},update:function(){this.paused||Date.now()-this.lastTime<this.delay||(this.currentCount++,this.lastTime=Date.now(),this.onTimer&&this.onTimer.call(this.refrence,this.getTime()))},getTime:function(){return this.delay*this.currentCount}}}(),function(){"use strict";var evt=null;window.CSSTween=function(element,duration,delay,ease){this.$element=element,this.duration=duration||1e3,this.delay=delay||0,this.ease=ease||"linear",evt||(evt="O"===window._jcsspfx?"otransitionend":"Webkit"==window._jcsspfx?"webkitTransitionEnd":"transitionend")};var p=CSSTween.prototype;p.to=function(callback,target){return this.to_cb=callback,this.to_cb_target=target,this},p.from=function(callback,target){return this.fr_cb=callback,this.fr_cb_target=target,this},p.onComplete=function(callback,target){return this.oc_fb=callback,this.oc_fb_target=target,this},p.chain=function(csstween){return this.chained_tween=csstween,this},p.reset=function(){clearTimeout(this.start_to),clearTimeout(this.end_to)},p.start=function(){clearTimeout(this.start_to),clearTimeout(this.end_to),this.fresh=!0,this.fr_cb&&(this.$element.css(window._jcsspfx+"TransitionDuration","0ms"),this.fr_cb.call(this.fr_cb_target));var that=this;return this.onTransComplete=function(){that.fresh&&(that.reset(),this.$element.css(window._jcsspfx+"TransitionDuration","").css(window._jcsspfx+"TransitionProperty","").css(window._jcsspfx+"TransitionTimingFunction","").css(window._jcsspfx+"TransitionDelay",""),that.fresh=!1,that.chained_tween&&that.chained_tween.start(),that.oc_fb&&that.oc_fb.call(that.oc_fb_target))},this.start_to=setTimeout(function(){that.$element.css(window._jcsspfx+"TransitionDuration",that.duration+"ms").css(window._jcsspfx+"TransitionProperty","all"),that.delay>0?that.$element.css(window._jcsspfx+"TransitionDelay",that.delay+"ms"):that.$element.css(window._jcsspfx+"TransitionDelay",""),"linear"!=that.ease&&that.$element.css(window._jcsspfx+"TransitionTimingFunction",that.ease),that.to_cb&&that.to_cb.call(that.to_cb_target),that.end_to=setTimeout(function(){that.onTransComplete()},that.duration+(that.delay||0))},100),this}}(),function(){"use strict";function transPos(element,properties){if(properties.x!==undefined||properties.y!==undefined)if(_cssanim){var trans=window._jcsspfx+"Transform";properties.x!==undefined&&(properties[trans]=(properties[trans]||"")+" translateX("+properties.x+"px)",delete properties.x),properties.y!==undefined&&(properties[trans]=(properties[trans]||"")+" translateY("+properties.y+"px)",delete properties.y)}else{if(properties.x!==undefined)properties["auto"!==element.css("right")?"right":"left"]=properties.x+"px",delete properties.x;if(properties.y!==undefined)properties["auto"!==element.css("bottom")?"bottom":"top"]=properties.y+"px",delete properties.y}return properties}var _cssanim=null;window.CTween={},CTween.setPos=function(element,pos){element.css(transPos(element,pos))},CTween.animate=function(element,duration,properties,options){if(null==_cssanim&&(_cssanim=window._cssanim),options=options||{},transPos(element,properties),_cssanim){var tween=new CSSTween(element,duration,options.delay,EaseDic[options.ease]);return tween.to(function(){element.css(properties)}),options.complete&&tween.onComplete(options.complete,options.target),tween.start(),tween.stop=tween.reset,tween}var onCl;return options.delay&&element.delay(options.delay),options.complete&&(onCl=function(){options.complete.call(options.target)}),element.stop(!0).animate(properties,duration,options.ease||"linear",onCl),element},CTween.fadeOut=function(target,duration,remove){var options={};remove&&(options.complete=function(){target.remove()}),CTween.animate(target,duration||1e3,{opacity:0},options)},CTween.fadeIn=function(target,duration){target.css("opacity",0),CTween.animate(target,duration||1e3,{opacity:1})}}(),window.EaseDic={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInCubic:"cubic-bezier(.55,.055,.675,.19)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},function(){"use strict";window.MSAligner=function(type,$container,$img){this.$container=$container,this.$img=$img,this.type=type||"stretch",this.widthOnly=!1,this.heightOnly=!1};var p=MSAligner.prototype;p.init=function(w,h){switch(this.baseWidth=w,this.baseHeight=h,this.imgRatio=w/h,this.imgRatio2=h/w,this.type){case"tile":this.$container.css("background-image","url("+this.$img.attr("src")+")"),this.$img.remove();break;case"center":this.$container.css("background-image","url("+this.$img.attr("src")+")"),this.$container.css({backgroundPosition:"center center",backgroundRepeat:"no-repeat"}),this.$img.remove();break;case"stretch":this.$img.css({width:"100%",height:"100%"});break;case"fill":case"fit":this.needAlign=!0,this.align()}},p.align=function(){if(this.needAlign){var cont_w=this.$container.width(),cont_h=this.$container.height(),contRatio=cont_w/cont_h;"fill"==this.type?this.imgRatio<contRatio?(this.$img.width(cont_w),this.$img.height(cont_w*this.imgRatio2)):(this.$img.height(cont_h),this.$img.width(cont_h*this.imgRatio)):"fit"==this.type&&(this.imgRatio<contRatio?(this.$img.height(cont_h),this.$img.width(cont_h*this.imgRatio)):(this.$img.width(cont_w),this.$img.height(cont_w*this.imgRatio2))),this.setMargin()}},p.setMargin=function(){var cont_w=this.$container.width(),cont_h=this.$container.height();this.$img.css("margin-top",(cont_h-this.$img[0].offsetHeight)/2+"px"),this.$img.css("margin-left",(cont_w-this.$img[0].offsetWidth)/2+"px")}}(),function(){"use strict";var _options={bouncing:!0,snapping:!1,snapsize:null,friction:.05,outFriction:.05,outAcceleration:.09,minValidDist:.3,snappingMinSpeed:2,paging:!1,endless:!1,maxSpeed:160},Controller=function(min,max,options){if(null===max||null===min)throw new Error("Max and Min values are required.");for(var key in this.options=options||{},_options)key in this.options||(this.options[key]=_options[key]);this._max_value=max,this._min_value=min,this.value=min,this.end_loc=min,this.current_snap=this.getSnapNum(min),this.__extrStep=0,this.__extraMove=0,this.__animID=-1},p=Controller.prototype;p.changeTo=function(value,animate,speed,snap_num,dispatch){if(this.stopped=!1,this._internalStop(),value=this._checkLimits(value),speed=Math.abs(speed||0),this.options.snapping&&(snap_num=snap_num||this.getSnapNum(value),!1!==dispatch&&this._callsnapChange(snap_num),this.current_snap=snap_num),animate){this.animating=!0;var timeconst,self=this,active_id=++self.__animID,amplitude=value-self.value,timeStep=0,targetPosition=value,animFrict=1-self.options.friction,tick=function(){if(active_id===self.__animID){var dis=value-self.value;if(!(Math.abs(dis)>self.options.minValidDist&&self.animating))return self.animating&&(self.value=value,self._callrenderer()),self.animating=!1,active_id!==self.__animID&&(self.__animID=-1),void self._callonComplete("anim");window.requestAnimationFrame(tick),timeconst=animFrict+(speed-20)*animFrict*1.3/self.options.maxSpeed,self.value=targetPosition-amplitude*Math.exp(-++timeStep*timeconst),self._callrenderer()}};tick()}else this.value=value,this._callrenderer()},p.drag=function(move){this.start_drag&&(this.drag_start_loc=this.value,this.start_drag=!1),this.animating=!1,this._deceleration=!1,this.value-=move,!this.options.endless&&(this.value>this._max_value||this.value<0)?this.options.bouncing?(this.__isout=!0,this.value+=.6*move):this.value>this._max_value?this.value=this._max_value:this.value=0:!this.options.endless&&this.options.bouncing&&(this.__isout=!1),this._callrenderer()},p.push=function(speed){if(this.stopped=!1,this.options.snapping&&Math.abs(speed)<=this.options.snappingMinSpeed)this.cancel();else{if(this.__speed=speed,this.__startSpeed=speed,this.end_loc=this._calculateEnd(),this.options.snapping){var snap_loc=this.getSnapNum(this.value),end_snap=this.getSnapNum(this.end_loc);if(this.options.paging)return snap_loc=this.getSnapNum(this.drag_start_loc),this.__isout=!1,void(speed>0?this.gotoSnap(snap_loc+1,!0,speed):this.gotoSnap(snap_loc-1,!0,speed));if(snap_loc===end_snap)return void this.cancel();this._callsnapChange(end_snap),this.current_snap=end_snap}this.animating=!1,this.__needsSnap=this.options.endless||this.end_loc>this._min_value&&this.end_loc<this._max_value,this.options.snapping&&this.__needsSnap&&(this.__extraMove=this._calculateExtraMove(this.end_loc)),this._startDecelaration()}},p.bounce=function(speed){this.animating||(this.stopped=!1,this.animating=!1,this.__speed=speed,this.__startSpeed=speed,this.end_loc=this._calculateEnd(),this._startDecelaration())},p.stop=function(){this.stopped=!0,this._internalStop()},p.cancel=function(){this.start_drag=!0,this.__isout?(this.__speed=4e-4,this._startDecelaration()):this.options.snapping&&this.gotoSnap(this.getSnapNum(this.value),!0)},p.renderCallback=function(listener,ref){this.__renderHook={fun:listener,ref:ref}},p.snappingCallback=function(listener,ref){this.__snapHook={fun:listener,ref:ref}},p.snapCompleteCallback=function(listener,ref){this.__compHook={fun:listener,ref:ref}},p.getSnapNum=function(value){return Math.floor((value+this.options.snapsize/2)/this.options.snapsize)},p.nextSnap=function(){this._internalStop();var curr_snap=this.getSnapNum(this.value);!this.options.endless&&(curr_snap+1)*this.options.snapsize>this._max_value?(this.__speed=8,this.__needsSnap=!1,this._startDecelaration()):this.gotoSnap(curr_snap+1,!0)},p.prevSnap=function(){this._internalStop();var curr_snap=this.getSnapNum(this.value);!this.options.endless&&(curr_snap-1)*this.options.snapsize<this._min_value?(this.__speed=-8,this.__needsSnap=!1,this._startDecelaration()):this.gotoSnap(curr_snap-1,!0)},p.gotoSnap=function(snap_num,animate,speed){this.changeTo(snap_num*this.options.snapsize,animate,speed,snap_num)},p.destroy=function(){this._internalStop(),this.__renderHook=null,this.__snapHook=null,this.__compHook=null},p._internalStop=function(){this.start_drag=!0,this.animating=!1,this._deceleration=!1,this.__extrStep=0},p._calculateExtraMove=function(value){var m=value%this.options.snapsize;return m<this.options.snapsize/2?-m:this.options.snapsize-m},p._calculateEnd=function(step){for(var temp_speed=this.__speed,temp_value=this.value,i=0;Math.abs(temp_speed)>this.options.minValidDist;)temp_value+=temp_speed,temp_speed*=this.options.friction,i++;return step?i:temp_value},p._checkLimits=function(value){return this.options.endless?value:value<this._min_value?this._min_value:value>this._max_value?this._max_value:value},p._callrenderer=function(){this.__renderHook&&this.__renderHook.fun.call(this.__renderHook.ref,this,this.value)},p._callsnapChange=function(targetSnap){this.__snapHook&&targetSnap!==this.current_snap&&this.__snapHook.fun.call(this.__snapHook.ref,this,targetSnap,targetSnap-this.current_snap)},p._callonComplete=function(type){this.__compHook&&!this.stopped&&this.__compHook.fun.call(this.__compHook.ref,this,this.current_snap,type)},p._computeDeceleration=function(){if(this.options.snapping&&this.__needsSnap){var xtr_move=(this.__startSpeed-this.__speed)/this.__startSpeed*this.__extraMove;this.value+=this.__speed+xtr_move-this.__extrStep,this.__extrStep=xtr_move}else this.value+=this.__speed;if(this.__speed*=this.options.friction,this.options.endless||this.options.bouncing||(this.value<=this._min_value?(this.value=this._min_value,this.__speed=0):this.value>=this._max_value&&(this.value=this._max_value,this.__speed=0)),this._callrenderer(),!this.options.endless&&this.options.bouncing){var out_value=0;this.value<this._min_value?out_value=this._min_value-this.value:this.value>this._max_value&&(out_value=this._max_value-this.value),this.__isout=Math.abs(out_value)>=this.options.minValidDist,this.__isout&&(this.__speed*out_value<=0?this.__speed+=out_value*this.options.outFriction:this.__speed=out_value*this.options.outAcceleration)}},p._startDecelaration=function(){if(!this._deceleration){this._deceleration=!0;var self=this,tick=function(){self._deceleration&&(self._computeDeceleration(),Math.abs(self.__speed)>self.options.minValidDist||self.__isout?window.requestAnimationFrame(tick):(self._deceleration=!1,self.__isout=!1,this.__needsSnap&&self.options.snapping&&!self.options.paging?self.value=self._checkLimits(self.end_loc+self.__extraMove):self.value=Math.round(self.value),self._callrenderer(),self._callonComplete("decel")))};tick()}},window.Controller=Controller}(),function($){window.MSLayerEffects={};var installed,_fade={opacity:0};MSLayerEffects.setup=function(){if(!installed){installed=!0;var st=MSLayerEffects,transform_css=window._jcsspfx+"Transform",transform_orig_css=window._jcsspfx+"TransformOrigin",o=$.browser.opera;_2d=window._css2d&&window._cssanim&&!o,st.defaultValues={left:0,top:0,opacity:1,right:0,bottom:0},st.defaultValues[transform_css]="",st.rf=1,st.presetEffParams={random:"30|300",long:300,short:30,"false":!1,"true":!0,tl:"top left",bl:"bottom left",tr:"top right",br:"bottom right",rt:"top right",lb:"bottom left",lt:"top left",rb:"bottom right",t:"top",b:"bottom",r:"right",l:"left",c:"center"},st.fade=function(){return _fade},st.left=_2d?function(dist,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="translateX("+-dist*st.rf+"px)",r}:function(dist,fade){var r=!1===fade?{}:{opacity:0};return r.left=-dist*st.rf+"px",r},st.right=_2d?function(dist,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="translateX("+dist*st.rf+"px)",r}:function(dist,fade){var r=!1===fade?{}:{opacity:0};return r.left=dist*st.rf+"px",r},st.top=_2d?function(dist,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="translateY("+-dist*st.rf+"px)",r}:function(dist,fade){var r=!1===fade?{}:{opacity:0};return r.top=-dist*st.rf+"px",r},st.bottom=_2d?function(dist,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="translateY("+dist*st.rf+"px)",r}:function(dist,fade){var r=!1===fade?{}:{opacity:0};return r.top=dist*st.rf+"px",r},st.from=_2d?function(leftdis,topdis,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="translateX("+leftdis*st.rf+"px) translateY("+topdis*st.rf+"px)",r}:function(leftdis,topdis,fade){var r=!1===fade?{}:{opacity:0};return r.top=topdis*st.rf+"px",r.left=leftdis*st.rf+"px",r},st.rotate=_2d?function(deg,orig){var r={opacity:0};return r[transform_css]=" rotate("+deg+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(){return _fade},st.rotateleft=_2d?function(deg,dist,orig,fade){var r=st.left(dist,fade);return r[transform_css]+=" rotate("+deg+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(deg,dist,orig,fade){return st.left(dist,fade)},st.rotateright=_2d?function(deg,dist,orig,fade){var r=st.right(dist,fade);return r[transform_css]+=" rotate("+deg+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(deg,dist,orig,fade){return st.right(dist,fade)},st.rotatetop=_2d?function(deg,dist,orig,fade){var r=st.top(dist,fade);return r[transform_css]+=" rotate("+deg+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(deg,dist,orig,fade){return st.top(dist,fade)},st.rotatebottom=_2d?function(deg,dist,orig,fade){var r=st.bottom(dist,fade);return r[transform_css]+=" rotate("+deg+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(deg,dist,orig,fade){return st.bottom(dist,fade)},st.rotatefrom=_2d?function(deg,leftdis,topdis,orig,fade){var r=st.from(leftdis,topdis,fade);return r[transform_css]+=" rotate("+deg+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(deg,leftdis,topdis,orig,fade){return st.from(leftdis,topdis,fade)},st.skewleft=_2d?function(deg,dist,fade){var r=st.left(dist,fade);return r[transform_css]+=" skewX("+deg+"deg)",r}:function(deg,dist,fade){return st.left(dist,fade)},st.skewright=_2d?function(deg,dist,fade){var r=st.right(dist,fade);return r[transform_css]+=" skewX("+-deg+"deg)",r}:function(deg,dist,fade){return st.right(dist,fade)},st.skewtop=_2d?function(deg,dist,fade){var r=st.top(dist,fade);return r[transform_css]+=" skewY("+deg+"deg)",r}:function(deg,dist,fade){return st.top(dist,fade)},st.skewbottom=_2d?function(deg,dist,fade){var r=st.bottom(dist,fade);return r[transform_css]+=" skewY("+-deg+"deg)",r}:function(deg,dist,fade){return st.bottom(dist,fade)},st.scale=_2d?function(x,y,orig,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]=" scaleX("+x+") scaleY("+y+")",orig&&(r[transform_orig_css]=orig),r}:function(x,y,orig,fade){return!1===fade?{}:{opacity:0}},st.scaleleft=_2d?function(x,y,dist,orig,fade){var r=st.left(dist,fade);return r[transform_css]=" scaleX("+x+") scaleY("+y+")",orig&&(r[transform_orig_css]=orig),r}:function(x,y,dist,orig,fade){return st.left(dist,fade)},st.scaleright=_2d?function(x,y,dist,orig,fade){var r=st.right(dist,fade);return r[transform_css]=" scaleX("+x+") scaleY("+y+")",orig&&(r[transform_orig_css]=orig),r}:function(x,y,dist,orig,fade){return st.right(dist,fade)},st.scaletop=_2d?function(x,y,dist,orig,fade){var r=st.top(dist,fade);return r[transform_css]=" scaleX("+x+") scaleY("+y+")",orig&&(r[transform_orig_css]=orig),r}:function(x,y,dist,orig,fade){return st.top(dist,fade)},st.scalebottom=_2d?function(x,y,dist,orig,fade){var r=st.bottom(dist,fade);return r[transform_css]=" scaleX("+x+") scaleY("+y+")",orig&&(r[transform_orig_css]=orig),r}:function(x,y,dist,orig,fade){return st.bottom(dist,fade)},st.scalefrom=_2d?function(x,y,leftdis,topdis,orig,fade){var r=st.from(leftdis,topdis,fade);return r[transform_css]+=" scaleX("+x+") scaleY("+y+")",orig&&(r[transform_orig_css]=orig),r}:function(x,y,leftdis,topdis,orig,fade){return st.from(leftdis,topdis,fade)},st.rotatescale=_2d?function(deg,x,y,orig,fade){var r=st.scale(x,y,orig,fade);return r[transform_css]+=" rotate("+deg+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(deg,x,y,orig,fade){return st.scale(x,y,orig,fade)},st.front=window._css3d?function(dist,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="perspective(2000px) translate3d(0 , 0 ,"+dist+"px ) rotate(0.001deg)",r}:function(){return _fade},st.back=window._css3d?function(dist,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="perspective(2000px) translate3d(0 , 0 ,"+-dist+"px ) rotate(0.001deg)",r}:function(){return _fade},st.rotatefront=window._css3d?function(deg,dist,orig,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="perspective(2000px) translate3d(0 , 0 ,"+dist+"px ) rotate("+(deg||.001)+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(){return _fade},st.rotateback=window._css3d?function(deg,dist,orig,fade){var r=!1===fade?{}:{opacity:0};return r[transform_css]="perspective(2000px) translate3d(0 , 0 ,"+-dist+"px ) rotate("+(deg||.001)+"deg)",orig&&(r[transform_orig_css]=orig),r}:function(){return _fade},st.rotate3dleft=window._css3d?function(x,y,z,dist,orig,fade){var r=st.left(dist,fade);return r[transform_css]+=(x?" rotateX("+x+"deg)":" ")+(y?" rotateY("+y+"deg)":"")+(z?" rotateZ("+z+"deg)":""),orig&&(r[transform_orig_css]=orig),r}:function(x,y,z,dist,orig,fade){return st.left(dist,fade)},st.rotate3dright=window._css3d?function(x,y,z,dist,orig,fade){var r=st.right(dist,fade);return r[transform_css]+=(x?" rotateX("+x+"deg)":" ")+(y?" rotateY("+y+"deg)":"")+(z?" rotateZ("+z+"deg)":""),orig&&(r[transform_orig_css]=orig),r}:function(x,y,z,dist,orig,fade){return st.right(dist,fade)},st.rotate3dtop=window._css3d?function(x,y,z,dist,orig,fade){var r=st.top(dist,fade);return r[transform_css]+=(x?" rotateX("+x+"deg)":" ")+(y?" rotateY("+y+"deg)":"")+(z?" rotateZ("+z+"deg)":""),orig&&(r[transform_orig_css]=orig),r}:function(x,y,z,dist,orig,fade){return st.top(dist,fade)},st.rotate3dbottom=window._css3d?function(x,y,z,dist,orig,fade){var r=st.bottom(dist,fade);return r[transform_css]+=(x?" rotateX("+x+"deg)":" ")+(y?" rotateY("+y+"deg)":"")+(z?" rotateZ("+z+"deg)":""),orig&&(r[transform_orig_css]=orig),r}:function(x,y,z,dist,orig,fade){return st.bottom(dist,fade)},st.rotate3dfront=window._css3d?function(x,y,z,dist,orig,fade){var r=st.front(dist,fade);return r[transform_css]+=(x?" rotateX("+x+"deg)":" ")+(y?" rotateY("+y+"deg)":"")+(z?" rotateZ("+z+"deg)":""),orig&&(r[transform_orig_css]=orig),r}:function(x,y,z,dist,orig,fade){return st.front(dist,fade)},st.rotate3dback=window._css3d?function(x,y,z,dist,orig,fade){var r=st.back(dist,fade);return r[transform_css]+=(x?" rotateX("+x+"deg)":" ")+(y?" rotateY("+y+"deg)":"")+(z?" rotateZ("+z+"deg)":""),orig&&(r[transform_orig_css]=orig),r}:function(x,y,z,dist,orig,fade){return st.back(dist,fade)},st.t=window._css3d?function(fade,tx,ty,tz,r,rx,ry,rz,scx,scy,skx,sky,ox,oy,oz){var _r=!1===fade?{}:{opacity:0},transform="";"n"!==tx&&(transform+="translateX("+tx*st.rf+"px) "),"n"!==ty&&(transform+="translateY("+ty*st.rf+"px) "),"n"!==tz&&(transform+="translateZ("+tz*st.rf+"px) "),"n"!==r&&(transform+="rotate("+r+"deg) "),"n"!==rx&&(transform+="rotateX("+rx+"deg) "),"n"!==ry&&(transform+="rotateY("+ry+"deg) "),"n"!==rz&&(transform+="rotateZ("+rz+"deg) "),"n"!==skx&&(transform+="skewX("+skx+"deg) "),"n"!==sky&&(transform+="skewY("+sky+"deg) "),"n"!==scx&&(transform+="scaleX("+scx+") "),"n"!==scy&&(transform+="scaleY("+scy+")"),_r[transform_css]=transform;var trans_origin="";return trans_origin+="n"!==ox?ox+"% ":"50% ",trans_origin+="n"!==oy?oy+"% ":"50% ",trans_origin+="n"!==oz?oz+"px":"",_r[transform_orig_css]=trans_origin,_r}:function(fade,tx,ty,tz,r){r=!1===fade?{}:{opacity:0};return"n"!==tx&&(r.left+=tx*st.rf+"px"),"n"!==ty&&(r.top+=ty*st.rf+"px"),r}}}}(jQuery),function($){window.MSLayerElement=function(){this.$cont=$("<div></div>").addClass("layer-cont"),this.start_anim={name:"fade",duration:1e3,ease:"linear",delay:0},this.end_anim={duration:1e3,ease:"linear"},this.type="text",this.swipe=!0,this.resizable=!0,
this.minWidth=-1,this.__cssConfig=["margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","left","right","top","bottom","font-size","line-height","width","height"],this.baseStyle={}};var p=MSLayerElement.prototype;p.__playAnimation=function(animation,css){var options={};animation.ease&&(options.ease=animation.ease),this.show_tween=CTween.animate(this.$element,animation.duration,css,options)},p._randomParam=function(value){var min=Number(value.slice(0,value.indexOf("|"))),max=Number(value.slice(value.indexOf("|")+1));return min+Math.random()*(max-min)},p._parseEff=function(eff_name){var eff_params=[];if(-1!==eff_name.indexOf("(")){var value,temp=eff_name.slice(0,eff_name.indexOf("(")).toLowerCase();eff_params=eff_name.slice(eff_name.indexOf("(")+1,-1).replace(/\"|\'|\s/g,"").split(","),eff_name=temp;for(var i=0,l=eff_params.length;i<l;++i)(value=eff_params[i])in MSLayerEffects.presetEffParams&&(value=MSLayerEffects.presetEffParams[value]),eff_params[i]=value}return{eff_name:eff_name,eff_params:eff_params}},p._parseEffParams=function(params){for(var eff_params=[],i=0,l=params.length;i<l;++i){var value=params[i];"string"==typeof value&&-1!==value.indexOf("|")&&(value=this._randomParam(value)),eff_params[i]=value}return eff_params},p._checkPosKey=function(key,style){return"left"===key&&!(key in this.baseStyle)&&"right"in this.baseStyle?(style.right=-parseInt(style.left)+"px",delete style.left,!0):"top"===key&&!(key in this.baseStyle)&&"bottom"in this.baseStyle&&(style.bottom=-parseInt(style.top)+"px",delete style.top,!0)},p.setStartAnim=function(anim){$.extend(this.start_anim,anim),$.extend(this.start_anim,this._parseEff(this.start_anim.name)),this.$element.css("visibility","hidden")},p.setEndAnim=function(anim){$.extend(this.end_anim,anim)},p.create=function(){this.$element.css("display","none"),this.$element.removeAttr("data-delay").removeAttr("data-effect").removeAttr("data-duration").removeAttr("data-type"),this.end_anim.name||(this.end_anim.name=this.start_anim.name),this.end_anim.time&&(this.autoHide=!0),$.extend(this.end_anim,this._parseEff(this.end_anim.name))},p.init=function(){var value;this.initialized=!0,this.$element.css("visibility","");for(var i=0,l=this.__cssConfig.length;i<l;i++){var key=this.__cssConfig[i];"auto"!=(value="text"===this.type&&"width"===key?this.$element[0].style.width:this.$element.css(key))&&""!=value&&"normal"!=value&&(this.baseStyle[key]=parseInt(value))}},p.locate=function(){var layer_cont=this.slide.$layers,width=parseFloat(layer_cont.css("width"));if(this.visible(this.minWidth<width),this.resizable)for(var key in this.factor=width/this.slide.slider.options.width,this.baseStyle)this.$element.css(key,this.baseStyle[key]*this.factor+"px")},p.start=function(){if(!this.isShowing){var key,base;this.isShowing=!0,MSLayerEffects.rf=this.factor;var effect_css=MSLayerEffects[this.start_anim.eff_name].apply(null,this._parseEffParams(this.start_anim.eff_params)),start_css_eff={};for(key in effect_css)this._checkPosKey(key,effect_css)||(null!=MSLayerEffects.defaultValues[key]&&(start_css_eff[key]=MSLayerEffects.defaultValues[key]),key in this.baseStyle&&(base=this.baseStyle[key],effect_css[key]=base+parseFloat(effect_css[key])+"px",start_css_eff[key]=base+"px"),this.$element.css(key,effect_css[key]));var that=this;clearTimeout(this.to),this.to=setTimeout(function(){that.$element.css("display",""),that.__playAnimation(that.start_anim,start_css_eff)},that.start_anim.delay||.01),this.cl_to=setTimeout(function(){that.show_cl=!0},(this.start_anim.delay||.01)+this.start_anim.duration),this.autoHide&&(clearTimeout(this.hto),this.hto=setTimeout(function(){that.hide()},that.end_anim.time))}},p.hide=function(){this.isShowing=!1;var effect_css=MSLayerEffects[this.end_anim.eff_name].apply(null,this._parseEffParams(this.end_anim.eff_params));for(key in effect_css)this._checkPosKey(key,effect_css)||(key===window._jcsspfx+"TransformOrigin"&&this.$element.css(key,effect_css[key]),key in this.baseStyle&&(effect_css[key]=this.baseStyle[key]+parseFloat(effect_css[key])+"px"));this.__playAnimation(this.end_anim,effect_css),clearTimeout(this.to),clearTimeout(this.hto),clearTimeout(this.cl_to)},p.reset=function(){this.isShowing=!1,this.$element[0].style.display="none",this.$element.css("opacity","100"),this.$element[0].style.transitionDuration="0ms",this.show_tween&&this.show_tween.stop(!0),clearTimeout(this.to),clearTimeout(this.hto)},p.destroy=function(){this.reset(),this.$element.remove(),this.$cont.remove()},p.visible=function(value){this.isVisible!=value&&(this.isVisible=value,this.$element.css("display",value?"":"none"))}}(jQuery),function($){window.MSImageLayerElement=function(){MSLayerElement.call(this),this.needPreload=!0,this.__cssConfig=["margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","left","right","top","bottom","width","height"]},MSImageLayerElement.extend(MSLayerElement);var p=MSImageLayerElement.prototype,_super=MSLayerElement.prototype;p.create=function(){if(this.link){var p=this.$element.parent();p.append(this.link),this.link.append(this.$element),this.link.removeClass("ms-layer"),this.$element.addClass("ms-layer"),p=null}if(_super.create.call(this),this.$element.data("src")!=undefined)this.img_src=this.$element.data("src"),this.$element.removeAttr("data-src");else{var that=this;this.$element.on("load",function(){that.slide.preloadCount--,0===that.slide.preloadCount&&that.slide.___onlayersReady()}).each($.jqLoadFix)}$.browser.msie&&this.$element.on("dragstart",function(event){event.preventDefault()})},p.loadImage=function(){var that=this;this.$element.preloadImg(this.img_src,function(){that.slide.preloadCount--,0===that.slide.preloadCount&&that.slide.___onlayersReady()})}}(jQuery),function($){window.MSVideoLayerElement=function(){MSLayerElement.call(this)},MSVideoLayerElement.extend(MSLayerElement);var p=MSVideoLayerElement.prototype,_super=MSLayerElement.prototype;p.__playVideo=function(){this.img&&CTween.fadeOut(this.img,500,!1),CTween.fadeOut(this.video_btn,500,!1),this.video_frame.attr("src","about:blank").css("display","block"),-1==this.video_url.indexOf("?")&&(this.video_url+="?"),this.video_frame.attr("src",this.video_url+"&autoplay=1")},p.reset=function(){_super.reset.call(this),(this.needPreload||this.$element.data("btn"))&&(this.video_btn.css("opacity",1),this.video_frame.attr("src","about:blank").css("display","none")),this.needPreload?this.img.css("opacity",1):this.video_frame.attr("src",this.video_url)},p.create=function(){_super.create.call(this),this.video_frame=this.$element.find("iframe").css({width:"100%",height:"100%"}),this.video_url=this.video_frame.attr("src");var has_img=0!=this.$element.has("img").length;if(has_img||this.$element.data("btn")){this.video_frame.attr("src","about:blank").css("display","none");var that=this;if(this.video_btn=$("<div></div>").appendTo(this.$element).addClass("ms-video-btn").click(function(){that.__playVideo()}),has_img){if(this.needPreload=!0,this.img=this.$element.find("img:first").addClass("ms-video-img"),this.img.data("src")!==undefined)this.img_src=this.img.data("src"),this.img.removeAttr("data-src");else{that=this;this.img.attr("src",this.img_src).on("load",function(){that.slide.preloadCount--,0==that.slide.preloadCount&&that.slide.___onlayersReady()}).each($.jqLoadFix)}$.browser.msie&&this.img.on("dragstart",function(event){event.preventDefault()})}}},p.loadImage=function(){var that=this;this.img.preloadImg(this.img_src,function(){that.slide.preloadCount--,0==that.slide.preloadCount&&that.slide.___onlayersReady()})}}(jQuery),function($){"use strict";window.MSHotspotLayer=function(){MSLayerElement.call(this),this.__cssConfig=["margin-top","padding-top","margin-bottom","padding-left","margin-right","padding-right","margin-left","padding-bottom","left","right","top","bottom"],this.ease="Expo"},MSHotspotLayer.extend(MSLayerElement);var p=MSHotspotLayer.prototype,_super=MSLayerElement.prototype;p._showTT=function(){this.show_cl&&(this.align=this._orgAlign,this._locateTT(),this.hide_start=!1,this._tween&&this._tween.stop(!0),this.tt.css({display:"block"}),this._tween=CTween.animate(this.tt,900,this.to,{ease:"easeOut"+this.ease}))},p._hideTT=function(){if(this.show_cl){this._tween&&this._tween.stop(!0);var that=this;this._tween=CTween.animate(this.tt,900,this.from,{ease:"easeOut"+this.ease,complete:function(){that.tt.css("display","none")}})}},p._updateClassName=function(name){this._lastClass&&this.tt.removeClass(this._lastClass),this.tt.addClass(name),this._lastClass=name},p._alignPolicy=function(){this.tt.outerHeight();var w=Math.max(this.tt.outerWidth(),parseInt(this.tt.css("max-width"))),ww=window.innerWidth;window.innerHeight;switch(this.align){case"top":if(this.base_t<0)return"bottom";break;case"right":if(this.base_l+w>ww||this.base_t<0)return"bottom";break;case"left":if(this.base_l<0||this.base_t<0)return"bottom"}return null},p._locateTT=function(){var os=this.$element.offset(),os2=this.slide.slider.$element.offset(),dist=50,space=15;this.pos_x=os.left-os2.left-this.slide.slider.$element.scrollLeft(),this.pos_y=os.top-os2.top-this.slide.slider.$element.scrollTop(),this.from={opacity:0},this.to={opacity:1},this._updateClassName("ms-tooltip-"+this.align),this.tt_arrow.css("margin-left","");var arrow_w=15,arrow_h=15;switch(this.align){case"top":var w=Math.max(this.tt.outerWidth(),parseInt(this.tt.css("max-width")));this.base_t=this.pos_y-this.tt.outerHeight()-arrow_h-space,this.base_l=this.pos_x-w/2,this.base_l+w>window.innerWidth&&(this.tt_arrow.css("margin-left",-arrow_w/2+this.base_l+w-window.innerWidth+"px"),this.base_l=window.innerWidth-w),this.base_l<0&&(this.base_l=0,this.tt_arrow.css("margin-left",-arrow_w/2+this.pos_x-this.tt.outerWidth()/2+"px")),window._css3d?(this.from[window._jcsspfx+"Transform"]="translateY(-"+dist+"px)",this.to[window._jcsspfx+"Transform"]=""):(this.from.top=this.base_t-dist+"px",this.to.top=this.base_t+"px");break;case"bottom":w=Math.max(this.tt.outerWidth(),parseInt(this.tt.css("max-width")));this.base_t=this.pos_y+arrow_h+space,this.base_l=this.pos_x-w/2,this.base_l+w>window.innerWidth&&(this.tt_arrow.css("margin-left",-arrow_w/2+this.base_l+w-window.innerWidth+"px"),this.base_l=window.innerWidth-w),this.base_l<0&&(this.base_l=0,this.tt_arrow.css("margin-left",-arrow_w/2+this.pos_x-this.tt.outerWidth()/2+"px")),window._css3d?(this.from[window._jcsspfx+"Transform"]="translateY("+dist+"px)",this.to[window._jcsspfx+"Transform"]=""):(this.from.top=this.base_t+dist+"px",this.to.top=this.base_t+"px");break;case"right":this.base_l=this.pos_x+arrow_w+space,this.base_t=this.pos_y-this.tt.outerHeight()/2,window._css3d?(this.from[window._jcsspfx+"Transform"]="translateX("+dist+"px)",this.to[window._jcsspfx+"Transform"]=""):(this.from.left=this.base_l+dist+"px",this.to.left=this.base_l+"px");break;case"left":this.base_l=this.pos_x-arrow_w-this.tt.outerWidth()-space,this.base_t=this.pos_y-this.tt.outerHeight()/2,window._css3d?(this.from[window._jcsspfx+"Transform"]="translateX(-"+dist+"px)",this.to[window._jcsspfx+"Transform"]=""):(this.from.left=this.base_l-dist+"px",this.to.left=this.base_l+"px")}var policyAlign=this._alignPolicy();if(null!==policyAlign)return this.align=policyAlign,void this._locateTT();this.tt.css("top",parseInt(this.base_t)+"px").css("left",parseInt(this.base_l)+"px"),this.tt.css(this.from)},p.start=function(){_super.start.call(this),this.tt.appendTo(this.slide.slider.$element),this.tt.css("display","none")},p.reset=function(){_super.reset.call(this),this.tt.detach()},p.create=function(){var that=this;_super.create.call(this),this._orgAlign=this.align=this.$element.data("align")!==undefined?this.$element.data("align"):"top",this.data=this.$element.html(),this.$element.html("").on("mouseenter",function(){that._showTT()}).on("mouseleave",function(){that._hideTT()}),this.point=$('<div><div class="ms-point-center"></div><div class="ms-point-border"></div></div>').addClass("ms-tooltip-point").appendTo(this.$element);var link=this.$element.data("link"),target=this.$element.data("target");link&&this.point.on("click",function(){window.open(link,target||"_self")}),this.tt=$("<div></div>").addClass("ms-tooltip").css("display","hidden").css("opacity",0),this.tt_arrow=$("<div></div>").addClass("ms-tooltip-arrow").appendTo(this.tt),this._updateClassName("ms-tooltip-"+this.align),this.ttcont=$("<div></div>").addClass("ms-tooltip-cont").html(this.data).appendTo(this.tt)}}(jQuery),window.MSSliderEvent=function(type){this.type=type},MSSliderEvent.CHANGE_START="changeStart",MSSliderEvent.CHANGE_END="changeEnd",MSSliderEvent.WATING="wating",MSSliderEvent.AUTOPLAY_CHANGE="autoplayChange",MSSliderEvent.VIDEO_PLAY="videoPlay",MSSliderEvent.VIDEO_CLOSE="videoClose",MSSliderEvent.INIT="init",MSSliderEvent.RESIZE="resize",MSSliderEvent.RESERVED_SPACE_CHANGE="rsc",function($){"use strict";window.MSSlide=function(){this.$element=null,this.$loading=$("<div></div>").addClass("ms-slide-loading"),this.layers=[],this.view=null,this.index=-1,this.__width=0,this.__height=0,this.preloadCount=0,this.fillMode="fill",this.selected=!1,this.pselected=!1,this.autoAppend=!0,this.moz=$.browser.mozilla};var p=MSSlide.prototype;p.onSwipeStart=function(){this.link&&(this.linkdis=!0),this.video&&(this.videodis=!0)},p.onSwipeCancel=function(){this.link&&(this.linkdis=!1),this.video&&(this.videodis=!1)},p.addLayer=function(layer){this.hasLayers||(this.$layers=$("<div></div>").addClass("ms-slide-layers")),this.hasLayers=!0,this.$layers.append(layer.$element),this.layers.push(layer),layer.slide=this,layer.create(),layer.needPreload&&this.preloadCount++},p.___onlayersReady=function(){this.ready=!0,this.slider.api._startTimer(),this.selected&&(this.showLayers(),this.vinit&&(this.bgvideo.play(),this.autoPauseBgVid||(this.bgvideo.currentTime=0))),this.isSleeping||this.setup(),CTween.fadeOut(this.$loading,300,!0),(0===this.slider.options.preload||"all"===this.slider.options.preload)&&this.index<this.view.slideList.length-1?this.view.slideList[this.index+1].loadImages():"all"===this.slider.options.preload&&this.index===this.view.slideList.length-1&&this.slider._removeLoading()},p.startLayers=function(){for(var i=0,l=this.layers.length;i<l;++i)this.layers[i].start()},p.initLayers=function(force){if(!(this.init&&!force||this.slider.init_safemode)){this.init=!0;for(var i=0,l=this.layers.length;i<l;++i)this.layers[i].init()}},p.locateLayers=function(){for(var i=0,l=this.layers.length;i<l;++i)this.layers[i].locate()},p.resetLayers=function(){this.$layers.css("display","none"),this.$layers.css("opacity",1);for(var i=0,l=this.layers.length;i<l;++i)this.layers[i].reset()},p.hideLayers=function(){if(0===this.preloadCount)for(var i=0,l=this.layers.length;i<l;++i)this.layers[i].hide()},p.showLayers=function(){this.hasLayers&&(this.lht&&(this.lht.reset?this.lht.reset():this.lht.stop("true")),this.resetLayers(),this.$layers.css("opacity",1).css("display",""),0===this.preloadCount&&(this.initLayers(),this.locateLayers(),this.startLayers()))},p.setBG=function(img){this.hasBG=!0;var that=this;this.$imgcont=$("<div></div>").addClass("ms-slide-bgcont"),this.$element.append(this.$loading).append(this.$imgcont),this.$bg_img=$(img).css("visibility","hidden"),this.$imgcont.append(this.$bg_img),this.bgAligner=new MSAligner(that.fillMode,that.$imgcont,that.$bg_img),this.bgAligner.widthOnly=this.slider.options.autoHeight,that.slider.options.autoHeight&&(that.pselected||that.selected)&&that.slider.setHeight(that.slider.options.height),this.$bg_img.data("src")!==undefined?(this.bg_src=this.$bg_img.data("src"),this.$bg_img.removeAttr("data-src")):this.$bg_img.one("load",function(event){that._onBGLoad(event)}).each($.jqLoadFix),this.preloadCount++},p._onBGLoad=function(event){this.bgNatrualWidth=event.width,this.bgNatrualHeight=event.height,this.bgLoaded=!0,$.browser.msie&&this.$bg_img.on("dragstart",function(event){event.preventDefault()}),this.preloadCount--,0===this.preloadCount&&this.___onlayersReady()},p.loadImages=function(){if(!this.ls){if(this.ls=!0,this.hasBG&&this.bg_src){var that=this;this.$bg_img.preloadImg(this.bg_src,function(event){that._onBGLoad(event)})}for(var i=0,l=this.layers.length;i<l;++i)this.layers[i].needPreload&&this.layers[i].loadImage();this.bgvideo&&this.bgvideo.load()}},p.setBGVideo=function($video){if($video[0].play)if(window._mobile)$video.remove();else{this.bgvideo=$video[0];var that=this;$video.addClass("ms-slide-bgvideo"),!1!==$video.data("loop")&&this.bgvideo.addEventListener("ended",function(){that.bgvideo.play()}),!1!==$video.data("mute")&&(this.bgvideo.muted=!0),!0===$video.data("autopause")&&(this.autoPauseBgVid=!0),this.bgvideo_fillmode=$video.data("fill-mode")||"fill","none"!==this.bgvideo_fillmode&&(this.bgVideoAligner=new MSAligner(this.bgvideo_fillmode,this.$element,$video),this.bgvideo.addEventListener("loadedmetadata",function(){that.vinit||(that.vinit=!0,that.video_aspect=that.bgVideoAligner.baseHeight/that.bgVideoAligner.baseWidth,that.bgVideoAligner.init(that.bgvideo.videoWidth,that.bgvideo.videoHeight),that._alignBGVideo(),CTween.fadeIn($(that.bgvideo),200),that.selected&&that.bgvideo.play())})),$video.css("opacity",0),this.$bgvideocont=$("<div></div>").addClass("ms-slide-bgvideocont").append($video),this.hasBG?this.$imgcont.before(this.$bgvideocont):this.$bgvideocont.appendTo(this.$element)}},p._alignBGVideo=function(){this.bgvideo_fillmode&&"none"!==this.bgvideo_fillmode&&this.bgVideoAligner.align()},p.setSize=function(width,height,hard){this.__width=width,this.slider.options.autoHeight&&(this.bgLoaded?(this.ratio=this.__width/this.bgWidth,height=Math.floor(this.ratio*this.bgHeight),this.$imgcont.height(height)):(this.ratio=width/this.slider.options.width,height=this.slider.options.height*this.ratio)),this.__height=height,this.$element.width(width).height(height),this.hasBG&&this.bgLoaded&&this.bgAligner.align(),this._alignBGVideo(),hard&&this.selected&&this.initLayers(hard),this.selected&&this.locateLayers(),this.hasLayers&&(this.slider.options.autoHeight&&(this.$layers[0].style.height=this.getHeight()+"px"),"center"==this.slider.options.layersMode&&(this.$layers[0].style.left=Math.max(0,(this.__width-this.slider.options.width)/2)+"px"))},p.getHeight=function(){return this.bgLoaded?this.bgHeight*this.ratio:Math.max(this.$element[0].clientHeight,this.slider.options.height*this.ratio)},p.__playVideo=function(){this.vplayed||this.videodis||(this.vplayed=!0,this.slider.api.paused||(this.slider.api.pause(),this.roc=!0),this.vcbtn.css("display",""),CTween.fadeOut(this.vpbtn,500,!1),CTween.fadeIn(this.vcbtn,500),CTween.fadeIn(this.vframe,500),this.vframe.css("display","block").attr("src",this.video+"&autoplay=1"),this.view.$element.addClass("ms-def-cursor"),this.view.swipeControl.disable(),this.slider.slideController.dispatchEvent(new MSSliderEvent(MSSliderEvent.VIDEO_PLAY)))},p.__closeVideo=function(){if(this.vplayed){this.vplayed=!1,this.roc&&this.slider.api.resume();var that=this;CTween.fadeIn(this.vpbtn,500),CTween.animate(this.vcbtn,500,{opacity:0},{complete:function(){that.vcbtn.css("display","none")}}),CTween.animate(this.vframe,500,{opacity:0},{complete:function(){that.vframe.attr("src","about:blank").css("display","none")}}),this.view.swipeControl.enable(),this.view.$element.removeClass("ms-def-cursor"),this.slider.slideController.dispatchEvent(new MSSliderEvent(MSSliderEvent.VIDEO_CLOSE))}},p.create=function(){var that=this;this.hasLayers&&(this.$element.append(this.$layers),"center"==this.slider.options.layersMode&&this.$layers.css("max-width",this.slider.options.width+"px")),this.link&&this.$element.css("cursor","pointer").click(function(){that.linkdis||window.open(that.link,that.link_targ||"_self")}),this.video&&(-1===this.video.indexOf("?")&&(this.video+="?"),this.vframe=$("<iframe></iframe>").addClass("ms-slide-video").css({width:"100%",height:"100%",display:"none"}).attr("src","about:blank").appendTo(this.$element),this.vpbtn=$("<div></div>").addClass("ms-slide-vpbtn").click(function(){that.__playVideo()}).appendTo(this.$element),this.vcbtn=$("<div></div>").addClass("ms-slide-vcbtn").click(function(){that.__closeVideo()}).appendTo(this.$element).css("display","none"),window._touch&&this.vcbtn.removeClass("ms-slide-vcbtn").addClass("ms-slide-vcbtn-mobile").append('<div class="ms-vcbtn-txt">Close video</div>').appendTo(this.view.$element.parent())),!this.slider.options.autoHeight&&this.hasBG&&(this.$imgcont.css("height","100%"),"center"!==this.fillMode&&"stretch"!==this.fillMode||(this.fillMode="fill")),this.sleep()},p.destroy=function(){for(var i=0,l=this.layers.length;i<l;++i)this.layers[i].$element.stop(!0).remove();this.$element.remove(),this.$element=null},p.setup=function(){!this.initBG&&this.bgLoaded&&(this.initBG=!0,this.$bg_img.css("visibility",""),this.bgWidth=this.bgNatrualWidth||this.$bg_img.width(),this.bgHeight=this.bgNatrualHeight||this.$bg_img.height(),CTween.fadeIn(this.$imgcont,300),this.slider.options.autoHeight&&this.$imgcont.height(this.bgHeight*this.ratio),this.bgAligner.init(this.bgWidth,this.bgHeight),this.setSize(this.__width,this.__height),this.slider.options.autoHeight&&(this.pselected||this.selected)&&this.slider.setHeight(this.getHeight()))},p.prepareToSelect=function(){this.pselected||this.selected||(this.pselected=!0,(this.link||this.video)&&(this.view.addEventListener(MSViewEvents.SWIPE_START,this.onSwipeStart,this),this.view.addEventListener(MSViewEvents.SWIPE_CANCEL,this.onSwipeCancel,this)),this.loadImages(),0===this.preloadCount&&(this.bgvideo&&this.bgvideo.play(),this.slider.options.instantStartLayers&&this.showLayers()),this.moz&&this.$element.css("margin-top",""))},p.select=function(){this.selected||(this.selected=!0,this.pselected=!1,this.$element.addClass("ms-sl-selected"),this.hasLayers&&(this.slider.options.autoHeight&&(this.$layers[0].style.height=this.getHeight()+"px"),this.slider.options.instantStartLayers||this.showLayers()),0===this.preloadCount&&this.bgvideo&&this.bgvideo.play())},p.unselect=function(){if(this.pselected=!1,this.moz&&this.$element.css("margin-top","0.1px"),(this.link||this.video)&&(this.view.removeEventListener(MSViewEvents.SWIPE_START,this.onSwipeStart,this),this.view.removeEventListener(MSViewEvents.SWIPE_CANCEL,this.onSwipeCancel,this)),this.bgvideo&&(this.bgvideo.pause(),!this.autoPauseBgVid&&this.vinit&&(this.bgvideo.currentTime=0)),this.selected){if(this.selected=!1,this.$element.removeClass("ms-sl-selected"),this.hasLayers){var that=this;that.lht=CTween.animate(this.$layers,500,{opacity:0},{complete:function(){that.resetLayers()}})}this.video&&this.vplayed&&(this.__closeVideo(),this.roc=!1)}},p.sleep=function(){this.isSleeping||(this.isSleeping=!0,this.autoAppend&&this.$element.detach())},p.wakeup=function(){this.isSleeping&&(this.isSleeping=!1,this.autoAppend&&this.view.$slideCont.append(this.$element),this.moz&&this.$element.css("margin-top","0.1px"),this.setup(),this.hasBG&&this.bgAligner.align())}}(jQuery),function($){"use strict";var SliderViewList={};window.MSSlideController=function(slider){this._delayProgress=0,this._timer=new averta.Timer(100),this._timer.onTimer=this.onTimer,this._timer.refrence=this,this.currentSlide=null,this.slider=slider,this.so=slider.options,averta.EventDispatcher.call(this)},MSSlideController.registerView=function(name,_class){if(name in SliderViewList)throw new Error(name+", is already registered.");SliderViewList[name]=_class},MSSlideController.SliderControlList={},MSSlideController.registerControl=function(name,_class){if(name in MSSlideController.SliderControlList)throw new Error(name+", is already registered.");MSSlideController.SliderControlList[name]=_class};var p=MSSlideController.prototype;p.setupView=function(){var that=this;this.resize_listener=function(){that.__resize()};var viewOptions={spacing:this.so.space,mouseSwipe:this.so.mouse,loop:this.so.loop,autoHeight:this.so.autoHeight,swipe:this.so.swipe,speed:this.so.speed,dir:this.so.dir,viewNum:this.so.inView,critMargin:this.so.critMargin};this.so.viewOptions&&$.extend(viewOptions,this.so.viewOptions),this.so.autoHeight&&(this.so.heightLimit=!1);var viewClass=SliderViewList[this.slider.options.view]||MSBasicView;if(!viewClass._3dreq||window._css3d&&!$.browser.msie||(viewClass=viewClass._fallback||MSBasicView),this.view=new viewClass(viewOptions),this.so.overPause){that=this;this.slider.$element.mouseenter(function(){that.is_over=!0,that._stopTimer()}).mouseleave(function(){that.is_over=!1,that._startTimer()})}},p.onChangeStart=function(){this.change_started=!0,this.currentSlide&&this.currentSlide.unselect(),this.currentSlide=this.view.currentSlide,this.currentSlide.prepareToSelect(),this.so.endPause&&this.currentSlide.index===this.slider.slides.length-1&&(this.pause(),this.skipTimer()),this.so.autoHeight&&this.slider.setHeight(this.currentSlide.getHeight()),this.dispatchEvent(new MSSliderEvent(MSSliderEvent.CHANGE_START))},p.onChangeEnd=function(){if(this.change_started=!1,this._startTimer(),this.currentSlide.select(),this.so.preload>1){var loc,i,l=this.so.preload-1;for(i=1;i<=l;++i){if((loc=this.view.index+i)>=this.view.slideList.length){if(!this.so.loop){i=l;continue}loc-=this.view.slideList.length}this.view.slideList[loc].loadImages()}for(l>this.view.slideList.length/2&&(l=Math.floor(this.view.slideList.length/2)),i=1;i<=l;++i){if((loc=this.view.index-i)<0){if(!this.so.loop){i=l;continue}loc=this.view.slideList.length+loc}this.view.slideList[loc].loadImages()}}this.dispatchEvent(new MSSliderEvent(MSSliderEvent.CHANGE_END))},p.onSwipeStart=function(){this.skipTimer()},p.skipTimer=function(){this._timer.reset(),this._delayProgress=0,this.dispatchEvent(new MSSliderEvent(MSSliderEvent.WATING))},p.onTimer=function(){this._timer.getTime()>=1e3*this.view.currentSlide.delay&&(this.skipTimer(),this.view.next(),this.hideCalled=!1),this._delayProgress=this._timer.getTime()/(10*this.view.currentSlide.delay),this.so.hideLayers&&!this.hideCalled&&1e3*this.view.currentSlide.delay-this._timer.getTime()<=300&&(this.view.currentSlide.hideLayers(),this.hideCalled=!0),this.dispatchEvent(new MSSliderEvent(MSSliderEvent.WATING))},p._stopTimer=function(){this._timer&&this._timer.stop()},p._startTimer=function(){this.paused||this.is_over||!this.currentSlide||!this.currentSlide.ready||this.change_started||this._timer.start()},p.__appendSlides=function(){for(var slide,loc,i=0,l=this.view.slideList.length-1;i<l;++i)(slide=this.view.slideList[i]).detached||(slide.$element.detach(),slide.detached=!0);for(this.view.appendSlide(this.view.slideList[this.view.index]),l=3,i=1;i<=l;++i){if((loc=this.view.index+i)>=this.view.slideList.length){if(!this.so.loop){i=l;continue}loc-=this.view.slideList.length}(slide=this.view.slideList[loc]).detached=!1,this.view.appendSlide(slide)}for(l>this.view.slideList.length/2&&(l=Math.floor(this.view.slideList.length/2)),i=1;i<=l;++i){if((loc=this.view.index-i)<0){if(!this.so.loop){i=l;continue}loc=this.view.slideList.length+loc}(slide=this.view.slideList[loc]).detached=!1,this.view.appendSlide(slide)}},p.__resize=function(hard){this.created&&(this.width=this.slider.$element[0].clientWidth||this.so.width,this.so.fullwidth||(this.width=Math.min(this.width,this.so.width)),this.so.fullheight?(this.so.heightLimit=!1,this.so.autoHeight=!1,this.height=this.slider.$element[0].clientHeight):this.height=this.width/this.slider.aspect,this.so.autoHeight?(this.currentSlide.setSize(this.width,null,hard),this.view.setSize(this.width,this.currentSlide.getHeight(),hard)):this.view.setSize(this.width,this.so.heightLimit?Math.min(this.height,this.so.height):this.height,hard),this.slider.$controlsCont&&this.so.centerControls&&this.so.fullwidth&&this.view.$element.css("left",Math.min(0,-(this.slider.$element[0].clientWidth-this.so.width)/2)+"px"),this.dispatchEvent(new MSSliderEvent(MSSliderEvent.RESIZE)))},p.__dispatchInit=function(){this.dispatchEvent(new MSSliderEvent(MSSliderEvent.INIT))},p.setup=function(){if(this.created=!0,this.paused=!this.so.autoplay,this.view.addEventListener(MSViewEvents.CHANGE_START,this.onChangeStart,this),this.view.addEventListener(MSViewEvents.CHANGE_END,this.onChangeEnd,this),this.view.addEventListener(MSViewEvents.SWIPE_START,this.onSwipeStart,this),this.currentSlide=this.view.slides[this.so.start-1],this.__resize(),this.view.create(this.so.start-1),0===this.so.preload&&this.view.slides[0].loadImages(),this.scroller=this.view.controller,this.so.wheel){var that=this,last_time=(new Date).getTime();this.wheellistener=function(event){var current_time=(new Date).getTime();if(!(current_time-last_time<350)){last_time=current_time;var e=window.event||event.orginalEvent||event,delta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return delta<0?that.next():delta>0&&that.previous(),!1}},$.browser.mozilla?this.slider.$element[0].addEventListener("DOMMouseScroll",this.wheellistener):this.slider.$element.bind("mousewheel",this.wheellistener)}0===this.slider.$element[0].clientWidth&&(this.slider.init_safemode=!0),this.__resize()},p.index=function(){return this.view.index},p.count=function(){return this.view.slidesCount},p.next=function(){this.skipTimer(),this.view.next()},p.previous=function(){this.skipTimer(),this.view.previous()},p.gotoSlide=function(index){this.skipTimer(),this.view.gotoSlide(index)},p.destroy=function(reset){this.slider.destroy(reset)},p._destroy=function(){this._timer.reset(),this._timer=null,$(window).unbind("resize",this.resize_listener),this.view.destroy(),this.view=null,this.so.wheel&&($.browser.mozilla?this.slider.$element[0].removeEventListener("DOMMouseScroll",this.wheellistener):this.slider.$element.unbind("mousewheel",this.wheellistener),this.wheellistener=null),this.so=null},p.update=function(hard){this.slider.init_safemode&&hard&&(this.slider.init_safemode=!1),this.__resize(hard)},p.locate=function(){this.__resize()},p.resume=function(){this.paused&&(this.paused=!1,this._startTimer())},p.pause=function(){this.paused||(this.paused=!0,this._stopTimer())},p.currentTime=function(){return this._delayProgress},averta.EventDispatcher.extend(p)}(jQuery),function($){"use strict";var LayerTypes={image:MSImageLayerElement,text:MSLayerElement,video:MSVideoLayerElement,hotspot:MSHotspotLayer};window.MasterSlider=function(){this.options={autoplay:!1,loop:!1,mouse:!0,swipe:!0,grabCursor:!0,space:0,fillMode:"fill",start:1,view:"basic",width:300,height:150,inView:15,critMargin:1,heightLimit:!0,smoothHeight:!0,autoHeight:!1,fullwidth:!1,fullheight:!1,autofill:!1,layersMode:"center",hideLayers:!1,endPause:!1,centerControls:!0,overPause:!0,shuffle:!1,speed:17,dir:"h",preload:0,wheel:!1,layout:"boxed",fullscreenMargin:0,instantStartLayers:!1},this.slides=[],this.$element=null,this.lastMargin=0,this.leftSpace=0,this.topSpace=0,this.rightSpace=0,this.bottomSpace=0;var that=this;this.resize_listener=function(){that._resize()},$(window).bind("resize",this.resize_listener)},MasterSlider.author="Averta Ltd. (www.averta.net)",MasterSlider.version="1.5.7",MasterSlider.releaseDate="March 2014";var p=MasterSlider.prototype;p.__setupSlides=function(){var new_slide,that=this,ind=0;this.$element.children(".ms-slide").each(function(){var $slide_ele=$(this);(new_slide=new MSSlide).$element=$slide_ele,new_slide.slider=that,new_slide.delay=$slide_ele.data("delay")!==undefined?$slide_ele.data("delay"):3,new_slide.fillMode=$slide_ele.data("fill-mode")!==undefined?$slide_ele.data("fill-mode"):that.options.fillMode,new_slide.index=ind++;var slide_img=$slide_ele.children("img");slide_img.length>0&&new_slide.setBG(slide_img[0]);var slide_video=$slide_ele.children("video");if(slide_video.length>0&&new_slide.setBGVideo(slide_video),that.controls)for(var i=0,l=that.controls.length;i<l;++i)that.controls[i].slideAction(new_slide);$slide_ele.children("a").each(function(){var $this=$(this);"video"===this.getAttribute("data-type")?(new_slide.video=this.getAttribute("href"),$this.remove()):$this.hasClass("ms-layer")||(new_slide.link=this.getAttribute("href"),new_slide.link_targ=this.getAttribute("target"),$this.remove())});that.__createSlideLayers(new_slide,$slide_ele.find(".ms-layer")),that.slides.push(new_slide),that.slideController.view.addSlide(new_slide)})},p.__createSlideLayers=function(slide,layers){0!=layers.length&&layers.each(function(index,domEle){var $layer_element,$parent_ele;$layer_element="A"===domEle.nodeName?($parent_ele=$(this)).find("img"):$(this);var layer=new(LayerTypes[$layer_element.data("type")||"text"]);layer.$element=$layer_element,layer.link=$parent_ele;var eff_parameters={},end_eff_parameters={};$layer_element.data("effect")!==undefined&&(eff_parameters.name=$layer_element.data("effect")),
$layer_element.data("ease")!==undefined&&(eff_parameters.ease=$layer_element.data("ease")),$layer_element.data("duration")!==undefined&&(eff_parameters.duration=$layer_element.data("duration")),$layer_element.data("delay")!==undefined&&(eff_parameters.delay=$layer_element.data("delay")),$layer_element.data("hide-effect")&&(end_eff_parameters.name=$layer_element.data("hide-effect")),$layer_element.data("hide-ease")&&(end_eff_parameters.ease=$layer_element.data("hide-ease")),$layer_element.data("hide-duration")!==undefined&&(end_eff_parameters.duration=$layer_element.data("hide-duration")),$layer_element.data("hide-time")!==undefined&&(end_eff_parameters.time=$layer_element.data("hide-time")),$layer_element.data("resize")!==undefined&&(layer.resizable=$layer_element.data("resize")),$layer_element.data("swipe")!==undefined&&(layer.swipe=$layer_element.data("swipe")),$layer_element.data("widthlimit")!==undefined&&(layer.minWidth=$layer_element.data("widthlimit")),layer.setStartAnim(eff_parameters),layer.setEndAnim(end_eff_parameters),slide.addLayer(layer)})},p._removeLoading=function(){$(window).unbind("resize",this.resize_listener),this.$element=$("#"+this.id).removeClass("before-init").css("visibility","visible").css("height","").css("opacity",0),CTween.fadeIn(this.$element),this.$loading.remove(),this.slideController&&this.slideController.__resize()},p._resize=function(){if(this.$loading){var h=this.$loading[0].clientWidth/this.aspect;h=this.options.heightLimit?Math.min(h,this.options.height):h,this.$loading.height(h),this.$element.height(h)}},p._shuffleSlides=function(){for(var r,slides=this.$element.children(".ms-slide"),i=0,l=slides.length;i<l;++i)i!=(r=Math.floor(Math.random()*(l-1)))&&(this.$element[0].insertBefore(slides[i],slides[r]),slides=this.$element.children(".ms-slide"))},p._setupSliderLayout=function(){this._updateSideMargins(),this.lastMargin=this.leftSpace;var lo=this.options.layout;"boxed"!==lo&&"partialview"!==lo&&(this.options.fullwidth=!0),"fullscreen"!==lo&&"autofill"!==lo||(this.options.fullheight=!0),"partialview"===lo&&this.$element.addClass("ms-layout-partialview"),"fullscreen"!==lo&&"fullwidth"!==lo||($(window).bind("resize",{that:this},this._updateLayout),this._updateLayout()),$(window).bind("resize",this.slideController.resize_listener)},p._updateLayout=function(event){var that=event?event.data.that:this,lo=that.options.layout,$element=that.$element;$element.width($("body").innerWidth()-that.leftSpace-that.rightSpace);var margin=-$element.offset().left+that.leftSpace+that.lastMargin;$element.css("margin-left",margin),that.lastMargin=margin,"fullscreen"===lo&&$element.height(window.innerHeight-that.options.fullscreenMargin-that.topSpace-that.bottomSpace)},p._init=function(){if(!this.preventInit){if(this.initialized=!0,"all"!==this.options.preload&&this._removeLoading(),this.options.shuffle&&this._shuffleSlides(),MSLayerEffects.setup(),this.slideController.setupView(),this.view=this.slideController.view,this.controls){this.$controlsCont=$("<div></div>").addClass("ms-container").appendTo(this.$element),this.options.centerControls&&this.$controlsCont.css("max-width",this.options.width+"px");for(var i=0,l=this.controls.length;i<l;++i)this.controls[i].setup();this.$controlsCont.prepend(this.view.$element)}else this.$element.append(this.view.$element);if(this._setupSliderLayout(),this.__setupSlides(),this.slideController.setup(),this.controls)for(i=0,l=this.controls.length;i<l;++i)this.controls[i].create();if(this.options.autoHeight&&this.slideController.view.$element.height(this.slideController.currentSlide.getHeight()),this.options.swipe&&!window._touch&&this.options.grabCursor&&this.options.mouse){var $view=this.view.$element;$view.mousedown(function(){$view.removeClass("ms-grab-cursor"),$view.addClass("ms-grabbing-cursor")}).addClass("ms-grab-cursor"),$(document).mouseup(function(){$view.removeClass("ms-grabbing-cursor"),$view.addClass("ms-grab-cursor")})}this.slideController.__dispatchInit()}},p.setHeight=function(value){this.options.smoothHeight?(this.htween&&(this.htween.reset?this.htween.reset():this.htween.stop(!0)),this.htween=CTween.animate(this.slideController.view.$element,500,{height:value},{ease:"easeOutQuart"})):this.slideController.view.$element.height(value)},p.reserveSpace=function(side,space){var sideSpace=side+"Space",pos=this[sideSpace];return this[sideSpace]+=space,this._updateSideMargins(),pos},p._updateSideMargins=function(){this.$element.css("margin",this.topSpace+"px "+this.rightSpace+"px "+this.bottomSpace+"px "+this.leftSpace+"px")},p._realignControls=function(){this.rightSpace=this.leftSpace=this.topSpace=this.bottomSpace=0,this._updateSideMargins(),this.api.dispatchEvent(new MSSliderEvent(MSSliderEvent.RESERVED_SPACE_CHANGE))},p.control=function(control,options){if(control in MSSlideController.SliderControlList){this.controls||(this.controls=[]);var ins=new MSSlideController.SliderControlList[control](options);return ins.slider=this,this.controls.push(ins),this}},p.setup=function(id,options){if(this.id=id,this.$element="string"==typeof id?$("#"+id):id.eq(0),this.setupMarkup=this.$element.html(),0!==this.$element.length){this.$element.addClass("master-slider").addClass("before-init"),$.browser.msie&&this.$element.addClass("ms-ie").addClass("ms-ie"+$.browser.version.slice(0,$.browser.version.indexOf("."))),navigator.userAgent.toLowerCase().indexOf("android")>-1&&this.$element.addClass("ms-android");var that=this;return $.extend(this.options,options),this.aspect=this.options.width/this.options.height,this.$loading=$("<div></div>").addClass("ms-loading-container").insertBefore(this.$element).append($("<div></div>").addClass("ms-loading")),this.$loading.parent().css("position","relative"),this.options.autofill&&(this.options.fullwidth=!0,this.options.fullheight=!0),this.options.fullheight&&this.$element.addClass("ms-fullheight"),this._resize(),this.slideController=new MSSlideController(this),this.api=this.slideController,$(document).ready(function(){that._init()}),this}console&&console.log("Master Slider Error: #"+id+" not found.")},p.destroy=function(insertMarkup){if(this.controls)for(var i=0,l=this.controls.length;i!==l;i++)this.controls[i].destroy();this.slideController&&this.slideController._destroy(),this.$loading&&this.$loading.remove(),insertMarkup?this.$element.html(this.setupMarkup).css("visibility","hidden"):this.$element.remove();var lo=this.options.layout;"fullscreen"!==lo&&"fullwidth"!==lo||$(window).unbind("resize",this._updateLayout)}}(jQuery),window.MSViewEvents=function(type){this.type=type},MSViewEvents.SWIPE_START="swipeStart",MSViewEvents.SWIPE_END="swipeEnd",MSViewEvents.SWIPE_MOVE="swipeMove",MSViewEvents.SWIPE_CANCEL="swipeCancel",MSViewEvents.SCROLL="scoll",MSViewEvents.CHANGE_START="slideChangeStart",MSViewEvents.CHANGE_END="slideChangeEnd",function($){"use strict";window.MSBasicView=function(options){this.options={loop:!1,dir:"h",autoHeight:!1,spacing:5,mouseSwipe:!0,swipe:!0,speed:17,minSlideSpeed:2,viewNum:20,critMargin:1},$.extend(this.options,options),this.dir=this.options.dir,this.loop=this.options.loop,this.spacing=this.options.spacing,this.__width=0,this.__height=0,this.__cssProb="h"===this.dir?"left":"top",this.__offset="h"===this.dir?"offsetLeft":"offsetTop",this.__dimension="h"===this.dir?"__width":"__height",this.__translate_end=window._css3d?" translateZ(0px)":"",this.$slideCont=$("<div></div>").addClass("ms-slide-container"),this.$element=$("<div></div>").addClass("ms-view").addClass("ms-basic-view").append(this.$slideCont),this.currentSlide=null,this.index=-1,this.slidesCount=0,this.slides=[],this.slideList=[],this.viewSlidesList=[],this.css3=window._cssanim,this.start_buffer=0,this.firstslide_snap=0,this.controller=new Controller(0,0,{snapping:!0,snapsize:100,paging:!0,snappingMinSpeed:this.options.minSlideSpeed,friction:(100-.5*this.options.speed)/100,endless:this.loop}),this.controller.renderCallback("h"===this.dir?this._horizUpdate:this._vertiUpdate,this),this.controller.snappingCallback(this.__snapUpdate,this),this.controller.snapCompleteCallback(this.__snapCompelet,this),averta.EventDispatcher.call(this)};var p=MSBasicView.prototype;p.__snapCompelet=function(){this.__locateSlides(),this.start_buffer=0,this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_END))},p.__snapUpdate=function(controller,snap,change){if(this.loop){var target_index=this.index+change;this.updateLoop(target_index),target_index>=this.slidesCount&&(target_index-=this.slidesCount),target_index<0&&(target_index=this.slidesCount+target_index),this.index=target_index}else{if(snap<0||snap>=this.slidesCount)return;this.index=snap}this._checkCritMargins(),$.browser.mozilla&&(this.slideList[this.index].$element[0].style.marginTop="0.1px",this.currentSlide&&(this.currentSlide.$element[0].style.marginTop=""));var new_slide=this.slideList[this.index];new_slide!==this.currentSlide&&(this.currentSlide=new_slide,this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_START)))},p._checkCritMargins=function(){if(!this.normalMode){var hlf=Math.floor(this.options.viewNum/2),inView=this.viewSlidesList.indexOf(this.slideList[this.index]),size=this[this.__dimension]+this.spacing,cm=this.options.critMargin;this.loop?(inView<=cm||inView>=this.viewSlidesList.length-cm)&&(size*=inView-hlf,this.__locateSlides(!1,size+this.start_buffer),this.start_buffer+=size):(inView<cm&&this.index>=cm||inView>=this.viewSlidesList.length-cm&&this.index<this.slidesCount-cm)&&this.__locateSlides(!1)}},p._vertiUpdate=function(controller,value){this.__contPos=value,this.dispatchEvent(new MSViewEvents(MSViewEvents.SCROLL)),this.css3?this.$slideCont[0].style[window._jcsspfx+"Transform"]="translateY("+-value+"px)"+this.__translate_end:this.$slideCont[0].style.top=-value+"px"},p._horizUpdate=function(controller,value){this.__contPos=value,this.dispatchEvent(new MSViewEvents(MSViewEvents.SCROLL)),this.css3?this.$slideCont[0].style[window._jcsspfx+"Transform"]="translateX("+-value+"px)"+this.__translate_end:this.$slideCont[0].style.left=-value+"px"},p.__updateViewList=function(){if(this.normalMode)this.viewSlidesList=this.slides;else{var temp=this.viewSlidesList.slice();this.viewSlidesList=[];var l,i=0,hlf=Math.floor(this.options.viewNum/2);if(this.loop)for(;i!==this.options.viewNum;i++)this.viewSlidesList.push(this.slides[this.currentSlideLoc-hlf+i]);else{for(i=0;i!==hlf&&this.index-i!=-1;i++)this.viewSlidesList.unshift(this.slideList[this.index-i]);for(i=1;i!==hlf&&this.index+i!==this.slidesCount;i++)this.viewSlidesList.push(this.slideList[this.index+i])}for(i=0,l=temp.length;i!==l;i++)-1===this.viewSlidesList.indexOf(temp[i])&&temp[i].sleep();temp=null}},p.__locateSlides=function(move,start){this.__updateViewList(),start=this.loop?start||0:this.slides.indexOf(this.viewSlidesList[0])*(this[this.__dimension]+this.spacing);for(var slide,l=this.viewSlidesList.length,i=0;i!==l;i++){var pos=start+i*(this[this.__dimension]+this.spacing);(slide=this.viewSlidesList[i]).wakeup(),slide.position=pos,slide.$element[0].style[this.__cssProb]=pos+"px"}!1!==move&&this.controller.changeTo(this.slideList[this.index].position,!1,null,null,!1)},p.__createLoopList=function(){var return_arr=[],i=0,count=this.slidesCount/2,before_count=this.slidesCount%2==0?count-1:Math.floor(count),after_count=this.slidesCount%2==0?count:Math.floor(count);for(this.currentSlideLoc=before_count,i=1;i<=before_count;++i)return_arr.unshift(this.slideList[this.index-i<0?this.slidesCount-i+this.index:this.index-i]);for(return_arr.push(this.slideList[this.index]),i=1;i<=after_count;++i)return_arr.push(this.slideList[this.index+i>=this.slidesCount?this.index+i-this.slidesCount:this.index+i]);return return_arr},p.__getSteps=function(index,target){var right=target<index?this.slidesCount-index+target:target-index,left=Math.abs(this.slidesCount-right);return right<left?right:-left},p.__pushEnd=function(){var first_slide=this.slides.shift(),last_slide=this.slides[this.slidesCount-2];if(this.slides.push(first_slide),this.normalMode){var pos=last_slide.$element[0][this.__offset]+this.spacing+this[this.__dimension];first_slide.$element[0].style[this.__cssProb]=pos+"px",first_slide.position=pos}},p.__pushStart=function(){var last_slide=this.slides.pop(),first_slide=this.slides[0];if(this.slides.unshift(last_slide),this.normalMode){var pos=first_slide.$element[0][this.__offset]-this.spacing-this[this.__dimension];last_slide.$element[0].style[this.__cssProb]=pos+"px",last_slide.position=pos}},p.addSlide=function(slide){slide.view=this,this.slides.push(slide),this.slideList.push(slide),this.slidesCount++},p.appendSlide=function(slide){this.$slideCont.append(slide.$element)},p.updateLoop=function(index){if(this.loop)for(var steps=this.__getSteps(this.index,index),i=0,l=Math.abs(steps);i<l;++i)steps<0?this.__pushStart():this.__pushEnd()},p.gotoSlide=function(index,fast){this.updateLoop(index),this.index=index;var target_slide=this.slideList[this.index];this._checkCritMargins(),this.controller.changeTo(target_slide.position,!fast,null,null,!1),target_slide!==this.currentSlide&&(this.currentSlide=target_slide,this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_START)),fast&&this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_END)))},p.next=function(){this.gotoSlide(this.index+1>=this.slidesCount?0:this.index+1)},p.previous=function(){this.gotoSlide(this.index-1<0?this.slidesCount-1:this.index-1)},p.setupSwipe=function(){this.swipeControl=new averta.TouchSwipe(this.$element),this.swipeControl.swipeType="h"===this.dir?"horizontal":"vertical";var that=this;"h"===this.dir?this.swipeControl.onSwipe=function(status){that.horizSwipeMove(status)}:this.swipeControl.onSwipe=function(status){that.vertSwipeMove(status)}},p.vertSwipeMove=function(status){var phase=status.phase;if("start"===phase)this.controller.stop(),this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_START));else if("move"===phase&&(!this.loop||Math.abs(this.currentSlide.position-this.controller.value+status.moveY)<this.cont_size/2))this.controller.drag(status.moveY);else if("end"===phase||"cancel"===phase){var speed=status.distanceY/status.duration*50/3;Math.abs(speed)>.1?(this.controller.push(-speed),speed>this.controller.options.snappingMinSpeed&&this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_END))):(this.controller.cancel(),this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_CANCEL)))}},p.horizSwipeMove=function(status){var phase=status.phase;if("start"===phase)this.controller.stop(),this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_START));else if("move"===phase&&(!this.loop||Math.abs(this.currentSlide.position-this.controller.value+status.moveX)<this.cont_size/2))this.controller.drag(status.moveX);else if("end"===phase||"cancel"===phase){var speed=status.distanceX/status.duration*50/3;Math.abs(speed)>.1?(this.controller.push(-speed),speed>this.controller.options.snappingMinSpeed&&this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_END))):(this.controller.cancel(),this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_CANCEL)))}},p.setSize=function(width,height,hard){if(this.lastWidth!==width||height!==this.lastHeight||hard){this.$element.width(width).height(height);for(var i=0;i<this.slidesCount;++i)this.slides[i].setSize(width,height,hard);this.__width=width,this.__height=height,this.__created&&(this.__locateSlides(),this.cont_size=(this.slidesCount-1)*(this[this.__dimension]+this.spacing),this.loop||(this.controller._max_value=this.cont_size),this.controller.options.snapsize=this[this.__dimension]+this.spacing,this.controller.changeTo(this.currentSlide.position,!1,null,null,!1),this.controller.cancel(),this.lastWidth=width,this.lastHeight=height)}},p.create=function(index){this.__created=!0,this.index=Math.min(index||0,this.slidesCount-1),this.loop&&(this.slides=this.__createLoopList()),this.normalMode=this.slidesCount<=this.options.viewNum,this.__locateSlides();for(var i=0;i<this.slidesCount;++i)this.slides[i].create();this.controller.options.snapsize=this[this.__dimension]+this.spacing,this.loop||(this.controller._max_value=(this.slidesCount-1)*(this[this.__dimension]+this.spacing)),this.gotoSlide(this.index,!0),this.options.swipe&&(window._touch||this.options.mouseSwipe)&&this.setupSwipe()},p.destroy=function(){if(this.__created){for(var i=0;i<this.slidesCount;++i)this.slides[i].destroy();this.slides=null,this.slideList=null,this.$element.remove(),this.controller.destroy(),this.controller=null}},averta.EventDispatcher.extend(p),MSSlideController.registerView("basic",MSBasicView)}(jQuery),function(){"use strict";window.MSWaveView=function(options){MSBasicView.call(this,options),this.$element.removeClass("ms-basic-view").addClass("ms-wave-view"),this.$slideCont.css(window._csspfx+"transform-style","preserve-3d")},MSWaveView.extend(MSBasicView),MSWaveView._3dreq=!0,MSWaveView._fallback=MSBasicView;var p=MSWaveView.prototype,_super=MSBasicView.prototype;p._horizUpdate=function(controller,value){_super._horizUpdate.call(this,controller,value);for(var slide,distance,cont_scroll=-value,i=0;i<this.slidesCount;++i)distance=-cont_scroll-(slide=this.slideList[i]).position,this.__updateSlidesHoriz(slide,distance)},p._vertiUpdate=function(controller,value){_super._vertiUpdate.call(this,controller,value);for(var slide,distance,cont_scroll=-value,i=0;i<this.slidesCount;++i)distance=-cont_scroll-(slide=this.slideList[i]).position,this.__updateSlidesVertic(slide,distance)},p.__updateSlidesHoriz=function(slide,distance){var value=Math.abs(100*distance/this.__width);slide.$element.css(window._csspfx+"transform","translateZ("+3*-value+"px) rotateY(0.01deg)")},p.__updateSlidesVertic=function(slide,distance){this.__updateSlidesHoriz(slide,distance)},MSSlideController.registerView("wave",MSWaveView)}(jQuery),function(){window.MSFadeBasicView=function(options){MSWaveView.call(this,options),this.$element.removeClass("ms-wave-view").addClass("ms-fade-basic-view")},MSFadeBasicView.extend(MSWaveView);var p=MSFadeBasicView.prototype;MSFadeBasicView.prototype;p.__updateSlidesHoriz=function(slide,distance){var value=Math.abs(.6*distance/this.__width);value=1-Math.min(value,.6),slide.$element.css("opacity",value)},p.__updateSlidesVertic=function(slide,distance){this.__updateSlidesHoriz(slide,distance)},MSSlideController.registerView("fadeBasic",MSFadeBasicView),MSWaveView._fallback=MSFadeBasicView}(),function(){window.MSFadeWaveView=function(options){MSWaveView.call(this,options),this.$element.removeClass("ms-wave-view").addClass("ms-fade-wave-view")},MSFadeWaveView.extend(MSWaveView),MSFadeWaveView._3dreq=!0,MSFadeWaveView._fallback=MSFadeBasicView;var p=MSFadeWaveView.prototype;MSWaveView.prototype;p.__updateSlidesHoriz=function(slide,distance){var value=Math.abs(100*distance/this.__width);value=Math.min(value,100),slide.$element.css("opacity",1-value/300),slide.$element.css(window._csspfx+"transform","scale("+(1-value/800)+") rotateY(0.01deg) ")},p.__updateSlidesVertic=function(slide,distance){this.__updateSlidesHoriz(slide,distance)},MSSlideController.registerView("fadeWave",MSFadeWaveView)}(),function(){"use strict";window.MSFlowView=function(options){MSWaveView.call(this,options),this.$element.removeClass("ms-wave-view").addClass("ms-flow-view")},MSFlowView.extend(MSWaveView),MSFlowView._3dreq=!0,MSFlowView._fallback=MSFadeBasicView;var p=MSFlowView.prototype;MSWaveView.prototype;p.__updateSlidesHoriz=function(slide,distance){var value=Math.abs(100*distance/this.__width),rvalue=Math.min(.3*value,30)*(distance<0?-1:1),zvalue=1.2*value;slide.$element[0].style[window._jcsspfx+"Transform"]="translateZ("+5*-zvalue+"px) rotateY("+rvalue+"deg) "},p.__updateSlidesVertic=function(slide,distance){var value=Math.abs(100*distance/this.__width),rvalue=Math.min(.3*value,30)*(distance<0?-1:1),zvalue=1.2*value;slide.$element[0].style[window._jcsspfx+"Transform"]="translateZ("+5*-zvalue+"px) rotateX("+-rvalue+"deg) "},MSSlideController.registerView("flow",MSFlowView)}(jQuery),function(){window.MSFadeFlowView=function(options){MSWaveView.call(this,options),this.$element.removeClass("ms-wave-view").addClass("ms-fade-flow-view")},MSFadeFlowView.extend(MSWaveView),MSFadeFlowView._3dreq=!0;var p=MSFadeFlowView.prototype;MSWaveView.prototype;p.__calculate=function(distance){var value=Math.min(Math.abs(100*distance/this.__width),100);return{value:value,rvalue:Math.min(.5*value,50)*(distance<0?-1:1)}},p.__updateSlidesHoriz=function(slide,distance){var clc=this.__calculate(distance);slide.$element.css("opacity",1-clc.value/300),slide.$element[0].style[window._csspfx+"transform"]="translateZ("+-clc.value+"px) rotateY("+clc.rvalue+"deg) "},p.__updateSlidesVertic=function(slide,distance){var clc=this.__calculate(distance);slide.$element.css("opacity",1-clc.value/300),slide.$element[0].style[window._csspfx+"transform"]="translateZ("+-clc.value+"px) rotateX("+-clc.rvalue+"deg) "},MSSlideController.registerView("fadeFlow",MSFadeFlowView)}(),function($){"use strict";window.MSMaskView=function(options){MSBasicView.call(this,options),this.$element.removeClass("ms-basic-view").addClass("ms-mask-view")},MSMaskView.extend(MSBasicView);var p=MSMaskView.prototype,_super=MSBasicView.prototype;p.addSlide=function(slide){slide.view=this,slide.$frame=$("<div></div>").addClass("ms-mask-frame").append(slide.$element),slide.$element[0].style.position="relative",slide.autoAppend=!1,this.slides.push(slide),this.slideList.push(slide),this.slidesCount++},p.setSize=function(width,height){for(var slider=this.slides[0].slider,i=0;i<this.slidesCount;++i)this.slides[i].$frame[0].style.width=width+"px",slider.options.autoHeight||(this.slides[i].$frame[0].style.height=height+"px");_super.setSize.call(this,width,height)},p._horizUpdate=function(controller,value){_super._horizUpdate.call(this,controller,value);var i=0;if(this.css3)for(i=0;i<this.slidesCount;++i)this.slideList[i].$element[0].style[window._jcsspfx+"Transform"]="translateX("+(value-this.slideList[i].position)+"px)"+this.__translate_end;else for(i=0;i<this.slidesCount;++i)this.slideList[i].$element[0].style.left=value-this.slideList[i].position+"px"},p._vertiUpdate=function(controller,value){_super._vertiUpdate.call(this,controller,value);var i=0;if(this.css3)for(i=0;i<this.slidesCount;++i)this.slideList[i].$element[0].style[window._jcsspfx+"Transform"]="translateY("+(value-this.slideList[i].position)+"px)"+this.__translate_end;else for(i=0;i<this.slidesCount;++i)this.slideList[i].$element[0].style.top=value-this.slideList[i].position+"px"},p.__pushEnd=function(){var first_slide=this.slides.shift(),last_slide=this.slides[this.slidesCount-2];if(this.slides.push(first_slide),this.normalMode){var pos=last_slide.$frame[0][this.__offset]+this.spacing+this[this.__dimension];first_slide.$frame[0].style[this.__cssProb]=pos+"px",first_slide.position=pos}},p.__pushStart=function(){var last_slide=this.slides.pop(),first_slide=this.slides[0];if(this.slides.unshift(last_slide),this.normalMode){var pos=first_slide.$frame[0][this.__offset]-this.spacing-this[this.__dimension];last_slide.$frame[0].style[this.__cssProb]=pos+"px",last_slide.position=pos}},p.__updateViewList=function(){if(this.normalMode)this.viewSlidesList=this.slides;else{var temp=this.viewSlidesList.slice();this.viewSlidesList=[];var l,i=0,hlf=Math.floor(this.options.viewNum/2);if(this.loop)for(;i!==this.options.viewNum;i++)this.viewSlidesList.push(this.slides[this.currentSlideLoc-hlf+i]);else{for(i=0;i!==hlf&&this.index-i!=-1;i++)this.viewSlidesList.unshift(this.slideList[this.index-i]);for(i=1;i!==hlf&&this.index+i!==this.slidesCount;i++)this.viewSlidesList.push(this.slideList[this.index+i])}for(i=0,l=temp.length;i!==l;i++)-1===this.viewSlidesList.indexOf(temp[i])&&(temp[i].sleep(),temp[i].$frame.detach());temp=null}},p.__locateSlides=function(move,start){this.__updateViewList(),start=this.loop?start||0:this.slides.indexOf(this.viewSlidesList[0])*(this[this.__dimension]+this.spacing);for(var slide,l=this.viewSlidesList.length,i=0;i!==l;i++){var pos=start+i*(this[this.__dimension]+this.spacing);slide=this.viewSlidesList[i],this.$slideCont.append(slide.$frame),slide.wakeup(!1),slide.position=pos,slide.$frame[0].style[this.__cssProb]=pos+"px"}!1!==move&&this.controller.changeTo(this.slideList[this.index].position,!1,null,null,!1)},MSSlideController.registerView("mask",MSMaskView)}(jQuery),function(){"use strict";window.MSFadeView=function(options){MSBasicView.call(this,options),this.$element.removeClass("ms-basic-view").addClass("ms-fade-view"),this.controller.renderCallback(this.__update,this)},MSFadeView.extend(MSBasicView);var p=MSFadeView.prototype,_super=MSBasicView.prototype;p.__update=function(controller,value){for(var slide,distance,cont_scroll=-value,i=0;i<this.slidesCount;++i)distance=-cont_scroll-(slide=this.slideList[i]).position,this.__updateSlides(slide,distance)},p.__updateSlides=function(slide,distance){var value=Math.abs(distance/this[this.__dimension]);1-value<=0?slide.$element.fadeTo(0,0).css("visibility","hidden"):slide.$element.fadeTo(0,1-value).css("visibility","")},p.__locateSlides=function(move,start){this.__updateViewList(),start=this.loop?start||0:this.slides.indexOf(this.viewSlidesList[0])*(this[this.__dimension]+this.spacing);for(var slide,l=this.viewSlidesList.length,i=0;i!==l;i++){var pos=start+i*this[this.__dimension];(slide=this.viewSlidesList[i]).wakeup(),slide.position=pos}!1!==move&&this.controller.changeTo(this.slideList[this.index].position,!1,null,null,!1)},p.__pushEnd=function(){var first_slide=this.slides.shift(),last_slide=this.slides[this.slidesCount-2];this.slides.push(first_slide),first_slide.position=last_slide.position+this[this.__dimension]},p.__pushStart=function(){var last_slide=this.slides.pop(),first_slide=this.slides[0];this.slides.unshift(last_slide),last_slide.position=first_slide.position-this[this.__dimension]},p.create=function(index){_super.create.call(this,index),this.spacing=0,this.controller.options.minValidDist=10},MSSlideController.registerView("fade",MSFadeView)}(jQuery),function(){"use strict";window.MSScaleView=function(options){MSBasicView.call(this,options),this.$element.removeClass("ms-basic-view").addClass("ms-scale-view"),this.controller.renderCallback(this.__update,this)},MSScaleView.extend(MSFadeView);var p=MSScaleView.prototype,_super=MSFadeView.prototype;p.__updateSlides=function(slide,distance){var value=Math.abs(distance/this[this.__dimension]);1-value<=0?slide.$element.fadeTo(0,0).css("visibility","hidden"):slide.$element.fadeTo(0,1-value).css("visibility","").css(window._jcsspfx+"Transform","perspective(2000px) translateZ("+value*(distance<0?-.5:.5)*300+"px)")},p.create=function(index){_super.create.call(this,index),this.controller.options.minValidDist=.03},MSSlideController.registerView("scale",MSScaleView)}(jQuery),function(){"use strict";var perspective=2e3;window.MSFocusView=function(options){MSWaveView.call(this,options),this.$element.removeClass("ms-wave-view").addClass("ms-focus-view"),this.options.centerSpace=this.options.centerSpace||1},MSFocusView.extend(MSWaveView),MSFocusView._3dreq=!0,MSFocusView._fallback=MSFadeBasicView;var p=MSFocusView.prototype;MSWaveView.prototype;p.__calcview=function(z,w){return w/2*z/(z+perspective)*(z+perspective)/perspective},p.__updateSlidesHoriz=function(slide,distance){var value=Math.abs(100*distance/this.__width);value=15*-Math.min(value,100),slide.$element.css(window._csspfx+"transform","translateZ("+value+"px) rotateY(0.01deg) translateX("+(distance<0?1:-1)*(-this.__calcview(value,this.__width)*this.options.centerSpace)+"px)")},p.__updateSlidesVertic=function(slide,distance){var value=Math.abs(100*distance/this.__width);value=15*-Math.min(value,100),slide.$element.css(window._csspfx+"transform","translateZ("+value+"px) rotateY(0.01deg) translateY("+(distance<0?1:-1)*(-this.__calcview(value,this.__width)*this.options.centerSpace)+"px)")},MSSlideController.registerView("focus",MSFocusView)}(),function(){window.MSPartialWaveView=function(options){MSWaveView.call(this,options),this.$element.removeClass("ms-wave-view").addClass("ms-partial-wave-view")},MSPartialWaveView.extend(MSWaveView),MSPartialWaveView._3dreq=!0,MSPartialWaveView._fallback=MSFadeBasicView;var p=MSPartialWaveView.prototype;MSWaveView.prototype;p.__updateSlidesHoriz=function(slide,distance){var value=Math.abs(100*distance/this.__width);slide.$bg_img.css("opacity",(100-Math.abs(120*distance/this.__width/3))/100),slide.$element.css(window._csspfx+"transform","translateZ("+3*-value+"px) rotateY(0.01deg) translateX("+.75*distance+"px)")},p.__updateSlidesVertic=function(slide,distance){var value=Math.abs(100*distance/this.__width);slide.$bg_img.css("opacity",(100-Math.abs(120*distance/this.__width/3))/100),slide.$element.css(window._csspfx+"transform","translateZ("+3*-value+"px) rotateY(0.01deg) translateY("+.75*distance+"px)")},MSSlideController.registerView("partialWave",MSPartialWaveView)}(),function($){"use strict";var BaseControl=function(){this.options={prefix:"ms-",autohide:!0,overVideo:!0}},p=BaseControl.prototype;p.slideAction=function(){},p.setup=function(){this.cont=this.options.insertTo?$(this.options.insertTo):this.slider.$controlsCont,this.options.overVideo||this._hideOnvideoStarts(),this.options.hideUnder&&($(window).bind("resize",{that:this},this.onResize),this.onResize())},p.onResize=function(event){var that=event&&event.data.that||this,w=window.innerWidth;w<=that.options.hideUnder&&!that.detached?(that.$element.css("display","none"),that.detached=!0,that.onDetach&&that.onDetach()):w>=that.options.hideUnder&&that.detached&&(that.detached=!1,that.$element.css("display",""),that.visible(),that.onAppend&&that.onAppend())},p.create=function(){var that=this;this.options.autohide&&!window._touch&&(this.hide(!0),this.slider.$controlsCont.mouseenter(function(){that._disableAH||that.mdown||that.visible(),that.mleave=!1}).mouseleave(function(){that.mleave=!0,that.mdown||that.hide()}).mousedown(function(){that.mdown=!0}),$(document).mouseup(function(){that.mdown&&that.mleave&&that.hide(),that.mdown=!1}))},p._hideOnvideoStarts=function(){var that=this;slider.api.addEventListener(MSSliderEvent.VIDEO_PLAY,function(){that._disableAH=!0,that.hide()}),slider.api.addEventListener(MSSliderEvent.VIDEO_CLOSE,function(){that._disableAH=!1,that.visible()})},p.hide=function(fast){fast?this.$element.css("opacity",0):CTween.fadeOut(this.$element,400,!1),this.$element.addClass("ms-ctrl-hide")},p.visible=function(){this.detached||(CTween.fadeIn(this.$element,400),this.$element.removeClass("ms-ctrl-hide"))},p.destroy=function(){this.options.hideUnder&&$(window).unbind("resize",this.onResize)},window.BaseControl=BaseControl}(jQuery),function($){"use strict";var MSArrows=function(options){BaseControl.call(this),$.extend(this.options,options)};MSArrows.extend(BaseControl);var p=MSArrows.prototype,_super=BaseControl.prototype;p.setup=function(){var that=this;_super.setup.call(this),this.$next=$("<div></div>").addClass(this.options.prefix+"nav-next").appendTo(this.cont).bind("click",function(){that.slider.options.loop||that.slider.api.index()!==that.slider.api.count()-1?that.slider.api.next():that.slider.view.controller.bounce(10)}),this.$prev=$("<div></div>").addClass(this.options.prefix+"nav-prev").appendTo(this.cont).bind("click",function(){that.slider.options.loop||0!==that.slider.api.index()?that.slider.api.previous():that.slider.view.controller.bounce(-10)})},p.hide=function(fast){if(fast)return this.$prev.css("opacity",0),void this.$next.css("opacity",0);this.options.dontFade?(this.$prev.css("opacity",0),this.$next.css("opacity",0)):(CTween.fadeOut(this.$prev,400,!1),CTween.fadeOut(this.$next,400,!1)),this.$prev.addClass("ms-ctrl-hide"),this.$next.addClass("ms-ctrl-hide")},p.visible=function(){this.options.dontFade?(this.$prev.css("opacity",1),this.$next.css("opacity",1)):(CTween.fadeIn(this.$prev,400),CTween.fadeIn(this.$next,400)),this.$prev.removeClass("ms-ctrl-hide"),this.$next.removeClass("ms-ctrl-hide")},p.destroy=function(){this.$next.remove(),this.$prev.remove()},window.MSArrows=MSArrows,MSSlideController.registerControl("arrows",MSArrows)}(jQuery),function($){"use strict";var MSThumblist=function(options){BaseControl.call(this),this.options.dir="h",this.options.wheel="v"===options.dir,this.options.arrows=!0,this.options.speed=17,this.options.align=null,this.options.inset=!1,this.options.margin=10,this.options.space=10,this.options.width=100,this.options.height=100,this.options.type="thumbs",$.extend(this.options,options),this.thumbs=[],this.index_count=0,this.__dimen="h"===this.options.dir?"width":"height",this.__alignsize="h"===this.options.dir?"height":"width",this.__jdimen="h"===this.options.dir?"outerWidth":"outerHeight",this.__pos="h"===this.options.dir?"left":"top",
this.click_enable=!0};MSThumblist.extend(BaseControl);var p=MSThumblist.prototype,_super=BaseControl.prototype;p.setup=function(){if(this.$element=$("<div></div>").addClass(this.options.prefix+"thumb-list"),"tabs"===this.options.type&&this.$element.addClass(this.options.prefix+"tabs"),this.$element.addClass("ms-dir-"+this.options.dir),_super.setup.call(this),this.slider.$controlsCont===this.cont?this.$element.appendTo(this.slider.$element):this.$element.appendTo(this.cont),this.$thumbscont=$("<div></div>").addClass("ms-thumbs-cont").appendTo(this.$element),this.options.arrows){var that=this;this.$fwd=$("<div></div>").addClass("ms-thumblist-fwd").appendTo(this.$element).click(function(){that.controller.push(-15)}),this.$bwd=$("<div></div>").addClass("ms-thumblist-bwd").appendTo(this.$element).click(function(){that.controller.push(15)})}if(!this.options.insetTo&&this.options.align){var align=this.options.align;this.options.inset?this.$element.css(align,this.options.margin):(this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this),this.align()),"v"===this.options.dir?this.$element.width(this.options.width):this.$element.height(this.options.height)}},p.onAppend=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.onDetach=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.align=function(){if(!this.detached){var align=this.options.align,pos=this.slider.reserveSpace(align,this.options[this.__alignsize]+2*this.options.margin);this.$element.css(align,-pos-this.options[this.__alignsize]-this.options.margin)}},p.slideAction=function(slide){var thumb_ele=$(slide.$element.find(".ms-thumb")),that=this,thumb_frame=$("<div></div>").addClass("ms-thumb-frame").append(thumb_ele).append($('<div class="ms-thumb-ol"></div>')).bind("click",function(){that.changeSlide(thumb_frame)});this.options.align&&thumb_frame.width(this.options.width).height(this.options.height).css("margin-"+("v"===this.options.dir?"bottom":"right"),this.options.space),thumb_frame[0].index=this.index_count++,this.$thumbscont.append(thumb_frame),$.browser.msie&&thumb_ele.on("dragstart",function(event){event.preventDefault()}),this.thumbs.push(thumb_frame)},p.create=function(){_super.create.call(this),this.__translate_end=window._css3d?" translateZ(0px)":"",this.controller=new Controller(0,0,{snappingMinSpeed:2,friction:(100-.5*this.options.speed)/100}),this.controller.renderCallback("h"===this.options.dir?this._hMove:this._vMove,this);var that=this;this.resize_listener=function(){that.__resize()},$(window).bind("resize",this.resize_listener),this.thumbSize=this.thumbs[0][this.__jdimen](!0),this.setupSwipe(),this.__resize();that=this;this.options.wheel&&(this.wheellistener=function(event){var e=window.event||event.orginalEvent||event,delta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return that.controller.push(10*-delta),!1},$.browser.mozilla?this.$element[0].addEventListener("DOMMouseScroll",this.wheellistener):this.$element.bind("mousewheel",this.wheellistener)),this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,this.update,this),this.cindex=this.slider.api.index(),this.select(this.thumbs[this.cindex])},p._hMove=function(controller,value){this.__contPos=value,window._cssanim?this.$thumbscont[0].style[window._jcsspfx+"Transform"]="translateX("+-value+"px)"+this.__translate_end:this.$thumbscont[0].style.left=-value+"px"},p._vMove=function(controller,value){this.__contPos=value,window._cssanim?this.$thumbscont[0].style[window._jcsspfx+"Transform"]="translateY("+-value+"px)"+this.__translate_end:this.$thumbscont[0].style.top=-value+"px"},p.setupSwipe=function(){this.swipeControl=new averta.TouchSwipe(this.$element),this.swipeControl.swipeType="h"===this.options.dir?"horizontal":"vertical";var that=this;"h"===this.options.dir?this.swipeControl.onSwipe=function(status){that.horizSwipeMove(status)}:this.swipeControl.onSwipe=function(status){that.vertSwipeMove(status)}},p.vertSwipeMove=function(status){if(!this.dTouch){var phase=status.phase;if("start"===phase)this.controller.stop();else if("move"===phase)this.controller.drag(status.moveY);else if("end"===phase||"cancel"===phase){Math.abs(status.distanceY/status.duration*50/3)>.1?this.controller.push(-status.distanceY/status.duration*50/3):(this.click_enable=!0,this.controller.cancel())}}},p.horizSwipeMove=function(status){if(!this.dTouch){var phase=status.phase;if("start"===phase)this.controller.stop(),this.click_enable=!1;else if("move"===phase)this.controller.drag(status.moveX);else if("end"===phase||"cancel"===phase){Math.abs(status.distanceX/status.duration*50/3)>.1?this.controller.push(-status.distanceX/status.duration*50/3):(this.click_enable=!0,this.controller.cancel())}}},p.update=function(){var nindex=this.slider.api.index();this.cindex!==nindex&&(null!=this.cindex&&this.unselect(this.thumbs[this.cindex]),this.cindex=nindex,this.select(this.thumbs[this.cindex]),this.dTouch||this.updateThumbscroll())},p.updateThumbscroll=function(){var pos=this.thumbSize*this.cindex;if(this.controller.value==NaN&&(this.controller.value=0),pos-this.controller.value<0)this.controller.gotoSnap(this.cindex,!0);else if(pos+this.thumbSize-this.controller.value>this.$element[this.__dimen]()){var first_snap=this.cindex-Math.floor(this.$element[this.__dimen]()/this.thumbSize)+1;this.controller.gotoSnap(first_snap,!0)}else;},p.changeSlide=function(thumb){this.click_enable&&this.cindex!==thumb[0].index&&this.slider.api.gotoSlide(thumb[0].index)},p.unselect=function(ele){ele.removeClass("ms-thumb-frame-selected")},p.select=function(ele){ele.addClass("ms-thumb-frame-selected")},p.__resize=function(){var size=this.$element[this.__dimen]();if(this.ls!==size){this.ls=size,this.thumbSize=this.thumbs[0][this.__jdimen](!0);var len=this.slider.api.count()*this.thumbSize;this.$thumbscont[0].style[this.__dimen]=len+"px",len<=size?(this.dTouch=!0,this.controller.stop(),this.$thumbscont[0].style[this.__pos]=.5*(size-len)+"px",this.$thumbscont[0].style[window._jcsspfx+"Transform"]=""):(this.dTouch=!1,this.click_enable=!0,this.$thumbscont[0].style[this.__pos]="",this.controller._max_value=len-size,this.controller.options.snapsize=this.thumbSize,this.updateThumbscroll())}},p.destroy=function(){this.options.wheel&&($.browser.mozilla?this.$element[0].removeEventListener("DOMMouseScroll",this.wheellistener):this.$element.unbind("mousewheel",this.wheellistener),this.wheellistener=null),$(window).unbind("resize",this.resize_listener),this.$element.remove(),this.slider.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this),_super.destroy()},window.MSThumblist=MSThumblist,MSSlideController.registerControl("thumblist",MSThumblist)}(jQuery),function($){"use strict";var MSBulltes=function(options){BaseControl.call(this),this.options.dir="h",this.options.inset=!0,this.options.margin=10,$.extend(this.options,options),this.bullets=[]};MSBulltes.extend(BaseControl);var p=MSBulltes.prototype,_super=BaseControl.prototype;p.setup=function(){if(_super.setup.call(this),this.$element=$("<div></div>").addClass(this.options.prefix+"bullets").addClass("ms-dir-"+this.options.dir).appendTo(this.cont),this.$bullet_cont=$("<div></div>").addClass("ms-bullets-count").appendTo(this.$element),!this.options.insetTo&&this.options.align){this.$element.css({top:"auto",bottom:"auto"});var align=this.options.align;this.options.inset&&this.$element.css(align,this.options.margin)}},p.create=function(){_super.create.call(this);var that=this;this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,this.update,this),this.cindex=this.slider.api.index();for(var i=0;i<this.slider.api.count();++i){var bullet=$("<div></div>").addClass("ms-bullet");bullet[0].index=i,bullet.on("click",function(){that.changeSlide(this.index)}),this.$bullet_cont.append(bullet),this.bullets.push(bullet)}"h"===this.options.dir&&this.$element.width(bullet.outerWidth(!0)*this.slider.api.count()),this.select(this.bullets[this.cindex])},p.update=function(){var nindex=this.slider.api.index();this.cindex!==nindex&&(null!=this.cindex&&this.unselect(this.bullets[this.cindex]),this.cindex=nindex,this.select(this.bullets[this.cindex]))},p.changeSlide=function(index){this.cindex!==index&&this.slider.api.gotoSlide(index)},p.unselect=function(ele){ele.removeClass("ms-bullet-selected")},p.select=function(ele){ele.addClass("ms-bullet-selected")},p.destroy=function(){this.$element.remove()},window.MSBulltes=MSBulltes,MSSlideController.registerControl("bullets",MSBulltes)}(jQuery),function($){"use strict";var MSScrollbar=function(options){BaseControl.call(this),this.options.dir="h",this.options.autohide=!0,this.options.width=4,this.options.color="#3D3D3D",this.options.margin=10,$.extend(this.options,options),this.__dimen="h"===this.options.dir?"width":"height",this.__jdimen="h"===this.options.dir?"outerWidth":"outerHeight",this.__pos="h"===this.options.dir?"left":"top",this.__translate_end=window._css3d?" translateZ(0px)":"",this.__translate_start="h"===this.options.dir?" translateX(":"translateY("};MSScrollbar.extend(BaseControl);var p=MSScrollbar.prototype,_super=BaseControl.prototype;p.setup=function(){if(this.$element=$("<div></div>").addClass(this.options.prefix+"sbar").addClass("ms-dir-"+this.options.dir),_super.setup.call(this),this.slider.$controlsCont===this.cont?this.$element.appendTo(this.slider.$element):this.$element.appendTo(this.cont),this.$bar=$("<div></div>").addClass(this.options.prefix+"bar").appendTo(this.$element),this.slider.options.loop&&(console.log("WARNING, MSScrollbar cannot work with looped slider."),this.disable=!0,this.$element.remove()),"v"===this.options.dir?this.$bar.width(this.options.width):this.$bar.height(this.options.width),this.$bar.css("background-color",this.options.color),!this.options.insetTo&&this.options.align){"v"===this.options.dir?this.$element.css({right:"auto",left:"auto"}):this.$element.css({top:"auto",bottom:"auto"});var align=this.options.align;this.options.inset?this.$element.css(align,this.options.margin):(this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this),this.align())}},p.onAppend=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.onDetach=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.align=function(){if(!this.detached){var align=this.options.align,pos=this.slider.reserveSpace(align,2*this.options.margin+this.options.width);this.$element.css(align,-pos-this.options.margin-this.options.width)}},p.create=function(){if(!this.disable){this.scroller=this.slider.api.scroller,this.slider.api.view.addEventListener(MSViewEvents.SCROLL,this._update,this),this.slider.api.addEventListener(MSSliderEvent.RESIZE,this._resize,this),this._resize(),this.options.autohide&&this.$bar.css("opacity","0")}},p._resize=function(){this.vdimen=this.$element[this.__dimen](),this.bar_dimen=this.slider.api.view["__"+this.__dimen]*this.vdimen/this.scroller._max_value,this.$bar[this.__dimen](this.bar_dimen)},p._update=function(){var value=this.scroller.value*(this.vdimen-this.bar_dimen)/this.scroller._max_value;if(this.lvalue!==value){if(this.lvalue=value,this.options.autohide){clearTimeout(this.hto),this.$bar.css("opacity","1");var that=this;this.hto=setTimeout(function(){that.$bar.css("opacity","0")},150)}value<0?this.$bar[0].style[this.__dimen]=this.bar_dimen+value+"px":(value>this.vdimen-this.bar_dimen&&(this.$bar[0].style[this.__dimen]=this.vdimen-value+"px"),window._cssanim?this.$bar[0].style[window._jcsspfx+"Transform"]=this.__translate_start+value+"px)"+this.__translate_end:this.$bar[0].style[this.__pos]=value+"px")}},p.destroy=function(){this.slider.api.view.removeEventListener(MSViewEvents.SCROLL,this._update,this),this.slider.api.removeEventListener(MSSliderEvent.RESIZE,this._resize,this),this.slider.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this),this.$element.remove(),_super.destroy()},window.MSScrollbar=MSScrollbar,MSSlideController.registerControl("scrollbar",MSScrollbar)}(jQuery),function($){"use strict";var MSTimerbar=function(options){BaseControl.call(this),this.options.autohide=!1,this.options.width=4,this.options.color="#FFFFFF",this.options.inset=!0,$.extend(this.options,options)};MSTimerbar.extend(BaseControl);var p=MSTimerbar.prototype,_super=BaseControl.prototype;p.setup=function(){if(_super.setup.call(this),this.$element=$("<div></div>").addClass(this.options.prefix+"timerbar"),_super.setup.call(this),this.slider.$controlsCont===this.cont?this.$element.appendTo(this.slider.$element):this.$element.appendTo(this.cont),this.$bar=$("<div></div>").addClass("ms-time-bar").appendTo(this.$element),"v"===this.options.dir?this.$bar.width(this.options.width):this.$bar.height(this.options.width),this.$bar.css("background-color",this.options.color),!this.options.insetTo&&this.options.align){this.$element.css({top:"auto",bottom:"auto"});var align=this.options.align;this.options.inset?this.$element.css(align,this.options.margin):(this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this),this.align())}},p.onAppend=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.onDetach=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.align=function(){if(!this.detached){var align=this.options.align,pos=this.slider.reserveSpace(align,2*this.options.margin+this.options.width);this.$element.css(align,-pos-this.options.margin-this.options.width)}},p.create=function(){_super.create.call(this),this.slider.api.addEventListener(MSSliderEvent.WATING,this._update,this),this._update()},p._update=function(){this.$bar[0].style.width=this.slider.api._delayProgress+"%"},p.destroy=function(){this.slider.api.removeEventListener(MSSliderEvent.WATING,this._update,this),this.$element.remove()},window.MSTimerbar=MSTimerbar,MSSlideController.registerControl("timebar",MSTimerbar)}(jQuery),function($){"use strict";var MSCircleTimer=function(options){BaseControl.call(this),this.options.color="#A2A2A2",this.options.stroke=10,this.options.radius=4,this.options.autohide=!1,$.extend(this.options,options)};MSCircleTimer.extend(BaseControl);var p=MSCircleTimer.prototype,_super=BaseControl.prototype;p.setup=function(){if(_super.setup.call(this),this.$element=$("<div></div>").addClass(this.options.prefix+"ctimer").appendTo(this.cont),this.$canvas=$("<canvas></canvas>").addClass("ms-ctimer-canvas").appendTo(this.$element),this.$bar=$("<div></div>").addClass("ms-ctimer-bullet").appendTo(this.$element),!this.$canvas[0].getContext)return this.destroy(),void(this.disable=!0);this.ctx=this.$canvas[0].getContext("2d"),this.prog=0,this.__w=2*(this.options.radius+this.options.stroke/2),this.$canvas[0].width=this.__w,this.$canvas[0].height=this.__w},p.create=function(){if(!this.disable){_super.create.call(this),this.slider.api.addEventListener(MSSliderEvent.WATING,this._update,this);var that=this;this.$element.click(function(){that.slider.api.paused?that.slider.api.resume():that.slider.api.pause()}),this._update()}},p._update=function(){var that=this;$(this).stop(!0).animate({prog:.01*this.slider.api._delayProgress},{duration:200,step:function(){that._draw()}})},p._draw=function(){this.ctx.clearRect(0,0,this.__w,this.__w),this.ctx.beginPath(),this.ctx.arc(.5*this.__w,.5*this.__w,this.options.radius,1.5*Math.PI,1.5*Math.PI+2*Math.PI*this.prog,!1),this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=this.options.stroke,this.ctx.stroke()},p.destroy=function(){this.disable||($(this).stop(!0),this.slider.api.removeEventListener(MSSliderEvent.WATING,this._update,this),this.$element.remove())},window.MSCircleTimer=MSCircleTimer,MSSlideController.registerControl("circletimer",MSCircleTimer)}(jQuery),function($){"use strict";window.MSLightbox=function(options){BaseControl.call(this,options),this.options.autohide=!1,$.extend(this.options,options),this.data_list=[]},MSLightbox.fadeDuratation=400,MSLightbox.extend(BaseControl);var p=MSLightbox.prototype,_super=BaseControl.prototype;p.setup=function(){_super.setup.call(this),this.$element=$("<div></div>").addClass(this.options.prefix+"lightbox-btn").appendTo(this.cont)},p.slideAction=function(slide){$("<div></div>").addClass(this.options.prefix+"lightbox-btn").appendTo(slide.$element).append($(slide.$element.find(".ms-lightbox")))},p.create=function(){_super.create.call(this)},MSSlideController.registerControl("lightbox",MSLightbox)}(jQuery),function($){"use strict";window.MSSlideInfo=function(options){BaseControl.call(this,options),this.options.autohide=!1,this.options.align=null,this.options.inset=!1,this.options.margin=10,this.options.size=100,this.options.dir="h",$.extend(this.options,options),this.data_list=[]},MSSlideInfo.fadeDuratation=400,MSSlideInfo.extend(BaseControl);var p=MSSlideInfo.prototype,_super=BaseControl.prototype;p.setup=function(){if(this.$element=$("<div></div>").addClass(this.options.prefix+"slide-info").addClass("ms-dir-"+this.options.dir),_super.setup.call(this),this.slider.$controlsCont===this.cont?this.$element.appendTo(this.slider.$element):this.$element.appendTo(this.cont),!this.options.insetTo&&this.options.align){var align=this.options.align;this.options.inset?this.$element.css(align,this.options.margin):(this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this),this.align()),"v"===this.options.dir?this.$element.width(this.options.size):this.$element.css("min-height",this.options.size)}},p.onAppend=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.onDetach=function(){this.options.insetTo||!this.options.align||this.options.inset||this.slider._realignControls()},p.align=function(){if(!this.detached){var align=this.options.align,pos=this.slider.reserveSpace(align,this.options.size+2*this.options.margin);this.$element.css(align,-pos-this.options.size-this.options.margin)}},p.slideAction=function(slide){var info_ele=$(slide.$element.find(".ms-info"));info_ele.detach(),this.data_list[slide.index]=info_ele},p.create=function(){_super.create.call(this),this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,this.update,this),this.cindex=this.slider.api.index(),this.switchEle(this.data_list[this.cindex])},p.update=function(){var nindex=this.slider.api.index();this.switchEle(this.data_list[nindex]),this.cindex=nindex},p.switchEle=function(ele){if(this.current_ele){var that=this;return this.current_ele[0].tween&&this.current_ele[0].tween.stop(!0),this.current_ele[0].tween=CTween.animate(this.current_ele,MSSlideInfo.fadeDuratation,{opacity:0},{complete:function(){this.detach(),this[0].tween=null},target:this.current_ele}),clearTimeout(this.tou),void(this.tou=setTimeout(function(){that.__show(ele)},MSSlideInfo.fadeDuratation+200))}this.__show(ele)},p.__show=function(ele){ele.appendTo(this.$element).css("opacity","0"),CTween.fadeIn(ele,MSSlideInfo.fadeDuratation),ele[0].tween&&ele[0].tween.stop(!0),this.current_ele=ele},p.destroy=function(){clearTimeout(this.tou),this.current_ele&&this.current_ele[0].tween.stop("true"),this.$element.remove(),this.slider.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE,this.align,this)},MSSlideController.registerControl("slideinfo",MSSlideInfo)}(jQuery),function(){window.MSGallery=function(id,slider){this.id=id,this.slider=slider,this.telement=$("#"+id),this.botcont=$("<div></div>").addClass("ms-gallery-botcont").appendTo(this.telement),this.thumbcont=$("<div></div>").addClass("ms-gal-thumbcont hide-thumbs").appendTo(this.botcont),this.playbtn=$("<div></div>").addClass("ms-gal-playbtn").appendTo(this.botcont),this.thumbtoggle=$("<div></div>").addClass("ms-gal-thumbtoggle").appendTo(this.botcont),slider.control("thumblist",{insertTo:this.thumbcont,autohide:!1,dir:"h"}),slider.control("slidenum",{insertTo:this.botcont,autohide:!1}),slider.control("slideinfo",{insertTo:this.botcont,autohide:!1}),slider.control("timebar",{insertTo:this.botcont,autohide:!1}),slider.control("bullets",{insertTo:this.botcont,autohide:!1})};var p=MSGallery.prototype;p._init=function(){var that=this;this.slider.api.paused||this.playbtn.addClass("btn-pause"),this.playbtn.click(function(){that.slider.api.paused?(that.slider.api.resume(),that.playbtn.addClass("btn-pause")):(that.slider.api.pause(),that.playbtn.removeClass("btn-pause"))}),this.thumbtoggle.click(function(){that.vthumbs?(that.thumbtoggle.removeClass("btn-hide"),that.vthumbs=!1,that.thumbcont.addClass("hide-thumbs")):(that.thumbtoggle.addClass("btn-hide"),that.thumbcont.removeClass("hide-thumbs"),that.vthumbs=!0)})},p.setup=function(){var that=this;$(document).ready(function(){that._init()})}}(),
/*!
   JW Player version 8.5.6
   Copyright (c) 2018, JW Player, All Rights Reserved
   This source code and its use and distribution is subject to the terms
   and conditions of the applicable license agreement.
   https://www.jwplayer.com/tos/
   This product includes portions of other software. For the full text of licenses, see
   https://ssl.p.jwpcdn.com/player/v/8.5.6/notice.txt
*/
window.jwplayer=function(t){function e(e){for(var n,i,o=e[0],u=e[1],a=0,s=[];a<o.length;a++)i=o[a],r[i]&&s.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(c&&c(e);s.length;)s.shift()()}function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}var n={},r={17:0};i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t]=[e,i]});e.push(n[2]=o);var u=document.getElementsByTagName("head")[0],a=document.createElement("script");a.charset="utf-8",a.timeout=35,i.nc&&a.setAttribute("nonce",i.nc),a.src=i.p+""+({0:"related",1:"provider.html5",2:"jwplayer.controls",3:"polyfills.intersection-observer",4:"jwplayer.core",5:"jwplayer.core.controls",6:"jwplayer.core.controls.polyfills",7:"jwplayer.core.controls.html5",8:"jwplayer.core.controls.polyfills.html5",9:"provider.flash",10:"provider.hlsjs",11:"provider.shaka",12:"polyfills.webvtt",13:"jwplayer.vr",14:"provider.airplay",15:"provider.cast",16:"vttparser"}[t]||t)+".js";var c=setTimeout(function(){s({type:"timeout",target:a})},35e3);function s(e){a.onerror=a.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,u=new Error("Loading chunk "+t+" failed.\n("+i+": "+o+")");u.type=i,u.request=o,n[1](u)}r[t]=void 0}}a.onerror=a.onload=s,u.appendChild(a)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonpjwplayer=window.webpackJsonpjwplayer||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var c=u;return i(i.s=58)}([function(t,e,n){"use strict";n.d(e,"i",function(){return C}),n.d(e,"A",function(){return x}),n.d(e,"F",function(){return P}),n.d(e,"l",function(){return _}),n.d(e,"k",function(){return M}),n.d(e,"a",function(){return F}),n.d(e,"b",function(){return R}),n.d(e,"G",function(){return B}),n.d(e,"n",function(){return Q}),n.d(e,"H",function(){return X}),n.d(e,"e",function(){return W}),n.d(e,"J",function(){return U}),n.d(e,"m",function(){return J}),n.d(e,"h",function(){return K}),n.d(e,"p",function(){return Y}),n.d(e,"c",function(){return G}),n.d(e,"C",function(){return et}),n.d(e,"I",function(){return it}),n.d(e,"q",function(){return at}),n.d(e,"g",function(){return ct}),n.d(e,"j",function(){return st}),n.d(e,"D",function(){return lt}),n.d(e,"w",function(){return dt}),n.d(e,"t",function(){return gt}),n.d(e,"v",function(){return mt}),n.d(e,"x",function(){return yt}),n.d(e,"s",function(){return bt}),n.d(e,"u",function(){return jt}),n.d(e,"r",function(){return wt}),n.d(e,"y",function(){return Ot}),n.d(e,"o",function(){return kt}),n.d(e,"d",function(){return xt}),n.d(e,"E",function(){return St}),n.d(e,"B",function(){return Pt}),n.d(e,"z",function(){return Et});var r=n(16),i={},o=Array.prototype,u=Object.prototype,a=Function.prototype,c=o.slice,s=o.concat,l=u.toString,f=u.hasOwnProperty,d=o.map,p=o.reduce,h=o.forEach,v=o.filter,g=o.every,m=o.some,y=o.indexOf,b=Array.isArray,j=Object.keys,w=a.bind,O=window.isFinite,C=function(t,e,n){var r=void 0,o=void 0;if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t)===i)return}else{var u=ot(t);for(r=0,o=u.length;r<o;r++)if(e.call(n,t[u[r]],u[r],t)===i)return}return t},k=C,x=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(C(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)},S=x,P=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return r&&(e=G(e,r)),i?t.reduce(e,n):t.reduce(e);if(C(t,function(t,o,u){i?n=e.call(r,n,t,o,u):(n=t,i=!0)}),!i)throw new TypeError("Reduce of empty array with no initial value");return n},T=P,E=P,_=function(t,e,n){var r=void 0;return R(t,function(t,i,o){if(e.call(n,t,i,o))return r=t,!0}),r},A=_,M=function(t,e,n){var r=[];return null==t?r:v&&t.filter===v?t.filter(e,n):(C(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},N=M,F=function(t,e,n){e||(e=kt);var r=!0;return null==t?r:g&&t.every===g?t.every(e,n):(C(t,function(t,o,u){if(!(r=r&&e.call(n,t,o,u)))return i}),!!r)},I=F,R=function(t,e,n){e||(e=kt);var r=!1;return null==t?r:m&&t.some===m?t.some(e,n):(C(t,function(t,o,u){if(r||(r=e.call(n,t,o,u)))return i}),!!r)},L=R,B=function(t){return null==t?0:t.length===+t.length?t.length:ot(t).length},D=function(t,e){var n=void 0;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},z=function(t){return null==t?kt:gt(t)?t:St(t)},q=function(t){return function(e,n,r){var i={};return n=z(n),C(e,function(o,u){var a=n.call(r,o,u,e);t(i,a,o)}),i}},Q=q(function(t,e,n){Ct(t,e)?t[e].push(n):t[e]=[n]}),V=q(function(t,e,n){t[e]=n}),X=function(t,e,n,r){for(var i=(n=z(n)).call(r,e),o=0,u=t.length;o<u;){var a=o+u>>>1;n.call(r,t[a])<i?o=a+1:u=a}return o},W=function(t,e){return null!=t&&(t.length!==+t.length&&(t=ut(t)),Y(t,e)>=0)},H=W,U=function(t,e){return M(t,Pt(e))},J=function(t,e){return _(t,Pt(e))},K=function(t){var e=s.apply(o,c.call(arguments,1));return M(t,function(t){return!W(e,t)})},Y=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return t[r=X(t,e)]===e?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r<i;r++)if(t[r]===e)return r;return-1},$=function(){},G=function(t,e){var n=void 0,r=void 0;if(w&&t.bind===w)return w.apply(t,c.call(arguments,1));if(!gt(t))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(c.call(arguments)));$.prototype=t.prototype;var i=new $;$.prototype=null;var o=t.apply(i,n.concat(c.call(arguments)));return Object(o)===o?o:i}},Z=function(t){var e=c.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;i<o;i++)Ct(r[i],"partial")&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},tt=Z(D,2),et=function(t,e){var n={};return e||(e=kt),function(){var r=e.apply(this,arguments);return Ct(n,r)?n[r]:n[r]=t.apply(this,arguments)}},nt=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},rt=Z(nt,{partial:Z},1),it=function(t,e,n){var r=void 0,i=void 0,o=void 0,u=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:Tt(),u=null,o=t.apply(r,i),r=i=null};return function(){a||!1!==n.leading||(a=Tt);var s=e-(Tt-a);return r=this,i=arguments,s<=0?(clearTimeout(u),u=null,a=Tt,o=t.apply(r,i),r=i=null):u||!1===n.trailing||(u=setTimeout(c,s)),o}},ot=function(t){if(!dt(t))return[];if(j)return j(t);var e=[];for(var n in t)Ct(t,n)&&e.push(n);return e},ut=function(t){for(var e=ot(t),n=ot.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},at=function(t){for(var e={},n=ot(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},ct=function(t){return C(c.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},st=Object.assign||function(t){return C(c.call(arguments,1),function(e){if(e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t},lt=function(t){var e={},n=s.apply(o,c.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},ft=b||function(t){return"[object Array]"==l.call(t)},dt=function(t){return t===Object(t)},pt=[];C(["Function","String","Number","Date","RegExp"],function(t){pt[t]=function(e){return l.call(e)=="[object "+t+"]"}}),pt.Function=function(t){return"function"==typeof t};var ht=pt.Date,vt=pt.RegExp,gt=pt.Function,mt=pt.Number,yt=pt.String,bt=function(t){return O(t)&&!jt(parseFloat(t))},jt=function(t){return mt(t)&&t!=+t},wt=function(t){return!0===t||!1===t||"[object Boolean]"==l.call(t)},Ot=function(t){return void 0===t},Ct=function(t,e){return f.call(t,e)},kt=function(t){return t},xt=function(t){return function(){return t}},St=function(t){return function(e){return e[t]}},Pt=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},Tt=r.a,Et=function(t){return mt(t)&&!jt(t)};e.f={after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},all:F,any:R,before:D,bind:G,clone:function(t){return dt(t)?ft(t)?t.slice():st({},t):t},collect:S,compact:function(t){return M(t,kt)},constant:xt,contains:W,defaults:ct,defer:rt,delay:nt,detect:A,difference:K,each:C,every:I,extend:st,filter:M,find:_,findWhere:J,foldl:T,forEach:k,groupBy:Q,has:Ct,identity:kt,include:H,indexBy:V,indexOf:Y,inject:E,invert:at,isArray:ft,isBoolean:wt,isDate:ht,isFinite:bt,isFunction:gt,isNaN:jt,isNull:function(t){return null===t},isNumber:mt,isObject:dt,isRegExp:vt,isString:yt,isUndefined:Ot,isValidNumber:Et,keys:ot,last:function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},map:x,matches:Pt,max:function(t,e,n){if(!e&&ft(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return C(t,function(t,o,u){var a=e?e.call(n,t,o,u):t;a>i&&(r=t,i=a)}),r},memoize:et,now:Tt,omit:function(t){var e={},n=s.apply(o,c.call(arguments,1));for(var r in t)W(n,r)||(e[r]=t[r]);return e},once:tt,partial:Z,pick:lt,pluck:function(t,e){return x(t,St(e))},property:St,propertyOf:function(t){return null==t?function(){}:function(e){return t[e]}},reduce:P,reject:function(t,e,n){return M(t,function(t,r,i){return!e.call(n,t,r,i)},n)},result:function(t,e){if(null!=t){var n=t[e];return gt(n)?n.call(t):n}},select:N,size:B,some:L,sortedIndex:X,throttle:it,where:U,without:function(t){return K(t,c.call(arguments,1))}}},function(t,e,n){"use strict";function _(t,e,n){return n instanceof E&&n.code?n:new E(t,e,n)}function A(t,e){var n=_(T,e,t);return n.code=(t&&t.code||0)+e,n}n.d(e,"y",function(){return o}),n.d(e,"x",function(){return u}),n.d(e,"w",function(){return a}),n.d(e,"s",function(){return c}),n.d(e,"r",function(){return s}),n.d(e,"q",function(){return l}),n.d(e,"t",function(){return f}),n.d(e,"u",function(){return d}),n.d(e,"a",function(){return p}),n.d(e,"b",function(){return h}),n.d(e,"v",function(){return v}),n.d(e,"c",function(){return g}),n.d(e,"e",function(){return m}),n.d(e,"d",function(){return y}),n.d(e,"h",function(){return b}),n.d(e,"f",function(){return j}),n.d(e,"g",function(){return w}),n.d(e,"l",function(){return O}),n.d(e,"i",function(){return C}),n.d(e,"j",function(){return k}),n.d(e,"k",function(){return x}),n.d(e,"m",function(){return S}),n.d(e,"n",function(){return P}),n.d(e,"o",function(){return T}),n.d(e,"p",function(){return E}),n.d(e,"A",function(){return _}),n.d(e,"z",function(){return A});var r=n(0),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=1e5,u=100001,a=100002,c=100011,s=100012,l=100013,f=101e3,d=102e3,p=200001,h=202e3,v=104e3,g=203e3,m=203640,y=204e3,b=210001,j=21e4,w=214e3,O="cantPlayVideo",C="badConnection",k="cantLoadPlayer",x="cantPlayInBrowser",S="liveStreamDown",P="protectedContent",T="technicalError",E=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code=Object(r.z)(n)?n:0,this.key=e,this.sourceError=i}return i(t,null,[{key:"logMessage",value:function(t){var e=t%1e3,n=Math.floor((t-e)/1e3),r=t;return e>=400&&e<600&&(r=n+"400-"+n+"599"),"JW Player Error "+t+". For more information see https://developer.jwplayer.com/jw-player/docs/developer-guide/api/errors-reference#"+r}}]),t}()},function(t,e,n){"use strict";function o(t){return t.replace(/^\s+|\s+$/g,"")}function u(t,e,n){for(t=""+t,n=n||"0";t.length<e;)t=n+t;return t}function a(t,e){for(var n=t.attributes,r=0;r<n.length;r++)if(n[r].name&&n[r].name.toLowerCase()===e.toLowerCase())return n[r].value.toString();return""}function c(t){if(!t||"rtmp"===t.substr(0,4))return"";var e=/[(,]format=(m3u8|mpd)-/i.exec(t);return e?e[1]:(t=t.split("?")[0].split("#")[0]).lastIndexOf(".")>-1?t.substr(t.lastIndexOf(".")+1,t.length).toLowerCase():void 0}function s(t){var e=(t/60|0)%60,n=t%60;return u(t/3600|0,2)+":"+u(e,2)+":"+u(n.toFixed(3),6)}function l(t,e){if(!t)return 0;if(Object(r.z)(t))return t;var n=t.replace(",","."),o=n.slice(-1),u=n.split(":"),a=u.length,c=0;if("s"===o)c=i(n);else if("m"===o)c=60*i(n);else if("h"===o)c=3600*i(n);else if(a>1){var s=a-1;4===a&&(e&&(c=i(u[s])/e),s-=1),c+=i(u[s]),c+=60*i(u[s-1]),a>=3&&(c+=3600*i(u[s-2]))}else c=i(n);return Object(r.z)(c)?c:0}function f(t,e,n){if(Object(r.x)(t)&&"%"===t.slice(-1)){var o=i(t);return e&&Object(r.z)(e)&&Object(r.z)(o)?e*o/100:null}return l(t,n)}function d(t,e){return t.map(function(t){return e+t})}function p(t,e){return t.map(function(t){return t+e})}n.d(e,"h",function(){return o}),n.d(e,"d",function(){return u}),n.d(e,"i",function(){return a}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return s}),n.d(e,"f",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"g",function(){return p});var r=n(0),i=window.parseFloat},function(t,e,n){"use strict";n.d(e,"Ia",function(){return r}),n.d(e,"La",function(){return i}),n.d(e,"Ja",function(){return o}),n.d(e,"Na",function(){return u}),n.d(e,"Oa",function(){return a}),n.d(e,"Ka",function(){return c}),n.d(e,"Ma",function(){return s}),n.d(e,"Pa",function(){return l}),n.d(e,"s",function(){return f}),n.d(e,"u",function(){return d}),n.d(e,"t",function(){return p}),n.d(e,"n",function(){return h}),n.d(e,"q",function(){return v}),n.d(e,"Qa",function(){return g}),n.d(e,"r",function(){return m}),n.d(e,"X",function(){return y}),n.d(e,"U",function(){return b}),n.d(e,"v",function(){return j}),n.d(e,"W",function(){return w}),n.d(e,"w",function(){return O}),n.d(e,"a",function(){return C}),n.d(e,"b",function(){return k}),n.d(e,"c",function(){return x}),n.d(e,"d",function(){return S}),n.d(e,"e",function(){return P}),n.d(e,"h",function(){return T}),n.d(e,"E",function(){return E}),n.d(e,"Fa",function(){return _}),n.d(e,"O",function(){return A}),n.d(e,"B",function(){return M}),n.d(e,"A",function(){return N}),n.d(e,"D",function(){return F}),n.d(e,"p",function(){return I}),n.d(e,"Aa",function(){return R}),n.d(e,"m",function(){return L}),n.d(e,"F",function(){return B}),n.d(e,"G",function(){return D}),n.d(e,"L",function(){return z}),n.d(e,"M",function(){return q}),n.d(e,"P",function(){return Q}),n.d(e,"Ha",function(){return V}),n.d(e,"Z",function(){return X}),n.d(e,"C",function(){return W}),n.d(e,"Q",function(){return H}),n.d(e,"N",function(){return U}),n.d(e,"R",function(){return J}),n.d(e,"T",function(){return K}),n.d(e,"K",function(){return Y}),n.d(e,"J",function(){return $}),n.d(e,"H",function(){return G}),n.d(e,"I",function(){return Z}),n.d(e,"S",function(){return tt}),n.d(e,"o",function(){return et}),n.d(e,"x",function(){return nt}),n.d(e,"Ga",function(){return rt}),n.d(e,"Ba",function(){return it}),n.d(e,"Ca",function(){return ot}),n.d(e,"f",function(){return ut}),n.d(e,"g",function(){return at}),n.d(e,"Y",function(){return ct}),n.d(e,"z",function(){return st}),n.d(e,"l",function(){return lt}),n.d(e,"k",function(){return ft}),n.d(e,"Da",function(){return dt}),n.d(e,"Ea",function(){return pt}),n.d(e,"Ra",function(){return ht}),n.d(e,"y",function(){return vt}),n.d(e,"j",function(){return gt}),n.d(e,"V",function(){return mt}),n.d(e,"i",function(){return yt});var r="buffering",i="idle",o="complete",u="paused",a="playing",c="error",s="loading",l="stalled",f="drag",d="dragStart",p="dragEnd",h="click",v="doubleClick",g="tap",m="doubleTap",y="over",b="move",j="enter",w="out",O=c,C="adClick",k="adPause",x="adPlay",S="adSkipped",P="adTime",T="autostartNotAllowed",E=o,_="ready",A="seek",M="beforePlay",N="beforeComplete",F="bufferFull",I="displayClick",R="playlistComplete",L="cast",B="mediaError",D="firstFrame",z="playAttempt",q="playAttemptFailed",Q="seeked",V="setupError",X="state",W="bufferChange",H="time",U="ratechange",J="mediaType",K="volume",Y="mute",$="meta",G="levels",Z="levelsChanged",tt="visualQuality",et="controls",nt="fullscreen",rt="resize",it="playlistItem",ot="playlist",ut="audioTracks",at="audioTrackChanged",ct="playbackRateChanged",st="logoClick",lt="captionsList",ft="captionsChanged",dt="providerChanged",pt="providerFirstFrame",ht="userAction",vt="instreamClick",gt="breakpoint",mt="fullscreenchange",yt="bandwidthEstimate"},function(t,e,n){"use strict";function i(t){var e="";return t&&(t.localName?e=t.localName:t.baseName&&(e=t.baseName)),e}function o(t){var e="";return t&&(t.textContent?e=Object(r.h)(t.textContent):t.text&&(e=Object(r.h)(t.text))),e}function u(t,e){return t.childNodes[e]}function a(t){return t.childNodes?t.childNodes.length:0}n.d(e,"b",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return u}),n.d(e,"c",function(){return a});var r=n(2)},function(t,e,n){"use strict";function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void c(e.promise,t)}a(e.promise,r)}else(1===t._state?a:c)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void s(t);if("function"==typeof n)return void l((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,s(t)}catch(e){c(t,e)}var r,i}function c(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}var r=setTimeout;o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return u(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype["finally"]=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){function o(t,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(e){o(t,e)},n)}r[t]=u,0==--i&&e(r)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var i=r.length,u=0;u<r.length;u++)o(u,r[u])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var f=o;n.d(e,"b",function(){return p});var d=window.Promise||(window.Promise=f),p=d.resolve();e.a=d},function(t,e,n){"use strict";function o(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;var r=this._events||(this._events={});return(r[t]||(r[t]=[])).push({callback:e,context:n}),this}function u(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var r=0,i=this,o=function n(){r++||(i.off(t,n),e.apply(this,arguments))};return o._callback=e,this.on(t,o,n)}function a(t,e,n){if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return delete this._events,this;for(var r=t?[t]:Object.keys(this._events),i=0,o=r.length;i<o;i++){t=r[i];var u=this._events[t];if(u){var a=this._events[t]=[];if(e||n)for(var c=0,s=u.length;c<s;c++){var l=u[c];(e&&e!==l.callback&&e!==l.callback._callback||n&&n!==l.context)&&a.push(l)}a.length||delete this._events[t]}}return this}function c(t){if(!this._events)return this;var e=i.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&d(n,e,this),r&&d(r,arguments,this),this}function s(t){if(!this._events)return this;var e=i.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&d(n,e,this,t),r&&d(r,arguments,this,t),this}function f(t,e,n,i){if(!n)return!0;if("object"===(void 0===n?"undefined":r(n))){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t[e].apply(t,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var u=n.split(l),a=0,c=u.length;a<c;a++)t[e].apply(t,[u[a]].concat(i));return!1}return!0}function d(t,e,n,r){for(var i=-1,o=t.length;++i<o;){var u=t[i];if(r)try{u.callback.apply(u.context||n,e)}catch(t){console.log('Error in "'+r+'" event handler:',t)}else u.callback.apply(u.context||n,e)}}n.d(e,"c",function(){return o}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return a}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return s});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=[].slice,l=/\s+/;e.a={on:o,once:u,off:a,trigger:c}},function(t,e,n){"use strict";function i(t,e){if(t&&t.length>e)return t[e]}n.r(e);var r=n(8),o=n(0);n.d(e,"Browser",function(){return a}),n.d(e,"OS",function(){return c}),n.d(e,"Features",function(){return s});var u=navigator.userAgent,a={},c={},s={};Object.defineProperties(a,{androidNative:{get:Object(o.C)(r.c),enumerable:!0},chrome:{get:Object(o.C)(r.d),enumerable:!0},edge:{get:Object(o.C)(r.e),enumerable:!0},facebook:{get:Object(o.C)(r.g),enumerable:!0},firefox:{get:Object(o.C)(r.f),enumerable:!0},ie:{get:Object(o.C)(r.i),enumerable:!0},msie:{get:Object(o.C)(r.n),enumerable:!0},safari:{get:Object(o.C)(r.q),enumerable:!0},version:{get:Object(o.C)(function(t,e){var n=void 0,r=void 0,i=void 0,o=void 0;return t.chrome?n=-1!==e.indexOf("Chrome")?e.substring(e.indexOf("Chrome")+7):e.substring(e.indexOf("CriOS")+6):t.safari?n=e.substring(e.indexOf("Version")+8):t.firefox?n=e.substring(e.indexOf("Firefox")+8):t.edge?n=e.substring(e.indexOf("Edge")+5):t.ie&&(-1!==e.indexOf("rv:")?n=e.substring(e.indexOf("rv:")+3):-1!==e.indexOf("MSIE")&&(n=e.substring(e.indexOf("MSIE")+5))),n&&(-1!==(o=n.indexOf(";"))&&(n=n.substring(0,o)),-1!==(o=n.indexOf(" "))&&(n=n.substring(0,o)),-1!==(o=n.indexOf(")"))&&(n=n.substring(0,o)),r=parseInt(n,10),i=parseInt(n.split(".")[1],10)),{version:n,major:r,minor:i}}.bind(void 0,a,u)),enumerable:!0}}),Object.defineProperties(c,{android:{get:Object(o.C)(r.b),enumerable:!0},iOS:{get:Object(o.C)(r.j),enumerable:!0},mobile:{get:Object(o.C)(r.o),enumerable:!0},mac:{get:Object(o.C)(r.p),enumerable:!0},iPad:{get:Object(o.C)(r.k),enumerable:!0},iPhone:{get:Object(o.C)(r.l),enumerable:!0},windows:{get:Object(o.C)(function(){return u.indexOf("Windows")>-1}),enumerable:!0},version:{get:Object(o.C)(function(t,e){var n=void 0,r=void 0,o=void 0;if(t.windows)switch(n=i(/Windows(?: NT|)? ([._\d]+)/.exec(e),1)){case"6.1":n="7.0";break;case"6.2":n="8.0";break;case"6.3":n="8.1"}else t.android?n=i(/Android ([._\d]+)/.exec(e),1):t.iOS?n=i(/OS ([._\d]+)/.exec(e),1):t.mac&&(n=i(/Mac OS X (10[._\d]+)/.exec(e),1));if(n){r=parseInt(n,10);var u=n.split(/[._]/);u&&(o=parseInt(u[1],10))}return{version:n,major:r,minor:o}}.bind(void 0,c,u)),enumerable:!0}}),Object.defineProperties(s,{flash:{get:Object(o.C)(r.h),enumerable:!0},flashVersion:{get:Object(o.C)(r.a),enumerable:!0},iframe:{get:Object(o.C)(r.m),enumerable:!0},passiveEvents:{get:Object(o.C)(function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t}),enumerable:!0},backgroundLoading:{get:Object(o.C)(function(){return!(c.iOS||a.safari)}),enumerable:!0}})},function(t,e,n){"use strict";function i(t){return null!==r.match(t)}function o(t){return function(){return i(t)}}function u(){var t=C();return!!(t&&t>=18)}function p(){return i(/\sEdge\/\d+/i)}function h(){return i(/msie/i)}function v(){return i(/\s(?:(?:Headless)?Chrome|CriOS)\//i)&&!p()&&!i(/UCBrowser/i)}function g(){return p()||c()||h()}function m(){return i(/safari/i)&&!i(/(?:Chrome|CriOS|chromium|android|phantom)/i)}function y(){return i(/iP(hone|ad|od)/i)}function b(){return!(i(/chrome\/[123456789]/i)&&!i(/chrome\/18/i)&&!a())&&j()}function j(){return i(/Android/i)&&!i(/Windows Phone/i)}function w(){return y()||j()||i(/Windows Phone/i)}function O(){try{return window.self!==window.top}catch(t){return!0}}function C(){if(j())return 0;var t=navigator.plugins,e=void 0;if(t&&(e=t["Shockwave Flash"])&&e.description)return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if(void 0!==window.ActiveXObject){try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(t){return 0}return e}return 0}n.d(e,"h",function(){return u}),n.d(e,"f",function(){return a}),n.d(e,"l",function(){return s}),n.d(e,"k",function(){return l}),n.d(e,"p",function(){return f}),n.d(e,"g",function(){return d}),n.d(e,"e",function(){return p}),n.d(e,"n",function(){return h}),n.d(e,"d",function(){return v}),n.d(e,"i",function(){return g}),n.d(e,"q",function(){return m}),n.d(e,"j",function(){return y}),n.d(e,"c",function(){return b}),n.d(e,"b",function(){return j}),n.d(e,"o",function(){return w}),n.d(e,"m",function(){return O}),n.d(e,"a",function(){return C});var r=navigator.userAgent,a=o(/gecko\//i),c=o(/trident\/.+rv:\s*11/i),s=o(/iP(hone|od)/i),l=o(/iPad/i),f=o(/Macintosh/i),d=o(/FBAV/i)},function(t,e,n){"use strict";function d(t){return l||(l=function(t){var v,e=t.get("controls"),l=h(),d=function(t,e){var n=t.get("playlist");if(Array.isArray(n)&&n.length)for(var u=Object(i.c)(Object(r.a)(n[0]),t),a=0;a<u.length;a++)for(var c=u[a],s=t.getProviders(),l=0;l<o.a.length;l++){var f=o.a[l];if(s.providerSupports(f,c))return f.name===e}return!1}(t,"html5");return e&&l&&d?(v=n.e(8).then(function(){n(35);var e=n(19)["default"];return a.a.controls=n(20)["default"],Object(u.a)(n(122)["default"]),e}.bind(null,n))["catch"](p(s.t+105)),f.html5=v,v):e&&d?function(){var t=n.e(7).then(function(){var e=n(19)["default"];return a.a.controls=n(20)["default"],Object(u.a)(n(122)["default"]),e}.bind(null,n))["catch"](p(s.t+104));return f.html5=t,t}():e&&l?n.e(6).then(function(){n(35);var e=n(19)["default"];return a.a.controls=n(20)["default"],e}.bind(null,n))["catch"](p(s.t+103)):e?n.e(5).then(function(){var e=n(19)["default"];return a.a.controls=n(20)["default"],e}.bind(null,n))["catch"](p(s.t+102)):(h()?n.e(3).then(function(){return n(35)}.bind(null,n))["catch"](p(s.t+120)):c.b).then(function(){return n.e(4).then(function(){return n(19)["default"]}.bind(null,n))["catch"](p(s.t+101))})}(t)),l}function p(t,e){return function(){throw new s.p(s.j,t,e)}}function h(){var t=window.IntersectionObserverEntry;return!(t&&"IntersectionObserver"in window&&"intersectionRatio"in t.prototype)}n.d(e,"a",function(){return f}),n.d(e,"c",function(){return d}),n.d(e,"b",function(){return p});var r=n(25),i=n(26),o=n(15),u=n(14),a=n(37),c=n(5),s=n(1),l=null,f={}},function(t,e,n){"use strict";function o(t,e){return t.classList.contains(e)}function u(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}function a(t){return t+(t.toString().indexOf("%")>0?"":"px")}function c(t){return Object(i.x)(t.className)?t.className.split(" "):[]}function s(t,e){e=Object(r.h)(e),t.className!==e&&(t.className=e)}function l(t){return t.classList?t.classList:c(t)}function f(t,e){var n=c(t);(Array.isArray(e)?e:e.split(" ")).forEach(function(t){Object(i.e)(n,t)||n.push(t)}),s(t,n.join(" "))}function d(t,e){var n=c(t),r=Array.isArray(e)?e:e.split(" ");s(t,Object(i.h)(n,r).join(" "))}function p(t,e,n){var r=t.className||"";e.test(r)?r=r.replace(e,n):n&&(r+=" "+n),s(t,r)}function h(t,e,n){var r=o(t,e);(n=Object(i.r)(n)?n:!r)!==r&&(n?f(t,e):d(t,e))}function v(t,e,n){t.setAttribute(e,n)}function g(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function m(t){var e=document.createElement("link");e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)}function y(t){t&&g(t)}function b(t){var e={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!t||!document.body.contains(t))return e;var n=t.getBoundingClientRect(),r=window.pageYOffset,i=window.pageXOffset;return n.width||n.height||n.left||n.top?(e.left=n.left+i,e.right=n.right+i,e.top=n.top+r,e.bottom=n.bottom+r,e.width=n.right-n.left,e.height=n.bottom-n.top,e):e}function j(t,e){t.insertBefore(e,t.firstChild)}function w(t){return t.nextElementSibling}function O(t){return t.previousElementSibling}n.d(e,"h",function(){return o}),n.d(e,"e",function(){return u}),n.d(e,"o",function(){return a}),n.d(e,"d",function(){return l}),n.d(e,"a",function(){return f}),n.d(e,"l",function(){return d}),n.d(e,"m",function(){return p}),n.d(e,"p",function(){return h}),n.d(e,"n",function(){return v}),n.d(e,"g",function(){return g}),n.d(e,"b",function(){return m}),n.d(e,"f",function(){return y}),n.d(e,"c",function(){return b}),n.d(e,"j",function(){return j}),n.d(e,"i",function(){return w}),n.d(e,"k",function(){return O});var r=n(2),i=n(0)},function(t,e,n){"use strict";function i(t){switch(void 0===t?"undefined":r(t)){case"string":return t.length>0;case"object":return null!==t;case"undefined":return!1;default:return!0}}function o(){return"https:"===window.location.protocol}function u(t,e){return 0===t.indexOf("rtmp:")||"rtmp"===e}function a(t,e){return"youtube"===e||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(t)}function c(t){if(null===t)return"null";var e=void 0===t?"undefined":r(t);return"object"===e&&Array.isArray(t)?"array":e}n.r(e),n.d(e,"exists",function(){return i}),n.d(e,"isHTTPS",function(){return o}),n.d(e,"isRtmp",function(){return u}),n.d(e,"isYouTube",function(){return a}),n.d(e,"typeOf",function(){return c});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}},function(t,e,n){"use strict";function o(t,e){if(Object(r.exists)(e)||(e=document.location.href),Object(r.exists)(t)){if(u(t))return t;var n=e.substring(0,e.indexOf("://")+3),i=e.substring(n.length,e.indexOf("/",n.length+1)),o=void 0;if(0===t.indexOf("/"))o=t.split("/");else{var a=e.split("?")[0];o=(a=a.substring(n.length+i.length+1,a.lastIndexOf("/"))).split("/").concat(t.split("/"))}for(var c=[],s=0;s<o.length;s++)o[s]&&Object(r.exists)(o[s])&&"."!==o[s]&&(".."===o[s]?c.pop():c.push(o[s]));return n+i+"/"+c.join("/")}}function u(t){return/^(?:(?:https?|file):)?\/\//.test(t)}function a(t){return Object(i.b)(t,function(t){return"parsererror"===t.nodeName})}function c(t){var e=null;try{(a((e=(new window.DOMParser).parseFromString(t,"text/xml")).childNodes)||e.childNodes&&a(e.childNodes[0].childNodes))&&(e=null)}catch(t){}return e}function s(t){if(void 0===t)return null;if("string"==typeof t&&t.length<6){var e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if(!Object(i.u)(Number(t))&&!Object(i.u)(parseFloat(t)))return Number(t)}return t}function l(t){return"string"==typeof t?""===t?0:t.lastIndexOf("%")>-1?t:parseInt(t.replace("px",""),10):t}function f(t,e){if(t<=0&&!e||Object(i.u)(parseInt(t)))return"00:00";var n=t<0?"-":"";t=Math.abs(t);var r=Math.floor(t/3600),o=Math.floor((t-3600*r)/60),u=Math.floor(t%60);return n+(r?r+":":"")+(o<10?"0":"")+o+":"+(u<10?"0":"")+u}n.r(e),n.d(e,"getAbsolutePath",function(){return o}),n.d(e,"isAbsolutePath",function(){return u}),n.d(e,"parseXML",function(){return c}),n.d(e,"serialize",function(){return s}),n.d(e,"parseDimension",function(){return l}),n.d(e,"timeFormat",function(){return f})
;var r=n(11),i=n(0)},function(t,e){"use strict";e.a=[]},function(t,e,n){"use strict";function a(t){var e=t.getName().name;if(!r.a[e]){if(!Object(u.l)(i.a,Object(u.B)({name:e}))){if(!Object(u.t)(t.supports))throw new Error("Tried to register a provider with an invalid object");i.a.unshift({name:e,supports:t.supports})}Object(u.g)(t.prototype,o.a),r.a[e]=t}}n.d(e,"a",function(){return a});var r=n(33),i=n(15),o=n(53),u=n(0)},function(t,e,n){"use strict";var r=n(29),i=n(7),o=n(17),u=n(0),a=n(11),c=n(36),s=Object(u.l)(r.a,Object(u.B)({name:"html5"})),l=s.supports;s.supports=function(t,e){var n=l.apply(this,arguments);if(n&&t.drm&&"hls"===t.type){var r=Object(o.a)(e)("drm");if(r&&t.drm.fairplay){var i=window.WebKitMediaKeys;return i&&i.isTypeSupported&&i.isTypeSupported("com.apple.fps.1_0","video/mp4")}return r}return n},r.a.push({name:"shaka",supports:function(t){if(t.drm&&!Object(c.a)(t.drm))return!1;var e=window.MediaSource;if(!window.HTMLVideoElement||!e)return!1;var n=!0;return t.mediaTypes&&(n=Object(u.a)(t.mediaTypes,function(t){return e.isTypeSupported(t)})),n&&("dash"===t.type||"mpd"===t.type||(t.file||"").indexOf("mpd-time-csf")>-1)}}),r.a.splice(0,0,{name:"hlsjs",supports:function(t){if(t.drm)return!1;var e=t.file.indexOf(".m3u8")>-1,n="hls"===t.type||"m3u8"===t.type;if(!e&&!n)return!1;var r=i.Browser.chrome||i.Browser.firefox||i.Browser.edge||i.Browser.ie&&11===i.Browser.version.major,o=i.OS.android&&!1===t.hlsjsdefault,u=i.Browser.safari&&!!t.safarihlsjs;return!!window.MediaSource&&!!window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')&&(r||u)&&!o}}),r.a.push({name:"flash",supports:function(t){if(!i.Features.flash||t.drm)return!1;var e=t.type;return"hls"===e||"m3u8"===e||!Object(a.isRtmp)(t.file,e)&&["flv","f4v","mov","m4a","m4v","mp4","aac","f4a","mp3","mpeg","smil"].indexOf(e)>-1}}),e.a=r.a},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Date.now||function(){return(new Date).getTime()}},function(t,e,n){"use strict";function h(t){var e={setup:[r,i,o,u,a,s,l,f,c],drm:[a,s,l,f],ads:[s,l,f,c,a],jwpsrv:[r,i,o,u,a,s,f,c,d,p],discovery:[s,a,f,l]};return function(n){return e[n]&&e[n].indexOf(t)>-1}}n.d(e,"a",function(){return h});var r="free",i="starter",o="business",u="premium",a="enterprise",c="platinum",s="ads",l="unlimited",f="trial",d="invalid",p="expired"},function(t,e,n){"use strict";n.r(e),n.d(e,"getScriptPath",function(){return i}),n.d(e,"repo",function(){return o}),n.d(e,"versionCheck",function(){return u}),n.d(e,"loadFrom",function(){return a});var r=n(28),i=function(t){for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n++){var r=e[n].src;if(r){var i=r.lastIndexOf("/"+t);if(i>=0)return r.substr(0,i+1)}}return""},o=function(){var t="//ssl.p.jwpcdn.com/player/v/8.5.6/";return("file:"===window.location.protocol?"https:":"")+t},u=function(t){var e=("0"+t).split(/\W/),n=r.a.split(/\W/),i=parseFloat(e[0]),o=parseFloat(n[0]);return!(i>o||i===o&&parseFloat("0"+e[1])>parseFloat(n[1]))},a=function(){return o()}},,,function(t,e){"use strict";e.a={debug:!1}},function(t,e,n){"use strict";function c(t,e,n,r){n=n||"all-players";var i="";if("object"===(void 0===e?"undefined":u(e))){var a=document.createElement("div");s(a,e);var c=a.style.cssText;r&&c&&(c=c.replace(/;/g," !important;")),i="{"+c+"}"}else"string"==typeof e&&(i=e);""!==i&&"{}"!==i?o.a.style([[t,t+i]],n):o.a.clear(n,t)}function s(t,e){if(null!=t){void 0===t.length&&(t=[t]);var n=void 0,r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=f(n,e[n]));for(var i=0;i<t.length;i++){var o=t[i],u=void 0;if(null!=o)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(u=l(n),o.style[u]!==r[n]&&(o.style[u]=r[n]))}}}function l(t){t=t.split("-");for(var e=1;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join("")}function f(t,e){return""===e||null==e?"":"string"==typeof e&&isNaN(e)?/png|gif|jpe?g/i.test(e)&&e.indexOf("url")<0?"url("+e+")":e:0===e||"z-index"===t||"opacity"===t?""+e:/color/i.test(t)?"#"+Object(r.d)(e.toString(16).replace(/^0x/i,""),6):Math.ceil(e)+"px"}function d(t,e){s(t,{transform:e,webkitTransform:e,msTransform:e,mozTransform:e,oTransform:e})}function h(t,e){var n="rgb",r=void 0!==e&&100!==e;if(r&&(n+="a"),!p){var i=document.createElement("canvas");i.height=1,i.width=1,p=i.getContext("2d")}t?isNaN(parseInt(t,16))||(t="#"+t):t="#000000",p.clearRect(0,0,1,1),p.fillStyle=t,p.fillRect(0,0,1,1);var o=p.getImageData(0,0,1,1).data;return n+="("+o[0]+", "+o[1]+", "+o[2],r&&(n+=", "+e/100),n+")"}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return d}),n.d(e,"c",function(){return h});var r=n(2),i=n(40),o=n.n(i),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=o.a.clear,p=void 0},function(t,e,n){"use strict";function v(t,e){var n=t.get("plugins");return window.jwplayerPluginJsonp=h,(t.pluginLoader=t.pluginLoader||new u).load(e,p,n,t).then(function(e){if(!t.attributes._destroyed)return e&&e.forEach(function(t){t instanceof Error&&Object(a.a)(t.message)}),delete window.jwplayerPluginJsonp,e})}var r=n(5),i=n(24),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){this.load=function(t,e,n,u){return n&&"object"===(void 0===n?"undefined":o(n))?r.a.all(Object.keys(n).filter(function(t){return t}).map(function(r){var o=n[r];return e.setupPlugin(r).then(function(e){if(!u.attributes._destroyed)return Object(i.a)(e,o,t)})["catch"](function(t){return e.removePlugin(r),t instanceof Error?t:new Error("Error in "+r+' "'+t+'"')})})):r.b}},a=n(31),c={},s=function(t){return t.replace(/^(.*\/)?([^-]*)-?.*\.(js)$/,"$2")},l=function(){},f=l.prototype;f.setupPlugin=function(t){var e=this.getPlugin(t);return e?(e.url!==t&&Object(a.a)('JW Plugin "'+s(t)+'" already loaded from "'+e.url+'". Ignoring "'+t+'."'),e.promise):this.addPlugin(t).load()},f.addPlugin=function(t){var e=s(t),n=c[e];return n||(n=new i.b(t),c[e]=n),n},f.getPlugin=function(t){return c[s(t)]},f.removePlugin=function(t){delete c[s(t)]},f.getPlugins=function(){return c};var d=l;n.d(e,"b",function(){return h}),n.d(e,"a",function(){return v});var p=new d,h=function(t,e,n){var r=p.addPlugin(t);r.js||r.registerPlugin(t,e,n)}},function(t,e,n){"use strict";function d(t,e,n){var i=t.name,o=document.createElement("div");o.id=n.id+"_"+i,o.className="jw-plugin jw-reset";var u=Object(r.j)({},e),a=t.getNewInstance(n,u,o);return n.addPlugin(i,a),a}n.d(e,"a",function(){return d});var r=n(0),i=n(5),o=n(30),u=n(12),a=n(2),c=0,s=1,l=function(t){if("string"==typeof t){var e=(t=t.split("?")[0]).indexOf("://");if(e>0)return c;var n=t.indexOf("/"),r=Object(a.a)(t);return!(e<0&&n<0)||r&&isNaN(r)?s:2}},f=function(t){this.url=t,this.promise_=null};Object.defineProperties(f.prototype,{promise:{get:function(){return this.promise_||this.load()},set:function(){}}}),Object(r.j)(f.prototype,{load:function(){var t=this,e=this.promise_;if(!e){if(2===l(this.url))e=i.a.resolve(this);else{var n=new o.a(function(t){switch(l(t)){case c:return t;case s:return Object(u.getAbsolutePath)(t,window.location.href)}}(this.url));this.loader=n,e=n.load().then(function(){return t})}this.promise_=e}return e},registerPlugin:function(t,e,n){this.name=t,this.target=e,this.js=n},getNewInstance:function(t,e,n){var r=this.js;if("function"!=typeof r)throw new Error('"'+this.url+'" did not call registerPlugin');var i=new r(t,e,n);return i.addToPlayer=function(){var e=t.getContainer().querySelector(".jw-overlays");e&&(n.left=e.style.left,n.top=e.style.top,e.appendChild(n),i.displayArea=e)},i.resizeHandler=function(){var t=i.displayArea;t&&i.resize(t.clientWidth,t.clientHeight)},i}}),e.b=f},function(t,e,n){"use strict";var r=n(0),i=n(32),o=function(t){if(t&&t.file)return Object(r.j)({},{kind:"captions","default":!1},t)},u=Array.isArray;e.a=function(t){u((t=t||{}).tracks)||delete t.tracks;var e=Object(r.j)({},{sources:[],tracks:[],minDvrWindow:120,dvrSeekLimit:25},t);e.dvrSeekLimit<5&&(e.dvrSeekLimit=5),e.sources!==Object(e.sources)||u(e.sources)||(e.sources=[Object(i.a)(e.sources)]),u(e.sources)&&0!==e.sources.length||(t.levels?e.sources=t.levels:e.sources=[Object(i.a)(t)]);for(var n=0;n<e.sources.length;n++){var a=e.sources[n];if(a){var c=a["default"];a["default"]=!!c&&"true"===c.toString(),e.sources[n].label||(e.sources[n].label=n.toString()),e.sources[n]=Object(i.a)(e.sources[n])}}return e.sources=e.sources.filter(function(t){return!!t}),u(e.tracks)||(e.tracks=[]),u(e.captions)&&(e.tracks=e.tracks.concat(e.captions),delete e.captions),e.tracks=e.tracks.map(o).filter(function(t){return!!t}),e}},function(t,e,n){"use strict";function o(t,e){return i[t]?t:i[e]?e:"metadata"}function l(t,e,n){return delete Object(r.j)({},n).playlist,t.map(function(t){return d(e,t,n)}).filter(function(t){return!!t})}function f(t){if(!Array.isArray(t)||0===t.length)throw new s.p(s.l,630)}function d(t,e,n){var i=t.getProviders(),u=t.get("preload"),a=Object(r.j)({},e);if(a.preload=o(e.preload,u),a.allSources=h(e,t),a.sources=v(a.allSources,i),a.sources.length)return a.file=a.sources[0].file,a.feedData=n,a}function h(t,e){var n=e.attributes,r=t.sources,i=t.allSources,u=t.preload,c=t.drm,s=g(t.withCredentials,n.withCredentials);return(i||r).map(function(t){if(t!==Object(t))return null;m(t,n,"androidhls"),m(t,n,"hlsjsdefault"),m(t,n,"safarihlsjs"),t.preload=o(t.preload,u);var e=t.drm||c||n.drm;e&&(t.drm=e);var r=g(t.withCredentials,s);return void 0!==r&&(t.withCredentials=r),Object(a.a)(t)}).filter(function(t){return!!t})}function v(t,e){e&&e.choose||(e=new c.a);var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=e.choose(r).providerToCheck;if(o)return{type:r.type,provider:o}}return null}(t,e);if(!n)return[];var r=n.provider,i=n.type;return t.filter(function(t){return t.type===i&&e.providerSupports(r,t)})}function g(t,e){return void 0===t?e:t}function m(t,e,n){n in e&&(t[n]=e[n])}var r=n(0),i={none:!0,metadata:!0,auto:!0},u=n(25),a=n(32),c=n(41),s=n(1);n.d(e,"b",function(){return l}),n.d(e,"e",function(){return f}),n.d(e,"d",function(){return d}),n.d(e,"c",function(){return p});var p=function(t,e){return v(h(t,e),e.getProviders())};e.a=function(t){return(Array.isArray(t)?t:[t]).map(u.a)}},function(t,e,n){"use strict";function a(){return u+o.now()}var r=n(0),i=n(16),o=window.performance||{timing:{}},u=o.timing.navigationStart||Object(i.a)();"now"in o||(o.now=function(){return Object(i.a)()-u}),e.a=function(){var t={},e={},n={},i={};return{start:function(e){t[e]=a(),n[e]=n[e]+1||1},end:function(n){if(t[n]){var r=a()-t[n];delete t[n],e[n]=e[n]+r||r}},dump:function(){var o=Object(r.j)({},e);for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var c=a()-t[u];o[u]=o[u]+c||c}return{counts:Object(r.j)({},n),sums:o,events:Object(r.j)({},i)}},tick:function(t){i[t]=a()},clear:function(t){delete i[t]},between:function(t,e){return i[e]&&i[t]?i[e]-i[t]:null}}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="8.5.6+commercial_v8-5-6.287.commercial.1068f82.hlsjs..jwplayer.409c173.dai.ac94f63.freewheel.503251f.googima.8001841.vast.85cf67a.analytics.706e657.gapro.f664e4e.related.b0b8e78"},function(t,e,n){"use strict";function c(t){if(!1===Object(r.a)(t))return!1;if(!o.a.canPlayType)return!1;var e=t.file,n=t.type;if(Object(i.isRtmp)(e,n))return!1;var a=t.mimeType||u[n];return!!a&&!!o.a.canPlayType(a)}n.d(e,"b",function(){return c});var r=n(57),i=n(11),o=n(38),u={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"},a=[{name:"html5",supports:c}];e.a=a},function(t,e,n){"use strict";function f(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t,e}function d(t){var e=document.createElement("script");return e.type="text/javascript",e.charset="utf-8",e.async=!0,e.timeout=c,e.src=t,e}var r=n(0),i=n(6),o=n(3),u=n(5),a={},c=15e3,s=2,l=3,p=function(t,e){function i(t){r=s,n.trigger(o.w,t).off()}function p(t){r=l,n.trigger(o.Ja,t).off()}var n=this,r=0;this.getStatus=function(){return r},this.load=function(){var n=a[t];return 0!==r?n:(n&&n.then(p)["catch"](i),r=1,n=new u.a(function(n,r){var o=(e?f:d)(t),u=function(){o.onerror=o.onload=null,clearTimeout(s)},a=function(t){u(),i(t),r(t)},s=setTimeout(function(){a(new Error("Network timeout "+t))},c);o.onerror=function(){a(new Error("Failed to load "+t))},o.onload=function(t){u(),p(t),n(t)};var l=document.getElementsByTagName("head")[0]||document.documentElement;l.insertBefore(o,l.firstChild)}),a[t]=n,n)}};Object(r.j)(p.prototype,i.a),e.a=p},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof console.log?console.log.bind(console):function(){}},function(t,e,n){"use strict";var r=n(0),i=n(11),o=n(2);e.a=function(t){if(t&&t.file){var e=Object(r.j)({},{"default":!1},t);e.file=Object(o.h)(""+e.file);var n=/^[^/]+\/(?:x-)?([^/]+)$/;if(n.test(e.type)&&(e.mimeType=e.type,e.type=e.type.replace(n,"$1")),Object(i.isYouTube)(e.file)?e.type="youtube":Object(i.isRtmp)(e.file)?e.type="rtmp":e.type||(e.type=Object(o.a)(e.file)),e.type){switch(e.type){case"m3u8":case"vnd.apple.mpegurl":e.type="hls";break;case"dash+xml":e.type="dash";break;case"m4a":e.type="aac";break;case"smil":e.type="rtmp"}return Object.keys(e).forEach(function(t){""===e[t]&&delete e[t]}),e}}}},function(t,e){"use strict";e.a={}},function(t,e,n){"use strict";function O(t){return t&&!(w.test(t)||"object"===(void 0===t?"undefined":a(t)))}function C(t){if(!t.handlers.init){var e=t.el,n=t.passive,r=!!h&&{passive:n},o=function(i){if(!function(t){return"which"in t?3===t.which:"button"in t&&2===t.button}(i)){var o=i.target,s=i.type;if(!t.directSelect||o===e){var l=A(i),f=l.pageX,d=l.pageY;if(t.dragged=!1,t.lastStart=Object(u.a)(),t.startX=f,t.startY=d,P(t,p),"pointerdown"===s&&i.isPrimary){if(!n){var h=i.pointerId;t.pointerId=h,e.setPointerCapture(h)}S(t,p,"pointermove",a,r),S(t,p,"pointercancel",c),S(t,p,"pointerup",c)}else"mousedown"===s?(S(t,p,"mousemove",a,r),S(t,p,"mouseup",c)):"touchstart"===s&&(S(t,p,"touchmove",a,r),S(t,p,"touchcancel",c),S(t,p,"touchend",c),n||M(i))}}},a=function(e){if(t.dragged)_(t,i.s,e);else{var r=A(e),o=r.pageX,u=r.pageY,a=o-t.startX,c=u-t.startY;a*a+c*c>g*g&&(_(t,i.u,e),t.dragged=!0,_(t,i.s,e))}n||"touchmove"!==e.type||M(e)},c=function(n){if(clearTimeout(b),T(t),P(t,p),t.dragged)t.dragged=!1,_(t,i.t,n);else if(-1===n.type.indexOf("cancel")&&e.contains(n.target)){if(Object(u.a)()-t.lastStart>y)return;var r="pointerup"===n.type||"pointercancel"===n.type,o="mouseup"===n.type||r&&"mouse"===n.pointerType;!function(t,e,n){if(t.enableDoubleTap)if(Object(u.a)()-t.lastClick<m){_(t,n?i.q:i.r,e),t.lastClick=0}else t.lastClick=Object(u.a)()}(t,n,o),o?_(t,i.n,n):(_(t,i.Qa,n),"touchend"!==n.type||h||M(n))}};f?S(t,"init","pointerdown",o,r):(d&&S(t,"init","mousedown",o,r),S(t,"init","touchstart",o,r))}}function x(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}function S(t,e,n,r,i){var o=t.handlers[e];if(o||(o=t.handlers[e]={}),o[n])throw new Error(e+" "+n+" already registered");o[n]=r;var u=t.el;(e===p?x(u):u).addEventListener(n,r,i||v)}function P(t,e){var n=t.el,r=t.handlers,i=e===p?x(n):n,o=r[e];o&&(Object.keys(o).forEach(function(t){i.removeEventListener(t,o[t])}),r[e]=null)}function T(t){var e=t.el;null!==t.pointerId&&(e.releasePointerCapture(t.pointerId),t.pointerId=null)}function E(t,e,n){var r=t.el,i=n.target;t.trigger(e,{type:e,sourceEvent:n,currentTarget:r,target:i})}function _(t,e,n){var r=function(t,e,n){var r=e.target,i=e.touches,o=e.changedTouches,u=e.pointerType,a=void 0;i||o?(a=i&&i.length?i[0]:o[0],u=u||"touch"):(a=e,u=u||"mouse");var c=a;return{type:t,pointerType:u,pageX:c.pageX,pageY:c.pageY,sourceEvent:e,currentTarget:n,target:r}}(e,n,t.el);t.trigger(e,r)}function A(t){return 0===t.type.indexOf("touch")?(t.originalEvent||t).changedTouches[0]:t}function M(t){t.preventDefault&&t.preventDefault()}n.d(e,"b",function(){return x});var r=n(7),i=n(3),o=n(49),u=n(16),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var u=i.get;return void 0!==u?u.call(r):void 0},l="ontouchstart"in window,f="PointerEvent"in window&&!r.OS.android,d=!(f||l&&r.OS.mobile),p="window",h=r.Features.passiveEvents,v=!!h&&{passive:!0},g=6,m=300,y=500,b=void 0,j=function(){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=!(n=n||{}).preventScrolling;return r.directSelect=!!n.directSelect,r.dragged=!1,r.enableDoubleTap=!1,r.el=t,r.handlers={},r.lastClick=0,r.lastStart=0,r.passive=i,r.pointerId=null,r.startX=0,r.startY=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.a),c(e,[{key:"on",value:function(t,n,r){return O(t)&&(this.handlers[t]||k[t](this)),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"on",this).call(this,t,n,r)}},{key:"off",value:function(t,n,r){var i=this;if(O(t))P(this,t);else if(!t){var o=this.handlers;Object.keys(o).forEach(function(t){P(i,t)})}return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"off",this).call(this,t,n,r)}},{key:"destroy",value:function(){this.off(),f&&T(this),this.el=null}}]),e}();e.a=j;var w=/\s+/,k={drag:function(t){C(t)},dragStart:function(t){C(t)},dragEnd:function(t){C(t)},click:function(t){C(t)},tap:function(t){C(t)},doubleTap:function(t){t.enableDoubleTap=!0,C(t)},doubleClick:function(t){t.enableDoubleTap=!0,C(t)},longPress:function(t){if(r.OS.iOS){var e=function(){clearTimeout(b)};S(t,"longPress","touchstart",function(n){e(),b=setTimeout(function(){_(t,"longPress",n)},y)}),S(t,"longPress","touchmove",e),S(t,"longPress","touchcancel",e),S(t,"longPress","touchend",e)}else t.el.oncontextmenu=function(e){return _(t,"longPress",e),!1}},focus:function(t){S(t,"focus","focus",function(e){E(t,"focus",e)})},blur:function(t){S(t,"blur","blur",function(e){E(t,"blur",e)})},over:function(t){(f||d)&&S(t,i.X,f?"pointerover":"mouseover",function(e){"touch"!==e.pointerType&&_(t,i.X,e)})},out:function(t){if(f){var e=t.el;S(t,i.W,"pointerout",function(n){if("touch"!==n.pointerType&&"x"in n){var r=document.elementFromPoint(n.x,n.y);e.contains(r)||_(t,i.W,n)}})}else d&&S(t,i.W,"mouseout",function(e){_(t,i.W,e)})},move:function(t){(f||d)&&S(t,i.U,f?"pointermove":"mousemove",function(e){"touch"!==e.pointerType&&_(t,i.U,e)})},enter:function(t){S(t,i.v,"keydown",function(e){"Enter"!==e.key&&13!==e.keyCode||(e.stopPropagation(),E(t,i.v,e))})},gesture:function(t){var e=function(e){return _(t,"gesture",e)};S(t,"gesture","click",e),S(t,"gesture","keydown",e)}}},,function(t,e,n){"use strict";function s(t){return t.some(function(t){return!!t.drm||t.sources.some(function(t){return!!t.drm})})}function l(t){return c||((navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||window.MSMediaKeys)&&Object(r.a)(t)("drm")?(o.forEach(function(t){var e,n,r=(e=t.keyName,n=[{initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}]}],navigator.requestMediaKeySystemAccess?navigator.requestMediaKeySystemAccess(e,n):new i.a(function(t,n){var r=void 0;try{r=new window.MSMediaKeys(e)}catch(t){return void n(t)}t(r)})).then(function(){a[t.configName]=!0})["catch"](function(){a[t.configName]=!1});u.push(r)}),c=i.a.all(u)):i.b)}function f(t){return a[t]}function d(t){if(c)return Object.keys(t).some(function(t){return f(t)})}n.d(e,"b",function(){return s}),n.d(e,"d",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"a",function(){return d});var r=n(17),i=n(5),o=[{configName:"clearkey",keyName:"org.w3.clearkey"},{configName:"widevine",keyName:"com.widevine.alpha"},{configName:"playready",keyName:"com.microsoft.playready"}],u=[],a={},c=void 0},function(t,e,n){"use strict";function u(){return i||(i=n.e(2).then(function(){var e=n(20)["default"];return o.controls=e,e}.bind(null,n))["catch"](function(){i=null,Object(r.b)(130)()})),i}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n(9),i=null,o={}},function(t,e){"use strict";var r=document.createElement("video");e.a=r},function(t,e,n){"use strict";function g(t,e,n,d){t===Object(t)&&(t=(d=t).url);var j=void 0,w=Object(r.j)({xhr:null,url:t,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:e||v,onerror:n||v,mimeType:d&&!d.responseType?"text/xml":"",requireValidXML:!1,responseType:d&&d.plainText?"text":"",useDomParser:!1,requestFilter:null},d),O=function(t,e){return function(t,n){var i=t.currentTarget||e.xhr;(clearTimeout(e.timeoutId),e.retryWithoutCredentials&&e.xhr.withCredentials)?(m(i),g(Object(r.j)({},e,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1}))):(!n&&i.status>=400&&i.status<600&&(n=i.status),y(e,n?o.l:o.o,n||f,t))}}(0,w);if("XMLHttpRequest"in window){if(j=w.xhr=w.xhr||new window.XMLHttpRequest,"function"==typeof w.requestFilter){var C=void 0;try{C=w.requestFilter({url:t,xhr:j})}catch(t){return O(t,l),j}C&&"open"in C&&"send"in C&&(j=w.xhr=C)}j.onreadystatechange=function(t){return function(e){var n=e.currentTarget||t.xhr;if(4===n.readyState){if(clearTimeout(t.timeoutId),n.status>=400)return void y(t,o.l,n.status<600?n.status:f);if(200===n.status)return function(t){return function(e){var n=e.currentTarget||t.xhr;if(clearTimeout(t.timeoutId),t.responseType){if("json"===t.responseType)return function(t,e){if(!t.response||"string"==typeof t.response&&'"'!==t.responseText.substr(1))try{t=Object(r.j)({},t,{response:JSON.parse(t.responseText)})}catch(t){return void y(e,o.l,h,t)}return e.oncomplete(t)}(n,t)}else{var u=n.responseXML,a=void 0;if(u)try{a=u.firstChild}catch(t){}if(u&&a)return b(n,u,t);if(t.useDomParser&&n.responseText&&!u&&(u=Object(i.parseXML)(n.responseText))&&u.firstChild)return b(n,u,t);if(t.requireValidXML)return void y(t,o.l,p)}t.oncomplete(n)}}(t)(e)}}}(w),j.onerror=O,"overrideMimeType"in j?w.mimeType&&j.overrideMimeType(w.mimeType):w.useDomParser=!0;try{t=t.replace(/#.*$/,""),j.open("GET",t,!0)}catch(t){return O(t,c),j}if(w.responseType)try{j.responseType=w.responseType}catch(t){}w.timeout&&(w.timeoutId=setTimeout(function(){m(j),y(w,o.o,u)},w.timeout),j.onabort=function(){clearTimeout(w.timeoutId)});try{w.withCredentials&&"withCredentials"in j&&(j.withCredentials=!0),j.send()}catch(t){O(t,s)}return j}y(w,o.o,a)}function m(t){t.onload=null,t.onprogress=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()}function y(t,e,n,r){t.onerror(e,t.url,t.xhr,new o.p(e,n,r))}function b(t,e,n){var i=e.documentElement;if(!n.requireValidXML||"parsererror"!==i.nodeName&&!i.getElementsByTagName("parsererror").length)return t.responseXML||(t=Object(r.j)({},t,{responseXML:e})),n.oncomplete(t);y(n,o.l,d)}n.d(e,"a",function(){return g});var r=n(0),i=n(12),o=n(1),u=1,a=2,c=3,s=4,l=5,f=6,d=601,p=602,h=611,v=function(){}},function(t){function a(t){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-jwplayer-id",t),function(t){u().appendChild(t)}(e),e}function c(t,e){var n,r,i,u=o[t];u||(u=o[t]={element:a(t),counter:0});var c=u.counter++;return n=u.element,i=function(){f(n,c,"")},(r=function(t){f(n,c,t)})(e.css),function(t){if(t){if(t.css===e.css&&t.media===e.media)return;r((e=t).css)}else i()}}function f(t,e,n){if(t.styleSheet)t.styleSheet.cssText=l(e,n);else{var r=document.createTextNode(n),i=t.childNodes[e];i?t.replaceChild(r,i):t.appendChild(r)}}var n,r,i={},o={},u=(n=function(){return document.head||document.getElementsByTagName("head")[0]},function(){return void 0===r&&(r=n.apply(this,arguments)),r});t.exports={style:function(t,e){!function(t,e){for(var n=0;n<e.length;n++){var r=e[n],o=(i[t]||{})[r.id];if(o){for(var u=0;u<o.parts.length;u++)o.parts[u](r.parts[u]);for(;u<r.parts.length;u++)o.parts.push(c(t,r.parts[u]))}else{var a=[];for(u=0;u<r.parts.length;u++)a.push(c(t,r.parts[u]));i[t]=i[t]||{},i[t][r.id]={id:r.id,parts:a}}}}(e,function(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],c={css:i[1],media:i[2]};n[o]?n[o].parts.push(c):e.push(n[o]={id:o,parts:[c]})}return e}(t))},clear:function(t,e){var n=i[t];if(n)if(e){var r=n[e];if(r)for(var o=0;o<r.parts.length;o+=1)r.parts[o]()}else{for(var u=Object.keys(n),a=0;a<u.length;a+=1)for(var c=n[u[a]],s=0;s<c.parts.length;s+=1)c.parts[s]();delete i[t]}}};var s,l=(s=[],function(t,e){return s[t]=e,s.filter(Boolean).join("\n")})},function(t,e,n){"use strict";function s(t){this.config=t||{}}var r=n(0),i=n(15),o=n(14),u=n(33),a=n(9),c=n(5),l={html5:function(){return n.e(1).then(function(){var e=n(122)["default"];return Object(o.a)(e),e}.bind(null,n))["catch"](Object(a.b)(152))}};Object(r.j)(s.prototype,{load:function(t){var e=l[t],n=function(){return c.a.reject(new Error("Failed to load media"))};return e?e().then(function(){return u.a[t]||n()}):n()},providerSupports:function(t,e){return t.supports(e)},choose:function(t){if(t===Object(t))for(var e=i.a.length,n=0;n<e;n++){var r=i.a[n];if(this.providerSupports(r,t))return{priority:e-n-1,name:r.name,type:t.type,providerToCheck:r,provider:u.a[r.name]}}return{}}});var f=s,d=void 0;Object(r.j)(l,{shaka:function(){return n.e(11).then(function(){var e=n(141)["default"];return Object(o.a)(e),e}.bind(null,n))["catch"](Object(a.b)(154))},hlsjs:function(){return n.e(10).then(function(){var e=n(142)["default"];return e.setEdition&&e.setEdition(d),Object(o.a)(e),e}.bind(null,n))["catch"](Object(a.b)(153))},flash:function(){return n.e(9).then(function(){var e=n(139)["default"];return Object(o.a)(e),e}.bind(null,n))["catch"](Object(a.b)(151))}}),f.prototype.providerSupports=function(t,e){return d=this.config.edition,t.supports(e,d)},e.a=f},function(t,e,n){"use strict";function u(t,e){var n=e.message,u=e.code,a=r(t.get("id"),n,t.get("localization").errors.errorCode,u),c=t.get("width"),s=t.get("height"),l=Object(i.e)(a);return Object(o.d)(l,{width:c.toString().indexOf("%")>0?c:c+"px",height:s.toString().indexOf("%")>0?s:s+"px"}),l}var r=function(t,e,n,r){return'<div id="'+t+'" class="jw-error jw-reset"><div class="jw-error-msg jw-info-overlay jw-reset"><style>[id="'+t+'"].jw-error{background:#000;overflow:hidden;position:relative}[id="'+t+'"] .jw-error-msg{top:50%;left:50%;position:absolute;transform:translate(-50%,-50%)}[id="'+t+'"] .jw-error-text{color:#FFF;font:14px/1.35 Arial,Helvetica,sans-serif}</style><div class="jw-icon jw-reset"></div><div class="jw-info-container jw-reset"><div class="jw-error-text jw-reset">'+(e||"")+'<span class="jw-break jw-reset"></span>'+(r?("("+n+": "+r+")").replace(/\s+/g,"&nbsp;"):"")+"</div></div></div></div>"},i=n(10),o=n(22);n.d(e,"a",function(){return u})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=window.atob},function(t,e,n){"use strict";function o(t){for(var e=[],n=0;n<Object(r.c)(t);n++){var i=t.childNodes[n];"jwplayer"===i.prefix&&"mediatypes"===Object(r.b)(i).toLowerCase()&&e.push(Object(r.d)(i))}return e}function l(t){var e=[];e.feedData={};for(var n=0;n<Object(r.c)(t);n++){var i=Object(r.a)(t,n);if("channel"===Object(r.b)(i).toLowerCase())for(var o=0;o<Object(r.c)(i);o++){var u=Object(r.a)(i,o),a=Object(r.b)(u).toLowerCase();"item"===a?e.push(f(u)):a&&(e.feedData[a]=Object(r.d)(u))}}return e}function f(t){for(var e={},n=0;n<t.childNodes.length;n++){var o=t.childNodes[n],a=Object(r.b)(o);if(a)switch(a.toLowerCase()){case"enclosure":e.file=Object(i.i)(o,"url");break;case"title":e.title=Object(r.d)(o);break;case"guid":e.mediaid=Object(r.d)(o);break;case"pubdate":e.date=Object(r.d)(o);break;case"description":e.description=Object(r.d)(o);break;case"link":e.link=Object(r.d)(o);break;case"category":e.tags?e.tags+=Object(r.d)(o):e.tags=Object(r.d)(o)}}return new s.a(c(t,u(t,e)))}var r=n(4),i=n(2),u=function t(e,n){for(var u,a,c=[],s=0;s<Object(r.c)(e);s++){var l=e.childNodes[s];if("media"===l.prefix){if(!Object(r.b)(l))continue;switch(Object(r.b)(l).toLowerCase()){case"content":if(Object(i.i)(l,"duration")&&(n.duration=Object(i.f)(Object(i.i)(l,"duration"))),Object(i.i)(l,"url")){n.sources||(n.sources=[]);var f={file:Object(i.i)(l,"url"),type:Object(i.i)(l,"type"),width:Object(i.i)(l,"width"),label:Object(i.i)(l,"label")},d=o(l);d.length&&(f.mediaTypes=d),n.sources.push(f)}Object(r.c)(l)>0&&(n=t(l,n));break;case"title":n.title=Object(r.d)(l);break;case"description":n.description=Object(r.d)(l);break;case"guid":n.mediaid=Object(r.d)(l);break;case"thumbnail":n.image||(n.image=Object(i.i)(l,"url"));break;case"group":t(l,n);break;case"subtitle":var p={};p.file=Object(i.i)(l,"url"),p.kind="captions",Object(i.i)(l,"lang").length>0&&(p.label=(a={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"})[u=Object(i.i)(l,"lang")]?a[u]:u),c.push(p)}}}n.hasOwnProperty("tracks")||(n.tracks=[]);for(var h=0;h<c.length;h++)n.tracks.push(c[h]);return n},a=n(12),c=function(t,e){for(var n="default",o=[],u=[],c=0;c<t.childNodes.length;c++){var s=t.childNodes[c];if("jwplayer"===s.prefix){var l=Object(r.b)(s);"source"===l?(delete e.sources,o.push({file:Object(i.i)(s,"file"),"default":Object(i.i)(s,n),label:Object(i.i)(s,"label"),type:Object(i.i)(s,"type")})):"track"===l?(delete e.tracks,u.push({file:Object(i.i)(s,"file"),"default":Object(i.i)(s,n),kind:Object(i.i)(s,"kind"),label:Object(i.i)(s,"label")})):(e[l]=Object(a.serialize)(Object(r.d)(s)),"file"===l&&e.sources&&delete e.sources)}e.file||(e.file=e.link)}if(o.length){e.sources=[];for(var f=0;f<o.length;f++)o[f].file.length>0&&(o[f][n]="true"===o[f][n],o[f].label.length||delete o[f].label,e.sources.push(o[f]))}if(u.length){e.tracks=[];for(var d=0;d<u.length;d++)u[d].file.length>0&&(u[d][n]="true"===u[d][n],u[d].kind=u[d].kind.length?u[d].kind:"captions",u[d].label.length||delete u[d].label,e.tracks.push(u[d]))}return e},s=n(25);n.d(e,"a",function(){return l})},function(t,e,n){"use strict";function i(t){for(var e=new Array(Math.ceil(t.length/4)),n=0;n<e.length;n++)e[n]=t.charCodeAt(4*n)+(t.charCodeAt(4*n+1)<<8)+(t.charCodeAt(4*n+2)<<16)+(t.charCodeAt(4*n+3)<<24);return e}function o(t,e){if(t=String(t),e=String(e),0===t.length)return"";for(var n,o=i(Object(r.a)(t)),u=i((n=e,unescape(encodeURIComponent(n))).slice(0,16)),a=o.length,c=o[a-1],s=o[0],l=void 0,f=void 0,d=2654435769*Math.floor(6+52/a);d;){f=d>>>2&3;for(var p=a-1;p>=0;p--)l=((c=o[p>0?p-1:a-1])>>>5^s<<2)+(s>>>3^c<<4)^(d^s)+(u[3&p^f]^c),s=o[p]-=l;d-=2654435769}return function(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}(function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(255&t[n],t[n]>>>8&255,t[n]>>>16&255,t[n]>>>24&255);return e.join("")}(o).replace(/\0+$/,""))}n.d(e,"a",function(){return o});var r=n(43)},function(t,e,n){"use strict";var r=n(45),i=n(17),o=n(43),u="invalid";e.a=function(t){var e=void 0,n=void 0,a=void 0;this.edition=function(){return a&&a.getTime()<(new Date).getTime()?"expired":e},this.token=function(){return n},this.expiration=function(){return a},function(t,c){try{var s=Object(r.a)(t,Object(o.a)(c)).split("/");"pro"===(e=s[0])&&(e="premium");var l=Object(i.a)(e);if(s.length>2&&l("setup")){n=s[1];var f=parseInt(s[2]);f>0&&(a=new Date).setTime(f)}else e=u}catch(t){e=u}}(t||"","NDh2aU1Cb0NHRG5hcDFRZQ==")}
},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={audioMode:!1,flashBlocked:!1,item:0,itemMeta:{},playbackRate:1,playRejected:!1,state:n(3).La,itemReady:!1,controlsEnabled:!1},i={position:0,duration:0,buffer:0,currentTime:0}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t,e,n){return Math.max(Math.min(t,n),e)}},function(t,e,n){"use strict";var r=n(0),i=n(6),o=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};e.a=o,o.prototype=Object(r.j)({},i.a)},function(t,e,n){"use strict";var r=n(6),i={on:r.a.on,once:r.a.once,off:r.a.off,trigger:r.a.trigger,get:function(t){return this.attributes=this.attributes||{},this.attributes[t]},set:function(t,e){if(this.attributes=this.attributes||{},this.attributes[t]!==e){var n=this.attributes[t];this.attributes[t]=e,this.trigger("change:"+t,this,e,n)}},clone:function(){var t={},e=this.attributes;if(e)for(var n in e)t[n]=e[n];return t},change:function(t,e,n){this.on("change:"+t,e,n);var r=this.get(t);return e.call(n,this,r,r),this}};e.a=i},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=4,i=2,o=1},function(t,e,n){"use strict";function r(t,e,n){function o(){for(;r.length>0;){var e=r.shift(),n=e.command,o=e.args;(i[n]||t[n]).apply(t,o)}}var r=[],i={};e.forEach(function(e){var u=t[e];i[e]=u,t[e]=function(){var t=Array.prototype.slice.call(arguments,0);n()?r.push({command:e,args:t}):(o(),u&&u.apply(this,t))}}),Object.defineProperty(this,"queue",{enumerable:!0,get:function(){return r}}),this.flush=o,this.empty=function(){r.length=0},this.off=function(){e.forEach(function(e){var n=i[e];n&&(t[e]=n,delete i[e])})},this.destroy=function(){this.off(),this.empty()}}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=n(3),i=function(){},o=function(){return!1},u={name:"default"},a={supports:o,play:i,pause:i,preload:i,load:i,stop:i,volume:i,mute:i,seek:i,resize:i,remove:i,destroy:i,eventsOn_:i,eventsOff_:i,setVisibility:i,setFullscreen:i,getFullscreen:o,supportsFullscreen:o,getContainer:i,setContainer:i,getName:function(){return u},getQualityLevels:i,getCurrentQuality:i,setCurrentQuality:i,getAudioTracks:i,getCurrentAudioTrack:i,setCurrentAudioTrack:i,getSeekRange:function(){return{start:0,end:this.getDuration()}},setPlaybackRate:i,getPlaybackRate:function(){return 1},getBandwidthEstimate:function(){return null},setControls:i,attachMedia:i,detachMedia:i,init:i,setState:function(t){this.state=t,this.trigger(r.Z,{newstate:t})},sendMediaType:function(t){var e=t[0],n=e.type,i=e.mimeType,o="aac"===n||"mp3"===n||"mpeg"===n||i&&0===i.indexOf("audio/");this.trigger(r.R,{mediaType:o?"audio":"video"})}};e.a=a},function(t,e,n){"use strict";function s(t){return t.slice&&"px"===t.slice(-2)&&(t=t.slice(0,-2)),t}function v(t){var e="file:"===window.location.protocol?"https:":"",n={jwpsrv:"//ssl.p.jwpcdn.com/player/v/8.5.6/jwpsrv.js",dai:"//ssl.p.jwpcdn.com/player/plugins/dai/v/0.4.1/dai.js",vast:"//ssl.p.jwpcdn.com/player/plugins/vast/v/8.4.10/vast.js",googima:"//ssl.p.jwpcdn.com/player/plugins/googima/v/8.5.1/googima.js",freewheel:"//ssl.p.jwpcdn.com/player/plugins/freewheel/v/2.1.9/freewheel.js",related:"//ssl.p.jwpcdn.com/player/plugins/related/v/7.0.1/related.js",gapro:"//ssl.p.jwpcdn.com/player/plugins/gapro/v/2.1.3/gapro.js"}[t];return n?e+n:""}function g(t,e,n){e&&(t[e.client||v(n)]=e,delete e.client)}function k(t){var e=t.get("playlist");if("string"==typeof e)return new j.a(function(n,r){var i=new w.a;i.on(b.Ca,function(e){var r=e.playlist;delete e.playlist,x(t,r,e),n()}),i.on(b.w,function(e){x(t,[],{}),r(Object(d.z)(e,d.u))}),i.load(e)});var n=t.get("feedData")||{};return x(t,e,n),j.b}function x(t,e,n){var r=t.attributes;r.playlist=Object(O.a)(e),r.feedData=n}function S(t){var e=t.get("skin")?t.get("skin").url:void 0;return"string"!=typeof e||function(t){for(var e=document.styleSheets,n=0,r=e.length;n<r;n++)if(e[n].href===t)return!0;return!1}(e)?j.b:new C.a(e,!0).load()["catch"](function(t){return t})}function P(t){return t.attributes._destroyed}function M(t,e,r){return r.push(function(t,e){var r=t.get("related"),i=Object(p.a)(t.get("edition")),o=r===Object(r)&&i("discovery");if(!1!==t.get("controls")||o){var u=!1!==t.get("visualplaylist")||o;return o||(r={disableRelated:!0}),r.showButton=u,n.e(0).then(function(){if(!t.attributes._destroyed){var o=new _.b;o.name="related",o.js=n(143)["default"],Object(_.a)(o,r,e)}}.bind(null,n))["catch"](Object(y.b)(A))["catch"](function(t){console.warn(d.p.logMessage(t.code))})}return j.b}(t,e)),function(t){return k(t).then(function(){return t.get("drm")||Object(E.b)(t.get("playlist"))?Object(E.d)(t.get("edition")):j.b})}(t).then(function(){return T(t,e,r)})}function D(t,e){this.namespace=t,this.items=e}function H(t){t.src||t.load()}function U(){var t=document.createElement("video");return t.className="jw-video jw-reset",t.setAttribute("tabindex","-1"),t.setAttribute("disableRemotePlayback",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),t}function G(t,e){e&&e.code&&(e.sourceError&&console.error(e.sourceError),console.error(d.p.logMessage(e.code)))}function Z(t,e){if(!document.body.contains(t.currentContainer)){var n=document.getElementById(t.get("id"));n&&(t.currentContainer=n)}t.currentContainer.parentElement&&t.currentContainer.parentElement.replaceChild(e,t.currentContainer),t.currentContainer=e}var r=n(0),i=n(52),o=n(18),u=n(12),a=n(7),c={autostart:!1,bandwidthEstimate:null,bitrateSelection:null,castAvailable:!1,controls:!0,defaultPlaybackRate:1,displaydescription:!0,displaytitle:!0,height:360,liveTimeout:null,localization:{airplay:"AirPlay",audioTracks:"Audio Tracks",buffer:"Loading",cast:"Chromecast",cc:"Closed Captions",close:"Close",copied:"Copied",errors:{badConnection:"This video cannot be played because of a problem with your internet connection.",cantLoadPlayer:"Sorry, the video player failed to load.",cantPlayInBrowser:"The video cannot be played in this browser.",cantPlayVideo:"This video file cannot be played.",errorCode:"Error Code",liveStreamDown:"The live stream is either down or has ended.",protectedContent:"There was a problem providing access to protected content.",technicalError:"This video cannot be played because of a technical error."},fullscreen:"Fullscreen",hd:"Quality",liveBroadcast:"Live",loadingAd:"Loading ad",more:"More",next:"Next",nextUp:"Next Up",nextUpClose:"Next Up Close",pause:"Pause",player:"Video Player",play:"Play",playback:"Start Playback",playbackRates:"Playback Rates",playlist:"Playlist",prev:"Previous",related:"More Videos",replay:"Replay",rewind:"Rewind 10 Seconds",settings:"Settings",stop:"Stop",unmute:"Unmute",videoInfo:"About This Video",volume:"Volume"},mute:!1,nextUpDisplay:!0,playbackRateControls:!1,playbackRates:[.5,1,1.25,1.5,2],renderCaptionsNatively:!1,repeat:!1,stretching:"uniform",volume:90,width:640},l=function(t,e){var i=Object(r.j)({},(window.jwplayer||{}).defaults,e,t);!function(t){Object.keys(t).forEach(function(e){"id"!==e&&(t[e]=Object(u.serialize)(t[e]))})}(i),i.localization=Object(r.j)({},c.localization,i.localization),i.localization.errors=Object(r.j)({},c.localization.errors,i.localization.errors);var l=Object(r.j)({},c,i);"."===l.base&&(l.base=Object(o.getScriptPath)("jwplayer.js")),l.base=(l.base||Object(o.loadFrom)()).replace(/\/?$/,"/"),n.p=l.base,l.width=s(l.width),l.height=s(l.height),l.aspectratio=function(t){if(-1===l.width.toString().indexOf("%"))return 0;if("string"!=typeof t||!t)return 0;if(/^\d*\.?\d+%$/.test(t))return t;var n=t.indexOf(":");if(-1===n)return 0;var r=parseFloat(t.substr(0,n)),i=parseFloat(t.substr(n+1));return r<=0||i<=0?0:i/r*100+"%"}(l.aspectratio),l.volume=Object(r.z)(l.volume)?Math.min(Math.max(0,l.volume),100):c.volume,l.mute=!!l.mute;var f=l.playbackRateControls;if(f){var d=l.playbackRates;Array.isArray(f)&&(d=f),(d=d.filter(function(t){return Object(r.v)(t)&&t>=.25&&t<=4}).map(function(t){return Math.round(100*t)/100})).indexOf(1)<0&&d.push(1),d.sort(),l.playbackRateControls=!0,l.playbackRates=d}(!l.playbackRateControls||l.playbackRates.indexOf(l.defaultPlaybackRate)<0)&&(l.defaultPlaybackRate=1),l.playbackRate=l.defaultPlaybackRate,l.aspectratio||delete l.aspectratio;var p=l.playlist;if(p)Array.isArray(p.playlist)&&(l.feedData=p,l.playlist=p.playlist);else{var h=Object(r.D)(l,["title","description","type","mediaid","image","file","sources","tracks","preload","duration"]);l.playlist=[h]}l.qualityLabels=l.qualityLabels||l.hlslabels,delete l.duration;var v=l.liveTimeout;null!==v&&(Object(r.z)(v)?0!==v&&(v=Math.max(30,v)):v=null,l.liveTimeout=v);var g,m,y=parseFloat(l.bandwidthEstimate),b=parseFloat(l.bitrateSelection);return l.bandwidthEstimate=Object(r.z)(y)?y:(g=l.defaultBandwidthEstimate,m=parseFloat(g),Object(r.z)(m)?Math.max(m,1):c.bandwidthEstimate),l.bitrateSelection=Object(r.z)(b)?b:c.bitrateSelection,l.backgroundLoading=Object(r.r)(l.backgroundLoading)?l.backgroundLoading:a.Features.backgroundLoading,l},f=n(46),d=n(1),p=n(17),h="__CONTEXTUAL__",m=function(t,e){var i=l(t,e),u=i.key||window.jwplayer&&window.jwplayer.key,a=new f.a(u).edition();if(i.key=u,i.edition=a,i.error=null,"unlimited"===a){var c=Object(o.getScriptPath)("jwplayer.js");if(!c)throw new Error("Error setting up player: Could not locate jwplayer.js script tag");n.p=c}if("invalid"===a||"expired"===a){var s=void 0===u?"missing":a;i.error=new d.p(d.j,function(){switch(s){case"missing":return d.s;case"expired":return d.q;default:return d.r}}())}i.flashplayer=function(t){var e=t.flashplayer;return e||(e=(Object(o.getScriptPath)("jwplayer.js")||t.base)+"jwplayer.flash.swf"),"http:"===window.location.protocol&&(e=e.replace(/^https/,"http")),e}(i),i.plugins=function(t){var e=Object(r.j)({},t.plugins),n=t.edition,i=Object(p.a)(n);if(i("ads")){var o=Object(r.j)({},t.advertising),u=o.client;if(u)e[v(u)||u]=o,delete o.client}if(i("jwpsrv")){var c=t.analytics;c!==Object(c)&&(c={}),g(e,c,"jwpsrv")}return g(e,t.ga,"gapro"),e}(i);var m,y=i.ab;return y&&Object.keys(y.tests).forEach(function(t){y.tests[t].forEach(function(t){t.addConfig&&t.addConfig(i,t.selection)})}),m=i.playlist,Object(r.x)(m)&&m.indexOf(h)>-1&&(i.playlist=function(t,e){var n=function(t){var e=t.querySelector('meta[property="og:title"]');if(e)return e.getAttribute("content")}(t),r=(t.querySelector("title")||{}).textContent,i=encodeURIComponent(n||r||"");return e.replace(h,i)}(document,i.playlist),i.contextual=!0),i},y=n(9),b=n(3),j=n(5),w=n(56),O=n(26),C=n(30),T=function(t,e,n){return P(t)?j.a.reject():j.a.all(n.concat([(r=t,k(r).then(function(){if(!P(r)){var t=Object(O.b)(r.get("playlist"),r);r.attributes.playlist=t;try{Object(O.e)(t)}catch(t){throw t.code+=d.u,t}var e=r.getProviders(),n=e.choose(t[0].sources[0]),i=n.provider,o=n.name;return"function"==typeof i?i:y.a.html5&&"html5"===o?y.a.html5:e.load(o)["catch"](function(t){throw Object(d.z)(t,d.v)})}})),S(t)]));var r},E=n(36),_=n(24),A=301129,N=n(23),F=function(t){var e=void 0;this.start=function(n){var r=j.a.all([Object(y.c)(t),Object(N.a)(t,n),M(t,n,[])]),i=new j.a(function(t,n){e=setTimeout(function(){var t=new d.p(d.j,d.x);n(t)},3e4);var i=function(){clearTimeout(e),t()};r.then(i)["catch"](i)});return j.a.race([r,i])},this.destroy=function(){clearTimeout(e),t.set("_destroyed",!0),t=null}},I=n(41),R=n(27),L=n(21),B={removeItem:function(){}};try{B=window.localStorage||B}catch(t){}Object(r.j)(D.prototype,{getAllItems:function(){var t=this;return this.items.reduce(function(e,n){var r=B[t.namespace+"."+n];return r&&(e[n]=Object(u.serialize)(r)),e},{})},track:function(t){var e=this;this.items.forEach(function(n){t.on("change:"+n,function(t,r){try{B[e.namespace+"."+n]=r}catch(t){L.a.debug&&console.error(t)}})})},clear:function(){var t=this;this.items.forEach(function(e){B.removeItem(t.namespace+"."+e)})}});var z=D,q=n(50),Q=n(47),V=n(6),X=n(42),W=n(51),J=n(55),K=n(34);n.d(e,"b",function(){return Z});var Y=function(){};Object(r.j)(Y.prototype,q.a);var $=function(t){this._events={},this.modelShim=new Y,this.modelShim._qoeItem=new R.a,this.mediaShim={},this.setup=new F(this.modelShim),this.currentContainer=this.originalContainer=t,this.apiQueue=new i.a(this,["load","play","pause","seek","stop","playlistItem","playlistNext","playlistPrev","next","preload","setConfig","setCurrentAudioTrack","setCurrentCaptions","setCurrentQuality","setFullscreen","addButton","removeButton","castToggle","setMute","setVolume","setPlaybackRate","setCues","setPlaylistItem","resize","setCaptions","setControls"],function(){return!0})};Object(r.j)($.prototype,{on:V.a.on,once:V.a.once,off:V.a.off,trigger:V.a.trigger,init:function(t,e){var n=this,i=this.modelShim,o=new z("jwplayer",["volume","mute","captionLabel","bandwidthEstimate","bitrateSelection","qualityLabel"]),u=o&&o.getAllItems();i.attributes=i.attributes||{},Object(r.j)(this.mediaShim,Q.a);var a=t,c=m(Object(r.j)({},t),u);c.id=e.id,c.setupConfig=a,Object(r.j)(i.attributes,c,Q.b),i.getProviders=function(){return new I.a(c)},i.setProvider=function(){};var s=function(){for(var t=W.c,e=[],n=[],r=0;r<t;r++){var i=U();e.push(i),n.push(i),H(i)}var o=n.shift(),u=n.shift(),a=!1;return{primed:function(){return a},prime:function(){e.forEach(H),a=!0},played:function(){a=!0},getPrimedElement:function(){return n.length?n.shift():null},getAdElement:function(){return o},getTestElement:function(){return u},clean:function(t){if(t.src){t.removeAttribute("src");try{t.load()}catch(t){}}},recycle:function(t){t&&!n.some(function(e){return e===t})&&(this.clean(t),n.push(t))},syncVolume:function(t){var n=Math.min(Math.max(0,t/100),1);e.forEach(function(t){t.volume=n})},syncMute:function(t){e.forEach(function(e){e.muted=t})}}}();i.get("backgroundLoading")||(s=Object(J.a)(s.getPrimedElement(),s));var l=new K.a(Object(K.b)(this.originalContainer)).once("gesture",function(){s.prime(),n.preload(),l.destroy()});return i.on("change:errorEvent",G),this.setup.start(e).then(function(t){if(!t)throw Object(d.z)(null,d.w);var u=t[0];if(n.setup){var a=n.modelShim.clone();if(a.error)throw a.error;var c=n.apiQueue.queue.slice(0);n.apiQueue.destroy(),Object(r.j)(n,u.prototype),n.setup(a,e,n.originalContainer,n._events,c,s);var l=n._model;return i.off("change:errorEvent",G),l.on("change:errorEvent",G),o.track(l),n.updatePlaylist(l.get("playlist"),l.get("feedData"))["catch"](function(t){throw Object(d.z)(t,d.u)})}}).then(function(){n.setup&&n.playerReady()})["catch"](function(t){n.setup&&function(t,e,n){j.b.then(function(){var r=Object(d.A)(d.o,d.y,n),i=t._model||t.modelShim;r.message=r.message||i.get("localization").errors[r.key],delete r.key;var o=i.get("contextual");if(!o){var u=Object(X.a)(t,r);X.a.cloneIcon&&u.querySelector(".jw-icon").appendChild(X.a.cloneIcon("error")),Z(t,u)}i.set("errorEvent",r),i.set("state",b.Ka),t.trigger(b.Ha,r),o&&e.remove()})}(n,e,t)})},playerDestroy:function(){this.apiQueue&&this.apiQueue.destroy(),this.setup&&this.setup.destroy(),this.off(),this._events=this._model=this.modelShim=this.originalContainer=this.apiQueue=this.setup=null},getContainer:function(){return this.currentContainer},get:function(t){if(this.modelShim)return t in this.mediaShim?this.mediaShim[t]:this.modelShim.get(t)},getItemQoe:function(){return this.modelShim._qoeItem},getConfig:function(){return Object(r.j)({},this.modelShim.attributes,this.mediaShim)},getCurrentCaptions:function(){return this.get("captionsIndex")},getWidth:function(){return this.get("containerWidth")},getHeight:function(){return this.get("containerHeight")},getMute:function(){return this.get("mute")},getProvider:function(){return this.get("provider")},getState:function(){return this.get("state")},getAudioTracks:function(){return null},getCaptionsList:function(){return null},getQualityLevels:function(){return null},getVisualQuality:function(){return null},getCurrentQuality:function(){return-1},getCurrentAudioTrack:function(){return-1},getSafeRegion:function(){return{x:0,y:0,width:0,height:0}},isBeforeComplete:function(){return!1},isBeforePlay:function(){return!1},createInstream:function(){return null},skipAd:function(){},attachMedia:function(){},detachMedia:function(){return null}}),e.a=$},function(t,e,n){"use strict";function i(t,e){return Object(r.j)({},e,{prime:function(){t.src||t.load()},getPrimedElement:function(){return t},clean:function(){e.clean(t)},recycle:function(){e.clean(t)}})}n.d(e,"a",function(){return i});var r=n(0)},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(4),u=n(44),a=n(39),c=n(6),s=n(1);e.a=function(){function e(e){try{var a=e.responseXML?e.responseXML.childNodes:null,c="",l=void 0;if(a){for(var f=0;f<a.length&&8===(c=a[f]).nodeType;f++);if("xml"===Object(o.b)(c)&&(c=c.nextSibling),"rss"===Object(o.b)(c)){var d=Object(u.a)(c);l=Object(r.j)({playlist:d},d.feedData)}}if(!l)try{var p=JSON.parse(e.responseText);if(Array.isArray(p))l={playlist:p};else{if(!Array.isArray(p.playlist))throw Error("Playlist is not an array");l=p}}catch(t){throw new s.p(s.l,621,t)}t.trigger(i.Ca,l)}catch(t){n(t)}}function n(e){e.code||(e=new s.p(s.l,0)),t.trigger(i.w,e)}var t=Object(r.j)(this,c.a);this.load=function(t){Object(a.a)(t,e,function(t,e,r,i){n(i)})},this.destroy=function(){this.off()}}},function(t,e,n){"use strict";function i(t){return"hls"===t.type&&r.OS.android?!1!==t.androidhls&&!r.Browser.firefox&&parseFloat(r.OS.version.version)>=4.4:null}n.d(e,"a",function(){return i});var r=n(7)},function(t,e,n){"use strict";function w(t,e){this.name=t,this.message=e.message||e.toString(),this.error=e}function _(t,e){var n=new h.a(e);return n.on(v.Fa,function(e){t._qoe.tick("ready"),e.setupTime=t._qoe.between("setup","ready")}),n.on("all",function(e,n){t.trigger(e,n)}),n}function A(t,e){var n=t.plugins;Object.keys(n).forEach(function(t){delete n[t]}),e.get("setupConfig")&&t.trigger("remove"),t.off(),e.playerDestroy(),e.getContainer().removeAttribute("data-jwplayer-id")}function M(t){var e=++E,n=t.id||"player-"+e,i=new g.a,u={},a=_(this,t);i.tick("init"),t.setAttribute("data-jwplayer-id",n),Object.defineProperties(this,{id:{get:function(){return n}},uniqueId:{get:function(){return e}},plugins:{get:function(){return u}},_qoe:{get:function(){return i}},version:{get:function(){return f.a}},Events:{get:function(){return m.a}},utils:{get:function(){return T}},_:{get:function(){return r.f}}}),Object(r.j)(this,{_events:{},setup:function(e){return i.clear("ready"),i.tick("setup"),A(this,a),(a=_(this,t)).init(e,this),this.on(e.events,null,this)},remove:function(){return function(t){for(var e=o.a.length;e--;)if(o.a[e].uniqueId===t.uniqueId){o.a.splice(e,1);break}}(this),A(this,a),this},qoe:function(){var t=a.getItemQoe();return{setupTime:this._qoe.between("setup","ready"),firstFrame:t.getFirstFrame?t.getFirstFrame():null,player:this._qoe.dump(),item:t.dump()}},getAudioTracks:function(){return a.getAudioTracks()},getBuffer:function(){return a.get("buffer")},getCaptions:function(){return a.get("captions")},getCaptionsList:function(){return a.getCaptionsList()},getConfig:function(){return a.getConfig()},getContainer:function(){return a.getContainer()},getControls:function(){return a.get("controls")},getCurrentAudioTrack:function(){return a.getCurrentAudioTrack()},getCurrentCaptions:function(){return a.getCurrentCaptions()},getCurrentQuality:function(){return a.getCurrentQuality()},getCurrentTime:function(){return a.get("currentTime")},getDuration:function(){return a.get("duration")},getEnvironment:function(){return p},getFullscreen:function(){return a.get("fullscreen")},getHeight:function(){return a.getHeight()},getItemMeta:function(){return a.get("itemMeta")||{}},getMute:function(){return a.getMute()},getPlaybackRate:function(){return a.get("playbackRate")},getPlaylist:function(){return a.get("playlist")},getPlaylistIndex:function(){return a.get("item")},getPlaylistItem:function(t){if(!T.exists(t))return a.get("playlistItem");var e=this.getPlaylist();return e?e[t]:null},getPosition:function(){return a.get("position")},getProvider:function(){return a.getProvider()},getQualityLevels:function(){return a.getQualityLevels()},getSafeRegion:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return a.getSafeRegion(t)},getState:function(){return a.getState()},getStretching:function(){return a.get("stretching")},getViewable:function(){return a.get("viewable")},getVisualQuality:function(){return a.getVisualQuality()},getVolume:function(){return a.get("volume")},getWidth:function(){return a.getWidth()},setCaptions:function(t){return a.setCaptions(t),this},setConfig:function(t){return a.setConfig(t),this},setControls:function(t){return a.setControls(t),this},setCurrentAudioTrack:function(t){a.setCurrentAudioTrack(t)},setCurrentCaptions:function(t){a.setCurrentCaptions(t)},setCurrentQuality:function(t){a.setCurrentQuality(t)},setFullscreen:function(t){return a.setFullscreen(t),this},setMute:function(t){return a.setMute(t),this},setPlaybackRate:function(t){return a.setPlaybackRate(t),this},setPlaylistItem:function(t,e){return a.setPlaylistItem(t,e),this},setCues:function(t){return a.setCues(t),this},setVolume:function(t){return a.setVolume(t),this},load:function(t,e){return a.load(t,e),this},play:function(t){return a.play(t),this},pause:function(t){return a.pause(t),this},playToggle:function(t){switch(this.getState()){case v.Oa:case v.Ia:return this.pause(t);default:return this.play(t)}},seek:function(t,e){return a.seek(t,e),this},playlistItem:function(t,e){return a.playlistItem(t,e),this},playlistNext:function(t){return a.playlistNext(t),this},playlistPrev:function(t){return a.playlistPrev(t),this},next:function(t){return a.next(t),this},castToggle:function(){return a.castToggle(),this},createInstream:function(){return a.createInstream()},skipAd:function(){return a.skipAd(),this},stop:function(){return a.stop(),this},resize:function(t,e){return a.resize(t,e),this},addButton:function(t,e,n,r,i){return a.addButton(t,e,n,r,i),this},removeButton:function(t){return a.removeButton(t),this},attachMedia:function(){return a.attachMedia(),this},detachMedia:function(){return a.detachMedia(),this},isBeforeComplete:function(){return a.isBeforeComplete()},isBeforePlay:function(){return a.isBeforePlay()}})}function F(t){for(var e=0;e<o.a.length;e++)if(o.a[e].id===t)return o.a[e];return null}n.r(e);var r=n(0),i=n(18),o=n(13),u=n(15),a=n(14),c={availableProviders:u.a,registerProvider:a.a},s=n(23);c.registerPlugin=function(t,e,n){"jwpsrv"!==t&&Object(s.b)(t,e,n)};var l=c,f=n(28),d=n(21),p=n(7),h=n(54),v=n(3),g=n(27),m=n(6),y=n(11),b=n(12),j=n(2),O=n(8),C=n(10),k=n(22),x=n(39),S=n(48),P=n(31),T=Object(r.j)({},b,y,i,{addClass:C.a,hasClass:C.h,removeClass:C.l,replaceClass:C.m,toggleClass:C.p,classList:C.d,styleDimension:C.o,createElement:C.e,emptyElement:C.g,addStyleSheet:C.b,bounds:C.c,css:k.b,clearCss:k.a,style:k.d,transform:k.e,getRgba:k.c,ajax:x.a,crossdomain:function(t){var e=document.createElement("a"),n=document.createElement("a");e.href=location.href;try{return n.href=t,n.href=n.href,e.protocol+"//"+e.host!=n.protocol+"//"+n.host}catch(t){}return!0},tryCatch:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(d.a.debug)return t.apply(e||this,n);try{return t.apply(e||this,n)}catch(e){return new w(t.name,e)}},Error:w,Timer:g.a,log:P.a,between:S.a,foreach:function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},flashVersion:O.a,isIframe:O.m,indexOf:r.p,trim:j.h,pad:j.d,extension:j.a,hms:j.b,seconds:j.f,prefix:j.e,suffix:j.g,noop:function(){}}),E=0;Object(r.j)(M.prototype,{on:function(t,e,n){return m.c.call(this,t,e,n)},once:function(t,e,n){return m.d.call(this,t,e,n)},off:function(t,e,n){return m.b.call(this,t,e,n)},trigger:function(t,e){return(e=r.f.isObject(e)?Object(r.j)({},e):{}).type=t,d.a.debug?m.e.call(this,t,e):m.f.call(this,t,e)},getPlugin:function(t){return this.plugins[t]},addPlugin:function(t,e){this.plugins[t]=e,this.on("ready",e.addToPlayer),e.resize&&this.on("resize",e.resizeHandler)},registerPlugin:function(t,e,n){Object(s.b)(t,e,n)},getAdBlock:function(){return!1},playAd:function(){},pauseAd:function(){}}),n.p=Object(i.loadFrom)();var N=function(t){var e=void 0,n=void 0;if(t?"string"==typeof t?(e=F(t))||(n=document.getElementById(t)):"number"==typeof t?e=o.a[t]:t.nodeType&&(e=F((n=t).id||n.getAttribute("data-jwplayer-id"))):e=o.a[0],e)return e;if(n){var r=new M(n);return o.a.push(r),r}return{registerPlugin:s.b}};Object.defineProperties(N,{api:{get:function(){return l},set:function(){}},version:{get:function(){return f.a},set:function(){}},debug:{get:function(){return d.a.debug},set:function(t){d.a.debug=!!t}}});var I=N,R=n(34),L=n(46),B=n(30),D=n(45),z=n(44),q=n(38),Q=r.f.extend,V={};V.api=l,V._=r.f,V.version="8.5.6+commercial_v8-5-6.287.commercial.1068f82.hlsjs..jwplayer.409c173.dai.ac94f63.freewheel.503251f.googima.8001841.vast.85cf67a.analytics.706e657.gapro.f664e4e.related.b0b8e78",V.utils=Object(r.j)(T,{key:L.a,extend:Q,scriptloader:B.a,rssparser:{parse:z.a},tea:D.a,UI:R.a}),V.utils.css.style=V.utils.style,V.vid=q.a;var X=V,W=window;Object(r.j)(I,X),"function"==typeof W.define&&W.define.amd&&W.define([],function(){return I});var H=I;W.jwplayer&&(H=W.jwplayer),e["default"]=H}])["default"],function(a,b,c){function g(a,c){var e,d=b.createElement(a||"div");for(e in c)d[e]=c[e];return d}function h(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function j(a,b,c,d){var g=["opacity",b,~~(100*a),c,d].join("-"),h=.01+c/d*100,j=Math.max(1-(1-a)/b*(100-h),a),k=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=k&&"-"+k+"-"||"";return e[g]||(i.insertRule("@"+l+"keyframes "+g+"{0%{opacity:"+j+"}"+h+"%{opacity:"+a+"}"+(h+.01)+"%{opacity:1}"+(h+b)%100+"%{opacity:"+a+"}100%{opacity:"+j+"}}",0),e[g]=1),g}function k(a,b){var f,g,e=a.style;if(e[b]!==c)return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),g=0;g<d.length;g++)if(e[f=d[g]+b]!==c)return f}function l(a,b){for(var c in b)a.style[k(a,c)||c]=b[c];return a}function m(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function n(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var f,d=["webkit","Moz","ms","O"],e={},i=function(){var a=g("style");return h(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},p=function q(a){if(!this.spin)return new q(a);this.opts=m(a||{},q.defaults,o)};p.defaults={},m(p.prototype,{spin:function(a){this.stop();var h,i,b=this,c=b.opts,d=b.el=l(g(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),e=c.radius+c.length+c.width;if(a&&(a.insertBefore(d,a.firstChild||null),i=n(a),h=n(d),l(d,{left:("auto"==c.left?i.x-h.x+(a.offsetWidth>>1):c.left+e)+"px",top:("auto"==c.top?i.y-h.y+(a.offsetHeight>>1):c.top+e)+"px"})),d.setAttribute("aria-role","progressbar"),b.lines(d,b.opts),!f){var j=0,k=c.fps,m=k/c.speed,o=(1-c.opacity)/(m*c.trail/100),p=m/c.lines;!function q(){j++;for(var a=c.lines;a;a--){var e=Math.max(1-(j+a*p)%m*o,c.opacity);b.opacity(d,c.lines-a,e,c)}b.timeout=b.el&&setTimeout(q,~~(1e3/k))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function e(a,d){return l(g(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:d,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*c+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.width>>1)+"px"})}for(var d,c=0;c<b.lines;c++)d=l(g(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:f&&j(b.opacity,b.trail,c,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&h(d,l(e("#000","0 0 4px #000"),{top:"2px"})),h(a,h(d,e(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),function(){function a(a,b){return g("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}var b=l(g("group"),{behavior:"url(#default#VML)"});!k(b,"transform")&&b.adj?(i.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(b,c){function f(){return l(a("group",{coordsize:e+" "+e,coordorigin:-d+" "+-d}),{width:e,height:e})}function k(b,e,g){h(i,h(l(f(),{rotation:360/c.lines*b+"deg",left:~~e}),h(l(a("roundrect",{arcsize:1}),{width:d,height:c.width,left:c.radius,top:-c.width>>1,filter:g}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var j,d=c.length+c.width,e=2*d,g=2*-(c.width+c.length)+"px",i=l(f(),{position:"absolute",top:g,left:g});if(c.shadow)for(j=1;j<=c.lines;j++)k(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(j=1;j<=c.lines;j++)k(j);return h(b,i)},p.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&((e=(e=(e=e.childNodes[b+d])&&e.firstChild)&&e.firstChild)&&(e.opacity=c))}):f=k(b,"animation")}(),a.Spinner=p}(window,document),$.fn.spin=function(opts){return this.each(function(){var $this=$(this),spinner=$this.data("spinner");spinner&&spinner.stop(),!1!==opts&&(opts=$.extend({color:$this.css("color")},opts),spinner=new Spinner(opts).spin(this),$this.data("spinner",spinner))}),this},
/*! Picturefill - v2.1.0-beta - 2014-06-03
 * http://scottjehl.github.io/picturefill
 * Copyright (c) 2014 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT */
window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b){"use strict";function c(a){for(var b,c,d,f,g,h,i=0,j=(b=(a=a||{}).elements||e.getAllElements()).length;j>i;i++)if(d=(c=b[i]).nodeName.toUpperCase(),f=void 0,g=void 0,h=void 0,c[e.ns]||(c[e.ns]={}),a.reevaluate||!c[e.ns].evaluated){if("PICTURE"===d){if(e.removeVideoShim(c),!1===(f=e.getMatch(c)))continue;h=c.getElementsByTagName("img")[0]}else f=void 0,h=c;h&&(h[e.ns]||(h[e.ns]={}),h.srcset&&("PICTURE"===d||h.getAttribute("sizes"))&&e.dodgeSrcset(h),f?(g=e.processSourceSet(f),e.applyBestCandidate(g,h)):(g=e.processSourceSet(h),(void 0===h.srcset||h[e.ns].srcset)&&e.applyBestCandidate(g,h)),c[e.ns].evaluated=!0)}}function d(){c();var e,d=setInterval(function(){return c(),/^loaded|^i|^c/.test(b.readyState)?void clearInterval(d):void 0},250);a.addEventListener&&a.addEventListener("resize",function(){a._picturefillWorking||(a._picturefillWorking=!0,a.clearTimeout(e),e=a.setTimeout(function(){c({reevaluate:!0}),a._picturefillWorking=!1},60))},!1)}if(!a.HTMLPictureElement){b.createElement("picture");var e={ns:"picturefill"};e.srcsetSupported=void 0!==(new a.Image).srcset,e.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},e.endsWith=function(a,b){return a.endsWith?a.endsWith(b):-1!==a.indexOf(b,a.length-b.length)},e.matchesMedia=function(b){return a.matchMedia&&a.matchMedia(b).matches},e.getDpr=function(){return a.devicePixelRatio||1},e.getWidthFromLength=function(a){return a=(a=a&&parseFloat(a)>0?a:"100vw").replace("vw","%"),e.lengthEl||(e.lengthEl=b.createElement("div"),b.documentElement.insertBefore(e.lengthEl,b.documentElement.firstChild)),e.lengthEl.style.cssText="position: absolute; left: 0; width: "+a+";",e.lengthEl.offsetWidth},e.types={},e.types["image/jpeg"]=!0,e.types["image/gif"]=!0,e.types["image/png"]=!0,e.types["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),e.types["image/webp"]=function(){var b=new a.Image,d="image/webp";b.onerror=function(){e.types[d]=!1,c()},b.onload=function(){e.types[d]=1===b.width,c()},b.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},e.verifyTypeSupport=function(a){var b=a.getAttribute("type");return null===b||""===b||("function"==typeof e.types[b]?(e.types[b](),"pending"):e.types[b])},e.parseSize=function(a){var b=/(\([^)]+\))?\s*(.+)/g.exec(a);return{media:b&&b[1],length:b&&b[2]}},e.findWidthFromSourceSize=function(a){for(var b,c=e.trim(a).split(/\s*,\s*/),d=0,f=c.length;f>d;d++){var g=c[d],h=e.parseSize(g),i=h.length,j=h.media;if(i&&(!j||e.matchesMedia(j))){b=i;break}}return e.getWidthFromLength(b)},e.parseSrcset=function(a){for(var b=[];""!==a;){var c,d=(a=a.replace(/^\s+/g,"")).search(/\s/g),e=null;if(-1!==d){if((","===(c=a.slice(0,d))[c.length-1]||""===c)&&(c=c.replace(/,+$/,""),e=""),a=a.slice(d+1),null===e){var g=a.indexOf(",");-1!==g?(e=a.slice(0,g),a=a.slice(g+1)):(e=a,a="")}}else c=a,a="";(c||e)&&b.push({url:c,descriptor:e})}return b},e.parseDescriptor=function(a,b){var c,d=a&&a.replace(/(^\s+|\s+$)/g,""),f=b?e.findWidthFromSourceSize(b):"100%";if(d)for(var g=d.split(" "),h=g.length+1;h>=0;h--){var i=g[h],j=i&&i.slice(i.length-1);if(("w"===j||"x"===j)&&(c=i),b&&c)c=parseFloat(parseInt(i,10)/f);else{var k=i&&parseFloat(i,10);c=k&&!isNaN(k)&&"x"===j||"w"===j?k:1}}else c=1;return c},e.getCandidatesFromSourceSet=function(a,b){for(var c=e.parseSrcset(a),d=[],f=0,g=c.length;g>f;f++){var h=c[f];d.push({url:h.url,resolution:e.parseDescriptor(h.descriptor,b)})}return d},e.dodgeSrcset=function(a){a.srcset&&(a[e.ns].srcset=a.srcset,a.removeAttribute("srcset"))},e.processSourceSet=function(a){var b=a.getAttribute("srcset"),c=a.getAttribute("sizes"),d=[];return"IMG"===a.nodeName.toUpperCase()&&a[e.ns]&&a[e.ns].srcset&&(b=a[e.ns].srcset),b&&(d=e.getCandidatesFromSourceSet(b,c)),d},e.applyBestCandidate=function(a,b){var c,d,f;a.sort(e.ascendingSort),f=a[(d=a.length)-1];for(var g=0;d>g;g++)if((c=a[g]).resolution>=e.getDpr()){f=c;break}e.endsWith(b.src,f.url)||(b.src=f.url,b.currentSrc=b.src)},e.ascendingSort=function(a,b){return a.resolution-b.resolution},e.removeVideoShim=function(a){var b=a.getElementsByTagName("video");if(b.length){for(var c=b[0],d=c.getElementsByTagName("source");d.length;)a.insertBefore(d[0],c);c.parentNode.removeChild(c)}},e.getAllElements=function(){for(var a=b.getElementsByTagName("picture"),c=[],d=b.getElementsByTagName("img"),f=0,g=a.length+d.length;g>f;f++)if(f<a.length)c[f]=a[f];else{var h=d[f-a.length];"PICTURE"!==h.parentNode.nodeName.toUpperCase()&&(e.srcsetSupported&&h.getAttribute("sizes")||null!==h.getAttribute("srcset"))&&c.push(h)}return c},e.getMatch=function(a){for(var b,c=a.childNodes,d=0,f=c.length;f>d;d++){var g=c[d];if(1===g.nodeType){if("IMG"===g.nodeName.toUpperCase())return b;if("SOURCE"===g.nodeName.toUpperCase()){var h=g.getAttribute("media");if(g.getAttribute("srcset")&&(!h||e.matchesMedia(h))){var i=e.verifyTypeSupport(g);if(!0===i){b=g;break}if("pending"===i)return!1}}}}return b},d(),c._=e,"object"==typeof module&&"object"==typeof module.exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):"object"==typeof a&&(a.picturefill=c)}}(this,this.document),function(a){a.tooltipsy=function(c,b){this.options=b,this.$el=a(c),this.title=this.$el.attr("title")||"",this.$el.attr("title",""),this.random=parseInt(1e4*Math.random()),this.ready=!1,this.shown=!1,this.width=0,this.height=0,this.delaytimer=null,this.$el.data("tooltipsy",this),this.init()},a.tooltipsy.prototype={init:function(){var d,e=this,b=e.$el,c=b[0];e.settings=d=a.extend({},e.defaults,e.options),d.delay=+d.delay,"function"==typeof d.content&&e.readify(),d.showEvent===d.hideEvent&&"click"===d.showEvent?b.toggle(function(f){"click"===d.showEvent&&"A"==c.tagName&&f.preventDefault(),d.delay>0?e.delaytimer=window.setTimeout(function(){e.show(f)},d.delay):e.show(f)},function(f){"click"===d.showEvent&&"A"==c.tagName&&f.preventDefault(),window.clearTimeout(e.delaytimer),e.delaytimer=null,e.hide(f)}):b.bind(d.showEvent,function(f){"click"===d.showEvent&&"A"==c.tagName&&f.preventDefault(),e.delaytimer=window.setTimeout(function(){e.show(f)},d.delay||0)}).bind(d.hideEvent,function(f){"click"===d.showEvent&&"A"==c.tagName&&f.preventDefault(),window.clearTimeout(e.delaytimer),e.delaytimer=null,e.hide(f)})},show:function(i){!1===this.ready&&this.readify();var b=this,f=b.settings,h=b.$tipsy,k=b.$el,d=k[0],g=b.offset(d);if(!1===b.shown&&(function(m){var e,l=0;for(e in m)m.hasOwnProperty(e)&&l++;return l}(f.css)>0&&b.$tip.css(f.css),b.width=h.outerWidth(),b.height=h.outerHeight()),"cursor"===f.alignTo&&i)if((j=[i.clientX+f.offset[0],i.clientY+f.offset[1]])[0]+b.width>a(window).width())j[1],j[0];else j[1],j[0];else var j=[f.offset[0]<0?g.left-Math.abs(f.offset[0])-b.width:0===f.offset[0]?g.left-(b.width-k.outerWidth())/2:g.left+k.outerWidth()+f.offset[0],f.offset[1]<0?g.top-Math.abs(f.offset[1])-b.height:0===f.offset[1]?g.top-(b.height-b.$el.outerHeight())/2:g.top+b.$el.outerHeight()+f.offset[1]];h.css({top:j[1]+"px",left:j[0]+"px"}),b.settings.show(i,h.stop(!0,!0))},hide:function(c){var b=this;!1!==b.ready&&(c&&c.relatedTarget===b.$tip[0]?b.$tip.bind("mouseleave",function(d){d.relatedTarget!==b.$el[0]&&b.settings.hide(d,b.$tipsy.stop(!0,!0))}):b.settings.hide(c,b.$tipsy.stop(!0,!0)))},readify:function(){this.ready=!0,this.$tipsy=a('<div id="tooltipsy'+this.random+'" style="position:fixed;z-index:2147483647;display:none">').appendTo("body"),this.$tip=a('<div class="'+this.settings.className+'">').appendTo(this.$tipsy),this.$tip.data("rootel",this.$el);var c=this.$el,b=this.$tip;this.$tip.html(""!=this.settings.content?"string"==typeof this.settings.content?this.settings.content:this.settings.content(c,b):this.title)},offset:function(){return this.$el[0].getBoundingClientRect()},destroy:function(){this.$tipsy&&(this.$tipsy.remove(),a.removeData(this.$el,"tooltipsy"))},defaults:{alignTo:"element",offset:[0,-1],content:"",show:function(c,b){b.fadeIn(100)},hide:function(c,b){b.fadeOut(100)},css:{},className:"tooltipsy",delay:200,showEvent:"mouseenter",hideEvent:"mouseleave"}},a.fn.tooltipsy=function(b){return this.each(function(){new a.tooltipsy(this,b)})}}(jQuery),function(e,t,n){function s(t,n){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},i,n),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function o(t,n){var r=!0;return e.each(t,function(e){if("undefined"==typeof n[e]||t[e]!==n[e])return r=!1,!1}),r}function f(){return!a&&u}function l(){var t=(n.body||n.documentElement).style,r="transition";if("string"==typeof t[r])return!0;v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof t[v[i]+r])return!0;return!1}var r="tooltipster",i={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(){},functionBefore:function(e,t){t()},functionReady:function(){},functionAfter:function(){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};s.prototype={_init:function(){var t=this;if(n.querySelector){var r=null;t.$el.data("tooltipster-initialTitle")===undefined&&((r=t.$el.attr("title"))===undefined&&(r=null),t.$el.data("tooltipster-initialTitle",r)),null!==t.options.content?t._content_set(t.options.content):t._content_set(r);var i=t.options.functionInit.call(t.$el,t.$el,t.Content);void 0!==i&&t._content_set(i),t.$el.removeAttr("title").addClass("tooltipstered"),!u&&t.options.iconDesktop||u&&t.options.iconTouch?("string"==typeof t.options.icon?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,"hover"==t.options.trigger?(t.$elProxy.on("mouseenter."+t.namespace,function(){f()&&!t.options.touchDevices||(t.mouseIsOverProxy=!0,t._show())}).on("mouseleave."+t.namespace,function(){f()&&!t.options.touchDevices||(t.mouseIsOverProxy=!1)}),u&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})):"click"==t.options.trigger&&t.$elProxy.on("click."+t.namespace,function(){f()&&!t.options.touchDevices||t._show()})}},_show:function(){var e=this;"shown"!=e.Status&&"appearing"!=e.Status&&(e.options.delay?e.timerShow=setTimeout(function(){("click"==e.options.trigger||"hover"==e.options.trigger&&e.mouseIsOverProxy)&&e._showNow()},e.options.delay):e._showNow())},_showNow:function(n){var r=this;r.options.functionBefore.call(r.$el,r.$el,function(){if(r.enabled&&null!==r.Content){n&&r.callbacks.show.push(n),r.callbacks.hide=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null,r.options.onlyOne&&e(".tooltipstered").not(r.$el).each(function(t,n){var r=e(n),i=r.data("tooltipster-ns");e.each(i,function(e,t){var n=r.data(t),i=n.status(),s=n.option("autoClose");"hidden"!==i&&"disappearing"!==i&&s&&n.hide()})});var i=function(){r.Status="shown",e.each(r.callbacks.show,function(e,t){t.call(r.$el)}),r.callbacks.show=[]};if("hidden"!==r.Status){var s=0;"disappearing"===r.Status?(r.Status="appearing",l()?(r.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+r.options.animation+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.stop().fadeIn(i)):"shown"===r.Status&&i()}else{r.Status="appearing";s=r.options.speed;r.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var o="tooltipster-"+r.options.animation,a="-webkit-transition-duration: "+r.options.speed+"ms; -webkit-animation-duration: "+r.options.speed+"ms; -moz-transition-duration: "+r.options.speed+"ms; -moz-animation-duration: "+r.options.speed+"ms; -o-transition-duration: "+r.options.speed+"ms; -o-animation-duration: "+r.options.speed+"ms; -ms-transition-duration: "+r.options.speed+"ms; -ms-animation-duration: "+r.options.speed+"ms; transition-duration: "+r.options.speed+"ms; animation-duration: "+r.options.speed+"ms;",f=r.options.minWidth?"min-width:"+Math.round(r.options.minWidth)+"px;":"",c=r.options.maxWidth?"max-width:"+Math.round(r.options.maxWidth)+"px;":"",h=r.options.interactive?"pointer-events: auto;":"";if(r.$tooltip=e('<div class="tooltipster-base '+r.options.theme+'" style="'+f+" "+c+" "+h+" "+a+'"><div class="tooltipster-content"></div></div>'),l()&&r.$tooltip.addClass(o),r._content_insert(),r.$tooltip.appendTo("body"),r.reposition(),r.options.functionReady.call(r.$el,r.$el,r.$tooltip),l()?(r.$tooltip.addClass(o+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.css("display","none").fadeIn(r.options.speed,i),r._interval_set(),e(t).on("scroll."+r.namespace+" resize."+r.namespace,function(){r.reposition()}),r.options.autoClose)if(e("body").off("."+r.namespace),"hover"==r.options.trigger){if(u&&setTimeout(function(){e("body").on("touchstart."+r.namespace,function(){r.hide()})},0),r.options.interactive){u&&r.$tooltip.on("touchstart."+r.namespace,function(e){e.stopPropagation()});var p=null;r.$elProxy.add(r.$tooltip).on("mouseleave."+r.namespace+"-autoClose",function(){clearTimeout(p),p=setTimeout(function(){r.hide()},r.options.interactiveTolerance)}).on("mouseenter."+r.namespace+"-autoClose",function(){clearTimeout(p)})}else r.$elProxy.on("mouseleave."+r.namespace+"-autoClose",function(){r.hide()});r.options.hideOnClick&&r.$elProxy.on("click."+r.namespace+"-autoClose",function(){r.hide()})}else"click"==r.options.trigger&&(setTimeout(function(){e("body").on("click."+r.namespace+" touchstart."+r.namespace,function(){r.hide()})},0),r.options.interactive&&r.$tooltip.on("click."+r.namespace+" touchstart."+r.namespace,function(e){e.stopPropagation()}))}r.options.timer>0&&(r.timerHide=setTimeout(function(){r.timerHide=null,r.hide()},r.options.timer+s))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(0===e("body").find(t.$el).length||0===e("body").find(t.$elProxy).length||"hidden"==t.Status||0===e("body").find(t.$tooltip).length)"shown"!=t.Status&&"appearing"!=t.Status||t.hide(),t._interval_cancel();else if(t.options.positionTracker){var n=t._repositionInfo(t.$elProxy),r=!1;o(n.dimension,t.elProxyPosition.dimension)&&("fixed"===t.$elProxy.css("position")?o(n.position,t.elProxyPosition.position)&&(r=!0):o(n.offset,t.elProxyPosition.offset)&&(r=!0)),r||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(e){"object"==typeof e&&null!==e&&this.options.contentCloning&&(e=e.clone(!0)),this.Content=e},_content_insert:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");"string"!=typeof e.Content||e.options.contentAsHTML?t.empty().append(e.Content):t.text(e.Content)},_update:function(e){var t=this;t._content_set(e),null!==t.Content?"hidden"!==t.Status&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(l()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=t.Status&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==t.Status&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){"hidden"!=t.Status&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(n){var r=this;n&&r.callbacks.hide.push(n),r.callbacks.show=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null;var i=function(){e.each(r.callbacks.hide,function(e,t){t.call(r.$el)}),r.callbacks.hide=[]};if("shown"==r.Status||"appearing"==r.Status){r.Status="disappearing";var s=function(){r.Status="hidden","object"==typeof r.Content&&null!==r.Content&&r.Content.detach(),r.$tooltip.remove(),r.$tooltip=null,e(t).off("."+r.namespace),e("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX),e("body").off("."+r.namespace),r.$elProxy.off("."+r.namespace+"-autoClose"),r.options.functionAfter.call(r.$el,r.$el),i()};l()?(r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(s)):r.$tooltip.stop().fadeOut(r.options.speed,s)}else"hidden"==r.Status&&i();return r},show:function(e){return this._showNow(e),this},update:function(e){return this.content(e)},content:function(e){return void 0===e?this.Content:(this._update(e),this)},reposition:function(){var n=this;if(0!==e("body").find(n.$tooltip).length){n.$tooltip.css("width",""),n.elProxyPosition=n._repositionInfo(n.$elProxy);var r=null,i=e(t).width(),s=n.elProxyPosition,o=n.$tooltip.outerWidth(!1),a=(n.$tooltip.innerWidth(),n.$tooltip.outerHeight(!1));if(n.$elProxy.is("area")){var f=n.$elProxy.attr("shape"),l=n.$elProxy.parent().attr("name"),c=e('img[usemap="#'+l+'"]'),h=c.offset().left,p=c.offset().top,d=n.$elProxy.attr("coords")!==undefined?n.$elProxy.attr("coords").split(","):undefined;if("circle"==f){var v=parseInt(d[0]),m=parseInt(d[1]),g=parseInt(d[2]);s.dimension.height=2*g,s.dimension.width=2*g,s.offset.top=p+m-g,s.offset.left=h+v-g}else if("rect"==f){v=parseInt(d[0]),m=parseInt(d[1]);var y=parseInt(d[2]),b=parseInt(d[3]);s.dimension.height=b-m,s.dimension.width=y-v,s.offset.top=p+m,s.offset.left=h+v}else if("poly"==f){for(var S=0,x=0,T=0,N=0,C="even",k=0;k<d.length;k++){var L=parseInt(d[k]);"even"==C?(L>T&&(T=L,0===k&&(S=T)),L<S&&(S=L),C="odd"):(L>N&&(N=L,1==k&&(x=N)),L<x&&(x=L),C="even")}s.dimension.height=N-x,s.dimension.width=T-S,s.offset.top=p+x,s.offset.left=h+S}else s.dimension.height=c.outerHeight(!1),s.dimension.width=c.outerWidth(!1),s.offset.top=p,s.offset.left=h}var A=0,O=0,M=0,_=parseInt(n.options.offsetY),D=parseInt(n.options.offsetX),P=n.options.position;function H(){var n=e(t).scrollLeft();A-n<0&&(r=A-n,A=n),A+o-n>i&&(r=A-(i+n-o),A=i+n-o)}function B(n,r){s.offset.top-e(t).scrollTop()-a-_-12<0&&r.indexOf("top")>-1&&(P=n),s.offset.top+s.dimension.height+a+12+_>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1&&(P=n,M=s.offset.top-a-_-12)}if("top"==P){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left+D-j/2,M=s.offset.top-a-_-12,H(),B("bottom","top")}if("top-left"==P&&(A=s.offset.left+D,M=s.offset.top-a-_-12,H(),B("bottom-left","top-left")),"top-right"==P&&(A=s.offset.left+s.dimension.width+D-o,M=s.offset.top-a-_-12,H(),B("bottom-right","top-right")),"bottom"==P){j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left-j/2+D,M=s.offset.top+s.dimension.height+_+12,H(),B("top","bottom")}if("bottom-left"==P&&(A=s.offset.left+D,M=s.offset.top+s.dimension.height+_+12,H(),B("top-left","bottom-left")),"bottom-right"==P&&(A=s.offset.left+s.dimension.width+D-o,M=s.offset.top+s.dimension.height+_+12,H(),B("top-right","bottom-right")),"left"==P){A=s.offset.left-D-o-12,O=s.offset.left+D+s.dimension.width+12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);if(M=s.offset.top-F/2-_,A<0&&O+o>i){var I=2*parseFloat(n.$tooltip.css("border-width")),q=o+A-I;n.$tooltip.css("width",q+"px"),a=n.$tooltip.outerHeight(!1),A=s.offset.left-D-q-12-I,F=s.offset.top+a-(s.offset.top+s.dimension.height),M=s.offset.top-F/2-_}else A<0&&(A=s.offset.left+D+s.dimension.width+12,r="left")}if("right"==P){A=s.offset.left+D+s.dimension.width+12,O=s.offset.left-D-o-12;F=s.offset.top+a-(s.offset.top+s.dimension.height);if(M=s.offset.top-F/2-_,A+o>i&&O<0){I=2*parseFloat(n.$tooltip.css("border-width")),q=i-A-I;n.$tooltip.css("width",q+"px"),a=n.$tooltip.outerHeight(!1),F=s.offset.top+a-(s.offset.top+s.dimension.height),M=s.offset.top-F/2-_}else A+o>i&&(A=s.offset.left-D-o-12,r="right")}if(n.options.arrow){var R="tooltipster-arrow-"+P;if(n.options.arrowColor.length<1)var U=n.$tooltip.css("background-color");else U=n.options.arrowColor;if(r?"left"==r?(R="tooltipster-arrow-right",r=""):"right"==r?(R="tooltipster-arrow-left",r=""):r="left:"+Math.round(r)+"px;":r="","top"==P||"top-left"==P||"top-right"==P)var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");else if("bottom"==P||"bottom-left"==P||"bottom-right"==P)z=parseFloat(n.$tooltip.css("border-top-width")),W=n.$tooltip.css("border-top-color");else if("left"==P)z=parseFloat(n.$tooltip.css("border-right-width")),W=n.$tooltip.css("border-right-color");else if("right"==P)z=parseFloat(n.$tooltip.css("border-left-width")),W=n.$tooltip.css("border-left-color");else z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");z>1&&z++;var X="";if(0!==z){var V="",J="border-color: "+W+";";-1!==R.indexOf("bottom")?V="margin-top: -"+Math.round(z)+"px;":-1!==R.indexOf("top")?V="margin-bottom: -"+Math.round(z)+"px;":-1!==R.indexOf("left")?V="margin-right: -"+Math.round(z)+"px;":-1!==R.indexOf("right")&&(V="margin-left: -"+Math.round(z)+"px;"),X='<span class="tooltipster-arrow-border" style="'+V+" "+J+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var K='<div class="'+R+' tooltipster-arrow" style="'+r+'">'+X+'<span style="border-color:'+U+';"></span></div>';n.$tooltip.append(K)}n.$tooltip.css({top:Math.round(M)+"px",left:Math.round(A)+"px"})}return n},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this;t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace);var n=t.$el.data("tooltipster-ns");if(1===n.length){var r=null;"previous"===t.options.restoration?r=t.$el.data("tooltipster-initialTitle"):"current"===t.options.restoration&&(r="string"==typeof t.Content?t.Content:e("<div></div>").append(t.Content).html()),r&&t.$el.attr("title",r),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else n=e.grep(n,function(e){return e!==t.namespace}),t.$el.data("tooltipster-ns",n);return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(e,t){return void 0===t?this.options[e]:(this.options[e]=t,this)},status:function(){return this.Status}},e.fn[r]=function(){var t=arguments;if(0===this.length){if("string"==typeof t[0]){var n=!0;switch(t[0]){case"setDefaults":e.extend(i,t[1]);break;default:n=!1}return!!n||this}return this}if("string"==typeof t[0]){var r="#*$~&";return this.each(function(){var n=e(this).data("tooltipster-ns"),i=n?e(this).data(n[0]):null;if(!i)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if("function"!=typeof i[t[0]])throw new Error('Unknown method .tooltipster("'+t[0]+'")');var s=i[t[0]](t[1],t[2]);if(s!==i)return r=s,!1}),"#*$~&"!==r?r:this}var o=[],u=t[0]&&"undefined"!=typeof t[0].multiple,a=u&&t[0].multiple||!u&&i.multiple,f=t[0]&&"undefined"!=typeof t[0].debug,l=f&&t[0].debug||!f&&i.debug;return this.each(function(){var n=!1,r=e(this).data("tooltipster-ns"),i=null;r?a?n=!0:l&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):n=!0,n&&(i=new s(this,t[0]),r||(r=[]),r.push(i.namespace),e(this).data("tooltipster-ns",r),e(this).data(i.namespace,i)),o.push(i)}),a?o:this};var u=!!("ontouchstart"in t),a=!1;e("body").one("mousemove",function(){a=!0})}(jQuery,window,document),
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if("object"==typeof e)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(-1!==(i=t(o[r],n))&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if("object"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)!0===(n=s[r][i]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):e.eventie=o}(this),function(e,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return"[object Array]"===d.call(e)}function o(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),"function"==typeof t?n=t:i(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred);var r=this;setTimeout(function(){r.check()})}function f(e){this.img=e}function c(e){this.src=e,v[e]=this}var a=e.jQuery,u=e.console,h=void 0!==u,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var f=r[o];this.addImage(f)}}},s.prototype.addImage=function(e){var t=new f(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&h&&u.log("confirm",e,r),t.progress(e),++n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,i)for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}else this.complete()},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},a&&(a.fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(a(this))}),f.prototype=new t,f.prototype.check=function(){var e=v[this.img.src]||new c(this.img.src);if(e.isConfirmed)this.confirm(e.isLoaded,"cached was confirmed");else if(this.img.complete&&void 0!==this.img.naturalWidth)this.confirm(0!==this.img.naturalWidth,"naturalWidth");else{var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()}},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var v={};return c.prototype=new t,c.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},c.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},s}),function(d){function t(y){return!y||y.allowPageScroll!==undefined||y.swipe===undefined&&y.swipeStatus===undefined||(y.allowPageScroll=k),y||(y={}),y=d.extend({},d.fn.swipe.defaults,y),this.each(function(){var A=d(this),z=A.data(w);z||(z=new p(this,y),A.data(w,z))})}function p(S,af){function ar(aM){if(!(X()||d(aM.target).closest(af.excludedElements,H).length>0)){var aL,aN=aM.originalEvent,aK=a?aN.touches[0]:aN;if(O=f,a?aE=aN.touches.length:aM.preventDefault(),ac=0,N=null,aH=null,ag=0,aB=0,A=0,ai=1,pinchDistance=0,ah=T(),z(),!a||aE===af.fingers||af.fingers===h||ao()?(aI(0,aK),I=B(),2==aE&&(aI(1,aN.touches[1]),aB=A=Z(ah[0].start,ah[1].start)),(af.swipeStatus||af.pinchStatus)&&(aL=aD(aN,O))):aL=!1,!1===aL)return aD(aN,O=o),aL;aj(!0)}}function P(aN){var aQ=aN.originalEvent;if(O!==g&&O!==o&&!ae()){var aM,aO=V(a?aQ.touches[0]:aQ);if(Y=B(),a&&(aE=aQ.touches.length),O=i,2==aE&&(0==aB?(aI(1,aQ.touches[1]),aB=A=Z(ah[0].start,ah[1].start)):(V(aQ.touches[1]),A=Z(ah[0].end,ah[1].end),aH=an(ah[0].end,ah[1].end)),ai=y(aB,A),pinchDistance=Math.abs(aB-A)),aE===af.fingers||af.fingers===h||!a||ao()){if(C(aN,N=aq(aO.start,aO.end)),ac=G(aO.start,aO.end),ag=L(),(af.swipeStatus||af.pinchStatus)&&(aM=aD(aQ,O)),!af.triggerOnTouchEnd||af.triggerOnTouchLeave){var aK=!0;if(af.triggerOnTouchLeave){var aP=at(this);aK=az(aO.end,aP)}!af.triggerOnTouchEnd&&aK?O=aG(i):af.triggerOnTouchLeave&&!aK&&(O=aG(g)),O!=o&&O!=g||aD(aQ,O)}}else aD(aQ,O=o);!1===aM&&aD(aQ,O=o)}}function aa(aM){var aO=aM.originalEvent;if(a&&aO.touches.length>0)return av(),!0;if(ae()&&(aE=aJ),aM.preventDefault(),Y=B(),af.triggerOnTouchEnd||0==af.triggerOnTouchEnd&&O===i){O=g;var aL=aE===af.fingers||af.fingers===h||!a,aK=0!==ah[0].end.x;aD(aO,aL&&aK&&(am()||ay())?O:O=o)}else O===i&&aD(aO,O=o);aj(!1)}function M(){aE=0,Y=0,I=0,aB=0,A=0,ai=1,z(),aj(!1)}function W(aK){var aL=aK.originalEvent;af.triggerOnTouchLeave&&aD(aL,O=aG(g))}function Q(){H.unbind(ax,ar),H.unbind(R,M),H.unbind(U,P),H.unbind(au,aa),D&&H.unbind(D,W),aj(!1)}function aG(aN){var aM=aN,aL=ap(),aK=ad();return aL?!aK||aN!=i||af.triggerOnTouchEnd&&!af.triggerOnTouchLeave?!aK&&aN==g&&af.triggerOnTouchLeave&&(aM=o):aM=g:aM=o,aM}function aD(aM,aK){var aL=undefined;return ab()&&(aL=al(aM,aK,j)),ao()&&!1!==aL&&(aL=al(aM,aK,r)),K()&&!1!==aL&&(aL=al(aM,aK,e)),aK===o&&M(aM),aK===g&&(a?0==aM.touches.length&&M(aM):M(aM)),aL}function al(aN,aK,aM){var aL=undefined;if(aM==j){if(af.swipeStatus&&!1===(aL=af.swipeStatus.call(H,aN,aK,N||null,ac||0,ag||0,aE)))return!1;if(aK==g&&ay()){if(af.swipe&&!1===(aL=af.swipe.call(H,aN,N,ac,ag,aE)))return!1;switch(N){case n:af.swipeLeft&&(aL=af.swipeLeft.call(H,aN,N,ac,ag,aE));break;case m:af.swipeRight&&(aL=af.swipeRight.call(H,aN,N,ac,ag,aE));break;case c:af.swipeUp&&(aL=af.swipeUp.call(H,aN,N,ac,ag,aE));break;case u:af.swipeDown&&(aL=af.swipeDown.call(H,aN,N,ac,ag,aE))}}}if(aM==r){if(af.pinchStatus&&!1===(aL=af.pinchStatus.call(H,aN,aK,aH||null,pinchDistance||0,ag||0,aE,ai)))return!1;if(aK==g&&am())switch(aH){case b:af.pinchIn&&(aL=af.pinchIn.call(H,aN,aH||null,pinchDistance||0,ag||0,aE,ai));break;case v:af.pinchOut&&(aL=af.pinchOut.call(H,aN,aH||null,pinchDistance||0,ag||0,aE,ai))}}return aM==e&&aK===o&&(!af.click||1!==aE&&a||!isNaN(ac)&&0!==ac||(aL=af.click.call(H,aN,aN.target))),aL}function ad(){return null===af.threshold||ac>=af.threshold}function ak(){return null===af.pinchThreshold||pinchDistance>=af.pinchThreshold}function ap(){return!af.maxTimeThreshold||!(ag>=af.maxTimeThreshold)}function C(aK,aL){if(af.allowPageScroll===k||ao())aK.preventDefault();else{var aM=af.allowPageScroll===q;switch(aL){case n:(af.swipeLeft&&aM||!aM&&af.allowPageScroll!=x)&&aK.preventDefault();break;case m:(af.swipeRight&&aM||!aM&&af.allowPageScroll!=x)&&aK.preventDefault();break;case c:(af.swipeUp&&aM||!aM&&af.allowPageScroll!=s)&&aK.preventDefault();break;case u:(af.swipeDown&&aM||!aM&&af.allowPageScroll!=s)&&aK.preventDefault()}}}function am(){return ak()}function ao(){return!!(af.pinchStatus||af.pinchIn||af.pinchOut)}function ay(){var aK=ap();return ad()&&aK}function ab(){return!!(af.swipe||af.swipeStatus||af.swipeLeft||af.swipeRight||af.swipeUp||af.swipeDown)}function K(){return!!af.click}function av(){aA=B(),aJ=event.touches.length+1}function z(){aA=0,aJ=0}function ae(){var aK=!1;aA&&(B()-aA<=af.fingerReleaseThreshold&&(aK=!0));return aK}function X(){return!(!0!==H.data(w+"_intouch"))}function aj(aK){!0===aK?(H.bind(U,P),H.bind(au,aa),D&&H.bind(D,W)):(H.unbind(U,P,!1),H.unbind(au,aa,!1),D&&H.unbind(D,W,!1)),H.data(w+"_intouch",!0===aK)}function aI(aL,aK){var aM=aK.identifier!==undefined?aK.identifier:0;return ah[aL].identifier=aM,ah[aL].start.x=ah[aL].end.x=aK.pageX,ah[aL].start.y=ah[aL].end.y=aK.pageY,ah[aL]}function V(aK){var aL=J(aK.identifier!==undefined?aK.identifier:0);return aL.end.x=aK.pageX,aL.end.y=aK.pageY,aL}function J(aL){for(var aK=0;aK<ah.length;aK++)if(ah[aK].identifier==aL)return ah[aK]}function T(){for(var aK=[],aL=0;aL<=5;aL++)aK.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return aK}function L(){return Y-I}function Z(aN,aM){var aL=Math.abs(aN.x-aM.x),aK=Math.abs(aN.y-aM.y);return Math.round(Math.sqrt(aL*aL+aK*aK))}function y(aK,aL){return(aL/aK*1).toFixed(2)}function an(){return ai<1?v:b}function G(aL,aK){return Math.round(Math.sqrt(Math.pow(aK.x-aL.x,2)+Math.pow(aK.y-aL.y,2)))}function F(aN,aL){var aK=aN.x-aL.x,aP=aL.y-aN.y,aM=Math.atan2(aP,aK),aO=Math.round(180*aM/Math.PI);return aO<0&&(aO=360-Math.abs(aO)),aO}function aq(aL,aK){var aM=F(aL,aK);return aM<=45&&aM>=0?n:aM<=360&&aM>=315?n:aM>=135&&aM<=225?m:aM>45&&aM<135?u:c}function B(){return(new Date).getTime()}function at(aK){var aM=(aK=d(aK)).offset();return{left:aM.left,right:aM.left+aK.outerWidth(),top:aM.top,bottom:aM.top+aK.outerHeight()}}function az(aK,aL){return aK.x>aL.left&&aK.x<aL.right&&aK.y>aL.top&&aK.y<aL.bottom}var aF=a||!af.fallbackToMouseEvents,ax=aF?"touchstart":"mousedown",U=aF?"touchmove":"mousemove",au=aF?"touchend":"mouseup",D=aF?null:"mouseleave",R="touchcancel",ac=0,N=null,ag=0,aB=0,A=0,ai=1,aH=0,H=d(S),O="start",aE=0,ah=null,I=0,Y=0,aA=0,aJ=0;try{H.bind(ax,ar),H.bind(R,M)}catch(aC){d.error("events not supported "+ax+","+R+" on jQuery.swipe")}this.enable=function(){return H.bind(ax,ar),H.bind(R,M),H},this.disable=function(){return Q(),H},this.destroy=function(){return Q(),H.data(w,null),H}}var n="left",m="right",c="up",u="down",b="in",v="out",k="none",q="auto",j="swipe",r="pinch",e="click",x="horizontal",s="vertical",h="all",f="start",i="move",g="end",o="cancel",a="ontouchstart"in window,w="TouchSwipe",l={fingers:1,threshold:75,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};d.fn.swipe=function(A){var z=d(this),y=z.data(w);if(y&&"string"==typeof A){if(y[A])return y[A].apply(this,Array.prototype.slice.call(arguments,1));d.error("Method "+A+" does not exist on jQuery.swipe")}else if(!(y||"object"!=typeof A&&A))return t.apply(this,arguments);return z},d.fn.swipe.defaults=l,d.fn.swipe.phases={PHASE_START:f,PHASE_MOVE:i,PHASE_END:g,PHASE_CANCEL:o},d.fn.swipe.directions={LEFT:n,RIGHT:m,UP:c,DOWN:u,IN:b,OUT:v},d.fn.swipe.pageScroll={NONE:k,HORIZONTAL:x,VERTICAL:s,AUTO:q},d.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:h}}(jQuery);var THREE={REVISION:"72"};"function"==typeof define&&define.amd?define("three",THREE):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports=THREE),self.requestAnimationFrame!==undefined&&self.cancelAnimationFrame!==undefined||function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!self.requestAnimationFrame;++x)self.requestAnimationFrame=self[vendors[x]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[vendors[x]+"CancelAnimationFrame"]||self[vendors[x]+"CancelRequestAnimationFrame"];self.requestAnimationFrame===undefined&&self.setTimeout!==undefined&&(self.requestAnimationFrame=function(callback){var currTime=Date.now(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=self.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),self.cancelAnimationFrame===undefined&&self.clearTimeout!==undefined&&(self.cancelAnimationFrame=function(id){self.clearTimeout(id)})}(),Math.sign===undefined&&(Math.sign=function(x){return x<0?-1:x>0?1:+x}),Function.prototype.name===undefined&&Object.defineProperty!==undefined&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.NeverDepth=0,THREE.AlwaysDepth=1,THREE.LessDepth=2,THREE.LessEqualDepth=3,THREE.EqualDepth=4,THREE.GreaterEqualDepth=5,THREE.GreaterDepth=6,THREE.NotEqualDepth=7,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=300,THREE.CubeReflectionMapping=301,THREE.CubeRefractionMapping=302,THREE.EquirectangularReflectionMapping=303,THREE.EquirectangularRefractionMapping=304,THREE.SphericalReflectionMapping=305,THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.HalfFloatType=1025,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGBEFormat=THREE.RGBAFormat,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(vector,camera){console.warn("THREE.Projector: .projectVector() is now vector.project()."),vector.project(camera)},this.unprojectVector=function(vector,camera){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),vector.unproject(camera)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},THREE.Color=function(color){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(color)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(value){return value instanceof THREE.Color?this.copy(value):"number"==typeof value?this.setHex(value):"string"==typeof value&&this.setStyle(value),this},setHex:function(hex){return hex=Math.floor(hex),this.r=(hex>>16&255)/255,this.g=(hex>>8&255)/255,this.b=(255&hex)/255,this},setRGB:function(r,g,b){return this.r=r,this.g=g,this.b=b,this},setHSL:function(){function hue2rgb(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}return function(h,s,l){if(h=THREE.Math.euclideanModulo(h,1),s=THREE.Math.clamp(s,0,1),l=THREE.Math.clamp(l,0,1),0===s)this.r=this.g=this.b=l;else{var p=l<=.5?l*(1+s):l+s-l*s,q=2*l-p;this.r=hue2rgb(q,p,h+1/3),this.g=hue2rgb(q,p,h),this.b=hue2rgb(q,p,h-1/3)}return this}}(),setStyle:function(style){var m,parseAlpha=function(strAlpha){var alpha=parseFloat(strAlpha);return alpha<1&&console.warn("THREE.Color: Alpha component of color "+style+" will be ignored."),alpha};if(m=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(style)){var color,name=m[1],components=m[2];switch(name){case"rgb":if(color=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/.exec(components))return this.r=Math.min(255,parseInt(color[1],10))/255,this.g=Math.min(255,parseInt(color[2],10))/255,this.b=Math.min(255,parseInt(color[3],10))/255,this;if(color=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(components))return this.r=Math.min(100,parseInt(color[1],10))/100,this.g=Math.min(100,parseInt(color[2],10))/100,this.b=Math.min(100,parseInt(color[3],10))/100,this;break;case"rgba":if(color=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(components))return this.r=Math.min(255,parseInt(color[1],10))/255,this.g=Math.min(255,parseInt(color[2],10))/255,this.b=Math.min(255,parseInt(color[3],10))/255,parseAlpha(color[4]),this;if(color=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(components))return this.r=Math.min(100,parseInt(color[1],10))/100,this.g=Math.min(100,parseInt(color[2],10))/100,this.b=Math.min(100,parseInt(color[3],10))/100,parseAlpha(color[4]),this;break;case"hsl":if(color=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(components)){var h=parseFloat(color[1]),s=parseInt(color[2],10)/100,l=parseInt(color[3],10)/100;return this.setHSL(h,s,l)}break;case"hsla":if(color=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(components)){h=parseFloat(color[1]),s=parseInt(color[2],10)/100,l=parseInt(color[3],10)/100;return parseAlpha(color[4]),this.setHSL(h,s,l)}}}else if(m=/^\#([A-Fa-f0-9]+)$/.exec(style)){var hex,size=(hex=m[1]).length;if(3===size)return this.r=parseInt(hex.charAt(0)+hex.charAt(0),16)/255,this.g=parseInt(hex.charAt(1)+hex.charAt(1),16)/255,this.b=parseInt(hex.charAt(2)+hex.charAt(2),16)/255,this;if(6===size)return this.r=parseInt(hex.charAt(0)+hex.charAt(1),16)/255,this.g=parseInt(hex.charAt(2)+hex.charAt(3),16)/255,this.b=parseInt(hex.charAt(4)+hex.charAt(5),16)/255,this}style&&style.length>0&&((hex=THREE.ColorKeywords[style])!==undefined?this.setHex(hex):console.warn("THREE.Color: Unknown color "+style));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(color){return this.r=color.r,this.g=color.g,this.b=color.b,this},copyGammaToLinear:function(color,gammaFactor){return gammaFactor===undefined&&(gammaFactor=2),this.r=Math.pow(color.r,gammaFactor),this.g=Math.pow(color.g,gammaFactor),this.b=Math.pow(color.b,gammaFactor),this},copyLinearToGamma:function(color,gammaFactor){gammaFactor===undefined&&(gammaFactor=2);var safeInverse=gammaFactor>0?1/gammaFactor:1;return this.r=Math.pow(color.r,safeInverse),this.g=Math.pow(color.g,safeInverse),this.b=Math.pow(color.b,safeInverse),this},convertGammaToLinear:function(){var r=this.r,g=this.g,b=this.b;return this.r=r*r,this.g=g*g,this.b=b*b,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(optionalTarget){var hue,saturation,hsl=optionalTarget||{h:0,s:0,l:0},r=this.r,g=this.g,b=this.b,max=Math.max(r,g,b),min=Math.min(r,g,b),lightness=(min+max)/2;if(min===max)hue=0,saturation=0;else{var delta=max-min;switch(saturation=lightness<=.5?delta/(max+min):delta/(2-max-min),max){case r:hue=(g-b)/delta+(g<b?6:0);break;case g:hue=(b-r)/delta+2;break;case b:hue=(r-g)/delta+4}hue/=6}return hsl.h=hue,hsl.s=saturation,hsl.l=lightness,hsl},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(h,s,l){var hsl=this.getHSL();return hsl.h+=h,hsl.s+=s,hsl.l+=l,this.setHSL(hsl.h,hsl.s,hsl.l),this},add:function(color){return this.r+=color.r,this.g+=color.g,this.b+=color.b,this},addColors:function(color1,color2){return this.r=color1.r+color2.r,this.g=color1.g+color2.g,this.b=color1.b+color2.b,this},addScalar:function(s){return this.r+=s,this.g+=s,this.b+=s,this},multiply:function(color){return this.r*=color.r,this.g*=color.g,this.b*=color.b,this},multiplyScalar:function(s){return this.r*=s,this.g*=s,this.b*=s,this},lerp:function(color,alpha){return this.r+=(color.r-this.r)*alpha,this.g+=(color.g-this.g)*alpha,this.b+=(color.b-this.b)*alpha,this},equals:function(c){return c.r===this.r&&c.g===this.g&&c.b===this.b},fromArray:function(array){return this.r=array[0],this.g=array[1],this.b=array[2],this},toArray:function(array,offset){return array===undefined&&(array=[]),offset===undefined&&(offset=0),array[offset]=this.r,array[offset+1]=this.g,array[offset+2]=this.b,array}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(x,y,z,w){this._x=x||0,this._y=y||0,this._z=z||0,this._w=w!==undefined?w:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(value){this._x=value,this.onChangeCallback()},get y(){return this._y},set y(value){this._y=value,this.onChangeCallback()},get z(){return this._z},set z(value){this._z=value,this.onChangeCallback()},get w(){return this._w},set w(value){this._w=value,this.onChangeCallback()},set:function(x,y,z,w){return this._x=x,this._y=y,this._z=z,this._w=w,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(quaternion){return this._x=quaternion.x,this._y=quaternion.y,this._z=quaternion.z,this._w=quaternion.w,this.onChangeCallback(),this},setFromEuler:function(euler,update){if(euler instanceof THREE.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c1=Math.cos(euler._x/2),c2=Math.cos(euler._y/2),c3=Math.cos(euler._z/2),s1=Math.sin(euler._x/2),s2=Math.sin(euler._y/2),s3=Math.sin(euler._z/2),order=euler.order;return"XYZ"===order?(this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3):"YXZ"===order?(this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3):"ZXY"===order?(this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3):"ZYX"===order?(this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3):"YZX"===order?(this._x=s1*c2*c3+c1*s2*s3,this._y=c1*s2*c3+s1*c2*s3,this._z=c1*c2*s3-s1*s2*c3,this._w=c1*c2*c3-s1*s2*s3):"XZY"===order&&(this._x=s1*c2*c3-c1*s2*s3,this._y=c1*s2*c3-s1*c2*s3,this._z=c1*c2*s3+s1*s2*c3,this._w=c1*c2*c3+s1*s2*s3),!1!==update&&this.onChangeCallback(),this},setFromAxisAngle:function(axis,angle){var halfAngle=angle/2,s=Math.sin(halfAngle);return this._x=axis.x*s,this._y=axis.y*s,this._z=axis.z*s,this._w=Math.cos(halfAngle),this.onChangeCallback(),this},setFromRotationMatrix:function(m){var s,te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10],trace=m11+m22+m33;return trace>0?(s=.5/Math.sqrt(trace+1),this._w=.25/s,this._x=(m32-m23)*s,this._y=(m13-m31)*s,this._z=(m21-m12)*s):m11>m22&&m11>m33?(s=2*Math.sqrt(1+m11-m22-m33),this._w=(m32-m23)/s,this._x=.25*s,this._y=(m12+m21)/s,this._z=(m13+m31)/s):m22>m33?(s=2*Math.sqrt(1+m22-m11-m33),this._w=(m13-m31)/s,this._x=(m12+m21)/s,this._y=.25*s,this._z=(m23+m32)/s):(s=2*Math.sqrt(1+m33-m11-m22),this._w=(m21-m12)/s,this._x=(m13+m31)/s,this._y=(m23+m32)/s,this._z=.25*s),this.onChangeCallback(),this},setFromUnitVectors:function(){var v1,r,EPS=1e-6;return function(vFrom,vTo){return v1===undefined&&(v1=new THREE.Vector3),(r=vFrom.dot(vTo)+1)<EPS?(r=0,Math.abs(vFrom.x)>Math.abs(vFrom.z)?v1.set(-vFrom.y,vFrom.x,0):v1.set(0,-vFrom.z,vFrom.y)):v1.crossVectors(vFrom,vTo),this._x=v1.x,this._y=v1.y,this._z=v1.z,this._w=r,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(v){return this._x*v._x+this._y*v._y+this._z*v._z+this._w*v._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var l=this.length();return 0===l?(this._x=0,this._y=0,this._z=0,this._w=1):(l=1/l,this._x=this._x*l,this._y=this._y*l,this._z=this._z*l,this._w=this._w*l),this.onChangeCallback(),this},multiply:function(q,p){return p!==undefined?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(q,p)):this.multiplyQuaternions(this,q)},multiplyQuaternions:function(a,b){var qax=a._x,qay=a._y,qaz=a._z,qaw=a._w,qbx=b._x,qby=b._y,qbz=b._z,qbw=b._w;return this._x=qax*qbw+qaw*qbx+qay*qbz-qaz*qby,this._y=qay*qbw+qaw*qby+qaz*qbx-qax*qbz,this._z=qaz*qbw+qaw*qbz+qax*qby-qay*qbx,this._w=qaw*qbw-qax*qbx-qay*qby-qaz*qbz,this.onChangeCallback(),this},multiplyVector3:function(vector){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),vector.applyQuaternion(this)},slerp:function(qb,t){if(0===t)return this;if(1===t)return this.copy(qb);var x=this._x,y=this._y,z=this._z,w=this._w,cosHalfTheta=w*qb._w+x*qb._x+y*qb._y+z*qb._z;if(cosHalfTheta<0?(this._w=-qb._w,this._x=-qb._x,this._y=-qb._y,this._z=-qb._z,cosHalfTheta=-cosHalfTheta):this.copy(qb),cosHalfTheta>=1)return this._w=w,this._x=x,this._y=y,this._z=z,this;var halfTheta=Math.acos(cosHalfTheta),sinHalfTheta=Math.sqrt(1-cosHalfTheta*cosHalfTheta);if(Math.abs(sinHalfTheta)<.001)return this._w=.5*(w+this._w),this._x=.5*(x+this._x),this._y=.5*(y+this._y),this._z=.5*(z+this._z),this;var ratioA=Math.sin((1-t)*halfTheta)/sinHalfTheta,ratioB=Math.sin(t*halfTheta)/sinHalfTheta;return this._w=w*ratioA+this._w*ratioB,this._x=x*ratioA+this._x*ratioB,this._y=y*ratioA+this._y*ratioB,this._z=z*ratioA+this._z*ratioB,this.onChangeCallback(),this},equals:function(quaternion){return quaternion._x===this._x&&quaternion._y===this._y&&quaternion._z===this._z&&quaternion._w===this._w},fromArray:function(array,offset){return offset===undefined&&(offset=0),
this._x=array[offset],this._y=array[offset+1],this._z=array[offset+2],this._w=array[offset+3],this.onChangeCallback(),this},toArray:function(array,offset){return array===undefined&&(array=[]),offset===undefined&&(offset=0),array[offset]=this._x,array[offset+1]=this._y,array[offset+2]=this._z,array[offset+3]=this._w,array},onChange:function(callback){return this.onChangeCallback=callback,this},onChangeCallback:function(){}},THREE.Quaternion.slerp=function(qa,qb,qm,t){return qm.copy(qa).slerp(qb,t)},THREE.Vector2=function(x,y){this.x=x||0,this.y=y||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(x,y){return this.x=x,this.y=y,this},setX:function(x){return this.x=x,this},setY:function(y){return this.y=y,this},setComponent:function(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;default:throw new Error("index is out of range: "+index)}},getComponent:function(index){switch(index){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+index)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(v){return this.x=v.x,this.y=v.y,this},add:function(v,w){return w!==undefined?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(v,w)):(this.x+=v.x,this.y+=v.y,this)},addScalar:function(s){return this.x+=s,this.y+=s,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},addScaledVector:function(v,s){return this.x+=v.x*s,this.y+=v.y*s,this},sub:function(v,w){return w!==undefined?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(v,w)):(this.x-=v.x,this.y-=v.y,this)},subScalar:function(s){return this.x-=s,this.y-=s,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},multiply:function(v){return this.x*=v.x,this.y*=v.y,this},multiplyScalar:function(s){return this.x*=s,this.y*=s,this},divide:function(v){return this.x/=v.x,this.y/=v.y,this},divideScalar:function(scalar){if(0!==scalar){var invScalar=1/scalar;this.x*=invScalar,this.y*=invScalar}else this.x=0,this.y=0;return this},min:function(v){return this.x>v.x&&(this.x=v.x),this.y>v.y&&(this.y=v.y),this},max:function(v){return this.x<v.x&&(this.x=v.x),this.y<v.y&&(this.y=v.y),this},clamp:function(min,max){return this.x<min.x?this.x=min.x:this.x>max.x&&(this.x=max.x),this.y<min.y?this.y=min.y:this.y>max.y&&(this.y=max.y),this},clampScalar:function(){var min,max;return function(minVal,maxVal){return min===undefined&&(min=new THREE.Vector2,max=new THREE.Vector2),min.set(minVal,minVal),max.set(maxVal,maxVal),this.clamp(min,max)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(v){return this.x*v.x+this.y*v.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(v){return Math.sqrt(this.distanceToSquared(v))},distanceToSquared:function(v){var dx=this.x-v.x,dy=this.y-v.y;return dx*dx+dy*dy},setLength:function(l){var oldLength=this.length();return 0!==oldLength&&l!==oldLength&&this.multiplyScalar(l/oldLength),this},lerp:function(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this},lerpVectors:function(v1,v2,alpha){return this.subVectors(v2,v1).multiplyScalar(alpha).add(v1),this},equals:function(v){return v.x===this.x&&v.y===this.y},fromArray:function(array,offset){return offset===undefined&&(offset=0),this.x=array[offset],this.y=array[offset+1],this},toArray:function(array,offset){return array===undefined&&(array=[]),offset===undefined&&(offset=0),array[offset]=this.x,array[offset+1]=this.y,array},fromAttribute:function(attribute,index,offset){return offset===undefined&&(offset=0),index=index*attribute.itemSize+offset,this.x=attribute.array[index],this.y=attribute.array[index+1],this}},THREE.Vector3=function(x,y,z){this.x=x||0,this.y=y||0,this.z=z||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(x,y,z){return this.x=x,this.y=y,this.z=z,this},setX:function(x){return this.x=x,this},setY:function(y){return this.y=y,this},setZ:function(z){return this.z=z,this},setComponent:function(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;default:throw new Error("index is out of range: "+index)}},getComponent:function(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+index)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(v){return this.x=v.x,this.y=v.y,this.z=v.z,this},add:function(v,w){return w!==undefined?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(v,w)):(this.x+=v.x,this.y+=v.y,this.z+=v.z,this)},addScalar:function(s){return this.x+=s,this.y+=s,this.z+=s,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},addScaledVector:function(v,s){return this.x+=v.x*s,this.y+=v.y*s,this.z+=v.z*s,this},sub:function(v,w){return w!==undefined?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(v,w)):(this.x-=v.x,this.y-=v.y,this.z-=v.z,this)},subScalar:function(s){return this.x-=s,this.y-=s,this.z-=s,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},multiply:function(v,w){return w!==undefined?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(v,w)):(this.x*=v.x,this.y*=v.y,this.z*=v.z,this)},multiplyScalar:function(scalar){return this.x*=scalar,this.y*=scalar,this.z*=scalar,this},multiplyVectors:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this},applyEuler:function(){var quaternion;return function(euler){return euler instanceof THREE.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),quaternion===undefined&&(quaternion=new THREE.Quaternion),this.applyQuaternion(quaternion.setFromEuler(euler)),this}}(),applyAxisAngle:function(){var quaternion;return function(axis,angle){return quaternion===undefined&&(quaternion=new THREE.Quaternion),this.applyQuaternion(quaternion.setFromAxisAngle(axis,angle)),this}}(),applyMatrix3:function(m){var x=this.x,y=this.y,z=this.z,e=m.elements;return this.x=e[0]*x+e[3]*y+e[6]*z,this.y=e[1]*x+e[4]*y+e[7]*z,this.z=e[2]*x+e[5]*y+e[8]*z,this},applyMatrix4:function(m){var x=this.x,y=this.y,z=this.z,e=m.elements;return this.x=e[0]*x+e[4]*y+e[8]*z+e[12],this.y=e[1]*x+e[5]*y+e[9]*z+e[13],this.z=e[2]*x+e[6]*y+e[10]*z+e[14],this},applyProjection:function(m){var x=this.x,y=this.y,z=this.z,e=m.elements,d=1/(e[3]*x+e[7]*y+e[11]*z+e[15]);return this.x=(e[0]*x+e[4]*y+e[8]*z+e[12])*d,this.y=(e[1]*x+e[5]*y+e[9]*z+e[13])*d,this.z=(e[2]*x+e[6]*y+e[10]*z+e[14])*d,this},applyQuaternion:function(q){var x=this.x,y=this.y,z=this.z,qx=q.x,qy=q.y,qz=q.z,qw=q.w,ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return this.x=ix*qw+iw*-qx+iy*-qz-iz*-qy,this.y=iy*qw+iw*-qy+iz*-qx-ix*-qz,this.z=iz*qw+iw*-qz+ix*-qy-iy*-qx,this},project:function(){var matrix;return function(camera){return matrix===undefined&&(matrix=new THREE.Matrix4),matrix.multiplyMatrices(camera.projectionMatrix,matrix.getInverse(camera.matrixWorld)),this.applyProjection(matrix)}}(),unproject:function(){var matrix;return function(camera){return matrix===undefined&&(matrix=new THREE.Matrix4),matrix.multiplyMatrices(camera.matrixWorld,matrix.getInverse(camera.projectionMatrix)),this.applyProjection(matrix)}}(),transformDirection:function(m){var x=this.x,y=this.y,z=this.z,e=m.elements;return this.x=e[0]*x+e[4]*y+e[8]*z,this.y=e[1]*x+e[5]*y+e[9]*z,this.z=e[2]*x+e[6]*y+e[10]*z,this.normalize(),this},divide:function(v){return this.x/=v.x,this.y/=v.y,this.z/=v.z,this},divideScalar:function(scalar){if(0!==scalar){var invScalar=1/scalar;this.x*=invScalar,this.y*=invScalar,this.z*=invScalar}else this.x=0,this.y=0,this.z=0;return this},min:function(v){return this.x>v.x&&(this.x=v.x),this.y>v.y&&(this.y=v.y),this.z>v.z&&(this.z=v.z),this},max:function(v){return this.x<v.x&&(this.x=v.x),this.y<v.y&&(this.y=v.y),this.z<v.z&&(this.z=v.z),this},clamp:function(min,max){return this.x<min.x?this.x=min.x:this.x>max.x&&(this.x=max.x),this.y<min.y?this.y=min.y:this.y>max.y&&(this.y=max.y),this.z<min.z?this.z=min.z:this.z>max.z&&(this.z=max.z),this},clampScalar:function(){var min,max;return function(minVal,maxVal){return min===undefined&&(min=new THREE.Vector3,max=new THREE.Vector3),min.set(minVal,minVal,minVal),max.set(maxVal,maxVal,maxVal),this.clamp(min,max)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(l){var oldLength=this.length();return 0!==oldLength&&l!==oldLength&&this.multiplyScalar(l/oldLength),this},lerp:function(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this.z+=(v.z-this.z)*alpha,this},lerpVectors:function(v1,v2,alpha){return this.subVectors(v2,v1).multiplyScalar(alpha).add(v1),this},cross:function(v,w){if(w!==undefined)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(v,w);var x=this.x,y=this.y,z=this.z;return this.x=y*v.z-z*v.y,this.y=z*v.x-x*v.z,this.z=x*v.y-y*v.x,this},crossVectors:function(a,b){var ax=a.x,ay=a.y,az=a.z,bx=b.x,by=b.y,bz=b.z;return this.x=ay*bz-az*by,this.y=az*bx-ax*bz,this.z=ax*by-ay*bx,this},projectOnVector:function(){var v1,dot;return function(vector){return v1===undefined&&(v1=new THREE.Vector3),v1.copy(vector).normalize(),dot=this.dot(v1),this.copy(v1).multiplyScalar(dot)}}(),projectOnPlane:function(){var v1;return function(planeNormal){return v1===undefined&&(v1=new THREE.Vector3),v1.copy(this).projectOnVector(planeNormal),this.sub(v1)}}(),reflect:function(){var v1;return function(normal){return v1===undefined&&(v1=new THREE.Vector3),this.sub(v1.copy(normal).multiplyScalar(2*this.dot(normal)))}}(),angleTo:function(v){var theta=this.dot(v)/(this.length()*v.length());return Math.acos(THREE.Math.clamp(theta,-1,1))},distanceTo:function(v){return Math.sqrt(this.distanceToSquared(v))},distanceToSquared:function(v){var dx=this.x-v.x,dy=this.y-v.y,dz=this.z-v.z;return dx*dx+dy*dy+dz*dz},setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(m){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(m)},getScaleFromMatrix:function(m){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(m)},getColumnFromMatrix:function(index,matrix){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(index,matrix)},setFromMatrixPosition:function(m){return this.x=m.elements[12],this.y=m.elements[13],this.z=m.elements[14],this},setFromMatrixScale:function(m){var sx=this.set(m.elements[0],m.elements[1],m.elements[2]).length(),sy=this.set(m.elements[4],m.elements[5],m.elements[6]).length(),sz=this.set(m.elements[8],m.elements[9],m.elements[10]).length();return this.x=sx,this.y=sy,this.z=sz,this},setFromMatrixColumn:function(index,matrix){var offset=4*index,me=matrix.elements;return this.x=me[offset],this.y=me[offset+1],this.z=me[offset+2],this},equals:function(v){return v.x===this.x&&v.y===this.y&&v.z===this.z},fromArray:function(array,offset){return offset===undefined&&(offset=0),this.x=array[offset],this.y=array[offset+1],this.z=array[offset+2],this},toArray:function(array,offset){return array===undefined&&(array=[]),offset===undefined&&(offset=0),array[offset]=this.x,array[offset+1]=this.y,array[offset+2]=this.z,array},fromAttribute:function(attribute,index,offset){return offset===undefined&&(offset=0),index=index*attribute.itemSize+offset,this.x=attribute.array[index],this.y=attribute.array[index+1],this.z=attribute.array[index+2],this}},THREE.Vector4=function(x,y,z,w){this.x=x||0,this.y=y||0,this.z=z||0,this.w=w!==undefined?w:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(x,y,z,w){return this.x=x,this.y=y,this.z=z,this.w=w,this},setX:function(x){return this.x=x,this},setY:function(y){return this.y=y,this},setZ:function(z){return this.z=z,this},setW:function(w){return this.w=w,this},setComponent:function(index,value){switch(index){case 0:this.x=value;break;case 1:this.y=value;break;case 2:this.z=value;break;case 3:this.w=value;break;default:throw new Error("index is out of range: "+index)}},getComponent:function(index){switch(index){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+index)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(v){return this.x=v.x,this.y=v.y,this.z=v.z,this.w=v.w!==undefined?v.w:1,this},add:function(v,w){return w!==undefined?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(v,w)):(this.x+=v.x,this.y+=v.y,this.z+=v.z,this.w+=v.w,this)},addScalar:function(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},addScaledVector:function(v,s){return this.x+=v.x*s,this.y+=v.y*s,this.z+=v.z*s,this.w+=v.w*s,this},sub:function(v,w){return w!==undefined?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(v,w)):(this.x-=v.x,this.y-=v.y,this.z-=v.z,this.w-=v.w,this)},subScalar:function(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},multiplyScalar:function(scalar){return this.x*=scalar,this.y*=scalar,this.z*=scalar,this.w*=scalar,this},applyMatrix4:function(m){var x=this.x,y=this.y,z=this.z,w=this.w,e=m.elements;return this.x=e[0]*x+e[4]*y+e[8]*z+e[12]*w,this.y=e[1]*x+e[5]*y+e[9]*z+e[13]*w,this.z=e[2]*x+e[6]*y+e[10]*z+e[14]*w,this.w=e[3]*x+e[7]*y+e[11]*z+e[15]*w,this},divideScalar:function(scalar){if(0!==scalar){var invScalar=1/scalar;this.x*=invScalar,this.y*=invScalar,this.z*=invScalar,this.w*=invScalar}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(q){this.w=2*Math.acos(q.w);var s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this},setAxisAngleFromRotationMatrix:function(m){var angle,x,y,z,epsilon=.01,epsilon2=.1,te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];if(Math.abs(m12-m21)<epsilon&&Math.abs(m13-m31)<epsilon&&Math.abs(m23-m32)<epsilon){if(Math.abs(m12+m21)<epsilon2&&Math.abs(m13+m31)<epsilon2&&Math.abs(m23+m32)<epsilon2&&Math.abs(m11+m22+m33-3)<epsilon2)return this.set(1,0,0,0),this;angle=Math.PI;var xx=(m11+1)/2,yy=(m22+1)/2,zz=(m33+1)/2,xy=(m12+m21)/4,xz=(m13+m31)/4,yz=(m23+m32)/4;return xx>yy&&xx>zz?xx<epsilon?(x=0,y=.707106781,z=.707106781):(y=xy/(x=Math.sqrt(xx)),z=xz/x):yy>zz?yy<epsilon?(x=.707106781,y=0,z=.707106781):(x=xy/(y=Math.sqrt(yy)),z=yz/y):zz<epsilon?(x=.707106781,y=.707106781,z=0):(x=xz/(z=Math.sqrt(zz)),y=yz/z),this.set(x,y,z,angle),this}var s=Math.sqrt((m32-m23)*(m32-m23)+(m13-m31)*(m13-m31)+(m21-m12)*(m21-m12));return Math.abs(s)<.001&&(s=1),this.x=(m32-m23)/s,this.y=(m13-m31)/s,this.z=(m21-m12)/s,this.w=Math.acos((m11+m22+m33-1)/2),this},min:function(v){return this.x>v.x&&(this.x=v.x),this.y>v.y&&(this.y=v.y),this.z>v.z&&(this.z=v.z),this.w>v.w&&(this.w=v.w),this},max:function(v){return this.x<v.x&&(this.x=v.x),this.y<v.y&&(this.y=v.y),this.z<v.z&&(this.z=v.z),this.w<v.w&&(this.w=v.w),this},clamp:function(min,max){return this.x<min.x?this.x=min.x:this.x>max.x&&(this.x=max.x),this.y<min.y?this.y=min.y:this.y>max.y&&(this.y=max.y),this.z<min.z?this.z=min.z:this.z>max.z&&(this.z=max.z),this.w<min.w?this.w=min.w:this.w>max.w&&(this.w=max.w),this},clampScalar:function(){var min,max;return function(minVal,maxVal){return min===undefined&&(min=new THREE.Vector4,max=new THREE.Vector4),min.set(minVal,minVal,minVal,minVal),max.set(maxVal,maxVal,maxVal,maxVal),this.clamp(min,max)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(l){var oldLength=this.length();return 0!==oldLength&&l!==oldLength&&this.multiplyScalar(l/oldLength),this},lerp:function(v,alpha){return this.x+=(v.x-this.x)*alpha,this.y+=(v.y-this.y)*alpha,this.z+=(v.z-this.z)*alpha,this.w+=(v.w-this.w)*alpha,this},lerpVectors:function(v1,v2,alpha){return this.subVectors(v2,v1).multiplyScalar(alpha).add(v1),this},equals:function(v){return v.x===this.x&&v.y===this.y&&v.z===this.z&&v.w===this.w},fromArray:function(array,offset){return offset===undefined&&(offset=0),this.x=array[offset],this.y=array[offset+1],this.z=array[offset+2],this.w=array[offset+3],this},toArray:function(array,offset){return array===undefined&&(array=[]),offset===undefined&&(offset=0),array[offset]=this.x,array[offset+1]=this.y,array[offset+2]=this.z,array[offset+3]=this.w,array},fromAttribute:function(attribute,index,offset){return offset===undefined&&(offset=0),index=index*attribute.itemSize+offset,this.x=attribute.array[index],this.y=attribute.array[index+1],this.z=attribute.array[index+2],this.w=attribute.array[index+3],this}},THREE.Euler=function(x,y,z,order){this._x=x||0,this._y=y||0,this._z=z||0,this._order=order||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(value){this._x=value,this.onChangeCallback()},get y(){return this._y},set y(value){this._y=value,this.onChangeCallback()},get z(){return this._z},set z(value){this._z=value,this.onChangeCallback()},get order(){return this._order},set order(value){this._order=value,this.onChangeCallback()},set:function(x,y,z,order){return this._x=x,this._y=y,this._z=z,this._order=order||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(euler){return this._x=euler._x,this._y=euler._y,this._z=euler._z,this._order=euler._order,this.onChangeCallback(),this},setFromRotationMatrix:function(m,order,update){var clamp=THREE.Math.clamp,te=m.elements,m11=te[0],m12=te[4],m13=te[8],m21=te[1],m22=te[5],m23=te[9],m31=te[2],m32=te[6],m33=te[10];return"XYZ"===(order=order||this._order)?(this._y=Math.asin(clamp(m13,-1,1)),Math.abs(m13)<.99999?(this._x=Math.atan2(-m23,m33),this._z=Math.atan2(-m12,m11)):(this._x=Math.atan2(m32,m22),this._z=0)):"YXZ"===order?(this._x=Math.asin(-clamp(m23,-1,1)),Math.abs(m23)<.99999?(this._y=Math.atan2(m13,m33),this._z=Math.atan2(m21,m22)):(this._y=Math.atan2(-m31,m11),this._z=0)):"ZXY"===order?(this._x=Math.asin(clamp(m32,-1,1)),Math.abs(m32)<.99999?(this._y=Math.atan2(-m31,m33),this._z=Math.atan2(-m12,m22)):(this._y=0,this._z=Math.atan2(m21,m11))):"ZYX"===order?(this._y=Math.asin(-clamp(m31,-1,1)),Math.abs(m31)<.99999?(this._x=Math.atan2(m32,m33),this._z=Math.atan2(m21,m11)):(this._x=0,this._z=Math.atan2(-m12,m22))):"YZX"===order?(this._z=Math.asin(clamp(m21,-1,1)),Math.abs(m21)<.99999?(this._x=Math.atan2(-m23,m22),this._y=Math.atan2(-m31,m11)):(this._x=0,this._y=Math.atan2(m13,m33))):"XZY"===order?(this._z=Math.asin(-clamp(m12,-1,1)),Math.abs(m12)<.99999?(this._x=Math.atan2(m32,m22),this._y=Math.atan2(m13,m11)):(this._x=Math.atan2(-m23,m33),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+order),this._order=order,!1!==update&&this.onChangeCallback(),this},setFromQuaternion:function(){var matrix;return function(q,order,update){return matrix===undefined&&(matrix=new THREE.Matrix4),matrix.makeRotationFromQuaternion(q),this.setFromRotationMatrix(matrix,order,update),this}}(),setFromVector3:function(v,order){return this.set(v.x,v.y,v.z,order||this._order)},reorder:function(){var q=new THREE.Quaternion;return function(newOrder){q.setFromEuler(this),this.setFromQuaternion(q,newOrder)}}(),equals:function(euler){return euler._x===this._x&&euler._y===this._y&&euler._z===this._z&&euler._order===this._order},fromArray:function(array){return this._x=array[0],this._y=array[1],this._z=array[2],array[3]!==undefined&&(this._order=array[3]),this.onChangeCallback(),this},toArray:function(array,offset){return array===undefined&&(array=[]),offset===undefined&&(offset=0),array[offset]=this._x,array[offset+1]=this._y,array[offset+2]=this._z,array[offset+3]=this._order,array},toVector3:function(optionalResult){return optionalResult?optionalResult.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(callback){return this.onChangeCallback=callback,this},onChangeCallback:function(){}},THREE.Line3=function(start,end){this.start=start!==undefined?start:new THREE.Vector3,this.end=end!==undefined?end:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(start,end){return this.start.copy(start),this.end.copy(end),this},clone:function(){return(new this.constructor).copy(this)},copy:function(line){return this.start.copy(line.start),this.end.copy(line.end),this},center:function(optionalTarget){return(optionalTarget||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(optionalTarget){return(optionalTarget||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,optionalTarget){var result=optionalTarget||new THREE.Vector3;return this.delta(result).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var startP=new THREE.Vector3,startEnd=new THREE.Vector3;return function(point,clampToLine){startP.subVectors(point,this.start),startEnd.subVectors(this.end,this.start);var startEnd2=startEnd.dot(startEnd),t=startEnd.dot(startP)/startEnd2;return clampToLine&&(t=THREE.Math.clamp(t,0,1)),t}}(),closestPointToPoint:function(point,clampToLine,optionalTarget){var t=this.closestPointToPointParameter(point,clampToLine),result=optionalTarget||new THREE.Vector3;return this.delta(result).multiplyScalar(t).add(this.start)},applyMatrix4:function(matrix){return this.start.applyMatrix4(matrix),this.end.applyMatrix4(matrix),this},equals:function(line){return line.start.equals(this.start)&&line.end.equals(this.end)}},THREE.Box2=function(min,max){this.min=min!==undefined?min:new THREE.Vector2(Infinity,Infinity),this.max=max!==undefined?max:new THREE.Vector2(-Infinity,-Infinity)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(min,max){return this.min.copy(min),this.max.copy(max),this},setFromPoints:function(points){this.makeEmpty();for(var i=0,il=points.length;i<il;i++)this.expandByPoint(points[i]);return this},setFromCenterAndSize:function(){var v1=new THREE.Vector2;return function(center,size){var halfSize=v1.copy(size).multiplyScalar(.5);return this.min.copy(center).sub(halfSize),this.max.copy(center).add(halfSize),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(box){return this.min.copy(box.min),this.max.copy(box.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(optionalTarget){return(optionalTarget||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(optionalTarget){return(optionalTarget||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(point){return this.min.min(point),this.max.max(point),this},expandByVector:function(vector){return this.min.sub(vector),this.max.add(vector),this},expandByScalar:function(scalar){return this.min.addScalar(-scalar),this.max.addScalar(scalar),this},containsPoint:function(point){return!(point.x<this.min.x||point.x>this.max.x||point.y<this.min.y||point.y>this.max.y)},containsBox:function(box){return this.min.x<=box.min.x&&box.max.x<=this.max.x&&this.min.y<=box.min.y&&box.max.y<=this.max.y},getParameter:function(point,optionalTarget){return(optionalTarget||new THREE.Vector2).set((point.x-this.min.x)/(this.max.x-this.min.x),(point.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(box){return!(box.max.x<this.min.x||box.min.x>this.max.x||box.max.y<this.min.y||box.min.y>this.max.y)},clampPoint:function(point,optionalTarget){return(optionalTarget||new THREE.Vector2).copy(point).clamp(this.min,this.max)},distanceToPoint:function(){var v1=new THREE.Vector2;return function(point){return v1.copy(point).clamp(this.min,this.max).sub(point).length()}}(),intersect:function(box){return this.min.max(box.min),this.max.min(box.max),this},union:function(box){return this.min.min(box.min),this.max.max(box.max),this},translate:function(offset){return this.min.add(offset),this.max.add(offset),this},equals:function(box){return box.min.equals(this.min)&&box.max.equals(this.max)}},THREE.Box3=function(min,max){this.min=min!==undefined?min:new THREE.Vector3(Infinity,Infinity,Infinity),this.max=max!==undefined?max:new THREE.Vector3(-Infinity,-Infinity,-Infinity)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(min,max){return this.min.copy(min),this.max.copy(max),this},setFromPoints:function(points){this.makeEmpty();for(var i=0,il=points.length;i<il;i++)this.expandByPoint(points[i]);return this},setFromCenterAndSize:function(){var v1=new THREE.Vector3;return function(center,size){var halfSize=v1.copy(size).multiplyScalar(.5);return this.min.copy(center).sub(halfSize),this.max.copy(center).add(halfSize),this}}(),setFromObject:function(){var v1=new THREE.Vector3;return function(object){var scope=this;return object.updateMatrixWorld(!0),this.makeEmpty(),object.traverse(function(node){var geometry=node.geometry;if(geometry!==undefined)if(geometry instanceof THREE.Geometry)for(var vertices=geometry.vertices,i=0,il=vertices.length;i<il;i++)v1.copy(vertices[i]),v1.applyMatrix4(node.matrixWorld),scope.expandByPoint(v1);else if(geometry instanceof THREE.BufferGeometry&&geometry.attributes.position!==undefined){var positions=geometry.attributes.position.array;for(i=0,il=positions.length;i<il;i+=3)v1.set(positions[i],positions[i+1],positions[i+2]),v1.applyMatrix4(node.matrixWorld),scope.expandByPoint(v1)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(box){return this.min.copy(box.min),this.max.copy(box.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(optionalTarget){return(optionalTarget||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(optionalTarget){return(optionalTarget||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(point){return this.min.min(point),this.max.max(point),this},expandByVector:function(vector){return this.min.sub(vector),this.max.add(vector),this},expandByScalar:function(scalar){return this.min.addScalar(-scalar),this.max.addScalar(scalar),this},containsPoint:function(point){return!(point.x<this.min.x||point.x>this.max.x||point.y<this.min.y||point.y>this.max.y||point.z<this.min.z||point.z>this.max.z)},containsBox:function(box){return this.min.x<=box.min.x&&box.max.x<=this.max.x&&this.min.y<=box.min.y&&box.max.y<=this.max.y&&this.min.z<=box.min.z&&box.max.z<=this.max.z},getParameter:function(point,optionalTarget){return(optionalTarget||new THREE.Vector3).set((point.x-this.min.x)/(this.max.x-this.min.x),(point.y-this.min.y)/(this.max.y-this.min.y),(point.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(box){return!(box.max.x<this.min.x||box.min.x>this.max.x||box.max.y<this.min.y||box.min.y>this.max.y||box.max.z<this.min.z||box.min.z>this.max.z)},clampPoint:function(point,optionalTarget){return(optionalTarget||new THREE.Vector3).copy(point).clamp(this.min,this.max)},distanceToPoint:function(){var v1=new THREE.Vector3;return function(point){return v1.copy(point).clamp(this.min,this.max).sub(point).length()}}(),getBoundingSphere:function(){var v1=new THREE.Vector3;return function(optionalTarget){var result=optionalTarget||new THREE.Sphere;return result.center=this.center(),result.radius=.5*this.size(v1).length(),result}}(),intersect:function(box){return this.min.max(box.min),this.max.min(box.max),this},union:function(box){return this.min.min(box.min),this.max.max(box.max),this},applyMatrix4:function(){var points=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(matrix){return points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(matrix),points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(matrix),points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(matrix),points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(matrix),points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(matrix),points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(matrix),points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(matrix),points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(matrix),this.makeEmpty(),this.setFromPoints(points),this}}(),translate:function(offset){return this.min.add(offset),this.max.add(offset),this},equals:function(box){return box.min.equals(this.min)&&box.max.equals(this.max)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(n11,n12,n13,n21,n22,n23,n31,n32,n33){var te=this.elements;return te[0]=n11,te[3]=n12,te[6]=n13,te[1]=n21,te[4]=n22,te[7]=n23,te[2]=n31,te[5]=n32,te[8]=n33,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(m){var me=m.elements;return this.set(me[0],me[3],me[6],me[1],me[4],me[7],me[2],me[5],me[8]),this},multiplyVector3:function(vector){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),vector.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToVector3Array:function(){var v1;return function(array,offset,length){v1===undefined&&(v1=new THREE.Vector3),offset===undefined&&(offset=0),length===undefined&&(length=array.length);for(var i=0,j=offset;i<length;i+=3,j+=3)v1.fromArray(array,j),v1.applyMatrix3(this),v1.toArray(array,j);return array}}(),applyToBuffer:function(){var v1;return function(buffer,offset,length){v1===undefined&&(v1=new THREE.Vector3),offset===undefined&&(offset=0),length===undefined&&(length=buffer.length/buffer.itemSize);for(var i=0,j=offset;i<length;i++,j++)v1.x=buffer.getX(j),v1.y=buffer.getY(j),v1.z=buffer.getZ(j),v1.applyMatrix3(this),buffer.setXYZ(v1.x,v1.y,v1.z);return buffer}}(),multiplyScalar:function(s){var te=this.elements;return te[0]*=s,te[3]*=s,te[6]*=s,te[1]*=s,te[4]*=s,te[7]*=s,te[2]*=s,te[5]*=s,te[8]*=s,this},determinant:function(){var te=this.elements,a=te[0],b=te[1],c=te[2],d=te[3],e=te[4],f=te[5],g=te[6],h=te[7],i=te[8];return a*e*i-a*f*h-b*d*i+b*f*g+c*d*h-c*e*g},getInverse:function(matrix,throwOnInvertible){var me=matrix.elements,te=this.elements;te[0]=me[10]*me[5]-me[6]*me[9],te[1]=-me[10]*me[1]+me[2]*me[9],te[2]=me[6]*me[1]-me[2]*me[5],te[3]=-me[10]*me[4]+me[6]*me[8],te[4]=me[10]*me[0]-me[2]*me[8],te[5]=-me[6]*me[0]+me[2]*me[4],te[6]=me[9]*me[4]-me[5]*me[8],te[7]=-me[9]*me[0]+me[1]*me[8],te[8]=me[5]*me[0]-me[1]*me[4];var det=me[0]*te[0]+me[1]*te[3]+me[2]*te[6];if(0===det){var msg="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(throwOnInvertible)throw new Error(msg);return console.warn(msg),this.identity(),this}return this.multiplyScalar(1/det),this},transpose:function(){var tmp,m=this.elements;return tmp=m[1],m[1]=m[3],m[3]=tmp,tmp=m[2],m[2]=m[6],m[6]=tmp,tmp=m[5],m[5]=m[7],m[7]=tmp,this},flattenToArrayOffset:function(array,offset){var te=this.elements;return array[offset]=te[0],array[offset+1]=te[1],array[offset+2]=te[2],array[offset+3]=te[3],array[offset+4]=te[4],array[offset+5]=te[5],array[offset+6]=te[6],array[offset+7]=te[7],array[offset+8]=te[8],array},getNormalMatrix:function(m){return this.getInverse(m).transpose(),this},transposeIntoArray:function(r){var m=this.elements;return r[0]=m[0],r[1]=m[3],r[2]=m[6],r[3]=m[1],r[4]=m[4],r[5]=m[7],r[6]=m[2],r[7]=m[5],r[8]=m[8],this},fromArray:function(array){return this.elements.set(array),this},toArray:function(){var te=this.elements;return[te[0],te[1],te[2],te[3],te[4],te[5],te[6],te[7],te[8]]}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){var te=this.elements;return te[0]=n11,te[4]=n12,te[8]=n13,te[12]=n14,te[1]=n21,te[5]=n22,te[9]=n23,te[13]=n24,te[2]=n31,te[6]=n32,te[10]=n33,te[14]=n34,te[3]=n41,te[7]=n42,te[11]=n43,te[15]=n44,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(m){return this.elements.set(m.elements),this},extractPosition:function(m){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(m)},copyPosition:function(m){var te=this.elements,me=m.elements;return te[12]=me[12],te[13]=me[13],te[14]=me[14],this},extractBasis:function(xAxis,yAxis,zAxis){var te=this.elements;return xAxis.set(te[0],te[1],te[2]),yAxis.set(te[4],te[5],te[6]),zAxis.set(te[8],te[9],te[10]),this},makeBasis:function(xAxis,yAxis,zAxis){return this.set(xAxis.x,yAxis.x,zAxis.x,0,xAxis.y,yAxis.y,zAxis.y,0,xAxis.z,yAxis.z,zAxis.z,0,0,0,0,1),this},extractRotation:function(){var v1;return function(m){v1===undefined&&(v1=new THREE.Vector3);var te=this.elements,me=m.elements,scaleX=1/v1.set(me[0],me[1],me[2]).length(),scaleY=1/v1.set(me[4],me[5],me[6]).length(),scaleZ=1/v1.set(me[8],me[9],me[10]).length();return te[0]=me[0]*scaleX,te[1]=me[1]*scaleX,te[2]=me[2]*scaleX,te[4]=me[4]*scaleY,te[5]=me[5]*scaleY,te[6]=me[6]*scaleY,te[8]=me[8]*scaleZ,te[9]=me[9]*scaleZ,te[10]=me[10]*scaleZ,this}}(),makeRotationFromEuler:function(euler){euler instanceof THREE.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var te=this.elements,x=euler.x,y=euler.y,z=euler.z,a=Math.cos(x),b=Math.sin(x),c=Math.cos(y),d=Math.sin(y),e=Math.cos(z),f=Math.sin(z);if("XYZ"===euler.order){var ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=-c*f,te[8]=d,te[1]=af+be*d,te[5]=ae-bf*d,te[9]=-b*c,te[2]=bf-ae*d,te[6]=be+af*d,te[10]=a*c}else if("YXZ"===euler.order){var ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce+df*b,te[4]=de*b-cf,te[8]=a*d,te[1]=a*f,te[5]=a*e,te[9]=-b,te[2]=cf*b-de,te[6]=df+ce*b,te[10]=a*c}else if("ZXY"===euler.order){ce=c*e,cf=c*f,de=d*e,df=d*f;te[0]=ce-df*b,te[4]=-a*f,te[8]=de+cf*b,te[1]=cf+de*b,te[5]=a*e,te[9]=df-ce*b,te[2]=-a*d,te[6]=b,te[10]=a*c}else if("ZYX"===euler.order){ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=be*d-af,te[8]=ae*d+bf,te[1]=c*f,te[5]=bf*d+ae,te[9]=af*d-be,te[2]=-d,te[6]=b*c,te[10]=a*c}else if("YZX"===euler.order){var ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e,te[4]=bd-ac*f,te[8]=bc*f+ad,te[1]=f,te[5]=a*e,te[9]=-b*e,te[2]=-d*e,te[6]=ad*f+bc,te[10]=ac-bd*f}else if("XZY"===euler.order){ac=a*c,ad=a*d,bc=b*c,bd=b*d;te[0]=c*e,te[4]=-f,te[8]=d*e,te[1]=ac*f+bd,te[5]=a*e,te[9]=ad*f-bc,te[2]=bc*f-ad,te[6]=b*e,te[10]=bd*f+ac}return te[3]=0,te[7]=0,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this},setRotationFromQuaternion:function(q){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(q)},makeRotationFromQuaternion:function(q){var te=this.elements,x=q.x,y=q.y,z=q.z,w=q.w,x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return te[0]=1-(yy+zz),te[4]=xy-wz,te[8]=xz+wy,te[1]=xy+wz,te[5]=1-(xx+zz),te[9]=yz-wx,te[2]=xz-wy,te[6]=yz+wx,te[10]=1-(xx+yy),te[3]=0,te[7]=0,te[11]=0,te[12]=0,te[13]=0,te[14]=0,te[15]=1,this},lookAt:function(){var x,y,z;return function(eye,target,up){x===undefined&&(x=new THREE.Vector3),y===undefined&&(y=new THREE.Vector3),z===undefined&&(z=new THREE.Vector3);var te=this.elements;return z.subVectors(eye,target).normalize(),0===z.length()&&(z.z=1),x.crossVectors(up,z).normalize(),0===x.length()&&(z.x+=1e-4,x.crossVectors(up,z).normalize()),y.crossVectors(z,x),te[0]=x.x,te[4]=y.x,te[8]=z.x,te[1]=x.y,te[5]=y.y,te[9]=z.y,te[2]=x.z,te[6]=y.z,te[10]=z.z,this}}(),multiply:function(m,n){return n!==undefined?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(m,n)):this.multiplyMatrices(this,m)},multiplyMatrices:function(a,b){var ae=a.elements,be=b.elements,te=this.elements,a11=ae[0],a12=ae[4],a13=ae[8],a14=ae[12],a21=ae[1],a22=ae[5],a23=ae[9],a24=ae[13],a31=ae[2],a32=ae[6],a33=ae[10],a34=ae[14],a41=ae[3],a42=ae[7],a43=ae[11],a44=ae[15],b11=be[0],b12=be[4],b13=be[8],b14=be[12],b21=be[1],b22=be[5],b23=be[9],b24=be[13],b31=be[2],b32=be[6],b33=be[10],b34=be[14],b41=be[3],b42=be[7],b43=be[11],b44=be[15];return te[0]=a11*b11+a12*b21+a13*b31+a14*b41,te[4]=a11*b12+a12*b22+a13*b32+a14*b42,te[8]=a11*b13+a12*b23+a13*b33+a14*b43,te[12]=a11*b14+a12*b24+a13*b34+a14*b44,te[1]=a21*b11+a22*b21+a23*b31+a24*b41,te[5]=a21*b12+a22*b22+a23*b32+a24*b42,te[9]=a21*b13+a22*b23+a23*b33+a24*b43,te[13]=a21*b14+a22*b24+a23*b34+a24*b44,te[2]=a31*b11+a32*b21+a33*b31+a34*b41,te[6]=a31*b12+a32*b22+a33*b32+a34*b42,te[10]=a31*b13+a32*b23+a33*b33+a34*b43,te[14]=a31*b14+a32*b24+a33*b34+a34*b44,te[3]=a41*b11+a42*b21+a43*b31+a44*b41,te[7]=a41*b12+a42*b22+a43*b32+a44*b42,te[11]=a41*b13+a42*b23+a43*b33+a44*b43,te[15]=a41*b14+a42*b24+a43*b34+a44*b44,this},multiplyToArray:function(a,b,r){var te=this.elements;return this.multiplyMatrices(a,b),r[0]=te[0],r[1]=te[1],r[2]=te[2],r[3]=te[3],r[4]=te[4],r[5]=te[5],r[6]=te[6],r[7]=te[7],r[8]=te[8],r[9]=te[9],r[10]=te[10],r[11]=te[11],r[12]=te[12],r[13]=te[13],r[14]=te[14],r[15]=te[15],this},multiplyScalar:function(s){var te=this.elements;return te[0]*=s,te[4]*=s,te[8]*=s,te[12]*=s,te[1]*=s,te[5]*=s,te[9]*=s,te[13]*=s,te[2]*=s,te[6]*=s,te[10]*=s,te[14]*=s,te[3]*=s,te[7]*=s,te[11]*=s,te[15]*=s,this},multiplyVector3:function(vector){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),vector.applyProjection(this)},multiplyVector4:function(vector){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),vector.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToVector3Array:function(){var v1;return function(array,offset,length){v1===undefined&&(v1=new THREE.Vector3),offset===undefined&&(offset=0),length===undefined&&(length=array.length);for(var i=0,j=offset;i<length;i+=3,j+=3)v1.fromArray(array,j),v1.applyMatrix4(this),v1.toArray(array,j);return array}}(),applyToBuffer:function(){var v1;return function(buffer,offset,length){v1===undefined&&(v1=new THREE.Vector3),offset===undefined&&(offset=0),length===undefined&&(length=buffer.length/buffer.itemSize);for(var i=0,j=offset;i<length;i++,j++)v1.x=buffer.getX(j),v1.y=buffer.getY(j),v1.z=buffer.getZ(j),v1.applyMatrix4(this),buffer.setXYZ(v1.x,v1.y,v1.z);return buffer}}(),rotateAxis:function(v){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),v.transformDirection(this)},crossVector:function(vector){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),vector.applyMatrix4(this)},determinant:function(){var te=this.elements,n11=te[0],n12=te[4],n13=te[8],n14=te[12],n21=te[1],n22=te[5],n23=te[9],n24=te[13],n31=te[2],n32=te[6],n33=te[10],n34=te[14];return te[3]*(+n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34)+te[7]*(+n11*n23*n34-n11*n24*n33+n14*n21*n33-n13*n21*n34+n13*n24*n31-n14*n23*n31)+te[11]*(+n11*n24*n32-n11*n22*n34-n14*n21*n32+n12*n21*n34+n14*n22*n31-n12*n24*n31)+te[15]*(-n13*n22*n31-n11*n23*n32+n11*n22*n33+n13*n21*n32-n12*n21*n33+n12*n23*n31)},transpose:function(){var tmp,te=this.elements;return tmp=te[1],te[1]=te[4],te[4]=tmp,tmp=te[2],te[2]=te[8],te[8]=tmp,tmp=te[6],te[6]=te[9],te[9]=tmp,tmp=te[3],te[3]=te[12],te[12]=tmp,tmp=te[7],te[7]=te[13],te[13]=tmp,tmp=te[11],te[11]=te[14],te[14]=tmp,this},flattenToArrayOffset:function(array,offset){var te=this.elements;return array[offset]=te[0],array[offset+1]=te[1],array[offset+2]=te[2],array[offset+3]=te[3],array[offset+4]=te[4],array[offset+5]=te[5],array[offset+6]=te[6],array[offset+7]=te[7],array[offset+8]=te[8],array[offset+9]=te[9],array[offset+10]=te[10],array[offset+11]=te[11],array[offset+12]=te[12],array[offset+13]=te[13],array[offset+14]=te[14],array[offset+15]=te[15],array},getPosition:function(){var v1;return function(){v1===undefined&&(v1=new THREE.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var te=this.elements;return v1.set(te[12],te[13],te[14])}}(),setPosition:function(v){var te=this.elements;return te[12]=v.x,te[13]=v.y,te[14]=v.z,this},getInverse:function(m,throwOnInvertible){var te=this.elements,me=m.elements,n11=me[0],n12=me[4],n13=me[8],n14=me[12],n21=me[1],n22=me[5],n23=me[9],n24=me[13],n31=me[2],n32=me[6],n33=me[10],n34=me[14],n41=me[3],n42=me[7],n43=me[11],n44=me[15];te[0]=n23*n34*n42-n24*n33*n42+n24*n32*n43-n22*n34*n43-n23*n32*n44+n22*n33*n44,te[4]=n14*n33*n42-n13*n34*n42-n14*n32*n43+n12*n34*n43+n13*n32*n44-n12*n33*n44,te[8]=n13*n24*n42-n14*n23*n42+n14*n22*n43-n12*n24*n43-n13*n22*n44+n12*n23*n44,te[12]=n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34,te[1]=n24*n33*n41-n23*n34*n41-n24*n31*n43+n21*n34*n43+n23*n31*n44-n21*n33*n44,te[5]=n13*n34*n41-n14*n33*n41+n14*n31*n43-n11*n34*n43-n13*n31*n44+n11*n33*n44,te[9]=n14*n23*n41-n13*n24*n41-n14*n21*n43+n11*n24*n43+n13*n21*n44-n11*n23*n44,te[13]=n13*n24*n31-n14*n23*n31+n14*n21*n33-n11*n24*n33-n13*n21*n34+n11*n23*n34,te[2]=n22*n34*n41-n24*n32*n41+n24*n31*n42-n21*n34*n42-n22*n31*n44+n21*n32*n44,te[6]=n14*n32*n41-n12*n34*n41-n14*n31*n42+n11*n34*n42+n12*n31*n44-n11*n32*n44,te[10]=n12*n24*n41-n14*n22*n41+n14*n21*n42-n11*n24*n42-n12*n21*n44+n11*n22*n44,te[14]=n14*n22*n31-n12*n24*n31-n14*n21*n32+n11*n24*n32+n12*n21*n34-n11*n22*n34,te[3]=n23*n32*n41-n22*n33*n41-n23*n31*n42+n21*n33*n42+n22*n31*n43-n21*n32*n43,te[7]=n12*n33*n41-n13*n32*n41+n13*n31*n42-n11*n33*n42-n12*n31*n43+n11*n32*n43,te[11]=n13*n22*n41-n12*n23*n41-n13*n21*n42+n11*n23*n42+n12*n21*n43-n11*n22*n43,te[15]=n12*n23*n31-n13*n22*n31+n13*n21*n32-n11*n23*n32-n12*n21*n33+n11*n22*n33;var det=n11*te[0]+n21*te[4]+n31*te[8]+n41*te[12];if(0===det){var msg="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(throwOnInvertible)throw new Error(msg);return console.warn(msg),this.identity(),this}return this.multiplyScalar(1/det),this},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(v){var te=this.elements,x=v.x,y=v.y,z=v.z;return te[0]*=x,te[4]*=y,te[8]*=z,te[1]*=x,te[5]*=y,te[9]*=z,te[2]*=x,te[6]*=y,te[10]*=z,te[3]*=x,te[7]*=y,te[11]*=z,this},getMaxScaleOnAxis:function(){var te=this.elements,scaleXSq=te[0]*te[0]+te[1]*te[1]+te[2]*te[2],scaleYSq=te[4]*te[4]+te[5]*te[5]+te[6]*te[6],scaleZSq=te[8]*te[8]+te[9]*te[9]+te[10]*te[10];return Math.sqrt(Math.max(scaleXSq,Math.max(scaleYSq,scaleZSq)))},makeTranslation:function(x,y,z){return this.set(1,0,0,x,0,1,0,y,0,0,1,z,0,0,0,1),this},makeRotationX:function(theta){var c=Math.cos(theta),s=Math.sin(theta);return this.set(1,0,0,0,0,c,-s,0,0,s,c,0,0,0,0,1),this},makeRotationY:function(theta){var c=Math.cos(theta),s=Math.sin(theta);return this.set(c,0,s,0,0,1,0,0,-s,0,c,0,0,0,0,1),this},makeRotationZ:function(theta){var c=Math.cos(theta),s=Math.sin(theta);return this.set(c,-s,0,0,s,c,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(axis,angle){var c=Math.cos(angle),s=Math.sin(angle),t=1-c,x=axis.x,y=axis.y,z=axis.z,tx=t*x,ty=t*y;return this.set(tx*x+c,tx*y-s*z,tx*z+s*y,0,tx*y+s*z,ty*y+c,ty*z-s*x,0,tx*z-s*y,ty*z+s*x,t*z*z+c,0,0,0,0,1),this},makeScale:function(x,y,z){return this.set(x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1),this},compose:function(position,quaternion,scale){return this.makeRotationFromQuaternion(quaternion),this.scale(scale),this.setPosition(position),this},decompose:function(){var vector,matrix;return function(position,quaternion,scale){vector===undefined&&(vector=new THREE.Vector3),matrix===undefined&&(matrix=new THREE.Matrix4);var te=this.elements,sx=vector.set(te[0],te[1],te[2]).length(),sy=vector.set(te[4],te[5],te[6]).length(),sz=vector.set(te[8],te[9],te[10]).length();this.determinant()<0&&(sx=-sx),position.x=te[12],position.y=te[13],position.z=te[14],matrix.elements.set(this.elements);var invSX=1/sx,invSY=1/sy,invSZ=1/sz;return matrix.elements[0]*=invSX,matrix.elements[1]*=invSX,matrix.elements[2]*=invSX,matrix.elements[4]*=invSY,matrix.elements[5]*=invSY,matrix.elements[6]*=invSY,matrix.elements[8]*=invSZ,matrix.elements[9]*=invSZ,matrix.elements[10]*=invSZ,quaternion.setFromRotationMatrix(matrix),scale.x=sx,scale.y=sy,scale.z=sz,this}}(),makeFrustum:function(left,right,bottom,top,near,far){var te=this.elements,x=2*near/(right-left),y=2*near/(top-bottom),a=(right+left)/(right-left),b=(top+bottom)/(top-bottom),c=-(far+near)/(far-near),d=-2*far*near/(far-near);return te[0]=x,te[4]=0,te[8]=a,te[12]=0,te[1]=0,te[5]=y,te[9]=b,te[13]=0,te[2]=0,te[6]=0,te[10]=c,te[14]=d,te[3]=0,te[7]=0,te[11]=-1,te[15]=0,this},makePerspective:function(fov,aspect,near,far){var ymax=near*Math.tan(THREE.Math.degToRad(.5*fov)),ymin=-ymax,xmin=ymin*aspect,xmax=ymax*aspect;return this.makeFrustum(xmin,xmax,ymin,ymax,near,far)},makeOrthographic:function(left,right,top,bottom,near,far){var te=this.elements,w=right-left,h=top-bottom,p=far-near,x=(right+left)/w,y=(top+bottom)/h,z=(far+near)/p;return te[0]=2/w,te[4]=0,te[8]=0,te[12]=-x,te[1]=0,te[5]=2/h,te[9]=0,te[13]=-y,te[2]=0,te[6]=0,te[10]=-2/p,te[14]=-z,te[3]=0,te[7]=0,te[11]=0,te[15]=1,this},equals:function(matrix){for(var te=this.elements,me=matrix.elements,i=0;i<16;i++)if(te[i]!==me[i])return!1;return!0},fromArray:function(array){return this.elements.set(array),this},toArray:function(){var te=this.elements;return[te[0],te[1],te[2],te[3],te[4],te[5],te[6],te[7],te[8],te[9],te[10],te[11],te[12],te[13],te[14],te[15]]}},THREE.Ray=function(origin,direction){this.origin=origin!==undefined?origin:new THREE.Vector3,this.direction=direction!==undefined?direction:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(origin,direction){return this.origin.copy(origin),this.direction.copy(direction),this},clone:function(){return(new this.constructor).copy(this)},copy:function(ray){return this.origin.copy(ray.origin),this.direction.copy(ray.direction),this},at:function(t,optionalTarget){return(optionalTarget||new THREE.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)},recast:function(){var v1=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,v1)),this}}(),closestPointToPoint:function(point,optionalTarget){var result=optionalTarget||new THREE.Vector3;result.subVectors(point,this.origin);var directionDistance=result.dot(this.direction);return directionDistance<0?result.copy(this.origin):result.copy(this.direction).multiplyScalar(directionDistance).add(this.origin)},distanceToPoint:function(point){return Math.sqrt(this.distanceSqToPoint(point))},distanceSqToPoint:function(){var v1=new THREE.Vector3;return function(point){var directionDistance=v1.subVectors(point,this.origin).dot(this.direction);return directionDistance<0?this.origin.distanceToSquared(point):(v1.copy(this.direction).multiplyScalar(directionDistance).add(this.origin),v1.distanceToSquared(point))}}(),distanceSqToSegment:function(){var segCenter=new THREE.Vector3,segDir=new THREE.Vector3,diff=new THREE.Vector3;return function(v0,v1,optionalPointOnRay,optionalPointOnSegment){segCenter.copy(v0).add(v1).multiplyScalar(.5),segDir.copy(v1).sub(v0).normalize(),diff.copy(this.origin).sub(segCenter);var s0,s1,sqrDist,extDet,segExtent=.5*v0.distanceTo(v1),a01=-this.direction.dot(segDir),b0=diff.dot(this.direction),b1=-diff.dot(segDir),c=diff.lengthSq(),det=Math.abs(1-a01*a01);if(det>0)if(s1=a01*b0-b1,extDet=segExtent*det,(s0=a01*b1-b0)>=0)if(s1>=-extDet)if(s1<=extDet){var invDet=1/det;sqrDist=(s0*=invDet)*(s0+a01*(s1*=invDet)+2*b0)+s1*(a01*s0+s1+2*b1)+c}else s1=segExtent,sqrDist=-(s0=Math.max(0,-(a01*s1+b0)))*s0+s1*(s1+2*b1)+c;else s1=-segExtent,sqrDist=-(s0=Math.max(0,-(a01*s1+b0)))*s0+s1*(s1+2*b1)+c;else s1<=-extDet?sqrDist=-(s0=Math.max(0,-(-a01*segExtent+b0)))*s0+(s1=s0>0?-segExtent:Math.min(Math.max(-segExtent,-b1),segExtent))*(s1+2*b1)+c:s1<=extDet?(s0=0,sqrDist=(s1=Math.min(Math.max(-segExtent,-b1),segExtent))*(s1+2*b1)+c):sqrDist=-(s0=Math.max(0,-(a01*segExtent+b0)))*s0+(s1=s0>0?segExtent:Math.min(Math.max(-segExtent,-b1),segExtent))*(s1+2*b1)+c;else s1=a01>0?-segExtent:segExtent,sqrDist=-(s0=Math.max(0,-(a01*s1+b0)))*s0+s1*(s1+2*b1)+c;return optionalPointOnRay&&optionalPointOnRay.copy(this.direction).multiplyScalar(s0).add(this.origin),optionalPointOnSegment&&optionalPointOnSegment.copy(segDir).multiplyScalar(s1).add(segCenter),sqrDist}}(),isIntersectionSphere:function(sphere){return this.distanceToPoint(sphere.center)<=sphere.radius},intersectSphere:function(){var v1=new THREE.Vector3;return function(sphere,optionalTarget){v1.subVectors(sphere.center,this.origin);var tca=v1.dot(this.direction),d2=v1.dot(v1)-tca*tca,radius2=sphere.radius*sphere.radius;if(d2>radius2)return null;var thc=Math.sqrt(radius2-d2),t0=tca-thc,t1=tca+thc;return t0<0&&t1<0?null:t0<0?this.at(t1,optionalTarget):this.at(t0,optionalTarget)}}(),isIntersectionPlane:function(plane){var distToPoint=plane.distanceToPoint(this.origin);return 0===distToPoint||plane.normal.dot(this.direction)*distToPoint<0},distanceToPlane:function(plane){var denominator=plane.normal.dot(this.direction);if(0===denominator)return 0===plane.distanceToPoint(this.origin)?0:null;var t=-(this.origin.dot(plane.normal)+plane.constant)/denominator;return t>=0?t:null},intersectPlane:function(plane,optionalTarget){var t=this.distanceToPlane(plane);return null===t?null:this.at(t,optionalTarget)},isIntersectionBox:function(){var v=new THREE.Vector3;return function(box){return null!==this.intersectBox(box,v)}}(),intersectBox:function(box,optionalTarget){var tmin,tmax,tymin,tymax,tzmin,tzmax,invdirx=1/this.direction.x,invdiry=1/this.direction.y,invdirz=1/this.direction.z,origin=this.origin;return invdirx>=0?(tmin=(box.min.x-origin.x)*invdirx,tmax=(box.max.x-origin.x)*invdirx):(tmin=(box.max.x-origin.x)*invdirx,tmax=(box.min.x-origin.x)*invdirx),invdiry>=0?(tymin=(box.min.y-origin.y)*invdiry,tymax=(box.max.y-origin.y)*invdiry):(tymin=(box.max.y-origin.y)*invdiry,tymax=(box.min.y-origin.y)*invdiry),tmin>tymax||tymin>tmax?null:((tymin>tmin||tmin!=tmin)&&(tmin=tymin),(tymax<tmax||tmax!=tmax)&&(tmax=tymax),invdirz>=0?(tzmin=(box.min.z-origin.z)*invdirz,tzmax=(box.max.z-origin.z)*invdirz):(tzmin=(box.max.z-origin.z)*invdirz,tzmax=(box.min.z-origin.z)*invdirz),tmin>tzmax||tzmin>tmax?null:((tzmin>tmin||tmin!=tmin)&&(tmin=tzmin),(tzmax<tmax||tmax!=tmax)&&(tmax=tzmax),tmax<0?null:this.at(tmin>=0?tmin:tmax,optionalTarget)))},intersectTriangle:function(){var diff=new THREE.Vector3,edge1=new THREE.Vector3,edge2=new THREE.Vector3,normal=new THREE.Vector3;return function(a,b,c,backfaceCulling,optionalTarget){edge1.subVectors(b,a),edge2.subVectors(c,a),normal.crossVectors(edge1,edge2);var sign,DdN=this.direction.dot(normal);if(DdN>0){if(backfaceCulling)return null;sign=1}else{if(!(DdN<0))return null;sign=-1,DdN=-DdN}diff.subVectors(this.origin,a);var DdQxE2=sign*this.direction.dot(edge2.crossVectors(diff,edge2));if(DdQxE2<0)return null;var DdE1xQ=sign*this.direction.dot(edge1.cross(diff));if(DdE1xQ<0)return null;if(DdQxE2+DdE1xQ>DdN)return null;var QdN=-sign*diff.dot(normal);return QdN<0?null:this.at(QdN/DdN,optionalTarget)}}(),applyMatrix4:function(matrix4){return this.direction.add(this.origin).applyMatrix4(matrix4),this.origin.applyMatrix4(matrix4),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(ray){return ray.origin.equals(this.origin)&&ray.direction.equals(this.direction)}},THREE.Sphere=function(center,radius){this.center=center!==undefined?center:new THREE.Vector3,this.radius=radius!==undefined?radius:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(center,radius){return this.center.copy(center),this.radius=radius,this},setFromPoints:function(){var box=new THREE.Box3;return function(points,optionalCenter){var center=this.center;optionalCenter!==undefined?center.copy(optionalCenter):box.setFromPoints(points).center(center);for(var maxRadiusSq=0,i=0,il=points.length;i<il;i++)maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(points[i]));return this.radius=Math.sqrt(maxRadiusSq),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(sphere){return this.center.copy(sphere.center),this.radius=sphere.radius,this},empty:function(){return this.radius<=0},containsPoint:function(point){return point.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(point){return point.distanceTo(this.center)-this.radius},intersectsSphere:function(sphere){var radiusSum=this.radius+sphere.radius;return sphere.center.distanceToSquared(this.center)<=radiusSum*radiusSum},clampPoint:function(point,optionalTarget){var deltaLengthSq=this.center.distanceToSquared(point),result=optionalTarget||new THREE.Vector3;return result.copy(point),deltaLengthSq>this.radius*this.radius&&(result.sub(this.center).normalize(),result.multiplyScalar(this.radius).add(this.center)),result},getBoundingBox:function(optionalTarget){var box=optionalTarget||new THREE.Box3;return box.set(this.center,this.center),box.expandByScalar(this.radius),box},applyMatrix4:function(matrix){return this.center.applyMatrix4(matrix),this.radius=this.radius*matrix.getMaxScaleOnAxis(),this},translate:function(offset){return this.center.add(offset),this},equals:function(sphere){return sphere.center.equals(this.center)&&sphere.radius===this.radius}},THREE.Frustum=function(p0,p1,p2,p3,p4,p5){this.planes=[p0!==undefined?p0:new THREE.Plane,p1!==undefined?p1:new THREE.Plane,p2!==undefined?p2:new THREE.Plane,p3!==undefined?p3:new THREE.Plane,p4!==undefined?p4:new THREE.Plane,p5!==undefined?p5:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(p0,p1,p2,p3,p4,p5){var planes=this.planes;return planes[0].copy(p0),planes[1].copy(p1),planes[2].copy(p2),planes[3].copy(p3),planes[4].copy(p4),planes[5].copy(p5),this},clone:function(){return(new this.constructor).copy(this)},copy:function(frustum){for(var planes=this.planes,i=0;i<6;i++)planes[i].copy(frustum.planes[i]);return this},setFromMatrix:function(m){var planes=this.planes,me=m.elements,me0=me[0],me1=me[1],me2=me[2],me3=me[3],me4=me[4],me5=me[5],me6=me[6],me7=me[7],me8=me[8],me9=me[9],me10=me[10],me11=me[11],me12=me[12],me13=me[13],me14=me[14],me15=me[15];return planes[0].setComponents(me3-me0,me7-me4,me11-me8,me15-me12).normalize(),planes[1].setComponents(me3+me0,me7+me4,me11+me8,me15+me12).normalize(),planes[2].setComponents(me3+me1,me7+me5,me11+me9,me15+me13).normalize(),planes[3].setComponents(me3-me1,me7-me5,me11-me9,me15-me13).normalize(),planes[4].setComponents(me3-me2,me7-me6,me11-me10,me15-me14).normalize(),planes[5].setComponents(me3+me2,me7+me6,me11+me10,me15+me14).normalize(),this},intersectsObject:function(){var sphere=new THREE.Sphere;return function(object){var geometry=object.geometry;return null===geometry.boundingSphere&&geometry.computeBoundingSphere(),sphere.copy(geometry.boundingSphere),sphere.applyMatrix4(object.matrixWorld),this.intersectsSphere(sphere)}}(),intersectsSphere:function(sphere){for(var planes=this.planes,center=sphere.center,negRadius=-sphere.radius,i=0;i<6;i++){if(planes[i].distanceToPoint(center)<negRadius)return!1}return!0},intersectsBox:function(){var p1=new THREE.Vector3,p2=new THREE.Vector3;return function(box){for(var planes=this.planes,i=0;i<6;i++){var plane=planes[i];p1.x=plane.normal.x>0?box.min.x:box.max.x,p2.x=plane.normal.x>0?box.max.x:box.min.x,p1.y=plane.normal.y>0?box.min.y:box.max.y,p2.y=plane.normal.y>0?box.max.y:box.min.y,p1.z=plane.normal.z>0?box.min.z:box.max.z,p2.z=plane.normal.z>0?box.max.z:box.min.z;var d1=plane.distanceToPoint(p1),d2=plane.distanceToPoint(p2);if(d1<0&&d2<0)return!1}return!0}}(),containsPoint:function(point){for(var planes=this.planes,i=0;i<6;i++)if(planes[i].distanceToPoint(point)<0)return!1;return!0}},THREE.Plane=function(normal,constant){this.normal=normal!==undefined?normal:new THREE.Vector3(1,0,0),this.constant=constant!==undefined?constant:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(normal,constant){return this.normal.copy(normal),this.constant=constant,this},setComponents:function(x,y,z,w){return this.normal.set(x,y,z),this.constant=w,this},setFromNormalAndCoplanarPoint:function(normal,point){return this.normal.copy(normal),this.constant=-point.dot(this.normal),this},setFromCoplanarPoints:function(){var v1=new THREE.Vector3,v2=new THREE.Vector3;return function(a,b,c){var normal=v1.subVectors(c,b).cross(v2.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(normal,a),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(plane){return this.normal.copy(plane.normal),this.constant=plane.constant,this},normalize:function(){var inverseNormalLength=1/this.normal.length();return this.normal.multiplyScalar(inverseNormalLength),this.constant*=inverseNormalLength,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(point){return this.normal.dot(point)+this.constant},distanceToSphere:function(sphere){return this.distanceToPoint(sphere.center)-sphere.radius},projectPoint:function(point,optionalTarget){return this.orthoPoint(point,optionalTarget).sub(point).negate()},orthoPoint:function(point,optionalTarget){var perpendicularMagnitude=this.distanceToPoint(point);return(optionalTarget||new THREE.Vector3).copy(this.normal).multiplyScalar(perpendicularMagnitude)},isIntersectionLine:function(line){var startSign=this.distanceToPoint(line.start),endSign=this.distanceToPoint(line.end);return startSign<0&&endSign>0||endSign<0&&startSign>0},intersectLine:function(){var v1=new THREE.Vector3;return function(line,optionalTarget){var result=optionalTarget||new THREE.Vector3,direction=line.delta(v1),denominator=this.normal.dot(direction);if(0===denominator)return 0===this.distanceToPoint(line.start)?result.copy(line.start):undefined;var t=-(line.start.dot(this.normal)+this.constant)/denominator;return t<0||t>1?undefined:result.copy(direction).multiplyScalar(t).add(line.start)}}(),coplanarPoint:function(optionalTarget){return(optionalTarget||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var v1=new THREE.Vector3,v2=new THREE.Vector3,m1=new THREE.Matrix3;return function(matrix,optionalNormalMatrix){var normalMatrix=optionalNormalMatrix||m1.getNormalMatrix(matrix),newNormal=v1.copy(this.normal).applyMatrix3(normalMatrix),newCoplanarPoint=this.coplanarPoint(v2);return newCoplanarPoint.applyMatrix4(matrix),this.setFromNormalAndCoplanarPoint(newNormal,newCoplanarPoint),this}}(),translate:function(offset){return this.constant=this.constant-offset.dot(this.normal),this},equals:function(plane){return plane.normal.equals(this.normal)&&plane.constant===this.constant}},THREE.Math={generateUUID:function(){var r,chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),uuid=new Array(36),rnd=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?uuid[i]="-":14===i?uuid[i]="4":(rnd<=2&&(rnd=33554432+16777216*Math.random()|0),r=15&rnd,rnd>>=4,uuid[i]=chars[19===i?3&r|8:r]);return uuid.join("")}}(),clamp:function(x,a,b){return x<a?a:x>b?b:x},clampBottom:function(x,a){return x<a?a:x},euclideanModulo:function(n,m){return(n%m+m)%m},mapLinear:function(x,a1,a2,b1,b2){return b1+(x-a1)*(b2-b1)/(a2-a1)},smoothstep:function(x,min,max){return x<=min?0:x>=max?1:(x=(x-min)/(max-min))*x*(3-2*x)},smootherstep:function(x,min,max){return x<=min?0:x>=max?1:(x=(x-min)/(max-min))*x*x*(x*(6*x-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(low,high){return low+Math.floor(Math.random()*(high-low+1))},randFloat:function(low,high){return low+Math.random()*(high-low)},randFloatSpread:function(range){return range*(.5-Math.random())},degToRad:function(){var degreeToRadiansFactor=Math.PI/180;return function(degrees){return degrees*degreeToRadiansFactor}}(),radToDeg:function(){var radianToDegreesFactor=180/Math.PI;return function(radians){return radians*radianToDegreesFactor}}(),isPowerOfTwo:function(value){return 0==(value&value-1)&&0!==value},nextPowerOfTwo:function(value){return value--,value|=value>>1,value|=value>>2,value|=value>>4,value|=value>>8,value|=value>>16,++value}},THREE.Spline=function(points){function interpolate(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1)
;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}this.points=points;var point,intPoint,weight,w2,w3,pa,pb,pc,pd,c=[],v3={x:0,y:0,z:0};this.initFromArray=function(a){this.points=[];for(var i=0;i<a.length;i++)this.points[i]={x:a[i][0],y:a[i][1],z:a[i][2]}},this.getPoint=function(k){return point=(this.points.length-1)*k,intPoint=Math.floor(point),weight=point-intPoint,c[0]=0===intPoint?intPoint:intPoint-1,c[1]=intPoint,c[2]=intPoint>this.points.length-2?this.points.length-1:intPoint+1,c[3]=intPoint>this.points.length-3?this.points.length-1:intPoint+2,pa=this.points[c[0]],pb=this.points[c[1]],pc=this.points[c[2]],pd=this.points[c[3]],w3=weight*(w2=weight*weight),v3.x=interpolate(pa.x,pb.x,pc.x,pd.x,weight,w2,w3),v3.y=interpolate(pa.y,pb.y,pc.y,pd.y,weight,w2,w3),v3.z=interpolate(pa.z,pb.z,pc.z,pd.z,weight,w2,w3),v3},this.getControlPointsArray=function(){var i,p,l=this.points.length,coords=[];for(i=0;i<l;i++)p=this.points[i],coords[i]=[p.x,p.y,p.z];return coords},this.getLength=function(nSubDivisions){var i,index,nSamples,position,point=0,intPoint=0,oldIntPoint=0,oldPosition=new THREE.Vector3,tmpVec=new THREE.Vector3,chunkLengths=[],totalLength=0;for(chunkLengths[0]=0,nSubDivisions||(nSubDivisions=100),nSamples=this.points.length*nSubDivisions,oldPosition.copy(this.points[0]),i=1;i<nSamples;i++)index=i/nSamples,position=this.getPoint(index),tmpVec.copy(position),totalLength+=tmpVec.distanceTo(oldPosition),oldPosition.copy(position),point=(this.points.length-1)*index,(intPoint=Math.floor(point))!==oldIntPoint&&(chunkLengths[intPoint]=totalLength,oldIntPoint=intPoint);return chunkLengths[chunkLengths.length]=totalLength,{chunks:chunkLengths,total:totalLength}},this.reparametrizeByArcLength=function(samplingCoef){var i,j,index,indexCurrent,indexNext,realDistance,sampling,position,newpoints=[],tmpVec=new THREE.Vector3,sl=this.getLength();for(newpoints.push(tmpVec.copy(this.points[0]).clone()),i=1;i<this.points.length;i++){for(realDistance=sl.chunks[i]-sl.chunks[i-1],sampling=Math.ceil(samplingCoef*realDistance/sl.total),indexCurrent=(i-1)/(this.points.length-1),indexNext=i/(this.points.length-1),j=1;j<sampling-1;j++)index=indexCurrent+j*(1/sampling)*(indexNext-indexCurrent),position=this.getPoint(index),newpoints.push(tmpVec.copy(position).clone());newpoints.push(tmpVec.copy(this.points[i]).clone())}this.points=newpoints}},THREE.Triangle=function(a,b,c){this.a=a!==undefined?a:new THREE.Vector3,this.b=b!==undefined?b:new THREE.Vector3,this.c=c!==undefined?c:new THREE.Vector3},THREE.Triangle.normal=function(){var v0=new THREE.Vector3;return function(a,b,c,optionalTarget){var result=optionalTarget||new THREE.Vector3;result.subVectors(c,b),v0.subVectors(a,b),result.cross(v0);var resultLengthSq=result.lengthSq();return resultLengthSq>0?result.multiplyScalar(1/Math.sqrt(resultLengthSq)):result.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var v0=new THREE.Vector3,v1=new THREE.Vector3,v2=new THREE.Vector3;return function(point,a,b,c,optionalTarget){v0.subVectors(c,a),v1.subVectors(b,a),v2.subVectors(point,a);var dot00=v0.dot(v0),dot01=v0.dot(v1),dot02=v0.dot(v2),dot11=v1.dot(v1),dot12=v1.dot(v2),denom=dot00*dot11-dot01*dot01,result=optionalTarget||new THREE.Vector3;if(0===denom)return result.set(-2,-1,-1);var invDenom=1/denom,u=(dot11*dot02-dot01*dot12)*invDenom,v=(dot00*dot12-dot01*dot02)*invDenom;return result.set(1-u-v,v,u)}}(),THREE.Triangle.containsPoint=function(){var v1=new THREE.Vector3;return function(point,a,b,c){var result=THREE.Triangle.barycoordFromPoint(point,a,b,c,v1);return result.x>=0&&result.y>=0&&result.x+result.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){return this.a.copy(a),this.b.copy(b),this.c.copy(c),this},setFromPointsAndIndices:function(points,i0,i1,i2){return this.a.copy(points[i0]),this.b.copy(points[i1]),this.c.copy(points[i2]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(triangle){return this.a.copy(triangle.a),this.b.copy(triangle.b),this.c.copy(triangle.c),this},area:function(){var v0=new THREE.Vector3,v1=new THREE.Vector3;return function(){return v0.subVectors(this.c,this.b),v1.subVectors(this.a,this.b),.5*v0.cross(v1).length()}}(),midpoint:function(optionalTarget){return(optionalTarget||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(optionalTarget){return THREE.Triangle.normal(this.a,this.b,this.c,optionalTarget)},plane:function(optionalTarget){return(optionalTarget||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(point,optionalTarget){return THREE.Triangle.barycoordFromPoint(point,this.a,this.b,this.c,optionalTarget)},containsPoint:function(point){return THREE.Triangle.containsPoint(point,this.a,this.b,this.c)},equals:function(triangle){return triangle.a.equals(this.a)&&triangle.b.equals(this.b)&&triangle.c.equals(this.c)}},THREE.Clock=function(autoStart){this.autoStart=autoStart===undefined||autoStart,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=self.performance!==undefined&&self.performance.now!==undefined?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var diff=0;if(this.autoStart&&!this.running&&this.start(),this.running){var newTime=self.performance!==undefined&&self.performance.now!==undefined?self.performance.now():Date.now();diff=.001*(newTime-this.oldTime),this.oldTime=newTime,this.elapsedTime+=diff}return diff}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(object){object.addEventListener=THREE.EventDispatcher.prototype.addEventListener,object.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,object.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,object.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(type,listener){this._listeners===undefined&&(this._listeners={});var listeners=this._listeners;listeners[type]===undefined&&(listeners[type]=[]),-1===listeners[type].indexOf(listener)&&listeners[type].push(listener)},hasEventListener:function(type,listener){if(this._listeners===undefined)return!1;var listeners=this._listeners;return listeners[type]!==undefined&&-1!==listeners[type].indexOf(listener)},removeEventListener:function(type,listener){if(this._listeners!==undefined){var listenerArray=this._listeners[type];if(listenerArray!==undefined){var index=listenerArray.indexOf(listener);-1!==index&&listenerArray.splice(index,1)}}},dispatchEvent:function(event){if(this._listeners!==undefined){var listenerArray=this._listeners[event.type];if(listenerArray!==undefined){event.target=this;for(var array=[],length=listenerArray.length,i=0;i<length;i++)array[i]=listenerArray[i];for(i=0;i<length;i++)array[i].call(this,event)}}}},function(THREE){function descSort(a,b){return a.distance-b.distance}THREE.Raycaster=function(origin,direction,near,far){this.ray=new THREE.Ray(origin,direction),this.near=near||0,this.far=far||Infinity,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})};var intersectObject=function(object,raycaster,intersects,recursive){if(!1!==object.visible&&(object.raycast(raycaster,intersects),!0===recursive))for(var children=object.children,i=0,l=children.length;i<l;i++)intersectObject(children[i],raycaster,intersects,!0)};THREE.Raycaster.prototype={constructor:THREE.Raycaster,linePrecision:1,set:function(origin,direction){this.ray.set(origin,direction)},setFromCamera:function(coords,camera){camera instanceof THREE.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(camera.matrixWorld),this.ray.direction.set(coords.x,coords.y,.5).unproject(camera).sub(this.ray.origin).normalize()):camera instanceof THREE.OrthographicCamera?(this.ray.origin.set(coords.x,coords.y,-1).unproject(camera),this.ray.direction.set(0,0,-1).transformDirection(camera.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(object,recursive){var intersects=[];return intersectObject(object,this,intersects,recursive),intersects.sort(descSort),intersects},intersectObjects:function(objects,recursive){var intersects=[];if(!1===Array.isArray(objects))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),intersects;for(var i=0,l=objects.length;i<l;i++)intersectObject(objects[i],this,intersects,recursive);return intersects.sort(descSort),intersects}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var position=new THREE.Vector3,rotation=new THREE.Euler,quaternion=new THREE.Quaternion,scale=new THREE.Vector3(1,1,1),onRotationChange=function(){quaternion.setFromEuler(rotation,!1)},onQuaternionChange=function(){rotation.setFromQuaternion(quaternion,undefined,!1)};rotation.onChange(onRotationChange),quaternion.onChange(onQuaternionChange),Object.defineProperties(this,{position:{enumerable:!0,value:position},rotation:{enumerable:!0,value:rotation},quaternion:{enumerable:!0,value:quaternion},scale:{enumerable:!0,value:scale},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.DefaultMatrixAutoUpdate=!0,THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(value){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=value},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(value){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set renderDepth(value){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(matrix){this.matrix.multiplyMatrices(matrix,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(axis,angle){this.quaternion.setFromAxisAngle(axis,angle)},setRotationFromEuler:function(euler){this.quaternion.setFromEuler(euler,!0)},setRotationFromMatrix:function(m){this.quaternion.setFromRotationMatrix(m)},setRotationFromQuaternion:function(q){this.quaternion.copy(q)},rotateOnAxis:function(){var q1=new THREE.Quaternion;return function(axis,angle){return q1.setFromAxisAngle(axis,angle),this.quaternion.multiply(q1),this}}(),rotateX:function(){var v1=new THREE.Vector3(1,0,0);return function(angle){return this.rotateOnAxis(v1,angle)}}(),rotateY:function(){var v1=new THREE.Vector3(0,1,0);return function(angle){return this.rotateOnAxis(v1,angle)}}(),rotateZ:function(){var v1=new THREE.Vector3(0,0,1);return function(angle){return this.rotateOnAxis(v1,angle)}}(),translateOnAxis:function(){var v1=new THREE.Vector3;return function(axis,distance){return v1.copy(axis).applyQuaternion(this.quaternion),this.position.add(v1.multiplyScalar(distance)),this}}(),translate:function(distance,axis){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(axis,distance)},translateX:function(){var v1=new THREE.Vector3(1,0,0);return function(distance){return this.translateOnAxis(v1,distance)}}(),translateY:function(){var v1=new THREE.Vector3(0,1,0);return function(distance){return this.translateOnAxis(v1,distance)}}(),translateZ:function(){var v1=new THREE.Vector3(0,0,1);return function(distance){return this.translateOnAxis(v1,distance)}}(),localToWorld:function(vector){return vector.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var m1=new THREE.Matrix4;return function(vector){return vector.applyMatrix4(m1.getInverse(this.matrixWorld))}}(),lookAt:function(){var m1=new THREE.Matrix4;return function(vector){m1.lookAt(vector,this.position,this.up),this.quaternion.setFromRotationMatrix(m1)}}(),add:function(object){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object instanceof THREE.Object3D?(null!==object.parent&&object.parent.remove(object),object.parent=this,object.dispatchEvent({type:"added"}),this.children.push(object)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)},remove:function(object){if(arguments.length>1)for(var i=0;i<arguments.length;i++)this.remove(arguments[i]);var index=this.children.indexOf(object);-1!==index&&(object.parent=null,object.dispatchEvent({type:"removed"}),this.children.splice(index,1))},getChildByName:function(name){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(name)},getObjectById:function(id){return this.getObjectByProperty("id",id)},getObjectByName:function(name){return this.getObjectByProperty("name",name)},getObjectByProperty:function(name,value){if(this[name]===value)return this;for(var i=0,l=this.children.length;i<l;i++){var object=this.children[i].getObjectByProperty(name,value);if(object!==undefined)return object}return undefined},getWorldPosition:function(optionalTarget){var result=optionalTarget||new THREE.Vector3;return this.updateMatrixWorld(!0),result.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var position=new THREE.Vector3,scale=new THREE.Vector3;return function(optionalTarget){var result=optionalTarget||new THREE.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(position,result,scale),result}}(),getWorldRotation:function(){var quaternion=new THREE.Quaternion;return function(optionalTarget){var result=optionalTarget||new THREE.Euler;return this.getWorldQuaternion(quaternion),result.setFromQuaternion(quaternion,this.rotation.order,!1)}}(),getWorldScale:function(){var position=new THREE.Vector3,quaternion=new THREE.Quaternion;return function(optionalTarget){var result=optionalTarget||new THREE.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(position,quaternion,result),result}}(),getWorldDirection:function(){var quaternion=new THREE.Quaternion;return function(optionalTarget){var result=optionalTarget||new THREE.Vector3;return this.getWorldQuaternion(quaternion),result.set(0,0,1).applyQuaternion(quaternion)}}(),raycast:function(){},traverse:function(callback){callback(this);for(var children=this.children,i=0,l=children.length;i<l;i++)children[i].traverse(callback)},traverseVisible:function(callback){if(!1!==this.visible){callback(this);for(var children=this.children,i=0,l=children.length;i<l;i++)children[i].traverseVisible(callback)}},traverseAncestors:function(callback){var parent=this.parent;null!==parent&&(callback(parent),parent.traverseAncestors(callback))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(force){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==force||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,force=!0);for(var i=0,l=this.children.length;i<l;i++)this.children[i].updateMatrixWorld(force)},toJSON:function(meta){function extractFromCache(cache){var values=[];for(var key in cache){var data=cache[key];delete data.metadata,values.push(data)}return values}var isRootObject=meta===undefined,data={};if(isRootObject&&(meta={geometries:{},materials:{},textures:{},images:{}},data.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"}),data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),"{}"!==JSON.stringify(this.userData)&&(data.userData=this.userData),!0!==this.visible&&(data.visible=this.visible),data.matrix=this.matrix.toArray(),this.children.length>0){data.children=[];for(var i=0;i<this.children.length;i++)data.children.push(this.children[i].toJSON(meta).object)}var output={};if(isRootObject){var geometries=extractFromCache(meta.geometries),materials=extractFromCache(meta.materials),textures=extractFromCache(meta.textures),images=extractFromCache(meta.images);geometries.length>0&&(output.geometries=geometries),materials.length>0&&(output.materials=materials),textures.length>0&&(output.textures=textures),images.length>0&&(output.images=images)}return output.object=data,output},clone:function(recursive){return(new this.constructor).copy(this,recursive)},copy:function(source,recursive){if(recursive===undefined&&(recursive=!0),this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.rotationAutoUpdate=source.rotationAutoUpdate,this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.userData=JSON.parse(JSON.stringify(source.userData)),!0===recursive)for(var i=0;i<source.children.length;i++){var child=source.children[i];this.add(child.clone())}return this}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Face3=function(a,b,c,normal,color,materialIndex){this.a=a,this.b=b,this.c=c,this.normal=normal instanceof THREE.Vector3?normal:new THREE.Vector3,this.vertexNormals=Array.isArray(normal)?normal:[],this.color=color instanceof THREE.Color?color:new THREE.Color,this.vertexColors=Array.isArray(color)?color:[],this.materialIndex=materialIndex!==undefined?materialIndex:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(source){this.a=source.a,this.b=source.b,this.c=source.c,this.normal.copy(source.normal),this.color.copy(source.color),this.materialIndex=source.materialIndex;for(var i=0,il=source.vertexNormals.length;i<il;i++)this.vertexNormals[i]=source.vertexNormals[i].clone();for(i=0,il=source.vertexColors.length;i<il;i++)this.vertexColors[i]=source.vertexColors[i].clone();return this}},THREE.Face4=function(a,b,c,d,normal,color,materialIndex){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(a,b,c,normal,color,materialIndex)},THREE.BufferAttribute=function(array,itemSize){this.uuid=THREE.Math.generateUUID(),this.array=array,this.itemSize=itemSize,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(value){!0===value&&this.version++},setDynamic:function(value){return this.dynamic=value,this},copy:function(source){return this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.dynamic=source.dynamic,this},copyAt:function(index1,attribute,index2){index1*=this.itemSize,index2*=attribute.itemSize;for(var i=0,l=this.itemSize;i<l;i++)this.array[index1+i]=attribute.array[index2+i];return this},copyArray:function(array){return this.array.set(array),this},copyColorsArray:function(colors){for(var array=this.array,offset=0,i=0,l=colors.length;i<l;i++){var color=colors[i];color===undefined&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),color=new THREE.Color),array[offset++]=color.r,array[offset++]=color.g,array[offset++]=color.b}return this},copyIndicesArray:function(indices){for(var array=this.array,offset=0,i=0,l=indices.length;i<l;i++){var index=indices[i];array[offset++]=index.a,array[offset++]=index.b,array[offset++]=index.c}return this},copyVector2sArray:function(vectors){for(var array=this.array,offset=0,i=0,l=vectors.length;i<l;i++){var vector=vectors[i];vector===undefined&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),vector=new THREE.Vector2),array[offset++]=vector.x,array[offset++]=vector.y}return this},copyVector3sArray:function(vectors){for(var array=this.array,offset=0,i=0,l=vectors.length;i<l;i++){var vector=vectors[i];vector===undefined&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),vector=new THREE.Vector3),array[offset++]=vector.x,array[offset++]=vector.y,array[offset++]=vector.z}return this},copyVector4sArray:function(vectors){for(var array=this.array,offset=0,i=0,l=vectors.length;i<l;i++){var vector=vectors[i];vector===undefined&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),vector=new THREE.Vector4),array[offset++]=vector.x,array[offset++]=vector.y,array[offset++]=vector.z,array[offset++]=vector.w}return this},set:function(value,offset){return offset===undefined&&(offset=0),this.array.set(value,offset),this},getX:function(index){return this.array[index*this.itemSize]},setX:function(index,x){return this.array[index*this.itemSize]=x,this},getY:function(index){return this.array[index*this.itemSize+1]},setY:function(index,y){return this.array[index*this.itemSize+1]=y,this},getZ:function(index){return this.array[index*this.itemSize+2]},setZ:function(index,z){return this.array[index*this.itemSize+2]=z,this},getW:function(index){return this.array[index*this.itemSize+3]},setW:function(index,w){return this.array[index*this.itemSize+3]=w,this},setXY:function(index,x,y){return index*=this.itemSize,this.array[index+0]=x,this.array[index+1]=y,this},setXYZ:function(index,x,y,z){return index*=this.itemSize,this.array[index+0]=x,this.array[index+1]=y,this.array[index+2]=z,this},setXYZW:function(index,x,y,z,w){return index*=this.itemSize,this.array[index+0]=x,this.array[index+1]=y,this.array[index+2]=z,this.array[index+3]=w,this},clone:function(){return(new this.constructor).copy(this)}},THREE.Int8Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Int8Array(array),itemSize)},THREE.Uint8Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint8Array(array),itemSize)},THREE.Uint8ClampedAttribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint8ClampedArray(array),itemSize)},THREE.Int16Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Int16Array(array),itemSize)},THREE.Uint16Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint16Array(array),itemSize)},THREE.Int32Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Int32Array(array),itemSize)},THREE.Uint32Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Uint32Array(array),itemSize)},THREE.Float32Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Float32Array(array),itemSize)},THREE.Float64Attribute=function(array,itemSize){return new THREE.BufferAttribute(new Float64Array(array),itemSize)},THREE.DynamicBufferAttribute=function(array,itemSize){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new THREE.BufferAttribute(array,itemSize).setDynamic(!0)},THREE.InstancedBufferAttribute=function(array,itemSize,meshPerAttribute){THREE.BufferAttribute.call(this,array,itemSize),this.meshPerAttribute=meshPerAttribute||1},THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute,THREE.InstancedBufferAttribute.prototype.copy=function(source){return THREE.BufferAttribute.prototype.copy.call(this,source),this.meshPerAttribute=source.meshPerAttribute,this},THREE.InterleavedBuffer=function(array,stride){this.uuid=THREE.Math.generateUUID(),this.array=array,this.stride=stride,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(value){!0===value&&this.version++},setDynamic:function(value){return this.dynamic=value,this},copy:function(source){this.array=new source.array.constructor(source.array),this.stride=source.stride,this.dynamic=source.dynamic},copyAt:function(index1,attribute,index2){index1*=this.stride,index2*=attribute.stride;for(var i=0,l=this.stride;i<l;i++)this.array[index1+i]=attribute.array[index2+i];return this},set:function(value,offset){return offset===undefined&&(offset=0),this.array.set(value,offset),this},clone:function(){return(new this.constructor).copy(this)}},THREE.InstancedInterleavedBuffer=function(array,stride,meshPerAttribute){THREE.InterleavedBuffer.call(this,array,stride),this.meshPerAttribute=meshPerAttribute||1},THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype),THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer,THREE.InstancedInterleavedBuffer.prototype.copy=function(source){return THREE.InterleavedBuffer.prototype.copy.call(this,source),this.meshPerAttribute=source.meshPerAttribute,this},THREE.InterleavedBufferAttribute=function(interleavedBuffer,itemSize,offset){this.uuid=THREE.Math.generateUUID(),this.data=interleavedBuffer,this.itemSize=itemSize,this.offset=offset},THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(index,x){return this.data.array[index*this.data.stride+this.offset]=x,this},setY:function(index,y){return this.data.array[index*this.data.stride+this.offset+1]=y,this},setZ:function(index,z){return this.data.array[index*this.data.stride+this.offset+2]=z,this},setW:function(index,w){return this.data.array[index*this.data.stride+this.offset+3]=w,this},getX:function(index){return this.data.array[index*this.data.stride+this.offset]},getY:function(index){return this.data.array[index*this.data.stride+this.offset+1]},getZ:function(index){return this.data.array[index*this.data.stride+this.offset+2]},getW:function(index){return this.data.array[index*this.data.stride+this.offset+3]},setXY:function(index,x,y){return index=index*this.data.stride+this.offset,this.data.array[index+0]=x,this.data.array[index+1]=y,this},setXYZ:function(index,x,y,z){return index=index*this.data.stride+this.offset,this.data.array[index+0]=x,this.data.array[index+1]=y,this.data.array[index+2]=z,this},setXYZW:function(index,x,y,z,w){return index=index*this.data.stride+this.offset,this.data.array[index+0]=x,this.data.array[index+1]=y,this.data.array[index+2]=z,this.data.array[index+3]=w,this}},THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(matrix){for(var normalMatrix=(new THREE.Matrix3).getNormalMatrix(matrix),i=0,il=this.vertices.length;i<il;i++){this.vertices[i].applyMatrix4(matrix)}for(i=0,il=this.faces.length;i<il;i++){var face=this.faces[i];face.normal.applyMatrix3(normalMatrix).normalize();for(var j=0,jl=face.vertexNormals.length;j<jl;j++)face.vertexNormals[j].applyMatrix3(normalMatrix).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},rotateX:function(){var m1;return function(angle){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeRotationX(angle),this.applyMatrix(m1),this}}(),rotateY:function(){var m1;return function(angle){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeRotationY(angle),this.applyMatrix(m1),this}}(),rotateZ:function(){var m1;return function(angle){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeRotationZ(angle),this.applyMatrix(m1),this}}(),translate:function(){var m1;return function(x,y,z){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeTranslation(x,y,z),this.applyMatrix(m1),this}}(),scale:function(){var m1;return function(x,y,z){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeScale(x,y,z),this.applyMatrix(m1),this}}(),lookAt:function(){var obj;return function(vector){obj===undefined&&(obj=new THREE.Object3D),obj.lookAt(vector),obj.updateMatrix(),this.applyMatrix(obj.matrix)}}(),fromBufferGeometry:function(geometry){var scope=this,indices=null!==geometry.index?geometry.index.array:undefined,attributes=geometry.attributes,vertices=attributes.position.array,normals=attributes.normal!==undefined?attributes.normal.array:undefined,colors=attributes.color!==undefined?attributes.color.array:undefined,uvs=attributes.uv!==undefined?attributes.uv.array:undefined,uvs2=attributes.uv2!==undefined?attributes.uv2.array:undefined;uvs2!==undefined&&(this.faceVertexUvs[1]=[]);for(var tempNormals=[],tempUVs=[],tempUVs2=[],i=0,j=0,k=0;i<vertices.length;i+=3,j+=2,k+=4)scope.vertices.push(new THREE.Vector3(vertices[i],vertices[i+1],vertices[i+2])),normals!==undefined&&tempNormals.push(new THREE.Vector3(normals[i],normals[i+1],normals[i+2])),colors!==undefined&&scope.colors.push(new THREE.Color(colors[i],colors[i+1],colors[i+2])),uvs!==undefined&&tempUVs.push(new THREE.Vector2(uvs[j],uvs[j+1])),uvs2!==undefined&&tempUVs2.push(new THREE.Vector2(uvs2[j],uvs2[j+1]));var addFace=function(a,b,c){var vertexNormals=normals!==undefined?[tempNormals[a].clone(),tempNormals[b].clone(),tempNormals[c].clone()]:[],vertexColors=colors!==undefined?[scope.colors[a].clone(),scope.colors[b].clone(),scope.colors[c].clone()]:[],face=new THREE.Face3(a,b,c,vertexNormals,vertexColors);scope.faces.push(face),uvs!==undefined&&scope.faceVertexUvs[0].push([tempUVs[a].clone(),tempUVs[b].clone(),tempUVs[c].clone()]),uvs2!==undefined&&scope.faceVertexUvs[1].push([tempUVs2[a].clone(),tempUVs2[b].clone(),tempUVs2[c].clone()])};if(indices!==undefined){var groups=geometry.groups;if(groups.length>0)for(i=0;i<groups.length;i++)for(var group=groups[i],start=group.start,jl=(j=start,start+group.count);j<jl;j+=3)addFace(indices[j],indices[j+1],indices[j+2]);else for(i=0;i<indices.length;i+=3)addFace(indices[i],indices[i+1],indices[i+2])}else for(i=0;i<vertices.length/3;i+=3)addFace(i,i+1,i+2);return this.computeFaceNormals(),null!==geometry.boundingBox&&(this.boundingBox=geometry.boundingBox.clone()),null!==geometry.boundingSphere&&(this.boundingSphere=geometry.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var offset=this.boundingBox.center().negate();return this.translate(offset.x,offset.y,offset.z),offset},normalize:function(){this.computeBoundingSphere();var center=this.boundingSphere.center,radius=this.boundingSphere.radius,s=0===radius?1:1/radius,matrix=new THREE.Matrix4;return matrix.set(s,0,0,-s*center.x,0,s,0,-s*center.y,0,0,s,-s*center.z,0,0,0,1),this.applyMatrix(matrix),this},computeFaceNormals:function(){for(var cb=new THREE.Vector3,ab=new THREE.Vector3,f=0,fl=this.faces.length;f<fl;f++){var face=this.faces[f],vA=this.vertices[face.a],vB=this.vertices[face.b],vC=this.vertices[face.c]
;cb.subVectors(vC,vB),ab.subVectors(vA,vB),cb.cross(ab),cb.normalize(),face.normal.copy(cb)}},computeVertexNormals:function(areaWeighted){var v,vl,f,fl,face,vertices;for(vertices=new Array(this.vertices.length),v=0,vl=this.vertices.length;v<vl;v++)vertices[v]=new THREE.Vector3;if(areaWeighted){var vA,vB,vC,cb=new THREE.Vector3,ab=new THREE.Vector3;for(f=0,fl=this.faces.length;f<fl;f++)face=this.faces[f],vA=this.vertices[face.a],vB=this.vertices[face.b],vC=this.vertices[face.c],cb.subVectors(vC,vB),ab.subVectors(vA,vB),cb.cross(ab),vertices[face.a].add(cb),vertices[face.b].add(cb),vertices[face.c].add(cb)}else for(f=0,fl=this.faces.length;f<fl;f++)vertices[(face=this.faces[f]).a].add(face.normal),vertices[face.b].add(face.normal),vertices[face.c].add(face.normal);for(v=0,vl=this.vertices.length;v<vl;v++)vertices[v].normalize();for(f=0,fl=this.faces.length;f<fl;f++){var vertexNormals=(face=this.faces[f]).vertexNormals;3===vertexNormals.length?(vertexNormals[0].copy(vertices[face.a]),vertexNormals[1].copy(vertices[face.b]),vertexNormals[2].copy(vertices[face.c])):(vertexNormals[0]=vertices[face.a].clone(),vertexNormals[1]=vertices[face.b].clone(),vertexNormals[2]=vertices[face.c].clone())}},computeMorphNormals:function(){var i,il,f,fl,face;for(f=0,fl=this.faces.length;f<fl;f++)for((face=this.faces[f]).__originalFaceNormal?face.__originalFaceNormal.copy(face.normal):face.__originalFaceNormal=face.normal.clone(),face.__originalVertexNormals||(face.__originalVertexNormals=[]),i=0,il=face.vertexNormals.length;i<il;i++)face.__originalVertexNormals[i]?face.__originalVertexNormals[i].copy(face.vertexNormals[i]):face.__originalVertexNormals[i]=face.vertexNormals[i].clone();var tmpGeo=new THREE.Geometry;for(tmpGeo.faces=this.faces,i=0,il=this.morphTargets.length;i<il;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[];var dstNormalsFace=this.morphNormals[i].faceNormals,dstNormalsVertex=this.morphNormals[i].vertexNormals;for(f=0,fl=this.faces.length;f<fl;f++)faceNormal=new THREE.Vector3,vertexNormals={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},dstNormalsFace.push(faceNormal),dstNormalsVertex.push(vertexNormals)}var faceNormal,vertexNormals,morphNormals=this.morphNormals[i];for(tmpGeo.vertices=this.morphTargets[i].vertices,tmpGeo.computeFaceNormals(),tmpGeo.computeVertexNormals(),f=0,fl=this.faces.length;f<fl;f++)face=this.faces[f],faceNormal=morphNormals.faceNormals[f],vertexNormals=morphNormals.vertexNormals[f],faceNormal.copy(face.normal),vertexNormals.a.copy(face.vertexNormals[0]),vertexNormals.b.copy(face.vertexNormals[1]),vertexNormals.c.copy(face.vertexNormals[2])}for(f=0,fl=this.faces.length;f<fl;f++)(face=this.faces[f]).normal=face.__originalFaceNormal,face.vertexNormals=face.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var d=0,vertices=this.vertices,i=0,il=vertices.length;i<il;i++)i>0&&(d+=vertices[i].distanceTo(vertices[i-1])),this.lineDistances[i]=d},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(geometry,matrix,materialIndexOffset){if(geometry instanceof THREE.Geometry!=!1){var normalMatrix,vertexOffset=this.vertices.length,vertices1=this.vertices,vertices2=geometry.vertices,faces1=this.faces,faces2=geometry.faces,uvs1=this.faceVertexUvs[0],uvs2=geometry.faceVertexUvs[0];materialIndexOffset===undefined&&(materialIndexOffset=0),matrix!==undefined&&(normalMatrix=(new THREE.Matrix3).getNormalMatrix(matrix));for(var i=0,il=vertices2.length;i<il;i++){var vertexCopy=vertices2[i].clone();matrix!==undefined&&vertexCopy.applyMatrix4(matrix),vertices1.push(vertexCopy)}for(i=0,il=faces2.length;i<il;i++){var faceCopy,normal,color,face=faces2[i],faceVertexNormals=face.vertexNormals,faceVertexColors=face.vertexColors;(faceCopy=new THREE.Face3(face.a+vertexOffset,face.b+vertexOffset,face.c+vertexOffset)).normal.copy(face.normal),normalMatrix!==undefined&&faceCopy.normal.applyMatrix3(normalMatrix).normalize();for(var j=0,jl=faceVertexNormals.length;j<jl;j++)normal=faceVertexNormals[j].clone(),normalMatrix!==undefined&&normal.applyMatrix3(normalMatrix).normalize(),faceCopy.vertexNormals.push(normal);faceCopy.color.copy(face.color);for(j=0,jl=faceVertexColors.length;j<jl;j++)color=faceVertexColors[j],faceCopy.vertexColors.push(color.clone());faceCopy.materialIndex=face.materialIndex+materialIndexOffset,faces1.push(faceCopy)}for(i=0,il=uvs2.length;i<il;i++){var uv=uvs2[i],uvCopy=[];if(uv!==undefined){for(j=0,jl=uv.length;j<jl;j++)uvCopy.push(uv[j].clone());uvs1.push(uvCopy)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",geometry)},mergeMesh:function(mesh){mesh instanceof THREE.Mesh!=!1?(mesh.matrixAutoUpdate&&mesh.updateMatrix(),this.merge(mesh.geometry,mesh.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",mesh)},mergeVertices:function(){var v,key,i,il,face,indices,j,jl,verticesMap={},unique=[],changes=[],precisionPoints=4,precision=Math.pow(10,precisionPoints);for(i=0,il=this.vertices.length;i<il;i++)v=this.vertices[i],verticesMap[key=Math.round(v.x*precision)+"_"+Math.round(v.y*precision)+"_"+Math.round(v.z*precision)]===undefined?(verticesMap[key]=i,unique.push(this.vertices[i]),changes[i]=unique.length-1):changes[i]=changes[verticesMap[key]];var faceIndicesToRemove=[];for(i=0,il=this.faces.length;i<il;i++){(face=this.faces[i]).a=changes[face.a],face.b=changes[face.b],face.c=changes[face.c],indices=[face.a,face.b,face.c];for(var n=0;n<3;n++)if(indices[n]===indices[(n+1)%3]){n,faceIndicesToRemove.push(i);break}}for(i=faceIndicesToRemove.length-1;i>=0;i--){var idx=faceIndicesToRemove[i];for(this.faces.splice(idx,1),j=0,jl=this.faceVertexUvs.length;j<jl;j++)this.faceVertexUvs[j].splice(idx,1)}var diff=this.vertices.length-unique.length;return this.vertices=unique,diff},toJSON:function(){function setBit(value,position,enabled){return enabled?value|1<<position:value&~(1<<position)}function getNormalIndex(normal){var hash=normal.x.toString()+normal.y.toString()+normal.z.toString();return normalsHash[hash]!==undefined?normalsHash[hash]:(normalsHash[hash]=normals.length/3,normals.push(normal.x,normal.y,normal.z),normalsHash[hash])}function getColorIndex(color){var hash=color.r.toString()+color.g.toString()+color.b.toString();return colorsHash[hash]!==undefined?colorsHash[hash]:(colorsHash[hash]=colors.length,colors.push(color.getHex()),colorsHash[hash])}function getUvIndex(uv){var hash=uv.x.toString()+uv.y.toString();return uvsHash[hash]!==undefined?uvsHash[hash]:(uvsHash[hash]=uvs.length/2,uvs.push(uv.x,uv.y),uvsHash[hash])}var data={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.parameters!==undefined){var parameters=this.parameters;for(var key in parameters)parameters[key]!==undefined&&(data[key]=parameters[key]);return data}for(var vertices=[],i=0;i<this.vertices.length;i++){var vertex=this.vertices[i];vertices.push(vertex.x,vertex.y,vertex.z)}var faces=[],normals=[],normalsHash={},colors=[],colorsHash={},uvs=[],uvsHash={};for(i=0;i<this.faces.length;i++){var face=this.faces[i],hasMaterial=!1,hasFaceUv=!1,hasFaceVertexUv=this.faceVertexUvs[0][i]!==undefined,hasFaceNormal=face.normal.length()>0,hasFaceVertexNormal=face.vertexNormals.length>0,hasFaceColor=1!==face.color.r||1!==face.color.g||1!==face.color.b,hasFaceVertexColor=face.vertexColors.length>0,faceType=0;if(faceType=setBit(faceType=setBit(faceType=setBit(faceType=setBit(faceType=setBit(faceType=setBit(faceType=setBit(faceType=setBit(faceType,0,0),1,hasMaterial),2,hasFaceUv),3,hasFaceVertexUv),4,hasFaceNormal),5,hasFaceVertexNormal),6,hasFaceColor),7,hasFaceVertexColor),faces.push(faceType),faces.push(face.a,face.b,face.c),hasFaceVertexUv){var faceVertexUvs=this.faceVertexUvs[0][i];faces.push(getUvIndex(faceVertexUvs[0]),getUvIndex(faceVertexUvs[1]),getUvIndex(faceVertexUvs[2]))}if(hasFaceNormal&&faces.push(getNormalIndex(face.normal)),hasFaceVertexNormal){var vertexNormals=face.vertexNormals;faces.push(getNormalIndex(vertexNormals[0]),getNormalIndex(vertexNormals[1]),getNormalIndex(vertexNormals[2]))}if(hasFaceColor&&faces.push(getColorIndex(face.color)),hasFaceVertexColor){var vertexColors=face.vertexColors;faces.push(getColorIndex(vertexColors[0]),getColorIndex(vertexColors[1]),getColorIndex(vertexColors[2]))}}return data.data={},data.data.vertices=vertices,data.data.normals=normals,colors.length>0&&(data.data.colors=colors),uvs.length>0&&(data.data.uvs=[uvs]),data.data.faces=faces,data},clone:function(){return(new this.constructor).copy(this)},copy:function(source){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var vertices=source.vertices,i=0,il=vertices.length;i<il;i++)this.vertices.push(vertices[i].clone());var faces=source.faces;for(i=0,il=faces.length;i<il;i++)this.faces.push(faces[i].clone());for(i=0,il=source.faceVertexUvs.length;i<il;i++){var faceVertexUvs=source.faceVertexUvs[i];this.faceVertexUvs[i]===undefined&&(this.faceVertexUvs[i]=[]);for(var j=0,jl=faceVertexUvs.length;j<jl;j++){for(var uvs=faceVertexUvs[j],uvsCopy=[],k=0,kl=uvs.length;k<kl;k++){var uv=uvs[k];uvsCopy.push(uv.clone())}this.faceVertexUvs[i].push(uvsCopy)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},THREE.DirectGeometry.prototype={constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(geometry){for(var group,materialIndex,groups=[],faces=geometry.faces,i=0;i<faces.length;i++){var face=faces[i];face.materialIndex!==materialIndex&&(materialIndex=face.materialIndex,group!==undefined&&(group.count=3*i-group.start,groups.push(group)),group={start:3*i,materialIndex:materialIndex})}group!==undefined&&(group.count=3*i-group.start,groups.push(group)),this.groups=groups},fromGeometry:function(geometry){var faces=geometry.faces,vertices=geometry.vertices,faceVertexUvs=geometry.faceVertexUvs,hasFaceVertexUv=faceVertexUvs[0]&&faceVertexUvs[0].length>0,hasFaceVertexUv2=faceVertexUvs[1]&&faceVertexUvs[1].length>0,morphTargets=geometry.morphTargets,morphTargetsLength=morphTargets.length;if(morphTargetsLength>0){for(var morphTargetsPosition=[],i=0;i<morphTargetsLength;i++)morphTargetsPosition[i]=[];this.morphTargets.position=morphTargetsPosition}var morphNormals=geometry.morphNormals,morphNormalsLength=morphNormals.length;if(morphNormalsLength>0){var morphTargetsNormal=[];for(i=0;i<morphNormalsLength;i++)morphTargetsNormal[i]=[];this.morphTargets.normal=morphTargetsNormal}var skinIndices=geometry.skinIndices,skinWeights=geometry.skinWeights,hasSkinIndices=skinIndices.length===vertices.length,hasSkinWeights=skinWeights.length===vertices.length;for(i=0;i<faces.length;i++){var face=faces[i];this.vertices.push(vertices[face.a],vertices[face.b],vertices[face.c]);var vertexNormals=face.vertexNormals;if(3===vertexNormals.length)this.normals.push(vertexNormals[0],vertexNormals[1],vertexNormals[2]);else{var normal=face.normal;this.normals.push(normal,normal,normal)}var vertexUvs,vertexColors=face.vertexColors;if(3===vertexColors.length)this.colors.push(vertexColors[0],vertexColors[1],vertexColors[2]);else{var color=face.color;this.colors.push(color,color,color)}if(!0===hasFaceVertexUv)(vertexUvs=faceVertexUvs[0][i])!==undefined?this.uvs.push(vertexUvs[0],vertexUvs[1],vertexUvs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",i),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2));if(!0===hasFaceVertexUv2)(vertexUvs=faceVertexUvs[1][i])!==undefined?this.uvs2.push(vertexUvs[0],vertexUvs[1],vertexUvs[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",i),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2));for(var j=0;j<morphTargetsLength;j++){var morphTarget=morphTargets[j].vertices;morphTargetsPosition[j].push(morphTarget[face.a],morphTarget[face.b],morphTarget[face.c])}for(j=0;j<morphNormalsLength;j++){var morphNormal=morphNormals[j].vertexNormals[i];morphTargetsNormal[j].push(morphNormal.a,morphNormal.b,morphNormal.c)}hasSkinIndices&&this.skinIndices.push(skinIndices[face.a],skinIndices[face.b],skinIndices[face.c]),hasSkinWeights&&this.skinWeights.push(skinWeights[face.a],skinWeights[face.b],skinWeights[face.c])}return this.computeGroups(geometry),this.verticesNeedUpdate=geometry.verticesNeedUpdate,this.normalsNeedUpdate=geometry.normalsNeedUpdate,this.colorsNeedUpdate=geometry.colorsNeedUpdate,this.uvsNeedUpdate=geometry.uvsNeedUpdate,this.groupsNeedUpdate=geometry.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype),THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity}},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addIndex:function(index){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(index)},getIndex:function(){return this.index},setIndex:function(index){this.index=index},addAttribute:function(name,attribute){if(attribute instanceof THREE.BufferAttribute==!1&&attribute instanceof THREE.InterleavedBufferAttribute==!1)return console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(name,new THREE.BufferAttribute(arguments[1],arguments[2]));"index"===name&&(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(attribute)),this.attributes[name]=attribute},getAttribute:function(name){return this.attributes[name]},removeAttribute:function(name){delete this.attributes[name]},get drawcalls(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups},get offsets(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups},addDrawCall:function(start,count,indexOffset){indexOffset!==undefined&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(start,count)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},addGroup:function(start,count,materialIndex){this.groups.push({start:start,count:count,materialIndex:materialIndex!==undefined?materialIndex:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(start,count){this.drawRange.start=start,this.drawRange.count=count},applyMatrix:function(matrix){var position=this.attributes.position;position!==undefined&&(matrix.applyToVector3Array(position.array),position.needsUpdate=!0);var normal=this.attributes.normal;normal!==undefined&&((new THREE.Matrix3).getNormalMatrix(matrix).applyToVector3Array(normal.array),normal.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var m1;return function(angle){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeRotationX(angle),this.applyMatrix(m1),this}}(),rotateY:function(){var m1;return function(angle){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeRotationY(angle),this.applyMatrix(m1),this}}(),rotateZ:function(){var m1;return function(angle){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeRotationZ(angle),this.applyMatrix(m1),this}}(),translate:function(){var m1;return function(x,y,z){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeTranslation(x,y,z),this.applyMatrix(m1),this}}(),scale:function(){var m1;return function(x,y,z){return m1===undefined&&(m1=new THREE.Matrix4),m1.makeScale(x,y,z),this.applyMatrix(m1),this}}(),lookAt:function(){var obj;return function(vector){obj===undefined&&(obj=new THREE.Object3D),obj.lookAt(vector),obj.updateMatrix(),this.applyMatrix(obj.matrix)}}(),center:function(){this.computeBoundingBox();var offset=this.boundingBox.center().negate();return this.translate(offset.x,offset.y,offset.z),offset},setFromObject:function(object){var geometry=object.geometry;if(object instanceof THREE.Points||object instanceof THREE.Line){var positions=new THREE.Float32Attribute(3*geometry.vertices.length,3),colors=new THREE.Float32Attribute(3*geometry.colors.length,3);if(this.addAttribute("position",positions.copyVector3sArray(geometry.vertices)),this.addAttribute("color",colors.copyColorsArray(geometry.colors)),geometry.lineDistances&&geometry.lineDistances.length===geometry.vertices.length){var lineDistances=new THREE.Float32Attribute(geometry.lineDistances.length,1);this.addAttribute("lineDistance",lineDistances.copyArray(geometry.lineDistances))}null!==geometry.boundingSphere&&(this.boundingSphere=geometry.boundingSphere.clone()),null!==geometry.boundingBox&&(this.boundingBox=geometry.boundingBox.clone())}else object instanceof THREE.Mesh&&geometry instanceof THREE.Geometry&&this.fromGeometry(geometry);return this},updateFromObject:function(object){var attribute,geometry=object.geometry;if(object instanceof THREE.Mesh){var direct=geometry.__directGeometry;if(direct===undefined)return this.fromGeometry(geometry);direct.verticesNeedUpdate=geometry.verticesNeedUpdate,direct.normalsNeedUpdate=geometry.normalsNeedUpdate,direct.colorsNeedUpdate=geometry.colorsNeedUpdate,direct.uvsNeedUpdate=geometry.uvsNeedUpdate,direct.groupsNeedUpdate=geometry.groupsNeedUpdate,geometry.verticesNeedUpdate=!1,geometry.normalsNeedUpdate=!1,geometry.colorsNeedUpdate=!1,geometry.uvsNeedUpdate=!1,geometry.groupsNeedUpdate=!1,geometry=direct}!0===geometry.verticesNeedUpdate&&((attribute=this.attributes.position)!==undefined&&(attribute.copyVector3sArray(geometry.vertices),attribute.needsUpdate=!0),geometry.verticesNeedUpdate=!1);!0===geometry.normalsNeedUpdate&&((attribute=this.attributes.normal)!==undefined&&(attribute.copyVector3sArray(geometry.normals),attribute.needsUpdate=!0),geometry.normalsNeedUpdate=!1);!0===geometry.colorsNeedUpdate&&((attribute=this.attributes.color)!==undefined&&(attribute.copyColorsArray(geometry.colors),attribute.needsUpdate=!0),geometry.colorsNeedUpdate=!1);geometry.lineDistancesNeedUpdate&&((attribute=this.attributes.lineDistance)!==undefined&&(attribute.copyArray(geometry.lineDistances),attribute.needsUpdate=!0),geometry.lineDistancesNeedUpdate=!1);return geometry.groupsNeedUpdate&&(geometry.computeGroups(object.geometry),this.groups=geometry.groups,geometry.groupsNeedUpdate=!1),this},fromGeometry:function(geometry){return geometry.__directGeometry=(new THREE.DirectGeometry).fromGeometry(geometry),this.fromDirectGeometry(geometry.__directGeometry)},fromDirectGeometry:function(geometry){var positions=new Float32Array(3*geometry.vertices.length);if(this.addAttribute("position",new THREE.BufferAttribute(positions,3).copyVector3sArray(geometry.vertices)),geometry.normals.length>0){var normals=new Float32Array(3*geometry.normals.length);this.addAttribute("normal",new THREE.BufferAttribute(normals,3).copyVector3sArray(geometry.normals))}if(geometry.colors.length>0){var colors=new Float32Array(3*geometry.colors.length);this.addAttribute("color",new THREE.BufferAttribute(colors,3).copyColorsArray(geometry.colors))}if(geometry.uvs.length>0){var uvs=new Float32Array(2*geometry.uvs.length);this.addAttribute("uv",new THREE.BufferAttribute(uvs,2).copyVector2sArray(geometry.uvs))}if(geometry.uvs2.length>0){var uvs2=new Float32Array(2*geometry.uvs2.length);this.addAttribute("uv2",new THREE.BufferAttribute(uvs2,2).copyVector2sArray(geometry.uvs2))}if(geometry.indices.length>0){var indices=new(geometry.vertices.length>65535?Uint32Array:Uint16Array)(3*geometry.indices.length);this.setIndex(new THREE.BufferAttribute(indices,1).copyIndicesArray(geometry.indices))}for(var name in this.groups=geometry.groups,geometry.morphTargets){for(var array=[],morphTargets=geometry.morphTargets[name],i=0,l=morphTargets.length;i<l;i++){var morphTarget=morphTargets[i],attribute=new THREE.Float32Attribute(3*morphTarget.length,3);array.push(attribute.copyVector3sArray(morphTarget))}this.morphAttributes[name]=array}if(geometry.skinIndices.length>0){var skinIndices=new THREE.Float32Attribute(4*geometry.skinIndices.length,4);this.addAttribute("skinIndex",skinIndices.copyVector4sArray(geometry.skinIndices))}if(geometry.skinWeights.length>0){var skinWeights=new THREE.Float32Attribute(4*geometry.skinWeights.length,4);this.addAttribute("skinWeight",skinWeights.copyVector4sArray(geometry.skinWeights))}return null!==geometry.boundingSphere&&(this.boundingSphere=geometry.boundingSphere.clone()),null!==geometry.boundingBox&&(this.boundingBox=geometry.boundingBox.clone()),this},computeBoundingBox:function(){var vector=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var positions=this.attributes.position.array;if(positions){var bb=this.boundingBox;bb.makeEmpty();for(var i=0,il=positions.length;i<il;i+=3)vector.fromArray(positions,i),bb.expandByPoint(vector)}positions!==undefined&&0!==positions.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var box=new THREE.Box3,vector=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var positions=this.attributes.position.array;if(positions){box.makeEmpty();for(var center=this.boundingSphere.center,i=0,il=positions.length;i<il;i+=3)vector.fromArray(positions,i),box.expandByPoint(vector);box.center(center);var maxRadiusSq=0;for(i=0,il=positions.length;i<il;i+=3)vector.fromArray(positions,i),maxRadiusSq=Math.max(maxRadiusSq,center.distanceToSquared(vector));this.boundingSphere.radius=Math.sqrt(maxRadiusSq),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var index=this.index,attributes=this.attributes,groups=this.groups;if(attributes.position){var positions=attributes.position.array;if(attributes.normal===undefined)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(positions.length),3));else for(var i=0,il=(normals=attributes.normal.array).length;i<il;i++)normals[i]=0;var vA,vB,vC,normals=attributes.normal.array,pA=new THREE.Vector3,pB=new THREE.Vector3,pC=new THREE.Vector3,cb=new THREE.Vector3,ab=new THREE.Vector3;if(index){var indices=index.array;0===groups.length&&this.addGroup(0,indices.length);for(var j=0,jl=groups.length;j<jl;++j){var group=groups[j],start=group.start;for(i=start,il=start+group.count;i<il;i+=3)vA=3*indices[i+0],vB=3*indices[i+1],vC=3*indices[i+2],pA.fromArray(positions,vA),pB.fromArray(positions,vB),pC.fromArray(positions,vC),cb.subVectors(pC,pB),ab.subVectors(pA,pB),cb.cross(ab),normals[vA]+=cb.x,normals[vA+1]+=cb.y,normals[vA+2]+=cb.z,normals[vB]+=cb.x,normals[vB+1]+=cb.y,normals[vB+2]+=cb.z,normals[vC]+=cb.x,normals[vC+1]+=cb.y,normals[vC+2]+=cb.z}}else for(i=0,il=positions.length;i<il;i+=9)pA.fromArray(positions,i),pB.fromArray(positions,i+3),pC.fromArray(positions,i+6),cb.subVectors(pC,pB),ab.subVectors(pA,pB),cb.cross(ab),normals[i]=cb.x,normals[i+1]=cb.y,normals[i+2]=cb.z,normals[i+3]=cb.x,normals[i+4]=cb.y,normals[i+5]=cb.z,normals[i+6]=cb.x,normals[i+7]=cb.y,normals[i+8]=cb.z;this.normalizeNormals(),attributes.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(geometry,offset){if(geometry instanceof THREE.BufferGeometry!=!1){offset===undefined&&(offset=0);var attributes=this.attributes;for(var key in attributes)if(geometry.attributes[key]!==undefined)for(var attributeArray1=attributes[key].array,attribute2=geometry.attributes[key],attributeArray2=attribute2.array,i=0,j=attribute2.itemSize*offset;i<attributeArray2.length;i++,j++)attributeArray1[j]=attributeArray2[i];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",geometry)},normalizeNormals:function(){for(var x,y,z,n,normals=this.attributes.normal.array,i=0,il=normals.length;i<il;i+=3)x=normals[i],y=normals[i+1],z=normals[i+2],n=1/Math.sqrt(x*x+y*y+z*z),normals[i]*=n,normals[i+1]*=n,normals[i+2]*=n},toJSON:function(){var data={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.parameters!==undefined){var parameters=this.parameters;for(var key in parameters)parameters[key]!==undefined&&(data[key]=parameters[key]);return data}data.data={attributes:{}};var index=this.index;if(null!==index){var array=Array.prototype.slice.call(index.array);data.data.index={type:index.array.constructor.name,array:array}}var attributes=this.attributes;for(var key in attributes){var attribute=attributes[key];array=Array.prototype.slice.call(attribute.array);data.data.attributes[key]={itemSize:attribute.itemSize,type:attribute.array.constructor.name,array:array}}var groups=this.groups;groups.length>0&&(data.data.groups=JSON.parse(JSON.stringify(groups)));var boundingSphere=this.boundingSphere;return null!==boundingSphere&&(data.data.boundingSphere={center:boundingSphere.center.toArray(),radius:boundingSphere.radius}),data},clone:function(){return(new this.constructor).copy(this)},copy:function(source){var index=source.index;null!==index&&this.setIndex(index.clone());var attributes=source.attributes;for(var name in attributes){var attribute=attributes[name];this.addAttribute(name,attribute.clone())}for(var groups=source.groups,i=0,l=groups.length;i<l;i++){var group=groups[i];this.addGroup(group.start,group.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.BufferGeometry.MaxIndex=65535,THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=undefined},THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry,THREE.InstancedBufferGeometry.prototype.addGroup=function(start,count,instances){this.groups.push({start:start,count:count,instances:instances})},THREE.InstancedBufferGeometry.prototype.copy=function(source){var index=source.index;null!==index&&this.setIndex(index.clone());var attributes=source.attributes;for(var name in attributes){var attribute=attributes[name];this.addAttribute(name,attribute.clone())}for(var groups=source.groups,i=0,l=groups.length;i<l;i++){var group=groups[i];this.addGroup(group.start,group.count,group.instances)}return this},THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype),THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.getWorldDirection=function(){var quaternion=new THREE.Quaternion;return function(optionalTarget){var result=optionalTarget||new THREE.Vector3;return this.getWorldQuaternion(quaternion),result.set(0,0,-1).applyQuaternion(quaternion)}}(),THREE.Camera.prototype.lookAt=function(){var m1=new THREE.Matrix4;return function(vector){m1.lookAt(this.position,vector,this.up),this.quaternion.setFromRotationMatrix(m1)}}(),THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},THREE.Camera.prototype.copy=function(source){return THREE.Object3D.prototype.copy.call(this,source),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this},THREE.CubeCamera=function(near,far,cubeResolution){THREE.Object3D.call(this),this.type="CubeCamera";var fov=90,aspect=1,cameraPX=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraPX.up.set(0,-1,0),cameraPX.lookAt(new THREE.Vector3(1,0,0)),this.add(cameraPX);var cameraNX=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraNX.up.set(0,-1,0),cameraNX.lookAt(new THREE.Vector3(-1,0,0)),this.add(cameraNX);var cameraPY=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraPY.up.set(0,0,1),cameraPY.lookAt(new THREE.Vector3(0,1,0)),this.add(cameraPY);var cameraNY=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraNY.up.set(0,0,-1),cameraNY.lookAt(new THREE.Vector3(0,-1,0)),this.add(cameraNY);var cameraPZ=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraPZ.up.set(0,-1,0),cameraPZ.lookAt(new THREE.Vector3(0,0,1)),this.add(cameraPZ);var cameraNZ=new THREE.PerspectiveCamera(fov,aspect,near,far);cameraNZ.up.set(0,-1,0),cameraNZ.lookAt(new THREE.Vector3(0,0,-1)),this.add(cameraNZ),this.renderTarget=new THREE.WebGLRenderTargetCube(cubeResolution,cubeResolution,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(renderer,scene){null===this.parent&&this.updateMatrixWorld();var renderTarget=this.renderTarget,generateMipmaps=renderTarget.generateMipmaps;renderTarget.generateMipmaps=!1,renderTarget.activeCubeFace=0,renderer.render(scene,cameraPX,renderTarget),renderTarget.activeCubeFace=1,renderer.render(scene,cameraNX,renderTarget),renderTarget.activeCubeFace=2,renderer.render(scene,cameraPY,renderTarget),renderTarget.activeCubeFace=3,renderer.render(scene,cameraNY,renderTarget),renderTarget.activeCubeFace=4,renderer.render(scene,cameraPZ,renderTarget),renderTarget.generateMipmaps=generateMipmaps,renderTarget.activeCubeFace=5,renderer.render(scene,cameraNZ,renderTarget),renderer.setRenderTarget(null)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CubeCamera.prototype.constructor=THREE.CubeCamera,THREE.OrthographicCamera=function(left,right,top,bottom,near,far){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=left,this.right=right,this.top=top,this.bottom=bottom,this.near=near!==undefined?near:.1,this.far=far!==undefined?far:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var dx=(this.right-this.left)/(2*this.zoom),dy=(this.top-this.bottom)/(2*this.zoom),cx=(this.right+this.left)/2,cy=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(cx-dx,cx+dx,cy+dy,cy-dy,this.near,this.far)},THREE.OrthographicCamera.prototype.copy=function(source){return THREE.Camera.prototype.copy.call(this,source),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this},
THREE.OrthographicCamera.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,data},THREE.PerspectiveCamera=function(fov,aspect,near,far){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=fov!==undefined?fov:50,this.aspect=aspect!==undefined?aspect:1,this.near=near!==undefined?near:.1,this.far=far!==undefined?far:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(focalLength,frameHeight){frameHeight===undefined&&(frameHeight=24),this.fov=2*THREE.Math.radToDeg(Math.atan(frameHeight/(2*focalLength))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(fullWidth,fullHeight,x,y,width,height){this.fullWidth=fullWidth,this.fullHeight=fullHeight,this.x=x,this.y=y,this.width=width,this.height=height,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var fov=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var aspect=this.fullWidth/this.fullHeight,top=Math.tan(THREE.Math.degToRad(.5*fov))*this.near,bottom=-top,left=aspect*bottom,right=aspect*top,width=Math.abs(right-left),height=Math.abs(top-bottom);this.projectionMatrix.makeFrustum(left+this.x*width/this.fullWidth,left+(this.x+this.width)*width/this.fullWidth,top-(this.y+this.height)*height/this.fullHeight,top-this.y*height/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(fov,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.copy=function(source){return THREE.Camera.prototype.copy.call(this,source),this.fov=source.fov,this.aspect=source.aspect,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this},THREE.PerspectiveCamera.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return data.object.zoom=this.zoom,data.object.fov=this.fov,data.object.aspect=this.aspect,data.object.near=this.near,data.object.far=this.far,data},THREE.Light=function(color){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(color)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.copy=function(source){return THREE.Object3D.prototype.copy.call(this,source),this.color.copy(source.color),this},THREE.AmbientLight=function(color){THREE.Light.call(this,color),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.AmbientLight.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return data.object.color=this.color.getHex(),data},THREE.DirectionalLight=function(color,intensity){THREE.Light.call(this,color),this.type="DirectionalLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new THREE.Object3D,this.intensity=intensity!==undefined?intensity:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.DirectionalLight.prototype.copy=function(source){return THREE.Light.prototype.copy.call(this,source),this.intensity=source.intensity,this.target=source.target.clone(),this.castShadow=source.castShadow,this.onlyShadow=source.onlyShadow,this.shadowCameraNear=source.shadowCameraNear,this.shadowCameraFar=source.shadowCameraFar,this.shadowCameraLeft=source.shadowCameraLeft,this.shadowCameraRight=source.shadowCameraRight,this.shadowCameraTop=source.shadowCameraTop,this.shadowCameraBottom=source.shadowCameraBottom,this.shadowCameraVisible=source.shadowCameraVisible,this.shadowBias=source.shadowBias,this.shadowDarkness=source.shadowDarkness,this.shadowMapWidth=source.shadowMapWidth,this.shadowMapHeight=source.shadowMapHeight,this},THREE.DirectionalLight.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,data},THREE.HemisphereLight=function(skyColor,groundColor,intensity){THREE.Light.call(this,skyColor),this.type="HemisphereLight",this.position.set(0,1,0),this.updateMatrix(),this.groundColor=new THREE.Color(groundColor),this.intensity=intensity!==undefined?intensity:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight,THREE.HemisphereLight.prototype.copy=function(source){return THREE.Light.prototype.copy.call(this,source),this.groundColor.copy(source.groundColor),this.intensity=source.intensity,this},THREE.HemisphereLight.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return data.object.color=this.color.getHex(),data.object.groundColor=this.groundColor.getHex(),data.object.intensity=this.intensity,data},THREE.PointLight=function(color,intensity,distance,decay){THREE.Light.call(this,color),this.type="PointLight",this.intensity=intensity!==undefined?intensity:1,this.distance=distance!==undefined?distance:0,this.decay=decay!==undefined?decay:1},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.PointLight.prototype.copy=function(source){return THREE.Light.prototype.copy.call(this,source),this.intensity=source.intensity,this.distance=source.distance,this.decay=source.decay,this},THREE.PointLight.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,data.object.distance=this.distance,data.object.decay=this.decay,data},THREE.SpotLight=function(color,intensity,distance,angle,exponent,decay){THREE.Light.call(this,color),this.type="SpotLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new THREE.Object3D,this.intensity=intensity!==undefined?intensity:1,this.distance=distance!==undefined?distance:0,this.angle=angle!==undefined?angle:Math.PI/3,this.exponent=exponent!==undefined?exponent:10,this.decay=decay!==undefined?decay:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.SpotLight.prototype.copy=function(source){return THREE.Light.prototype.copy.call(this,source),this.intensity=source.intensity,this.distance=source.distance,this.angle=source.angle,this.exponent=source.exponent,this.decay=source.decay,this.target=source.target.clone(),this.castShadow=source.castShadow,this.onlyShadow=source.onlyShadow,this.shadowCameraNear=source.shadowCameraNear,this.shadowCameraFar=source.shadowCameraFar,this.shadowCameraFov=source.shadowCameraFov,this.shadowCameraVisible=source.shadowCameraVisible,this.shadowBias=source.shadowBias,this.shadowDarkness=source.shadowDarkness,this.shadowMapWidth=source.shadowMapWidth,this.shadowMapHeight=source.shadowMapHeight,this},THREE.SpotLight.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,data.object.distance=this.distance,data.object.angle=this.angle,data.object.exponent=this.exponent,data.object.decay=this.decay,data},THREE.Cache={enabled:!1,files:{},add:function(key,file){!1!==this.enabled&&(this.files[key]=file)},get:function(key){if(!1!==this.enabled)return this.files[key]},remove:function(key){delete this.files[key]},clear:function(){this.files={}}},THREE.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:undefined,extractUrlBase:function(url){var parts=url.split("/");return 1===parts.length?"./":(parts.pop(),parts.join("/")+"/")},initMaterials:function(materials,texturePath,crossOrigin){for(var array=[],i=0;i<materials.length;++i)array[i]=this.createMaterial(materials[i],texturePath,crossOrigin);return array},createMaterial:function(){var imageLoader;return function(m,texturePath,crossOrigin){function nearest_pow2(n){var l=Math.log(n)/Math.LN2;return Math.pow(2,Math.round(l))}function create_texture(where,name,sourceFile,repeat,offset,wrap,anisotropy){var texture,fullPath=texturePath+sourceFile,loader=THREE.Loader.Handlers.get(fullPath);if(null!==loader?texture=loader.load(fullPath):(texture=new THREE.Texture,(loader=imageLoader).setCrossOrigin(crossOrigin),loader.load(fullPath,function(image){if(!1===THREE.Math.isPowerOfTwo(image.width)||!1===THREE.Math.isPowerOfTwo(image.height)){var width=nearest_pow2(image.width),height=nearest_pow2(image.height),canvas=document.createElement("canvas");canvas.width=width,canvas.height=height,canvas.getContext("2d").drawImage(image,0,0,width,height),texture.image=canvas}else texture.image=image;texture.needsUpdate=!0})),texture.sourceFile=sourceFile,repeat&&(texture.repeat.set(repeat[0],repeat[1]),1!==repeat[0]&&(texture.wrapS=THREE.RepeatWrapping),1!==repeat[1]&&(texture.wrapT=THREE.RepeatWrapping)),offset&&texture.offset.set(offset[0],offset[1]),wrap){var wrapMap={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};wrapMap[wrap[0]]!==undefined&&(texture.wrapS=wrapMap[wrap[0]]),wrapMap[wrap[1]]!==undefined&&(texture.wrapT=wrapMap[wrap[1]])}anisotropy&&(texture.anisotropy=anisotropy),where[name]=texture}function rgb2hex(rgb){return(255*rgb[0]<<16)+(255*rgb[1]<<8)+255*rgb[2]}var scope=this;crossOrigin===undefined&&scope.crossOrigin!==undefined&&(crossOrigin=scope.crossOrigin),imageLoader===undefined&&(imageLoader=new THREE.ImageLoader);var mtype="MeshLambertMaterial",mpars={};if(m.shading){var shading=m.shading.toLowerCase();"phong"===shading?mtype="MeshPhongMaterial":"basic"===shading&&(mtype="MeshBasicMaterial")}m.blending!==undefined&&THREE[m.blending]!==undefined&&(mpars.blending=THREE[m.blending]),m.transparent!==undefined&&(mpars.transparent=m.transparent),m.opacity!==undefined&&m.opacity<1&&(mpars.transparent=!0),m.depthTest!==undefined&&(mpars.depthTest=m.depthTest),m.depthWrite!==undefined&&(mpars.depthWrite=m.depthWrite),m.visible!==undefined&&(mpars.visible=m.visible),m.flipSided!==undefined&&(mpars.side=THREE.BackSide),m.doubleSided!==undefined&&(mpars.side=THREE.DoubleSide),m.wireframe!==undefined&&(mpars.wireframe=m.wireframe),m.vertexColors!==undefined&&("face"===m.vertexColors?mpars.vertexColors=THREE.FaceColors:m.vertexColors&&(mpars.vertexColors=THREE.VertexColors)),m.colorDiffuse?mpars.color=rgb2hex(m.colorDiffuse):m.DbgColor&&(mpars.color=m.DbgColor),m.colorEmissive&&(mpars.emissive=rgb2hex(m.colorEmissive)),"MeshPhongMaterial"===mtype&&(m.colorSpecular&&(mpars.specular=rgb2hex(m.colorSpecular)),m.specularCoef&&(mpars.shininess=m.specularCoef)),m.transparency!==undefined&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),m.opacity=m.transparency),m.opacity!==undefined&&(mpars.opacity=m.opacity),texturePath&&(m.mapDiffuse&&create_texture(mpars,"map",m.mapDiffuse,m.mapDiffuseRepeat,m.mapDiffuseOffset,m.mapDiffuseWrap,m.mapDiffuseAnisotropy),m.mapLight&&create_texture(mpars,"lightMap",m.mapLight,m.mapLightRepeat,m.mapLightOffset,m.mapLightWrap,m.mapLightAnisotropy),m.mapAO&&create_texture(mpars,"aoMap",m.mapAO,m.mapAORepeat,m.mapAOOffset,m.mapAOWrap,m.mapAOAnisotropy),m.mapBump&&create_texture(mpars,"bumpMap",m.mapBump,m.mapBumpRepeat,m.mapBumpOffset,m.mapBumpWrap,m.mapBumpAnisotropy),m.mapNormal&&create_texture(mpars,"normalMap",m.mapNormal,m.mapNormalRepeat,m.mapNormalOffset,m.mapNormalWrap,m.mapNormalAnisotropy),m.mapSpecular&&create_texture(mpars,"specularMap",m.mapSpecular,m.mapSpecularRepeat,m.mapSpecularOffset,m.mapSpecularWrap,m.mapSpecularAnisotropy),m.mapAlpha&&create_texture(mpars,"alphaMap",m.mapAlpha,m.mapAlphaRepeat,m.mapAlphaOffset,m.mapAlphaWrap,m.mapAlphaAnisotropy)),m.mapBumpScale&&(mpars.bumpScale=m.mapBumpScale),m.mapNormalFactor&&(mpars.normalScale=new THREE.Vector2(m.mapNormalFactor,m.mapNormalFactor));var material=new THREE[mtype](mpars);return m.DbgName!==undefined&&(material.name=m.DbgName),material}}()},THREE.Loader.Handlers={handlers:[],add:function(regex,loader){this.handlers.push(regex,loader)},get:function(file){for(var i=0,l=this.handlers.length;i<l;i+=2){var regex=this.handlers[i],loader=this.handlers[i+1];if(regex.test(file))return loader}return null}},THREE.XHRLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(url,onLoad,onProgress,onError){var scope=this,cached=THREE.Cache.get(url);if(cached!==undefined)return onLoad&&setTimeout(function(){onLoad(cached)},0),cached;var request=new XMLHttpRequest;return request.open("GET",url,!0),request.addEventListener("load",function(){THREE.Cache.add(url,this.response),onLoad&&onLoad(this.response),scope.manager.itemEnd(url)},!1),onProgress!==undefined&&request.addEventListener("progress",function(event){onProgress(event)},!1),request.addEventListener("error",function(event){onError&&onError(event),scope.manager.itemError(url)},!1),this.crossOrigin!==undefined&&(request.crossOrigin=this.crossOrigin),this.responseType!==undefined&&(request.responseType=this.responseType),this.withCredentials!==undefined&&(request.withCredentials=this.withCredentials),request.send(null),scope.manager.itemStart(url),request},setResponseType:function(value){this.responseType=value},setCrossOrigin:function(value){this.crossOrigin=value},setWithCredentials:function(value){this.withCredentials=value}},THREE.ImageLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(url,onLoad,onProgress,onError){var scope=this,cached=THREE.Cache.get(url);if(cached!==undefined)return onLoad&&setTimeout(function(){onLoad(cached)},0),cached;var image=document.createElement("img");return image.addEventListener("load",function(){THREE.Cache.add(url,this),onLoad&&onLoad(this),scope.manager.itemEnd(url)},!1),onProgress!==undefined&&image.addEventListener("progress",function(event){onProgress(event)},!1),image.addEventListener("error",function(event){onError&&onError(event),scope.manager.itemError(url)},!1),this.crossOrigin!==undefined&&(image.crossOrigin=this.crossOrigin),scope.manager.itemStart(url),image.src=url,image},setCrossOrigin:function(value){this.crossOrigin=value}},THREE.JSONLoader=function(manager){"boolean"==typeof manager&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),manager=undefined),this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager,this.withCredentials=!1},THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){return this._statusDomElement===undefined&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(url,onLoad){var scope=this,texturePath=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(url),loader=new THREE.XHRLoader(this.manager);loader.setCrossOrigin(this.crossOrigin),loader.setWithCredentials(this.withCredentials),loader.load(url,function(text){var json=JSON.parse(text),metadata=json.metadata;if(metadata!==undefined){if("object"===metadata.type)return void console.error("THREE.JSONLoader: "+url+" should be loaded with THREE.ObjectLoader instead.");if("scene"===metadata.type)return void console.error("THREE.JSONLoader: "+url+" should be loaded with THREE.SceneLoader instead.")}var object=scope.parse(json,texturePath);onLoad(object.geometry,object.materials)})},setCrossOrigin:function(value){this.crossOrigin=value},setTexturePath:function(value){this.texturePath=value},parse:function(json,texturePath){function parseModel(scale){function isBitSet(value,position){return value&1<<position}var i,j,fi,offset,zLength,colorIndex,normalIndex,uvIndex,materialIndex,type,isQuad,hasMaterial,hasFaceVertexUv,hasFaceNormal,hasFaceVertexNormal,hasFaceColor,hasFaceVertexColor,vertex,face,faceA,faceB,hex,normal,uvLayer,uv,u,v,faces=json.faces,vertices=json.vertices,normals=json.normals,colors=json.colors,nUvLayers=0;if(json.uvs!==undefined){for(i=0;i<json.uvs.length;i++)json.uvs[i].length&&nUvLayers++;for(i=0;i<nUvLayers;i++)geometry.faceVertexUvs[i]=[]}for(offset=0,zLength=vertices.length;offset<zLength;)(vertex=new THREE.Vector3).x=vertices[offset++]*scale,vertex.y=vertices[offset++]*scale,vertex.z=vertices[offset++]*scale,geometry.vertices.push(vertex);for(offset=0,zLength=faces.length;offset<zLength;)if(isQuad=isBitSet(type=faces[offset++],0),hasMaterial=isBitSet(type,1),hasFaceVertexUv=isBitSet(type,3),hasFaceNormal=isBitSet(type,4),hasFaceVertexNormal=isBitSet(type,5),hasFaceColor=isBitSet(type,6),hasFaceVertexColor=isBitSet(type,7),isQuad){if((faceA=new THREE.Face3).a=faces[offset],faceA.b=faces[offset+1],faceA.c=faces[offset+3],(faceB=new THREE.Face3).a=faces[offset+1],faceB.b=faces[offset+2],faceB.c=faces[offset+3],offset+=4,hasMaterial&&(materialIndex=faces[offset++],faceA.materialIndex=materialIndex,faceB.materialIndex=materialIndex),fi=geometry.faces.length,hasFaceVertexUv)for(i=0;i<nUvLayers;i++)for(uvLayer=json.uvs[i],geometry.faceVertexUvs[i][fi]=[],geometry.faceVertexUvs[i][fi+1]=[],j=0;j<4;j++)u=uvLayer[2*(uvIndex=faces[offset++])],v=uvLayer[2*uvIndex+1],uv=new THREE.Vector2(u,v),2!==j&&geometry.faceVertexUvs[i][fi].push(uv),0!==j&&geometry.faceVertexUvs[i][fi+1].push(uv);if(hasFaceNormal&&(normalIndex=3*faces[offset++],faceA.normal.set(normals[normalIndex++],normals[normalIndex++],normals[normalIndex]),faceB.normal.copy(faceA.normal)),hasFaceVertexNormal)for(i=0;i<4;i++)normalIndex=3*faces[offset++],normal=new THREE.Vector3(normals[normalIndex++],normals[normalIndex++],normals[normalIndex]),2!==i&&faceA.vertexNormals.push(normal),0!==i&&faceB.vertexNormals.push(normal);if(hasFaceColor&&(hex=colors[colorIndex=faces[offset++]],faceA.color.setHex(hex),faceB.color.setHex(hex)),hasFaceVertexColor)for(i=0;i<4;i++)hex=colors[colorIndex=faces[offset++]],2!==i&&faceA.vertexColors.push(new THREE.Color(hex)),0!==i&&faceB.vertexColors.push(new THREE.Color(hex));geometry.faces.push(faceA),geometry.faces.push(faceB)}else{if((face=new THREE.Face3).a=faces[offset++],face.b=faces[offset++],face.c=faces[offset++],hasMaterial&&(materialIndex=faces[offset++],face.materialIndex=materialIndex),fi=geometry.faces.length,hasFaceVertexUv)for(i=0;i<nUvLayers;i++)for(uvLayer=json.uvs[i],geometry.faceVertexUvs[i][fi]=[],j=0;j<3;j++)u=uvLayer[2*(uvIndex=faces[offset++])],v=uvLayer[2*uvIndex+1],uv=new THREE.Vector2(u,v),geometry.faceVertexUvs[i][fi].push(uv);if(hasFaceNormal&&(normalIndex=3*faces[offset++],face.normal.set(normals[normalIndex++],normals[normalIndex++],normals[normalIndex])),hasFaceVertexNormal)for(i=0;i<3;i++)normalIndex=3*faces[offset++],normal=new THREE.Vector3(normals[normalIndex++],normals[normalIndex++],normals[normalIndex]),face.vertexNormals.push(normal);if(hasFaceColor&&(colorIndex=faces[offset++],face.color.setHex(colors[colorIndex])),hasFaceVertexColor)for(i=0;i<3;i++)colorIndex=faces[offset++],face.vertexColors.push(new THREE.Color(colors[colorIndex]));geometry.faces.push(face)}}function parseSkin(){var influencesPerVertex=json.influencesPerVertex!==undefined?json.influencesPerVertex:2;if(json.skinWeights)for(var i=0,l=json.skinWeights.length;i<l;i+=influencesPerVertex){var x=json.skinWeights[i],y=influencesPerVertex>1?json.skinWeights[i+1]:0,z=influencesPerVertex>2?json.skinWeights[i+2]:0,w=influencesPerVertex>3?json.skinWeights[i+3]:0;geometry.skinWeights.push(new THREE.Vector4(x,y,z,w))}if(json.skinIndices)for(i=0,l=json.skinIndices.length;i<l;i+=influencesPerVertex){var a=json.skinIndices[i],b=influencesPerVertex>1?json.skinIndices[i+1]:0,c=influencesPerVertex>2?json.skinIndices[i+2]:0,d=influencesPerVertex>3?json.skinIndices[i+3]:0;geometry.skinIndices.push(new THREE.Vector4(a,b,c,d))}geometry.bones=json.bones,geometry.bones&&geometry.bones.length>0&&(geometry.skinWeights.length!==geometry.skinIndices.length||geometry.skinIndices.length!==geometry.vertices.length)&&console.warn("When skinning, number of vertices ("+geometry.vertices.length+"), skinIndices ("+geometry.skinIndices.length+"), and skinWeights ("+geometry.skinWeights.length+") should match."),geometry.animation=json.animation,geometry.animations=json.animations}function parseMorphing(scale){var v,vl,dstVertices,srcVertices,i,l,c,cl,dstColors,srcColors,color;if(json.morphTargets!==undefined)for(i=0,l=json.morphTargets.length;i<l;i++)for(geometry.morphTargets[i]={},geometry.morphTargets[i].name=json.morphTargets[i].name,geometry.morphTargets[i].vertices=[],dstVertices=geometry.morphTargets[i].vertices,v=0,vl=(srcVertices=json.morphTargets[i].vertices).length;v<vl;v+=3){var vertex=new THREE.Vector3;vertex.x=srcVertices[v]*scale,vertex.y=srcVertices[v+1]*scale,vertex.z=srcVertices[v+2]*scale,dstVertices.push(vertex)}if(json.morphColors!==undefined)for(i=0,l=json.morphColors.length;i<l;i++)for(geometry.morphColors[i]={},geometry.morphColors[i].name=json.morphColors[i].name,geometry.morphColors[i].colors=[],dstColors=geometry.morphColors[i].colors,c=0,cl=(srcColors=json.morphColors[i].colors).length;c<cl;c+=3)(color=new THREE.Color(16755200)).setRGB(srcColors[c],srcColors[c+1],srcColors[c+2]),dstColors.push(color)}var geometry=new THREE.Geometry,scale=json.scale!==undefined?1/json.scale:1;if(parseModel(scale),parseSkin(),parseMorphing(scale),geometry.computeFaceNormals(),geometry.computeBoundingSphere(),json.materials===undefined||0===json.materials.length)return{geometry:geometry};var materials=THREE.Loader.prototype.initMaterials(json.materials,texturePath,this.crossOrigin);return{geometry:geometry,materials:materials}}},THREE.LoadingManager=function(onLoad,onProgress,onError){var scope=this,isLoading=!1,itemsLoaded=0,itemsTotal=0;this.onStart=undefined,this.onLoad=onLoad,this.onProgress=onProgress,this.onError=onError,this.itemStart=function(url){itemsTotal++,!1===isLoading&&scope.onStart!==undefined&&scope.onStart(url,itemsLoaded,itemsTotal),isLoading=!0},this.itemEnd=function(url){itemsLoaded++,scope.onProgress!==undefined&&scope.onProgress(url,itemsLoaded,itemsTotal),itemsLoaded===itemsTotal&&(isLoading=!1,scope.onLoad!==undefined&&scope.onLoad())},this.itemError=function(url){scope.onError!==undefined&&scope.onError(url)}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(url,onLoad,onProgress,onError){var scope=this,loader=new THREE.XHRLoader(scope.manager);loader.setCrossOrigin(this.crossOrigin),loader.load(url,function(text){onLoad(scope.parse(JSON.parse(text)))},onProgress,onError)},setCrossOrigin:function(value){this.crossOrigin=value},parse:function(json){var geometry=new THREE.BufferGeometry,index=json.data.index;if(index!==undefined){var typedArray=new self[index.type](index.array);geometry.setIndex(new THREE.BufferAttribute(typedArray,1))}var attributes=json.data.attributes;for(var key in attributes){var attribute=attributes[key];typedArray=new self[attribute.type](attribute.array);geometry.addAttribute(key,new THREE.BufferAttribute(typedArray,attribute.itemSize))}var groups=json.data.groups||json.data.drawcalls||json.data.offsets;if(groups!==undefined)for(var i=0,n=groups.length;i!==n;++i){var group=groups[i];geometry.addGroup(group.start,group.count)}var boundingSphere=json.data.boundingSphere;if(boundingSphere!==undefined){var center=new THREE.Vector3;boundingSphere.center!==undefined&&center.fromArray(boundingSphere.center),geometry.boundingSphere=new THREE.Sphere(center,boundingSphere.radius)}return geometry}},THREE.MaterialLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager,this.textures={}},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(url,onLoad,onProgress,onError){var scope=this,loader=new THREE.XHRLoader(scope.manager);loader.setCrossOrigin(this.crossOrigin),loader.load(url,function(text){onLoad(scope.parse(JSON.parse(text)))},onProgress,onError)},setCrossOrigin:function(value){this.crossOrigin=value},setTextures:function(value){this.textures=value},getTexture:function(name){var textures=this.textures;return textures[name]===undefined&&console.warn("THREE.MaterialLoader: Undefined texture",name),textures[name]},parse:function(json){var material=new THREE[json.type];if(material.uuid=json.uuid,json.name!==undefined&&(material.name=json.name),json.color!==undefined&&material.color.setHex(json.color),json.emissive!==undefined&&material.emissive.setHex(json.emissive),json.specular!==undefined&&material.specular.setHex(json.specular),json.shininess!==undefined&&(material.shininess=json.shininess),json.uniforms!==undefined&&(material.uniforms=json.uniforms),json.vertexShader!==undefined&&(material.vertexShader=json.vertexShader),json.fragmentShader!==undefined&&(material.fragmentShader=json.fragmentShader),json.vertexColors!==undefined&&(material.vertexColors=json.vertexColors),json.shading!==undefined&&(material.shading=json.shading),json.blending!==undefined&&(material.blending=json.blending),json.side!==undefined&&(material.side=json.side),json.opacity!==undefined&&(material.opacity=json.opacity),json.transparent!==undefined&&(material.transparent=json.transparent),json.alphaTest!==undefined&&(material.alphaTest=json.alphaTest),json.depthTest!==undefined&&(material.depthTest=json.depthTest),json.depthWrite!==undefined&&(material.depthWrite=json.depthWrite),json.wireframe!==undefined&&(material.wireframe=json.wireframe),json.wireframeLinewidth!==undefined&&(material.wireframeLinewidth=json.wireframeLinewidth),json.size!==undefined&&(material.size=json.size),json.sizeAttenuation!==undefined&&(material.sizeAttenuation=json.sizeAttenuation),json.map!==undefined&&(material.map=this.getTexture(json.map)),json.alphaMap!==undefined&&(material.alphaMap=this.getTexture(json.alphaMap),material.transparent=!0),json.bumpMap!==undefined&&(material.bumpMap=this.getTexture(json.bumpMap)),json.bumpScale!==undefined&&(material.bumpScale=json.bumpScale),json.normalMap!==undefined&&(material.normalMap=this.getTexture(json.normalMap)),json.normalScale&&(material.normalScale=new THREE.Vector2(json.normalScale,json.normalScale)),json.displacementMap!==undefined&&(material.displacementMap=this.getTexture(json.displacementMap)),json.displacementScale!==undefined&&(material.displacementScale=json.displacementScale),json.displacementBias!==undefined&&(material.displacementBias=json.displacementBias),json.specularMap!==undefined&&(material.specularMap=this.getTexture(json.specularMap)),json.envMap!==undefined&&(material.envMap=this.getTexture(json.envMap),material.combine=THREE.MultiplyOperation),json.reflectivity&&(material.reflectivity=json.reflectivity),json.lightMap!==undefined&&(material.lightMap=this.getTexture(json.lightMap)),json.lightMapIntensity!==undefined&&(material.lightMapIntensity=json.lightMapIntensity),json.aoMap!==undefined&&(material.aoMap=this.getTexture(json.aoMap)),json.aoMapIntensity!==undefined&&(material.aoMapIntensity=json.aoMapIntensity),json.materials!==undefined)for(var i=0,l=json.materials.length;i<l;i++)material.materials.push(this.parse(json.materials[i]));return material}},THREE.ObjectLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(url,onLoad,onProgress,onError){""===this.texturePath&&(this.texturePath=url.substring(0,url.lastIndexOf("/")+1));var scope=this,loader=new THREE.XHRLoader(scope.manager);loader.setCrossOrigin(this.crossOrigin),loader.load(url,function(text){scope.parse(JSON.parse(text),onLoad)},onProgress,onError)},setTexturePath:function(value){this.texturePath=value},setCrossOrigin:function(value){this.crossOrigin=value},parse:function(json,onLoad){var geometries=this.parseGeometries(json.geometries),images=this.parseImages(json.images,function(){onLoad!==undefined&&onLoad(object)}),textures=this.parseTextures(json.textures,images),materials=this.parseMaterials(json.materials,textures),object=this.parseObject(json.object,geometries,materials);return json.images!==undefined&&0!==json.images.length||onLoad!==undefined&&onLoad(object),object},parseGeometries:function(json){var geometries={};if(json!==undefined)for(var geometryLoader=new THREE.JSONLoader,bufferGeometryLoader=new THREE.BufferGeometryLoader,i=0,l=json.length;i<l;i++){var geometry,data=json[i];switch(data.type){case"PlaneGeometry":case"PlaneBufferGeometry":geometry=new THREE[data.type](data.width,data.height,data.widthSegments,data.heightSegments);break;case"BoxGeometry":case"CubeGeometry":geometry=new THREE.BoxGeometry(data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments);break;case"CircleBufferGeometry":geometry=new THREE.CircleBufferGeometry(data.radius,data.segments,data.thetaStart,data.thetaLength);break;case"CircleGeometry":geometry=new THREE.CircleGeometry(data.radius,data.segments,data.thetaStart,data.thetaLength);break;case"CylinderGeometry":geometry=new THREE.CylinderGeometry(data.radiusTop,data.radiusBottom,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength);break;case"SphereGeometry":geometry=new THREE.SphereGeometry(data.radius,data.widthSegments,data.heightSegments,data.phiStart,data.phiLength,data.thetaStart,data.thetaLength);break;case"SphereBufferGeometry":geometry=new THREE.SphereBufferGeometry(data.radius,data.widthSegments,data.heightSegments,data.phiStart,data.phiLength,data.thetaStart,data.thetaLength);break;case"DodecahedronGeometry":geometry=new THREE.DodecahedronGeometry(data.radius,data.detail);break;case"IcosahedronGeometry":geometry=new THREE.IcosahedronGeometry(data.radius,data.detail);break;case"OctahedronGeometry":geometry=new THREE.OctahedronGeometry(data.radius,data.detail);break;case"TetrahedronGeometry":geometry=new THREE.TetrahedronGeometry(data.radius,data.detail);break;case"RingGeometry":geometry=new THREE.RingGeometry(data.innerRadius,data.outerRadius,data.thetaSegments,data.phiSegments,data.thetaStart,data.thetaLength);break;case"TorusGeometry":geometry=new THREE.TorusGeometry(data.radius,data.tube,data.radialSegments,data.tubularSegments,data.arc);break;case"TorusKnotGeometry":geometry=new THREE.TorusKnotGeometry(data.radius,data.tube,data.radialSegments,data.tubularSegments,data.p,data.q,data.heightScale);break;case"TextGeometry":geometry=new THREE.TextGeometry(data.text,data.data);break;case"BufferGeometry":geometry=bufferGeometryLoader.parse(data);break;case"Geometry":geometry=geometryLoader.parse(data.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+data.type+'"');continue}geometry.uuid=data.uuid,data.name!==undefined&&(geometry.name=data.name),geometries[data.uuid]=geometry}return geometries},parseMaterials:function(json,textures){var materials={};if(json!==undefined){var loader=new THREE.MaterialLoader;loader.setTextures(textures);for(var i=0,l=json.length;i<l;i++){var material=loader.parse(json[i]);materials[material.uuid]=material}}return materials},parseImages:function(json,onLoad){function loadImage(url){return scope.manager.itemStart(url),loader.load(url,function(){scope.manager.itemEnd(url)})}var scope=this,images={};if(json!==undefined&&json.length>0){
var manager=new THREE.LoadingManager(onLoad),loader=new THREE.ImageLoader(manager);loader.setCrossOrigin(this.crossOrigin);for(var i=0,l=json.length;i<l;i++){var image=json[i],path=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(image.url)?image.url:scope.texturePath+image.url;images[image.uuid]=loadImage(path)}}return images},parseTextures:function(json,images){function parseConstant(value){return"number"==typeof value?value:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",value),THREE[value])}var textures={};if(json!==undefined)for(var i=0,l=json.length;i<l;i++){var data=json[i];data.image===undefined&&console.warn('THREE.ObjectLoader: No "image" specified for',data.uuid),images[data.image]===undefined&&console.warn("THREE.ObjectLoader: Undefined image",data.image);var texture=new THREE.Texture(images[data.image]);texture.needsUpdate=!0,texture.uuid=data.uuid,data.name!==undefined&&(texture.name=data.name),data.mapping!==undefined&&(texture.mapping=parseConstant(data.mapping)),data.offset!==undefined&&(texture.offset=new THREE.Vector2(data.offset[0],data.offset[1])),data.repeat!==undefined&&(texture.repeat=new THREE.Vector2(data.repeat[0],data.repeat[1])),data.minFilter!==undefined&&(texture.minFilter=parseConstant(data.minFilter)),data.magFilter!==undefined&&(texture.magFilter=parseConstant(data.magFilter)),data.anisotropy!==undefined&&(texture.anisotropy=data.anisotropy),Array.isArray(data.wrap)&&(texture.wrapS=parseConstant(data.wrap[0]),texture.wrapT=parseConstant(data.wrap[1])),textures[data.uuid]=texture}return textures},parseObject:function(){var matrix=new THREE.Matrix4;return function(data,geometries,materials){var object,getGeometry=function(name){return geometries[name]===undefined&&console.warn("THREE.ObjectLoader: Undefined geometry",name),geometries[name]},getMaterial=function(name){return materials[name]===undefined&&console.warn("THREE.ObjectLoader: Undefined material",name),materials[name]};switch(data.type){case"Scene":object=new THREE.Scene;break;case"PerspectiveCamera":object=new THREE.PerspectiveCamera(data.fov,data.aspect,data.near,data.far);break;case"OrthographicCamera":object=new THREE.OrthographicCamera(data.left,data.right,data.top,data.bottom,data.near,data.far);break;case"AmbientLight":object=new THREE.AmbientLight(data.color);break;case"DirectionalLight":object=new THREE.DirectionalLight(data.color,data.intensity);break;case"PointLight":object=new THREE.PointLight(data.color,data.intensity,data.distance,data.decay);break;case"SpotLight":object=new THREE.SpotLight(data.color,data.intensity,data.distance,data.angle,data.exponent,data.decay);break;case"HemisphereLight":object=new THREE.HemisphereLight(data.color,data.groundColor,data.intensity);break;case"Mesh":object=new THREE.Mesh(getGeometry(data.geometry),getMaterial(data.material));break;case"LOD":object=new THREE.LOD;break;case"Line":object=new THREE.Line(getGeometry(data.geometry),getMaterial(data.material),data.mode);break;case"PointCloud":case"Points":object=new THREE.Points(getGeometry(data.geometry),getMaterial(data.material));break;case"Sprite":object=new THREE.Sprite(getMaterial(data.material));break;case"Group":object=new THREE.Group;break;default:object=new THREE.Object3D}if(object.uuid=data.uuid,data.name!==undefined&&(object.name=data.name),data.matrix!==undefined?(matrix.fromArray(data.matrix),matrix.decompose(object.position,object.quaternion,object.scale)):(data.position!==undefined&&object.position.fromArray(data.position),data.rotation!==undefined&&object.rotation.fromArray(data.rotation),data.scale!==undefined&&object.scale.fromArray(data.scale)),data.castShadow!==undefined&&(object.castShadow=data.castShadow),data.receiveShadow!==undefined&&(object.receiveShadow=data.receiveShadow),data.visible!==undefined&&(object.visible=data.visible),data.userData!==undefined&&(object.userData=data.userData),data.children!==undefined)for(var child in data.children)object.add(this.parseObject(data.children[child],geometries,materials));if("LOD"===data.type)for(var levels=data.levels,l=0;l<levels.length;l++){var level=levels[l];(child=object.getObjectByProperty("uuid",level.object))!==undefined&&object.addLevel(child,level.distance)}return object}}()},THREE.TextureLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(url,onLoad,onProgress,onError){var scope=this,loader=new THREE.ImageLoader(scope.manager);loader.setCrossOrigin(this.crossOrigin),loader.load(url,function(image){var texture=new THREE.Texture(image);texture.needsUpdate=!0,onLoad!==undefined&&onLoad(texture)},onProgress,onError)},setCrossOrigin:function(value){this.crossOrigin=value}},THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager,this._parser=null},THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(url,onLoad,onProgress,onError){var scope=this,texture=new THREE.DataTexture,loader=new THREE.XHRLoader(this.manager);return loader.setCrossOrigin(this.crossOrigin),loader.setResponseType("arraybuffer"),loader.load(url,function(buffer){var texData=scope._parser(buffer);texData&&(undefined!==texData.image?texture.image=texData.image:undefined!==texData.data&&(texture.image.width=texData.width,texture.image.height=texData.height,texture.image.data=texData.data),texture.wrapS=undefined!==texData.wrapS?texData.wrapS:THREE.ClampToEdgeWrapping,texture.wrapT=undefined!==texData.wrapT?texData.wrapT:THREE.ClampToEdgeWrapping,texture.magFilter=undefined!==texData.magFilter?texData.magFilter:THREE.LinearFilter,texture.minFilter=undefined!==texData.minFilter?texData.minFilter:THREE.LinearMipMapLinearFilter,texture.anisotropy=undefined!==texData.anisotropy?texData.anisotropy:1,undefined!==texData.format&&(texture.format=texData.format),undefined!==texData.type&&(texture.type=texData.type),undefined!==texData.mipmaps&&(texture.mipmaps=texData.mipmaps),1===texData.mipmapCount&&(texture.minFilter=THREE.LinearFilter),texture.needsUpdate=!0,onLoad&&onLoad(texture,texData))},onProgress,onError),texture},setCrossOrigin:function(value){this.crossOrigin=value}},THREE.CompressedTextureLoader=function(manager){this.manager=manager!==undefined?manager:THREE.DefaultLoadingManager,this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(url,onLoad,onProgress,onError){var scope=this,images=[],texture=new THREE.CompressedTexture;texture.image=images;var loader=new THREE.XHRLoader(this.manager);if(loader.setCrossOrigin(this.crossOrigin),loader.setResponseType("arraybuffer"),Array.isArray(url))for(var loaded=0,loadTexture=function(i){loader.load(url[i],function(buffer){var texDatas=scope._parser(buffer,!0);images[i]={width:texDatas.width,height:texDatas.height,format:texDatas.format,mipmaps:texDatas.mipmaps},6===(loaded+=1)&&(1===texDatas.mipmapCount&&(texture.minFilter=THREE.LinearFilter),texture.format=texDatas.format,texture.needsUpdate=!0,onLoad&&onLoad(texture))},onProgress,onError)},i=0,il=url.length;i<il;++i)loadTexture(i);else loader.load(url,function(buffer){var texDatas=scope._parser(buffer,!0);if(texDatas.isCubemap)for(var faces=texDatas.mipmaps.length/texDatas.mipmapCount,f=0;f<faces;f++){images[f]={mipmaps:[]};for(var i=0;i<texDatas.mipmapCount;i++)images[f].mipmaps.push(texDatas.mipmaps[f*texDatas.mipmapCount+i]),images[f].format=texDatas.format,images[f].width=texDatas.width,images[f].height=texDatas.height}else texture.image.width=texDatas.width,texture.image.height=texDatas.height,texture.mipmaps=texDatas.mipmaps;1===texDatas.mipmapCount&&(texture.minFilter=THREE.LinearFilter),texture.format=texDatas.format,texture.needsUpdate=!0,onLoad&&onLoad(texture)},onProgress,onError);return texture},setCrossOrigin:function(value){this.crossOrigin=value}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=THREE.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(value){!0===value&&this.update(),this._needsUpdate=value},setValues:function(values){if(values!==undefined)for(var key in values){var newValue=values[key];if(newValue!==undefined){var currentValue=this[key];currentValue!==undefined?currentValue instanceof THREE.Color?currentValue.set(newValue):currentValue instanceof THREE.Vector3&&newValue instanceof THREE.Vector3?currentValue.copy(newValue):this[key]="overdraw"===key?Number(newValue):newValue:console.warn("THREE."+this.type+": '"+key+"' is not a property of this material.")}else console.warn("THREE.Material: '"+key+"' parameter is undefined.")}},toJSON:function(meta){var data={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};return data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color instanceof THREE.Color&&(data.color=this.color.getHex()),this.emissive instanceof THREE.Color&&(data.emissive=this.emissive.getHex()),this.specular instanceof THREE.Color&&(data.specular=this.specular.getHex()),this.shininess!==undefined&&(data.shininess=this.shininess),this.map instanceof THREE.Texture&&(data.map=this.map.toJSON(meta).uuid),this.alphaMap instanceof THREE.Texture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap instanceof THREE.Texture&&(data.lightMap=this.lightMap.toJSON(meta).uuid),this.bumpMap instanceof THREE.Texture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap instanceof THREE.Texture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalScale=this.normalScale),this.displacementMap instanceof THREE.Texture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.specularMap instanceof THREE.Texture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.envMap instanceof THREE.Texture&&(data.envMap=this.envMap.toJSON(meta).uuid,data.reflectivity=this.reflectivity),this.size!==undefined&&(data.size=this.size),this.sizeAttenuation!==undefined&&(data.sizeAttenuation=this.sizeAttenuation),this.vertexColors!==undefined&&this.vertexColors!==THREE.NoColors&&(data.vertexColors=this.vertexColors),this.shading!==undefined&&this.shading!==THREE.SmoothShading&&(data.shading=this.shading),this.blending!==undefined&&this.blending!==THREE.NormalBlending&&(data.blending=this.blending),this.side!==undefined&&this.side!==THREE.FrontSide&&(data.side=this.side),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=this.transparent),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.wireframe&&(data.wireframe=this.wireframe),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),data},clone:function(){return(new this.constructor).copy(this)},copy:function(source){return this.name=source.name,this.side=source.side,this.opacity=source.opacity,this.transparent=source.transparent,this.blending=source.blending,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.alphaTest=source.alphaTest,this.overdraw=source.overdraw,this.visible=source.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set wrapAround(boolean){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new THREE.Color}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(parameters){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(parameters)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.LineBasicMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.color.copy(source.color),this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this.vertexColors=source.vertexColors,this.fog=source.fog,this},THREE.LineDashedMaterial=function(parameters){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(parameters)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial,THREE.LineDashedMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.color.copy(source.color),this.linewidth=source.linewidth,this.scale=source.scale,this.dashSize=source.dashSize,this.gapSize=source.gapSize,this.vertexColors=source.vertexColors,this.fog=source.fog,this},THREE.MeshBasicMaterial=function(parameters){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(parameters)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshBasicMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.fog=source.fog,this.shading=source.shading,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.vertexColors=source.vertexColors,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this},THREE.MeshLambertMaterial=function(parameters){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.map=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(parameters)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshLambertMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.color.copy(source.color),this.emissive.copy(source.emissive),this.map=source.map,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.fog=source.fog,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.vertexColors=source.vertexColors,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this},THREE.MeshPhongMaterial=function(parameters){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(parameters)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshPhongMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.color.copy(source.color),this.emissive.copy(source.emissive),this.specular.copy(source.specular),this.shininess=source.shininess,this.metal=source.metal,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissiveMap=source.emissiveMap,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.fog=source.fog,this.shading=source.shading,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.vertexColors=source.vertexColors,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this},THREE.MeshDepthMaterial=function(parameters){THREE.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(parameters)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshDepthMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this},THREE.MeshNormalMaterial=function(parameters){THREE.Material.call(this,parameters),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(parameters)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshNormalMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this},THREE.MultiMaterial=function(materials){this.uuid=THREE.Math.generateUUID(),this.type="MultiMaterial",this.materials=materials instanceof Array?materials:[],this.visible=!0},THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(){for(var output={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=0,l=this.materials.length;i<l;i++)output.materials.push(this.materials[i].toJSON());return output.visible=this.visible,output},clone:function(){for(var material=new this.constructor,i=0;i<this.materials.length;i++)material.materials.push(this.materials[i].clone());return material.visible=this.visible,material}},THREE.MeshFaceMaterial=THREE.MultiMaterial,THREE.PointsMaterial=function(parameters){THREE.Material.call(this),this.type="PointsMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(parameters)},THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial,THREE.PointsMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.size=source.size,this.sizeAttenuation=source.sizeAttenuation,this.vertexColors=source.vertexColors,this.fog=source.fog,this},THREE.PointCloudMaterial=function(parameters){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(parameters)},THREE.ParticleBasicMaterial=function(parameters){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(parameters)},THREE.ParticleSystemMaterial=function(parameters){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(parameters)},THREE.ShaderMaterial=function(parameters){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.derivatives=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=undefined,parameters!==undefined&&(parameters.attributes!==undefined&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(parameters))},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.ShaderMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=THREE.UniformsUtils.clone(source.uniforms),this.attributes=source.attributes,this.defines=source.defines,this.shading=source.shading,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.fog=source.fog,this.lights=source.lights,this.vertexColors=source.vertexColors,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this.derivatives=source.derivatives,this},THREE.ShaderMaterial.prototype.toJSON=function(meta){var data=THREE.Material.prototype.toJSON.call(this,meta);return data.uniforms=this.uniforms,data.attributes=this.attributes,data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader,data},THREE.RawShaderMaterial=function(parameters){THREE.ShaderMaterial.call(this,parameters),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial,THREE.SpriteMaterial=function(parameters){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(parameters)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial,THREE.SpriteMaterial.prototype.copy=function(source){return THREE.Material.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.rotation=source.rotation,this.fog=source.fog,this},THREE.Texture=function(image,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.sourceFile="",this.image=image!==undefined?image:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=mapping!==undefined?mapping:THREE.Texture.DEFAULT_MAPPING,this.wrapS=wrapS!==undefined?wrapS:THREE.ClampToEdgeWrapping,this.wrapT=wrapT!==undefined?wrapT:THREE.ClampToEdgeWrapping,this.magFilter=magFilter!==undefined?magFilter:THREE.LinearFilter,this.minFilter=minFilter!==undefined?minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=anisotropy!==undefined?anisotropy:1,this.format=format!==undefined?format:THREE.RGBAFormat,this.type=type!==undefined?type:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.version=0,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=undefined,THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(value){!0===value&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(source){return this.image=source.image,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this},toJSON:function(meta){function getDataURL(image){var canvas;return image.toDataURL!==undefined?canvas=image:((canvas=document.createElement("canvas")).width=image.width,canvas.height=image.height,canvas.getContext("2d").drawImage(image,0,0,image.width,image.height)),canvas.width>2048||canvas.height>2048?canvas.toDataURL("image/jpeg",.6):canvas.toDataURL("image/png")}if(meta.textures[this.uuid]!==undefined)return meta.textures[this.uuid];var output={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(this.image!==undefined){var image=this.image;image.uuid===undefined&&(image.uuid=THREE.Math.generateUUID()),meta.images[image.uuid]===undefined&&(meta.images[image.uuid]={uuid:image.uuid,url:getDataURL(image)}),output.image=image.uuid}return meta.textures[this.uuid]=output,output},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(uv){if(this.mapping===THREE.UVMapping){if(uv.multiply(this.repeat),uv.add(this.offset),uv.x<0||uv.x>1)switch(this.wrapS){case THREE.RepeatWrapping:uv.x=uv.x-Math.floor(uv.x);break;case THREE.ClampToEdgeWrapping:uv.x=uv.x<0?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(uv.x)%2)?uv.x=Math.ceil(uv.x)-uv.x:uv.x=uv.x-Math.floor(uv.x)}if(uv.y<0||uv.y>1)switch(this.wrapT){case THREE.RepeatWrapping:uv.y=uv.y-Math.floor(uv.y);break;case THREE.ClampToEdgeWrapping:uv.y=uv.y<0?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(uv.y)%2)?uv.y=Math.ceil(uv.y)-uv.y:uv.y=uv.y-Math.floor(uv.y)}this.flipY&&(uv.y=1-uv.y)}}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CanvasTexture=function(canvas,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){THREE.Texture.call(this,canvas,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.needsUpdate=!0},THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture,THREE.CubeTexture=function(images,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){mapping=mapping!==undefined?mapping:THREE.CubeReflectionMapping,THREE.Texture.call(this,images,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.images=images,this.flipY=!1},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.prototype.constructor=THREE.CubeTexture,THREE.CubeTexture.prototype.copy=function(source){return THREE.Texture.prototype.copy.call(this,source),this.images=source.images,this},THREE.CompressedTexture=function(mipmaps,width,height,format,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy){THREE.Texture.call(this,null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.image={width:width,height:height},this.mipmaps=mipmaps,this.flipY=!1,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture,THREE.DataTexture=function(data,width,height,format,type,mapping,wrapS,wrapT,magFilter,minFilter,anisotropy){THREE.Texture.call(this,null,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.image={data:data,width:width,height:height},this.magFilter=magFilter!==undefined?magFilter:THREE.NearestFilter,this.minFilter=minFilter!==undefined?minFilter:THREE.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.VideoTexture=function(video,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy){THREE.Texture.call(this,video,mapping,wrapS,wrapT,magFilter,minFilter,format,type,anisotropy),this.generateMipmaps=!1;var scope=this,update=function(){requestAnimationFrame(update),video.readyState===video.HAVE_ENOUGH_DATA&&(scope.needsUpdate=!0)};update()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.VideoTexture.prototype.constructor=THREE.VideoTexture,THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.Group.prototype.constructor=THREE.Group,THREE.Points=function(geometry,material){THREE.Object3D.call(this),this.type="Points",this.geometry=geometry!==undefined?geometry:new THREE.Geometry,this.material=material!==undefined?material:new THREE.PointsMaterial({color:16777215*Math.random()})},THREE.Points.prototype=Object.create(THREE.Object3D.prototype),THREE.Points.prototype.constructor=THREE.Points,THREE.Points.prototype.raycast=function(){var inverseMatrix=new THREE.Matrix4,ray=new THREE.Ray;return function(raycaster,intersects){function testPoint(point,index){var rayPointDistanceSq=ray.distanceSqToPoint(point);if(rayPointDistanceSq<localThresholdSq){var intersectPoint=ray.closestPointToPoint(point);intersectPoint.applyMatrix4(object.matrixWorld);var distance=raycaster.ray.origin.distanceTo(intersectPoint);if(distance<raycaster.near||distance>raycaster.far)return;intersects.push({distance:distance,distanceToRay:Math.sqrt(rayPointDistanceSq),point:intersectPoint.clone(),index:index,face:null,object:object})}}var object=this,geometry=object.geometry,threshold=raycaster.params.Points.threshold;if(inverseMatrix.getInverse(this.matrixWorld),ray.copy(raycaster.ray).applyMatrix4(inverseMatrix),
null===geometry.boundingBox||!1!==ray.isIntersectionBox(geometry.boundingBox)){var localThreshold=threshold/((this.scale.x+this.scale.y+this.scale.z)/3),localThresholdSq=localThreshold*localThreshold,position=new THREE.Vector3;if(geometry instanceof THREE.BufferGeometry){var index=geometry.index,positions=geometry.attributes.position.array;if(null!==index)for(var indices=index.array,i=0,il=indices.length;i<il;i++){var a=indices[i];position.fromArray(positions,3*a),testPoint(position,a)}else{i=0;for(var l=positions.length/3;i<l;i++)position.fromArray(positions,3*i),testPoint(position,i)}}else{var vertices=geometry.vertices;for(i=0,l=vertices.length;i<l;i++)testPoint(vertices[i],i)}}}}(),THREE.Points.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},THREE.Points.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return meta.geometries[this.geometry.uuid]===undefined&&(meta.geometries[this.geometry.uuid]=this.geometry.toJSON()),meta.materials[this.material.uuid]===undefined&&(meta.materials[this.material.uuid]=this.material.toJSON()),data.object.geometry=this.geometry.uuid,data.object.material=this.material.uuid,data},THREE.PointCloud=function(geometry,material){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new THREE.Points(geometry,material)},THREE.ParticleSystem=function(geometry,material){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new THREE.Points(geometry,material)},THREE.Line=function(geometry,material,mode){if(1===mode)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(geometry,material);THREE.Object3D.call(this),this.type="Line",this.geometry=geometry!==undefined?geometry:new THREE.Geometry,this.material=material!==undefined?material:new THREE.LineBasicMaterial({color:16777215*Math.random()})},THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.constructor=THREE.Line,THREE.Line.prototype.raycast=function(){var inverseMatrix=new THREE.Matrix4,ray=new THREE.Ray,sphere=new THREE.Sphere;return function(raycaster,intersects){var precision=raycaster.linePrecision,precisionSq=precision*precision,geometry=this.geometry;if(null===geometry.boundingSphere&&geometry.computeBoundingSphere(),sphere.copy(geometry.boundingSphere),sphere.applyMatrix4(this.matrixWorld),!1!==raycaster.ray.isIntersectionSphere(sphere)){inverseMatrix.getInverse(this.matrixWorld),ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);var vStart=new THREE.Vector3,vEnd=new THREE.Vector3,interSegment=new THREE.Vector3,interRay=new THREE.Vector3,step=this instanceof THREE.LineSegments?2:1;if(geometry instanceof THREE.BufferGeometry){var index=geometry.index,attributes=geometry.attributes;if(null!==index)for(var indices=index.array,positions=attributes.position.array,i=0,l=indices.length-1;i<l;i+=step){var a=indices[i],b=indices[i+1];if(vStart.fromArray(positions,3*a),vEnd.fromArray(positions,3*b),!(ray.distanceSqToSegment(vStart,vEnd,interRay,interSegment)>precisionSq))interRay.applyMatrix4(this.matrixWorld),(distance=raycaster.ray.origin.distanceTo(interRay))<raycaster.near||distance>raycaster.far||intersects.push({distance:distance,point:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}else for(i=0,l=(positions=attributes.position.array).length/3-1;i<l;i+=step){if(vStart.fromArray(positions,3*i),vEnd.fromArray(positions,3*i+3),!(ray.distanceSqToSegment(vStart,vEnd,interRay,interSegment)>precisionSq))interRay.applyMatrix4(this.matrixWorld),(distance=raycaster.ray.origin.distanceTo(interRay))<raycaster.near||distance>raycaster.far||intersects.push({distance:distance,point:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else if(geometry instanceof THREE.Geometry){var vertices=geometry.vertices,nbVertices=vertices.length;for(i=0;i<nbVertices-1;i+=step){var distance;if(!(ray.distanceSqToSegment(vertices[i],vertices[i+1],interRay,interSegment)>precisionSq))interRay.applyMatrix4(this.matrixWorld),(distance=raycaster.ray.origin.distanceTo(interRay))<raycaster.near||distance>raycaster.far||intersects.push({distance:distance,point:interSegment.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}}}(),THREE.Line.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},THREE.Line.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return meta.geometries[this.geometry.uuid]===undefined&&(meta.geometries[this.geometry.uuid]=this.geometry.toJSON()),meta.materials[this.material.uuid]===undefined&&(meta.materials[this.material.uuid]=this.material.toJSON()),data.object.geometry=this.geometry.uuid,data.object.material=this.material.uuid,data},THREE.LineStrip=0,THREE.LinePieces=1,THREE.LineSegments=function(geometry,material){THREE.Line.call(this,geometry,material),this.type="LineSegments"},THREE.LineSegments.prototype=Object.create(THREE.Line.prototype),THREE.LineSegments.prototype.constructor=THREE.LineSegments,THREE.Mesh=function(geometry,material){THREE.Object3D.call(this),this.type="Mesh",this.geometry=geometry!==undefined?geometry:new THREE.Geometry,this.material=material!==undefined?material:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets!==undefined&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var m=0,ml=this.geometry.morphTargets.length;m<ml;m++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[m].name]=m}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(name){return this.morphTargetDictionary[name]!==undefined?this.morphTargetDictionary[name]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+name+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){function uvIntersection(point,p1,p2,p3,uv1,uv2,uv3){return THREE.Triangle.barycoordFromPoint(point,p1,p2,p3,barycoord),uv1.multiplyScalar(barycoord.x),uv2.multiplyScalar(barycoord.y),uv3.multiplyScalar(barycoord.z),uv1.add(uv2).add(uv3),uv1.clone()}var inverseMatrix=new THREE.Matrix4,ray=new THREE.Ray,sphere=new THREE.Sphere,vA=new THREE.Vector3,vB=new THREE.Vector3,vC=new THREE.Vector3,tempA=new THREE.Vector3,tempB=new THREE.Vector3,tempC=new THREE.Vector3,uvA=new THREE.Vector2,uvB=new THREE.Vector2,uvC=new THREE.Vector2,barycoord=new THREE.Vector3,intersectionPoint=new THREE.Vector3,intersectionPointWorld=new THREE.Vector3;return function(raycaster,intersects){var a,b,c,geometry=this.geometry,material=this.material;if(material!==undefined&&(null===geometry.boundingSphere&&geometry.computeBoundingSphere(),sphere.copy(geometry.boundingSphere),sphere.applyMatrix4(this.matrixWorld),!1!==raycaster.ray.isIntersectionSphere(sphere)&&(inverseMatrix.getInverse(this.matrixWorld),ray.copy(raycaster.ray).applyMatrix4(inverseMatrix),null===geometry.boundingBox||!1!==ray.isIntersectionBox(geometry.boundingBox))))if(geometry instanceof THREE.BufferGeometry){var index=geometry.index,attributes=geometry.attributes;if(null!==index)for(var indices=index.array,positions=attributes.position.array,i=0,l=indices.length;i<l;i+=3){if(a=indices[i],b=indices[i+1],c=indices[i+2],vA.fromArray(positions,3*a),vB.fromArray(positions,3*b),vC.fromArray(positions,3*c),material.side===THREE.BackSide){if(null===ray.intersectTriangle(vC,vB,vA,!0,intersectionPoint))continue}else if(null===ray.intersectTriangle(vA,vB,vC,material.side!==THREE.DoubleSide,intersectionPoint))continue;if(intersectionPointWorld.copy(intersectionPoint),intersectionPointWorld.applyMatrix4(this.matrixWorld),!((distance=raycaster.ray.origin.distanceTo(intersectionPointWorld))<raycaster.near||distance>raycaster.far)){if(attributes.uv!==undefined){var uvs=attributes.uv.array;uvA.fromArray(uvs,2*a),uvB.fromArray(uvs,2*b),uvC.fromArray(uvs,2*c),uv=uvIntersection(intersectionPoint,vA,vB,vC,uvA,uvB,uvC)}intersects.push({distance:distance,point:intersectionPointWorld.clone(),uv:uv,face:new THREE.Face3(a,b,c,THREE.Triangle.normal(vA,vB,vC)),faceIndex:Math.floor(i/3),object:this})}}else for(i=0,l=(positions=attributes.position.array).length;i<l;i+=9){if(vA.fromArray(positions,i),vB.fromArray(positions,i+3),vC.fromArray(positions,i+6),material.side===THREE.BackSide){if(null===ray.intersectTriangle(vC,vB,vA,!0,intersectionPoint))continue}else if(null===ray.intersectTriangle(vA,vB,vC,material.side!==THREE.DoubleSide,intersectionPoint))continue;if(intersectionPointWorld.copy(intersectionPoint),intersectionPointWorld.applyMatrix4(this.matrixWorld),!((distance=raycaster.ray.origin.distanceTo(intersectionPointWorld))<raycaster.near||distance>raycaster.far)){if(attributes.uv!==undefined){uvs=attributes.uv.array;uvA.fromArray(uvs,i),uvB.fromArray(uvs,i+2),uvC.fromArray(uvs,i+4),uv=uvIntersection(intersectionPoint,vA,vB,vC,uvA,uvB,uvC)}b=(a=i/3)+1,c=a+2,intersects.push({distance:distance,point:intersectionPointWorld.clone(),uv:uv,face:new THREE.Face3(a,b,c,THREE.Triangle.normal(vA,vB,vC)),index:a,object:this})}}}else if(geometry instanceof THREE.Geometry)for(var isFaceMaterial=material instanceof THREE.MeshFaceMaterial,materials=!0===isFaceMaterial?material.materials:null,vertices=geometry.vertices,faces=geometry.faces,f=0,fl=faces.length;f<fl;f++){var face=faces[f],faceMaterial=!0===isFaceMaterial?materials[face.materialIndex]:material;if(faceMaterial!==undefined){if(a=vertices[face.a],b=vertices[face.b],c=vertices[face.c],!0===faceMaterial.morphTargets){var morphTargets=geometry.morphTargets,morphInfluences=this.morphTargetInfluences;vA.set(0,0,0),vB.set(0,0,0),vC.set(0,0,0);for(var t=0,tl=morphTargets.length;t<tl;t++){var influence=morphInfluences[t];if(0!==influence){var targets=morphTargets[t].vertices;vA.addScaledVector(tempA.subVectors(targets[face.a],a),influence),vB.addScaledVector(tempB.subVectors(targets[face.b],b),influence),vC.addScaledVector(tempC.subVectors(targets[face.c],c),influence)}}vA.add(a),vB.add(b),vC.add(c),a=vA,b=vB,c=vC}if(faceMaterial.side===THREE.BackSide){if(null===ray.intersectTriangle(c,b,a,!0,intersectionPoint))continue}else if(null===ray.intersectTriangle(a,b,c,faceMaterial.side!==THREE.DoubleSide,intersectionPoint))continue;var distance;if(intersectionPointWorld.copy(intersectionPoint),intersectionPointWorld.applyMatrix4(this.matrixWorld),!((distance=raycaster.ray.origin.distanceTo(intersectionPointWorld))<raycaster.near||distance>raycaster.far)){var uv;if(geometry.faceVertexUvs[0].length>0){uvs=geometry.faceVertexUvs[0][f];uvA.copy(uvs[0]),uvB.copy(uvs[1]),uvC.copy(uvs[2]),uv=uvIntersection(intersectionPoint,a,b,c,uvA,uvB,uvC)}intersects.push({distance:distance,point:intersectionPointWorld.clone(),uv:uv,face:face,faceIndex:f,object:this})}}}}}(),THREE.Mesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},THREE.Mesh.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return meta.geometries[this.geometry.uuid]===undefined&&(meta.geometries[this.geometry.uuid]=this.geometry.toJSON(meta)),meta.materials[this.material.uuid]===undefined&&(meta.materials[this.material.uuid]=this.material.toJSON(meta)),data.object.geometry=this.geometry.uuid,data.object.material=this.material.uuid,data},THREE.Bone=function(skin){THREE.Object3D.call(this),this.type="Bone",this.skin=skin},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.constructor=THREE.Bone,THREE.Bone.prototype.copy=function(source){return THREE.Object3D.prototype.copy.call(this,source),this.skin=source.skin,this},THREE.Skeleton=function(bones,boneInverses,useVertexTexture){if(this.useVertexTexture=useVertexTexture===undefined||useVertexTexture,this.identityMatrix=new THREE.Matrix4,bones=bones||[],this.bones=bones.slice(0),this.useVertexTexture){var size=Math.sqrt(4*this.bones.length);size=THREE.Math.nextPowerOfTwo(Math.ceil(size)),size=Math.max(size,4),this.boneTextureWidth=size,this.boneTextureHeight=size,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(boneInverses===undefined)this.calculateInverses();else if(this.bones.length===boneInverses.length)this.boneInverses=boneInverses.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var b=0,bl=this.bones.length;b<bl;b++)this.boneInverses.push(new THREE.Matrix4)}},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var b=0,bl=this.bones.length;b<bl;b++){var inverse=new THREE.Matrix4;this.bones[b]&&inverse.getInverse(this.bones[b].matrixWorld),this.boneInverses.push(inverse)}},THREE.Skeleton.prototype.pose=function(){for(var bone,b=0,bl=this.bones.length;b<bl;b++)(bone=this.bones[b])&&bone.matrixWorld.getInverse(this.boneInverses[b]);for(b=0,bl=this.bones.length;b<bl;b++)(bone=this.bones[b])&&(bone.parent?(bone.matrix.getInverse(bone.parent.matrixWorld),bone.matrix.multiply(bone.matrixWorld)):bone.matrix.copy(bone.matrixWorld),bone.matrix.decompose(bone.position,bone.quaternion,bone.scale))},THREE.Skeleton.prototype.update=function(){var offsetMatrix=new THREE.Matrix4;return function(){for(var b=0,bl=this.bones.length;b<bl;b++){var matrix=this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix;offsetMatrix.multiplyMatrices(matrix,this.boneInverses[b]),offsetMatrix.flattenToArrayOffset(this.boneMatrices,16*b)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.Skeleton.prototype.clone=function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)},THREE.SkinnedMesh=function(geometry,material,useVertexTexture){THREE.Mesh.call(this,geometry,material),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4;var bones=[];if(this.geometry&&this.geometry.bones!==undefined){for(var bone,gbone,b=0,bl=this.geometry.bones.length;b<bl;++b)gbone=this.geometry.bones[b],bone=new THREE.Bone(this),bones.push(bone),bone.name=gbone.name,bone.position.fromArray(gbone.pos),bone.quaternion.fromArray(gbone.rotq),gbone.scl!==undefined&&bone.scale.fromArray(gbone.scl);for(b=0,bl=this.geometry.bones.length;b<bl;++b)-1!==(gbone=this.geometry.bones[b]).parent?bones[gbone.parent].add(bones[b]):this.add(bones[b])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(bones,undefined,useVertexTexture),this.matrixWorld)},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh,THREE.SkinnedMesh.prototype.bind=function(skeleton,bindMatrix){this.skeleton=skeleton,bindMatrix===undefined&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),bindMatrix=this.matrixWorld),this.bindMatrix.copy(bindMatrix),this.bindMatrixInverse.getInverse(bindMatrix)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var i=0;i<this.geometry.skinIndices.length;i++){var sw=this.geometry.skinWeights[i],scale=1/sw.lengthManhattan();scale!==Infinity?sw.multiplyScalar(scale):sw.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)},THREE.MorphAnimMesh=function(geometry,material){THREE.Mesh.call(this,geometry,material),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.constructor=THREE.MorphAnimMesh,THREE.MorphAnimMesh.prototype.setFrameRange=function(start,end){this.startKeyframe=start,this.endKeyframe=end,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var geometry=this.geometry;geometry.animations||(geometry.animations={});for(var firstAnimation,animations=geometry.animations,pattern=/([a-z]+)_?(\d+)/,i=0,il=geometry.morphTargets.length;i<il;i++){var parts=geometry.morphTargets[i].name.match(pattern);if(parts&&parts.length>1){var label=parts[1];animations[label]||(animations[label]={start:Infinity,end:-Infinity});var animation=animations[label];i<animation.start&&(animation.start=i),i>animation.end&&(animation.end=i),firstAnimation||(firstAnimation=label)}}geometry.firstAnimation=firstAnimation},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(label,start,end){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[label]={start:start,end:end}},THREE.MorphAnimMesh.prototype.playAnimation=function(label,fps){var animation=this.geometry.animations[label];animation?(this.setFrameRange(animation.start,animation.end),this.duration=(animation.end-animation.start)/fps*1e3,this.time=0):console.warn("THREE.MorphAnimMesh: animation["+label+"] undefined in .playAnimation()")},THREE.MorphAnimMesh.prototype.updateAnimation=function(delta){var frameTime=this.duration/this.length;this.time+=this.direction*delta,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var keyframe=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/frameTime),0,this.length-1),influences=this.morphTargetInfluences;keyframe!==this.currentKeyframe&&(influences[this.lastKeyframe]=0,influences[this.currentKeyframe]=1,influences[keyframe]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=keyframe);var mix=this.time%frameTime/frameTime;this.directionBackwards&&(mix=1-mix),influences[this.currentKeyframe]=mix,influences[this.lastKeyframe]=1-mix},THREE.MorphAnimMesh.prototype.interpolateTargets=function(a,b,t){for(var influences=this.morphTargetInfluences,i=0,l=influences.length;i<l;i++)influences[i]=0;a>-1&&(influences[a]=1-t),b>-1&&(influences[b]=t)},THREE.MorphAnimMesh.prototype.copy=function(source){return THREE.Mesh.prototype.copy.call(this,source),this.duration=source.duration,this.mirroredLoop=source.mirroredLoop,this.time=source.time,this.lastKeyframe=source.lastKeyframe,this.currentKeyframe=source.currentKeyframe,this.direction=source.direction,this.directionBackwards=source.directionBackwards,this},THREE.LOD=function(){THREE.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}})},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.addLevel=function(object,distance){distance===undefined&&(distance=0),distance=Math.abs(distance);for(var levels=this.levels,l=0;l<levels.length&&!(distance<levels[l].distance);l++);levels.splice(l,0,{distance:distance,object:object}),this.add(object)},THREE.LOD.prototype.getObjectForDistance=function(distance){for(var levels=this.levels,i=1,l=levels.length;i<l&&!(distance<levels[i].distance);i++);return levels[i-1].object},THREE.LOD.prototype.raycast=function(){var matrixPosition=new THREE.Vector3;return function(raycaster,intersects){matrixPosition.setFromMatrixPosition(this.matrixWorld);var distance=raycaster.ray.origin.distanceTo(matrixPosition);this.getObjectForDistance(distance).raycast(raycaster,intersects)}}(),THREE.LOD.prototype.update=function(){var v1=new THREE.Vector3,v2=new THREE.Vector3;return function(camera){var levels=this.levels;if(levels.length>1){v1.setFromMatrixPosition(camera.matrixWorld),v2.setFromMatrixPosition(this.matrixWorld);var distance=v1.distanceTo(v2);levels[0].object.visible=!0;for(var i=1,l=levels.length;i<l&&distance>=levels[i].distance;i++)levels[i-1].object.visible=!1,levels[i].object.visible=!0;for(;i<l;i++)levels[i].object.visible=!1}}}(),THREE.LOD.prototype.copy=function(source){THREE.Object3D.prototype.copy.call(this,source,!1);for(var levels=source.levels,i=0,l=levels.length;i<l;i++){var level=levels[i];this.addLevel(level.object.clone(),level.distance)}return this},THREE.LOD.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);data.object.levels=[];for(var levels=this.levels,i=0,l=levels.length;i<l;i++){var level=levels[i];data.object.levels.push({object:level.object.uuid,distance:level.distance})}return data},THREE.Sprite=function(){var indices=new Uint16Array([0,1,2,0,2,3]),vertices=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),uvs=new Float32Array([0,0,1,0,1,1,0,1]),geometry=new THREE.BufferGeometry;return geometry.setIndex(new THREE.BufferAttribute(indices,1)),geometry.addAttribute("position",new THREE.BufferAttribute(vertices,3)),geometry.addAttribute("uv",new THREE.BufferAttribute(uvs,2)),function(material){THREE.Object3D.call(this),this.type="Sprite",this.geometry=geometry,this.material=material!==undefined?material:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.raycast=function(){var matrixPosition=new THREE.Vector3;return function(raycaster,intersects){matrixPosition.setFromMatrixPosition(this.matrixWorld);var distanceSq=raycaster.ray.distanceSqToPoint(matrixPosition);distanceSq>this.scale.x*this.scale.y||intersects.push({distance:Math.sqrt(distanceSq),point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(){return new this.constructor(this.material).copy(this)},THREE.Sprite.prototype.toJSON=function(meta){var data=THREE.Object3D.prototype.toJSON.call(this,meta);return meta.materials[this.material.uuid]===undefined&&(meta.materials[this.material.uuid]=this.material.toJSON()),data.object.material=this.material.uuid,data},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(texture,size,distance,blending,color){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=undefined,texture!==undefined&&this.add(texture,size,distance,blending,color)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.constructor=THREE.LensFlare,THREE.LensFlare.prototype.add=function(texture,size,distance,blending,color,opacity){size===undefined&&(size=-1),distance===undefined&&(distance=0),opacity===undefined&&(opacity=1),color===undefined&&(color=new THREE.Color(16777215)),blending===undefined&&(blending=THREE.NormalBlending),distance=Math.min(distance,Math.max(0,distance)),this.lensFlares.push({texture:texture,size:size,distance:distance,x:0,y:0,z:0,scale:1,rotation:0,opacity:opacity,color:color,blending:blending})},THREE.LensFlare.prototype.updateLensFlares=function(){var f,flare,fl=this.lensFlares.length,vecX=2*-this.positionScreen.x,vecY=2*-this.positionScreen.y;for(f=0;f<fl;f++)(flare=this.lensFlares[f]).x=this.positionScreen.x+vecX*flare.distance,flare.y=this.positionScreen.y+vecY*flare.distance,flare.wantedRotation=flare.x*Math.PI*.25,flare.rotation+=.25*(flare.wantedRotation-flare.rotation)},THREE.LensFlare.prototype.copy=function(source){THREE.Object3D.prototype.copy.call(this,source),this.positionScreen.copy(source.positionScreen),this.customUpdateCallback=source.customUpdateCallback;for(var i=0,l=source.lensFlares.length;i<l;i++)this.lensFlares.push(source.lensFlares[i]);return this},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.copy=function(source){return THREE.Object3D.prototype.copy.call(this,source),null!==source.fog&&(this.fog=source.fog.clone()),null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.autoUpdate=source.autoUpdate,this.matrixAutoUpdate=source.matrixAutoUpdate,this},THREE.Fog=function(color,near,far){this.name="",this.color=new THREE.Color(color),this.near=near!==undefined?near:1,this.far=far!==undefined?far:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(color,density){this.name="",this.color=new THREE.Color(color),this.density=density!==undefined?density:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n",THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif",THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif",THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\t// geometry term is (n\u22c5l)(n\u22c5v) / 4(n\u22c5l)(n\u22c5v)\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\t// factor of 1/PI in distribution term omitted\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t//float dotNL = saturate( dot( normal, lightDir ) );\n\t//float dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n",THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n",THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n\ttotalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n",THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",
THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\t// attenuation\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\t\t\t// attenuation\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack += ambientLightColor;\n\n#endif\n",THREE.ShaderChunk.lights_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lightPosition = pointLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\t// attenuation\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\t// diffuse\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\t\t// specular\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\t\t\t// attenuation\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\t\t\t// diffuse\n\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\t\t\t// specular\n\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\n\n\t\t// specular\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalDiffuseLight += lightColor;\n\n\t\t// specular (sky term only)\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\n\n\t}\n\n#endif\n\n#ifdef METAL\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n\n#else\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n",THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n\t\t#endif\n\n\t}\n\n\toutgoingLight = outgoingLight * shadowColor;\n\n#endif\n",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif",THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\n#endif",THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n",THREE.UniformsUtils={merge:function(uniforms){for(var merged={},u=0;u<uniforms.length;u++){var tmp=this.clone(uniforms[u]);for(var p in tmp)merged[p]=tmp[p]}return merged},clone:function(uniforms_src){var uniforms_dst={};for(var u in uniforms_src)for(var p in uniforms_dst[u]={},uniforms_src[u]){var parameter_src=uniforms_src[u][p];parameter_src instanceof THREE.Color||parameter_src instanceof THREE.Vector2||parameter_src instanceof THREE.Vector3||parameter_src instanceof THREE.Vector4||parameter_src instanceof THREE.Matrix3||parameter_src instanceof THREE.Matrix4||parameter_src instanceof THREE.Texture?uniforms_dst[u][p]=parameter_src.clone():Array.isArray(parameter_src)?uniforms_dst[u][p]=parameter_src.slice():uniforms_dst[u][p]=parameter_src}return uniforms_dst}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},points:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},
shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );","\tvec3 totalAmbientLight = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.aomap_fragment,"\toutgoingLight = diffuseColor.rgb * totalAmbientLight;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED","\t\tif ( gl_FrontFacing )","\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;","\t\telse","\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;","\t#else","\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;","\t#endif",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.displacementmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.displacementmap_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"\tvViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );","\tvec3 totalAmbientLight = ambientLightColor;","\tvec3 totalEmissiveLight = emissive;",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\t#ifdef USE_SIZEATTENUATION","\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );","\t#else","\t\tgl_PointSize = size;","\t#endif","\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tif ( mod( vLineDistance, totalSize ) > dashSize ) {","\t\tdiscard;","\t}","\tvec3 outgoingLight = vec3( 0.0 );","\tvec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );","\tgl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvWorldPosition = transformDirection( position, modelMatrix );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","\tvWorldPosition = transformDirection( position, modelMatrix );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","\tres -= res.xxyz * bit_mask;","\treturn res;","}","void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","\t#else","\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","\t#endif","}"].join("\n")}},THREE.WebGLRenderer=function(parameters){function glClearColor(r,g,b,a){!0===_premultipliedAlpha&&(r*=a,g*=a,b*=a),_gl.clearColor(r,g,b,a)}function setDefaultGLState(){state.init(),_gl.viewport(_viewportX,_viewportY,_viewportWidth,_viewportHeight),glClearColor(_clearColor.r,_clearColor.g,_clearColor.b,_clearAlpha)}function resetGLState(){_currentProgram=null,_currentCamera=null,_currentGeometryProgram="",_currentMaterialId=-1,_lightsNeedUpdate=!0,state.reset()}function onContextLost(event){event.preventDefault(),resetGLState(),setDefaultGLState(),properties.clear()}function onTextureDispose(event){var texture=event.target;texture.removeEventListener("dispose",onTextureDispose),deallocateTexture(texture),_infoMemory.textures--}function onRenderTargetDispose(event){var renderTarget=event.target;renderTarget.removeEventListener("dispose",onRenderTargetDispose),deallocateRenderTarget(renderTarget),_infoMemory.textures--}function onMaterialDispose(event){var material=event.target;material.removeEventListener("dispose",onMaterialDispose),deallocateMaterial(material)}function deallocateTexture(texture){var textureProperties=properties.get(texture);if(texture.image&&textureProperties.__image__webglTextureCube)_gl.deleteTexture(textureProperties.__image__webglTextureCube);else{if(textureProperties.__webglInit===undefined)return;_gl.deleteTexture(textureProperties.__webglTexture)}properties["delete"](texture)}function deallocateRenderTarget(renderTarget){var renderTargetProperties=properties.get(renderTarget);if(renderTarget&&renderTargetProperties.__webglTexture!==undefined){if(_gl.deleteTexture(renderTargetProperties.__webglTexture),renderTarget instanceof THREE.WebGLRenderTargetCube)for(var i=0;i<6;i++)_gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer[i]),_gl.deleteRenderbuffer(renderTargetProperties.__webglRenderbuffer[i]);else _gl.deleteFramebuffer(renderTargetProperties.__webglFramebuffer),_gl.deleteRenderbuffer(renderTargetProperties.__webglRenderbuffer);properties["delete"](renderTarget)}}function deallocateMaterial(material){releaseMaterialProgramReference(material),properties["delete"](material)}function releaseMaterialProgramReference(material){var programInfo=properties.get(material).program;material.program=undefined,programInfo!==undefined&&programCache.releaseProgram(programInfo)}function setupVertexAttributes(material,program,geometry,startIndex){var extension;if(geometry instanceof THREE.InstancedBufferGeometry&&null===(extension=extensions.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{startIndex===undefined&&(startIndex=0),state.initAttributes();var geometryAttributes=geometry.attributes,programAttributes=program.getAttributes(),materialDefaultAttributeValues=material.defaultAttributeValues;for(var name in programAttributes){var programAttribute=programAttributes[name];if(programAttribute>=0){var geometryAttribute=geometryAttributes[name];if(geometryAttribute!==undefined){state.enableAttribute(programAttribute);var size=geometryAttribute.itemSize,buffer=objects.getAttributeBuffer(geometryAttribute);if(geometryAttribute instanceof THREE.InterleavedBufferAttribute){var data=geometryAttribute.data,stride=data.stride,offset=geometryAttribute.offset;if(_gl.bindBuffer(_gl.ARRAY_BUFFER,buffer),_gl.vertexAttribPointer(programAttribute,size,_gl.FLOAT,!1,stride*data.array.BYTES_PER_ELEMENT,(startIndex*stride+offset)*data.array.BYTES_PER_ELEMENT),data instanceof THREE.InstancedInterleavedBuffer){if(null===extension)return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");extension.vertexAttribDivisorANGLE(programAttribute,data.meshPerAttribute),geometry.maxInstancedCount===undefined&&(geometry.maxInstancedCount=data.meshPerAttribute*data.count)}}else if(_gl.bindBuffer(_gl.ARRAY_BUFFER,buffer),_gl.vertexAttribPointer(programAttribute,size,_gl.FLOAT,!1,0,startIndex*size*4),geometryAttribute instanceof THREE.InstancedBufferAttribute){if(null===extension)return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");extension.vertexAttribDivisorANGLE(programAttribute,geometryAttribute.meshPerAttribute),geometry.maxInstancedCount===undefined&&(geometry.maxInstancedCount=geometryAttribute.meshPerAttribute*geometryAttribute.count)}}else if(materialDefaultAttributeValues!==undefined){var value=materialDefaultAttributeValues[name];if(value!==undefined)switch(value.length){case 2:_gl.vertexAttrib2fv(programAttribute,value);break;case 3:_gl.vertexAttrib3fv(programAttribute,value);break;case 4:_gl.vertexAttrib4fv(programAttribute,value);break;default:_gl.vertexAttrib1fv(programAttribute,value)}}}}state.disableUnusedAttributes()}}function numericalSort(a,b){return b[0]-a[0]}function painterSortStable(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function reversePainterSortStable(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function pushImmediateRenderItem(object){var array,index;object.material.transparent?(array=transparentImmediateObjects,index=++transparentImmediateObjectsLastIndex):(array=opaqueImmediateObjects,index=++opaqueImmediateObjectsLastIndex),index<array.length?array[index]=object:array.push(object)}function pushRenderItem(object,geometry,material,z,group){var array,index;material.transparent?(array=transparentObjects,index=++transparentObjectsLastIndex):(array=opaqueObjects,index=++opaqueObjectsLastIndex);var renderItem=array[index];renderItem!==undefined?(renderItem.id=object.id,renderItem.object=object,renderItem.geometry=geometry,renderItem.material=material,renderItem.z=_vector3.z,renderItem.group=group):(renderItem={id:object.id,object:object,geometry:geometry,material:material,z:_vector3.z,group:group},array.push(renderItem))}function projectObject(object){if(!1!==object.visible){if(object instanceof THREE.Light)lights.push(object);else if(object instanceof THREE.Sprite)sprites.push(object);else if(object instanceof THREE.LensFlare)lensFlares.push(object);else if(object instanceof THREE.ImmediateRenderObject)pushImmediateRenderItem(object);else if((object instanceof THREE.Mesh||object instanceof THREE.Line||object instanceof THREE.Points)&&(object instanceof THREE.SkinnedMesh&&object.skeleton.update(),!1===object.frustumCulled||!0===_frustum.intersectsObject(object))){var material=object.material;if(!0===material.visible){!0===_this.sortObjects&&(_vector3.setFromMatrixPosition(object.matrixWorld),_vector3.applyProjection(_projScreenMatrix));var geometry=objects.update(object);if(material instanceof THREE.MeshFaceMaterial)for(var groups=geometry.groups,materials=material.materials,i=0,l=groups.length;i<l;i++){var group=groups[i],groupMaterial=materials[group.materialIndex];!0===groupMaterial.visible&&pushRenderItem(object,geometry,groupMaterial,_vector3.z,group)}else pushRenderItem(object,geometry,material,_vector3.z)}}var children=object.children;for(i=0,l=children.length;i<l;i++)projectObject(children[i])}}function renderObjects(renderList,camera,lights,fog,overrideMaterial){for(var i=0,l=renderList.length;i<l;i++){var renderItem=renderList[i],object=renderItem.object,geometry=renderItem.geometry,material=overrideMaterial===undefined?renderItem.material:overrideMaterial,group=renderItem.group;object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),_this.renderBufferDirect(camera,lights,fog,geometry,material,object,group)}}function renderObjectsImmediate(renderList,camera,lights,fog,overrideMaterial){for(var material=overrideMaterial,i=0,l=renderList.length;i<l;i++){var object=renderList[i];object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),overrideMaterial===undefined&&(material=object.material),setMaterial(material);var program=setProgram(camera,lights,fog,material,object);_currentGeometryProgram="",object.render(function(object){_this.renderBufferImmediate(object,program,material)})}}function initMaterial(material,lights,fog,object){var materialProperties=properties.get(material),parameters=programCache.getParameters(material,lights,fog,object),code=programCache.getProgramCode(material,parameters),program=materialProperties.program,programChange=!0;if(program===undefined)material.addEventListener("dispose",onMaterialDispose);else if(program.code!==code)releaseMaterialProgramReference(material);else{if(parameters.shaderID!==undefined)return;programChange=!1}if(programChange){if(parameters.shaderID){var shader=THREE.ShaderLib[parameters.shaderID];materialProperties.__webglShader={name:material.type,uniforms:THREE.UniformsUtils.clone(shader.uniforms),vertexShader:shader.vertexShader,fragmentShader:shader.fragmentShader}}else materialProperties.__webglShader={name:material.type,uniforms:material.uniforms,vertexShader:material.vertexShader,fragmentShader:material.fragmentShader};material.__webglShader=materialProperties.__webglShader,program=programCache.acquireProgram(material,parameters,code),materialProperties.program=program,material.program=program}var attributes=program.getAttributes();if(material.morphTargets){material.numSupportedMorphTargets=0;for(var i=0;i<_this.maxMorphTargets;i++)attributes["morphTarget"+i]>=0&&material.numSupportedMorphTargets++}if(material.morphNormals)for(material.numSupportedMorphNormals=0,i=0;i<_this.maxMorphNormals;i++)attributes["morphNormal"+i]>=0&&material.numSupportedMorphNormals++;materialProperties.uniformsList=[];var uniformLocations=materialProperties.program.getUniforms();for(var u in materialProperties.__webglShader.uniforms){var location=uniformLocations[u];location&&materialProperties.uniformsList.push([materialProperties.__webglShader.uniforms[u],location])}}function setMaterial(material){setMaterialFaces(material),!0===material.transparent?state.setBlending(material.blending,material.blendEquation,material.blendSrc,material.blendDst,material.blendEquationAlpha,material.blendSrcAlpha,material.blendDstAlpha):state.setBlending(THREE.NoBlending),state.setDepthFunc(material.depthFunc),state.setDepthTest(material.depthTest),state.setDepthWrite(material.depthWrite),state.setColorWrite(material.colorWrite),state.setPolygonOffset(material.polygonOffset,material.polygonOffsetFactor,material.polygonOffsetUnits)}function setMaterialFaces(material){material.side!==THREE.DoubleSide?state.enable(_gl.CULL_FACE):state.disable(_gl.CULL_FACE),state.setFlipSided(material.side===THREE.BackSide)}function setProgram(camera,lights,fog,material,object){_usedTextureUnits=0;var materialProperties=properties.get(material);!material.needsUpdate&&materialProperties.program||(initMaterial(material,lights,fog,object),material.needsUpdate=!1);var refreshProgram=!1,refreshMaterial=!1,refreshLights=!1,program=materialProperties.program,p_uniforms=program.getUniforms(),m_uniforms=materialProperties.__webglShader.uniforms;if(program.id!==_currentProgram&&(_gl.useProgram(program.program),_currentProgram=program.id,refreshProgram=!0,refreshMaterial=!0,refreshLights=!0),material.id!==_currentMaterialId&&(-1===_currentMaterialId&&(refreshLights=!0),_currentMaterialId=material.id,refreshMaterial=!0),(refreshProgram||camera!==_currentCamera)&&(_gl.uniformMatrix4fv(p_uniforms.projectionMatrix,!1,camera.projectionMatrix.elements),capabilities.logarithmicDepthBuffer&&_gl.uniform1f(p_uniforms.logDepthBufFC,2/(Math.log(camera.far+1)/Math.LN2)),camera!==_currentCamera&&(_currentCamera=camera),(material instanceof THREE.ShaderMaterial||material instanceof THREE.MeshPhongMaterial||material.envMap)&&p_uniforms.cameraPosition!==undefined&&(_vector3.setFromMatrixPosition(camera.matrixWorld),_gl.uniform3f(p_uniforms.cameraPosition,_vector3.x,_vector3.y,_vector3.z)),(material instanceof THREE.MeshPhongMaterial||material instanceof THREE.MeshLambertMaterial||material instanceof THREE.MeshBasicMaterial||material instanceof THREE.ShaderMaterial||material.skinning)&&p_uniforms.viewMatrix!==undefined&&_gl.uniformMatrix4fv(p_uniforms.viewMatrix,!1,camera.matrixWorldInverse.elements)),material.skinning)if(object.bindMatrix&&p_uniforms.bindMatrix!==undefined&&_gl.uniformMatrix4fv(p_uniforms.bindMatrix,!1,object.bindMatrix.elements),object.bindMatrixInverse&&p_uniforms.bindMatrixInverse!==undefined&&_gl.uniformMatrix4fv(p_uniforms.bindMatrixInverse,!1,object.bindMatrixInverse.elements),capabilities.floatVertexTextures&&object.skeleton&&object.skeleton.useVertexTexture){if(p_uniforms.boneTexture!==undefined){var textureUnit=getTextureUnit();_gl.uniform1i(p_uniforms.boneTexture,textureUnit),_this.setTexture(object.skeleton.boneTexture,textureUnit)}p_uniforms.boneTextureWidth!==undefined&&_gl.uniform1i(p_uniforms.boneTextureWidth,object.skeleton.boneTextureWidth),p_uniforms.boneTextureHeight!==undefined&&_gl.uniform1i(p_uniforms.boneTextureHeight,object.skeleton.boneTextureHeight)}else object.skeleton&&object.skeleton.boneMatrices&&p_uniforms.boneGlobalMatrices!==undefined&&_gl.uniformMatrix4fv(p_uniforms.boneGlobalMatrices,!1,object.skeleton.boneMatrices);return refreshMaterial&&(fog&&material.fog&&refreshUniformsFog(m_uniforms,fog),(material instanceof THREE.MeshPhongMaterial||material instanceof THREE.MeshLambertMaterial||material.lights)&&(_lightsNeedUpdate&&(refreshLights=!0,setupLights(lights,camera),_lightsNeedUpdate=!1),refreshLights?(refreshUniformsLights(m_uniforms,_lights),markUniformsLightsNeedsUpdate(m_uniforms,!0)):markUniformsLightsNeedsUpdate(m_uniforms,!1)),(material instanceof THREE.MeshBasicMaterial||material instanceof THREE.MeshLambertMaterial||material instanceof THREE.MeshPhongMaterial)&&refreshUniformsCommon(m_uniforms,material),material instanceof THREE.LineBasicMaterial?refreshUniformsLine(m_uniforms,material):material instanceof THREE.LineDashedMaterial?(refreshUniformsLine(m_uniforms,material),refreshUniformsDash(m_uniforms,material)):material instanceof THREE.PointsMaterial?refreshUniformsParticle(m_uniforms,material):material instanceof THREE.MeshPhongMaterial?refreshUniformsPhong(m_uniforms,material):material instanceof THREE.MeshDepthMaterial?(m_uniforms.mNear.value=camera.near,m_uniforms.mFar.value=camera.far,m_uniforms.opacity.value=material.opacity):material instanceof THREE.MeshNormalMaterial&&(m_uniforms.opacity.value=material.opacity),object.receiveShadow&&!material._shadowPass&&refreshUniformsShadow(m_uniforms,lights),loadUniformsGeneric(materialProperties.uniformsList)),loadUniformsMatrices(p_uniforms,object),p_uniforms.modelMatrix!==undefined&&_gl.uniformMatrix4fv(p_uniforms.modelMatrix,!1,object.matrixWorld.elements),program}function refreshUniformsCommon(uniforms,material){var uvScaleMap;if(uniforms.opacity.value=material.opacity,uniforms.diffuse.value=material.color,material.emissive&&(uniforms.emissive.value=material.emissive),uniforms.map.value=material.map,uniforms.specularMap.value=material.specularMap,uniforms.alphaMap.value=material.alphaMap,material.aoMap&&(uniforms.aoMap.value=material.aoMap,uniforms.aoMapIntensity.value=material.aoMapIntensity),material.map?uvScaleMap=material.map:material.specularMap?uvScaleMap=material.specularMap:material.displacementMap?uvScaleMap=material.displacementMap:material.normalMap?uvScaleMap=material.normalMap:material.bumpMap?uvScaleMap=material.bumpMap:material.alphaMap?uvScaleMap=material.alphaMap:material.emissiveMap&&(uvScaleMap=material.emissiveMap),uvScaleMap!==undefined){var offset=uvScaleMap.offset,repeat=uvScaleMap.repeat;uniforms.offsetRepeat.value.set(offset.x,offset.y,repeat.x,repeat.y)}uniforms.envMap.value=material.envMap,uniforms.flipEnvMap.value=material.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,uniforms.reflectivity.value=material.reflectivity,uniforms.refractionRatio.value=material.refractionRatio}function refreshUniformsLine(uniforms,material){uniforms.diffuse.value=material.color,uniforms.opacity.value=material.opacity}function refreshUniformsDash(uniforms,material){uniforms.dashSize.value=material.dashSize,uniforms.totalSize.value=material.dashSize+material.gapSize,uniforms.scale.value=material.scale}function refreshUniformsParticle(uniforms,material){if(uniforms.psColor.value=material.color,uniforms.opacity.value=material.opacity,uniforms.size.value=material.size,uniforms.scale.value=_canvas.height/2,uniforms.map.value=material.map,null!==material.map){var offset=material.map.offset,repeat=material.map.repeat;uniforms.offsetRepeat.value.set(offset.x,offset.y,repeat.x,repeat.y)}}function refreshUniformsFog(uniforms,fog){uniforms.fogColor.value=fog.color,fog instanceof THREE.Fog?(uniforms.fogNear.value=fog.near,uniforms.fogFar.value=fog.far):fog instanceof THREE.FogExp2&&(uniforms.fogDensity.value=fog.density)}
function refreshUniformsPhong(uniforms,material){uniforms.specular.value=material.specular,uniforms.shininess.value=material.shininess,material.lightMap&&(uniforms.lightMap.value=material.lightMap,uniforms.lightMapIntensity.value=material.lightMapIntensity),material.emissiveMap&&(uniforms.emissiveMap.value=material.emissiveMap),material.bumpMap&&(uniforms.bumpMap.value=material.bumpMap,uniforms.bumpScale.value=material.bumpScale),material.normalMap&&(uniforms.normalMap.value=material.normalMap,uniforms.normalScale.value.copy(material.normalScale)),material.displacementMap&&(uniforms.displacementMap.value=material.displacementMap,uniforms.displacementScale.value=material.displacementScale,uniforms.displacementBias.value=material.displacementBias)}function refreshUniformsLights(uniforms,lights){uniforms.ambientLightColor.value=lights.ambient,uniforms.directionalLightColor.value=lights.directional.colors,uniforms.directionalLightDirection.value=lights.directional.positions,uniforms.pointLightColor.value=lights.point.colors,uniforms.pointLightPosition.value=lights.point.positions,uniforms.pointLightDistance.value=lights.point.distances,uniforms.pointLightDecay.value=lights.point.decays,uniforms.spotLightColor.value=lights.spot.colors,uniforms.spotLightPosition.value=lights.spot.positions,uniforms.spotLightDistance.value=lights.spot.distances,uniforms.spotLightDirection.value=lights.spot.directions,uniforms.spotLightAngleCos.value=lights.spot.anglesCos,uniforms.spotLightExponent.value=lights.spot.exponents,uniforms.spotLightDecay.value=lights.spot.decays,uniforms.hemisphereLightSkyColor.value=lights.hemi.skyColors,uniforms.hemisphereLightGroundColor.value=lights.hemi.groundColors,uniforms.hemisphereLightDirection.value=lights.hemi.positions}function markUniformsLightsNeedsUpdate(uniforms,value){uniforms.ambientLightColor.needsUpdate=value,uniforms.directionalLightColor.needsUpdate=value,uniforms.directionalLightDirection.needsUpdate=value,uniforms.pointLightColor.needsUpdate=value,uniforms.pointLightPosition.needsUpdate=value,uniforms.pointLightDistance.needsUpdate=value,uniforms.pointLightDecay.needsUpdate=value,uniforms.spotLightColor.needsUpdate=value,uniforms.spotLightPosition.needsUpdate=value,uniforms.spotLightDistance.needsUpdate=value,uniforms.spotLightDirection.needsUpdate=value,uniforms.spotLightAngleCos.needsUpdate=value,uniforms.spotLightExponent.needsUpdate=value,uniforms.spotLightDecay.needsUpdate=value,uniforms.hemisphereLightSkyColor.needsUpdate=value,uniforms.hemisphereLightGroundColor.needsUpdate=value,uniforms.hemisphereLightDirection.needsUpdate=value}function refreshUniformsShadow(uniforms,lights){if(uniforms.shadowMatrix)for(var j=0,i=0,il=lights.length;i<il;i++){var light=lights[i];light.castShadow&&((light instanceof THREE.SpotLight||light instanceof THREE.DirectionalLight)&&(uniforms.shadowMap.value[j]=light.shadowMap,uniforms.shadowMapSize.value[j]=light.shadowMapSize,uniforms.shadowMatrix.value[j]=light.shadowMatrix,uniforms.shadowDarkness.value[j]=light.shadowDarkness,uniforms.shadowBias.value[j]=light.shadowBias,j++))}}function loadUniformsMatrices(uniforms,object){_gl.uniformMatrix4fv(uniforms.modelViewMatrix,!1,object.modelViewMatrix.elements),uniforms.normalMatrix&&_gl.uniformMatrix3fv(uniforms.normalMatrix,!1,object.normalMatrix.elements)}function getTextureUnit(){var textureUnit=_usedTextureUnits;return textureUnit>=capabilities.maxTextures&&console.warn("WebGLRenderer: trying to use "+textureUnit+" texture units while this GPU supports only "+capabilities.maxTextures),_usedTextureUnits+=1,textureUnit}function loadUniformsGeneric(uniforms){for(var texture,textureUnit,j=0,jl=uniforms.length;j<jl;j++){var uniform=uniforms[j][0];if(!1!==uniform.needsUpdate){var type=uniform.type,value=uniform.value,location=uniforms[j][1];switch(type){case"1i":_gl.uniform1i(location,value);break;case"1f":_gl.uniform1f(location,value);break;case"2f":_gl.uniform2f(location,value[0],value[1]);break;case"3f":_gl.uniform3f(location,value[0],value[1],value[2]);break;case"4f":_gl.uniform4f(location,value[0],value[1],value[2],value[3]);break;case"1iv":_gl.uniform1iv(location,value);break;case"3iv":_gl.uniform3iv(location,value);break;case"1fv":_gl.uniform1fv(location,value);break;case"2fv":_gl.uniform2fv(location,value);break;case"3fv":_gl.uniform3fv(location,value);break;case"4fv":_gl.uniform4fv(location,value);break;case"Matrix3fv":_gl.uniformMatrix3fv(location,!1,value);break;case"Matrix4fv":_gl.uniformMatrix4fv(location,!1,value);break;case"i":_gl.uniform1i(location,value);break;case"f":_gl.uniform1f(location,value);break;case"v2":_gl.uniform2f(location,value.x,value.y);break;case"v3":_gl.uniform3f(location,value.x,value.y,value.z);break;case"v4":_gl.uniform4f(location,value.x,value.y,value.z,value.w);break;case"c":_gl.uniform3f(location,value.r,value.g,value.b);break;case"iv1":_gl.uniform1iv(location,value);break;case"iv":_gl.uniform3iv(location,value);break;case"fv1":_gl.uniform1fv(location,value);break;case"fv":_gl.uniform3fv(location,value);break;case"v2v":uniform._array===undefined&&(uniform._array=new Float32Array(2*value.length));for(var i=0,i2=0,il=value.length;i<il;i++,i2+=2)uniform._array[i2+0]=value[i].x,uniform._array[i2+1]=value[i].y;_gl.uniform2fv(location,uniform._array);break;case"v3v":uniform._array===undefined&&(uniform._array=new Float32Array(3*value.length));i=0;var i3=0;for(il=value.length;i<il;i++,i3+=3)uniform._array[i3+0]=value[i].x,uniform._array[i3+1]=value[i].y,uniform._array[i3+2]=value[i].z;_gl.uniform3fv(location,uniform._array);break;case"v4v":uniform._array===undefined&&(uniform._array=new Float32Array(4*value.length));i=0;var i4=0;for(il=value.length;i<il;i++,i4+=4)uniform._array[i4+0]=value[i].x,uniform._array[i4+1]=value[i].y,uniform._array[i4+2]=value[i].z,uniform._array[i4+3]=value[i].w;_gl.uniform4fv(location,uniform._array);break;case"m3":_gl.uniformMatrix3fv(location,!1,value.elements);break;case"m3v":uniform._array===undefined&&(uniform._array=new Float32Array(9*value.length));for(i=0,il=value.length;i<il;i++)value[i].flattenToArrayOffset(uniform._array,9*i);_gl.uniformMatrix3fv(location,!1,uniform._array);break;case"m4":_gl.uniformMatrix4fv(location,!1,value.elements);break;case"m4v":uniform._array===undefined&&(uniform._array=new Float32Array(16*value.length));for(i=0,il=value.length;i<il;i++)value[i].flattenToArrayOffset(uniform._array,16*i);_gl.uniformMatrix4fv(location,!1,uniform._array);break;case"t":if(texture=value,textureUnit=getTextureUnit(),_gl.uniform1i(location,textureUnit),!texture)continue;texture instanceof THREE.CubeTexture||Array.isArray(texture.image)&&6===texture.image.length?setCubeTexture(texture,textureUnit):texture instanceof THREE.WebGLRenderTargetCube?setCubeTextureDynamic(texture,textureUnit):_this.setTexture(texture,textureUnit);break;case"tv":uniform._array===undefined&&(uniform._array=[]);for(i=0,il=uniform.value.length;i<il;i++)uniform._array[i]=getTextureUnit();_gl.uniform1iv(location,uniform._array);for(i=0,il=uniform.value.length;i<il;i++)texture=uniform.value[i],textureUnit=uniform._array[i],texture&&_this.setTexture(texture,textureUnit);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+type)}}}}function setColorLinear(array,offset,color,intensity){array[offset+0]=color.r*intensity,array[offset+1]=color.g*intensity,array[offset+2]=color.b*intensity}function setupLights(lights,camera){var l,ll,light,color,skyColor,groundColor,intensity,distance,r=0,g=0,b=0,zlights=_lights,viewMatrix=camera.matrixWorldInverse,dirColors=zlights.directional.colors,dirPositions=zlights.directional.positions,pointColors=zlights.point.colors,pointPositions=zlights.point.positions,pointDistances=zlights.point.distances,pointDecays=zlights.point.decays,spotColors=zlights.spot.colors,spotPositions=zlights.spot.positions,spotDistances=zlights.spot.distances,spotDirections=zlights.spot.directions,spotAnglesCos=zlights.spot.anglesCos,spotExponents=zlights.spot.exponents,spotDecays=zlights.spot.decays,hemiSkyColors=zlights.hemi.skyColors,hemiGroundColors=zlights.hemi.groundColors,hemiPositions=zlights.hemi.positions,dirLength=0,pointLength=0,spotLength=0,hemiLength=0,dirCount=0,pointCount=0,spotCount=0,hemiCount=0,dirOffset=0,pointOffset=0,spotOffset=0,hemiOffset=0;for(l=0,ll=lights.length;l<ll;l++)if(!(light=lights[l]).onlyShadow)if(color=light.color,intensity=light.intensity,distance=light.distance,light instanceof THREE.AmbientLight){if(!light.visible)continue;r+=color.r,g+=color.g,b+=color.b}else if(light instanceof THREE.DirectionalLight){if(dirCount+=1,!light.visible)continue;_direction.setFromMatrixPosition(light.matrixWorld),_vector3.setFromMatrixPosition(light.target.matrixWorld),_direction.sub(_vector3),_direction.transformDirection(viewMatrix),dirPositions[(dirOffset=3*dirLength)+0]=_direction.x,dirPositions[dirOffset+1]=_direction.y,dirPositions[dirOffset+2]=_direction.z,setColorLinear(dirColors,dirOffset,color,intensity),dirLength+=1}else if(light instanceof THREE.PointLight){if(pointCount+=1,!light.visible)continue;setColorLinear(pointColors,pointOffset=3*pointLength,color,intensity),_vector3.setFromMatrixPosition(light.matrixWorld),_vector3.applyMatrix4(viewMatrix),pointPositions[pointOffset+0]=_vector3.x,pointPositions[pointOffset+1]=_vector3.y,pointPositions[pointOffset+2]=_vector3.z,pointDistances[pointLength]=distance,pointDecays[pointLength]=0===light.distance?0:light.decay,pointLength+=1}else if(light instanceof THREE.SpotLight){if(spotCount+=1,!light.visible)continue;setColorLinear(spotColors,spotOffset=3*spotLength,color,intensity),_direction.setFromMatrixPosition(light.matrixWorld),_vector3.copy(_direction).applyMatrix4(viewMatrix),spotPositions[spotOffset+0]=_vector3.x,spotPositions[spotOffset+1]=_vector3.y,spotPositions[spotOffset+2]=_vector3.z,spotDistances[spotLength]=distance,_vector3.setFromMatrixPosition(light.target.matrixWorld),_direction.sub(_vector3),_direction.transformDirection(viewMatrix),spotDirections[spotOffset+0]=_direction.x,spotDirections[spotOffset+1]=_direction.y,spotDirections[spotOffset+2]=_direction.z,spotAnglesCos[spotLength]=Math.cos(light.angle),spotExponents[spotLength]=light.exponent,spotDecays[spotLength]=0===light.distance?0:light.decay,spotLength+=1}else if(light instanceof THREE.HemisphereLight){if(hemiCount+=1,!light.visible)continue;_direction.setFromMatrixPosition(light.matrixWorld),_direction.transformDirection(viewMatrix),hemiPositions[(hemiOffset=3*hemiLength)+0]=_direction.x,hemiPositions[hemiOffset+1]=_direction.y,hemiPositions[hemiOffset+2]=_direction.z,skyColor=light.color,groundColor=light.groundColor,setColorLinear(hemiSkyColors,hemiOffset,skyColor,intensity),setColorLinear(hemiGroundColors,hemiOffset,groundColor,intensity),hemiLength+=1}for(l=3*dirLength,ll=Math.max(dirColors.length,3*dirCount);l<ll;l++)dirColors[l]=0;for(l=3*pointLength,ll=Math.max(pointColors.length,3*pointCount);l<ll;l++)pointColors[l]=0;for(l=3*spotLength,ll=Math.max(spotColors.length,3*spotCount);l<ll;l++)spotColors[l]=0;for(l=3*hemiLength,ll=Math.max(hemiSkyColors.length,3*hemiCount);l<ll;l++)hemiSkyColors[l]=0;for(l=3*hemiLength,ll=Math.max(hemiGroundColors.length,3*hemiCount);l<ll;l++)hemiGroundColors[l]=0;zlights.directional.length=dirLength,zlights.point.length=pointLength,zlights.spot.length=spotLength,zlights.hemi.length=hemiLength,zlights.ambient[0]=r,zlights.ambient[1]=g,zlights.ambient[2]=b}function setTextureParameters(textureType,texture,isImagePowerOfTwo){var extension;if(isImagePowerOfTwo?(_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_S,paramThreeToGL(texture.wrapS)),_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_T,paramThreeToGL(texture.wrapT)),_gl.texParameteri(textureType,_gl.TEXTURE_MAG_FILTER,paramThreeToGL(texture.magFilter)),_gl.texParameteri(textureType,_gl.TEXTURE_MIN_FILTER,paramThreeToGL(texture.minFilter))):(_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_S,_gl.CLAMP_TO_EDGE),_gl.texParameteri(textureType,_gl.TEXTURE_WRAP_T,_gl.CLAMP_TO_EDGE),texture.wrapS===THREE.ClampToEdgeWrapping&&texture.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+texture.sourceFile+" )"),_gl.texParameteri(textureType,_gl.TEXTURE_MAG_FILTER,filterFallback(texture.magFilter)),_gl.texParameteri(textureType,_gl.TEXTURE_MIN_FILTER,filterFallback(texture.minFilter)),texture.minFilter!==THREE.NearestFilter&&texture.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+texture.sourceFile+" )")),extension=extensions.get("EXT_texture_filter_anisotropic")){if(texture.type===THREE.FloatType&&null===extensions.get("OES_texture_float_linear"))return;if(texture.type===THREE.HalfFloatType&&null===extensions.get("OES_texture_half_float_linear"))return;(texture.anisotropy>1||properties.get(texture).__currentAnisotropy)&&(_gl.texParameterf(textureType,extension.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(texture.anisotropy,_this.getMaxAnisotropy())),properties.get(texture).__currentAnisotropy=texture.anisotropy)}}function uploadTexture(textureProperties,texture,slot){textureProperties.__webglInit===undefined&&(textureProperties.__webglInit=!0,texture.__webglInit=!0,texture.addEventListener("dispose",onTextureDispose),textureProperties.__webglTexture=_gl.createTexture(),_infoMemory.textures++),state.activeTexture(_gl.TEXTURE0+slot),state.bindTexture(_gl.TEXTURE_2D,textureProperties.__webglTexture),_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,texture.flipY),_gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultiplyAlpha),_gl.pixelStorei(_gl.UNPACK_ALIGNMENT,texture.unpackAlignment),texture.image=clampToMaxSize(texture.image,capabilities.maxTextureSize);var image=texture.image,isImagePowerOfTwo=THREE.Math.isPowerOfTwo(image.width)&&THREE.Math.isPowerOfTwo(image.height),glFormat=paramThreeToGL(texture.format),glType=paramThreeToGL(texture.type);setTextureParameters(_gl.TEXTURE_2D,texture,isImagePowerOfTwo);var mipmap,mipmaps=texture.mipmaps;if(texture instanceof THREE.DataTexture)if(mipmaps.length>0&&isImagePowerOfTwo){for(var i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],state.texImage2D(_gl.TEXTURE_2D,i,glFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);texture.generateMipmaps=!1}else state.texImage2D(_gl.TEXTURE_2D,0,glFormat,image.width,image.height,0,glFormat,glType,image.data);else if(texture instanceof THREE.CompressedTexture)for(i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],texture.format!==THREE.RGBAFormat&&texture.format!==THREE.RGBFormat?state.getCompressedTextureFormats().indexOf(glFormat)>-1?state.compressedTexImage2D(_gl.TEXTURE_2D,i,glFormat,mipmap.width,mipmap.height,0,mipmap.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):state.texImage2D(_gl.TEXTURE_2D,i,glFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);else if(mipmaps.length>0&&isImagePowerOfTwo){for(i=0,il=mipmaps.length;i<il;i++)mipmap=mipmaps[i],state.texImage2D(_gl.TEXTURE_2D,i,glFormat,glFormat,glType,mipmap);texture.generateMipmaps=!1}else state.texImage2D(_gl.TEXTURE_2D,0,glFormat,glFormat,glType,texture.image);texture.generateMipmaps&&isImagePowerOfTwo&&_gl.generateMipmap(_gl.TEXTURE_2D),textureProperties.__version=texture.version,texture.onUpdate&&texture.onUpdate(texture)}function clampToMaxSize(image,maxSize){if(image.width>maxSize||image.height>maxSize){var scale=maxSize/Math.max(image.width,image.height),canvas=document.createElement("canvas");return canvas.width=Math.floor(image.width*scale),canvas.height=Math.floor(image.height*scale),canvas.getContext("2d").drawImage(image,0,0,image.width,image.height,0,0,canvas.width,canvas.height),console.warn("THREE.WebGLRenderer: image is too big ("+image.width+"x"+image.height+"). Resized to "+canvas.width+"x"+canvas.height,image),canvas}return image}function setCubeTexture(texture,slot){var textureProperties=properties.get(texture);if(6===texture.image.length)if(texture.version>0&&textureProperties.__version!==texture.version){textureProperties.__image__webglTextureCube||(texture.addEventListener("dispose",onTextureDispose),textureProperties.__image__webglTextureCube=_gl.createTexture(),_infoMemory.textures++),state.activeTexture(_gl.TEXTURE0+slot),state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__image__webglTextureCube),_gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL,texture.flipY);for(var isCompressed=texture instanceof THREE.CompressedTexture,isDataTexture=texture.image[0]instanceof THREE.DataTexture,cubeImage=[],i=0;i<6;i++)!_this.autoScaleCubemaps||isCompressed||isDataTexture?cubeImage[i]=isDataTexture?texture.image[i].image:texture.image[i]:cubeImage[i]=clampToMaxSize(texture.image[i],capabilities.maxCubemapSize);var image=cubeImage[0],isImagePowerOfTwo=THREE.Math.isPowerOfTwo(image.width)&&THREE.Math.isPowerOfTwo(image.height),glFormat=paramThreeToGL(texture.format),glType=paramThreeToGL(texture.type);setTextureParameters(_gl.TEXTURE_CUBE_MAP,texture,isImagePowerOfTwo);for(i=0;i<6;i++)if(isCompressed)for(var mipmap,mipmaps=cubeImage[i].mipmaps,j=0,jl=mipmaps.length;j<jl;j++)mipmap=mipmaps[j],texture.format!==THREE.RGBAFormat&&texture.format!==THREE.RGBFormat?state.getCompressedTextureFormats().indexOf(glFormat)>-1?state.compressedTexImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,glFormat,mipmap.width,mipmap.height,0,mipmap.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,j,glFormat,mipmap.width,mipmap.height,0,glFormat,glType,mipmap.data);else isDataTexture?state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,glFormat,cubeImage[i].width,cubeImage[i].height,0,glFormat,glType,cubeImage[i].data):state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,glFormat,glFormat,glType,cubeImage[i]);texture.generateMipmaps&&isImagePowerOfTwo&&_gl.generateMipmap(_gl.TEXTURE_CUBE_MAP),textureProperties.__version=texture.version,texture.onUpdate&&texture.onUpdate(texture)}else state.activeTexture(_gl.TEXTURE0+slot),state.bindTexture(_gl.TEXTURE_CUBE_MAP,textureProperties.__image__webglTextureCube)}function setCubeTextureDynamic(texture,slot){state.activeTexture(_gl.TEXTURE0+slot),state.bindTexture(_gl.TEXTURE_CUBE_MAP,properties.get(texture).__webglTexture)}function setupFrameBuffer(framebuffer,renderTarget,textureTarget){_gl.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer),_gl.framebufferTexture2D(_gl.FRAMEBUFFER,_gl.COLOR_ATTACHMENT0,textureTarget,properties.get(renderTarget).__webglTexture,0)}function setupRenderBuffer(renderbuffer,renderTarget){_gl.bindRenderbuffer(_gl.RENDERBUFFER,renderbuffer),renderTarget.depthBuffer&&!renderTarget.stencilBuffer?(_gl.renderbufferStorage(_gl.RENDERBUFFER,_gl.DEPTH_COMPONENT16,renderTarget.width,renderTarget.height),_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_ATTACHMENT,_gl.RENDERBUFFER,renderbuffer)):renderTarget.depthBuffer&&renderTarget.stencilBuffer?(_gl.renderbufferStorage(_gl.RENDERBUFFER,_gl.DEPTH_STENCIL,renderTarget.width,renderTarget.height),_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_STENCIL_ATTACHMENT,_gl.RENDERBUFFER,renderbuffer)):_gl.renderbufferStorage(_gl.RENDERBUFFER,_gl.RGBA4,renderTarget.width,renderTarget.height)}function updateRenderTargetMipmap(renderTarget){renderTarget instanceof THREE.WebGLRenderTargetCube?(state.bindTexture(_gl.TEXTURE_CUBE_MAP,properties.get(renderTarget).__webglTexture),_gl.generateMipmap(_gl.TEXTURE_CUBE_MAP),state.bindTexture(_gl.TEXTURE_CUBE_MAP,null)):(state.bindTexture(_gl.TEXTURE_2D,properties.get(renderTarget).__webglTexture),_gl.generateMipmap(_gl.TEXTURE_2D),state.bindTexture(_gl.TEXTURE_2D,null))}function filterFallback(f){return f===THREE.NearestFilter||f===THREE.NearestMipMapNearestFilter||f===THREE.NearestMipMapLinearFilter?_gl.NEAREST:_gl.LINEAR}function paramThreeToGL(p){var extension;if(p===THREE.RepeatWrapping)return _gl.REPEAT;if(p===THREE.ClampToEdgeWrapping)return _gl.CLAMP_TO_EDGE;if(p===THREE.MirroredRepeatWrapping)return _gl.MIRRORED_REPEAT;if(p===THREE.NearestFilter)return _gl.NEAREST;if(p===THREE.NearestMipMapNearestFilter)return _gl.NEAREST_MIPMAP_NEAREST;if(p===THREE.NearestMipMapLinearFilter)return _gl.NEAREST_MIPMAP_LINEAR;if(p===THREE.LinearFilter)return _gl.LINEAR;if(p===THREE.LinearMipMapNearestFilter)return _gl.LINEAR_MIPMAP_NEAREST;if(p===THREE.LinearMipMapLinearFilter)return _gl.LINEAR_MIPMAP_LINEAR;if(p===THREE.UnsignedByteType)return _gl.UNSIGNED_BYTE;if(p===THREE.UnsignedShort4444Type)return _gl.UNSIGNED_SHORT_4_4_4_4;if(p===THREE.UnsignedShort5551Type)return _gl.UNSIGNED_SHORT_5_5_5_1;if(p===THREE.UnsignedShort565Type)return _gl.UNSIGNED_SHORT_5_6_5;if(p===THREE.ByteType)return _gl.BYTE;if(p===THREE.ShortType)return _gl.SHORT;if(p===THREE.UnsignedShortType)return _gl.UNSIGNED_SHORT;if(p===THREE.IntType)return _gl.INT;if(p===THREE.UnsignedIntType)return _gl.UNSIGNED_INT;if(p===THREE.FloatType)return _gl.FLOAT;if(null!==(extension=extensions.get("OES_texture_half_float"))&&p===THREE.HalfFloatType)return extension.HALF_FLOAT_OES;if(p===THREE.AlphaFormat)return _gl.ALPHA;if(p===THREE.RGBFormat)return _gl.RGB;if(p===THREE.RGBAFormat)return _gl.RGBA;if(p===THREE.LuminanceFormat)return _gl.LUMINANCE;if(p===THREE.LuminanceAlphaFormat)return _gl.LUMINANCE_ALPHA;if(p===THREE.AddEquation)return _gl.FUNC_ADD;if(p===THREE.SubtractEquation)return _gl.FUNC_SUBTRACT;if(p===THREE.ReverseSubtractEquation)return _gl.FUNC_REVERSE_SUBTRACT;if(p===THREE.ZeroFactor)return _gl.ZERO;if(p===THREE.OneFactor)return _gl.ONE;if(p===THREE.SrcColorFactor)return _gl.SRC_COLOR;if(p===THREE.OneMinusSrcColorFactor)return _gl.ONE_MINUS_SRC_COLOR;if(p===THREE.SrcAlphaFactor)return _gl.SRC_ALPHA;if(p===THREE.OneMinusSrcAlphaFactor)return _gl.ONE_MINUS_SRC_ALPHA;if(p===THREE.DstAlphaFactor)return _gl.DST_ALPHA;if(p===THREE.OneMinusDstAlphaFactor)return _gl.ONE_MINUS_DST_ALPHA;if(p===THREE.DstColorFactor)return _gl.DST_COLOR;if(p===THREE.OneMinusDstColorFactor)return _gl.ONE_MINUS_DST_COLOR;if(p===THREE.SrcAlphaSaturateFactor)return _gl.SRC_ALPHA_SATURATE;if(null!==(extension=extensions.get("WEBGL_compressed_texture_s3tc"))){if(p===THREE.RGB_S3TC_DXT1_Format)return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===THREE.RGBA_S3TC_DXT1_Format)return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===THREE.RGBA_S3TC_DXT3_Format)return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===THREE.RGBA_S3TC_DXT5_Format)return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(null!==(extension=extensions.get("WEBGL_compressed_texture_pvrtc"))){if(p===THREE.RGB_PVRTC_4BPPV1_Format)return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===THREE.RGB_PVRTC_2BPPV1_Format)return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===THREE.RGBA_PVRTC_4BPPV1_Format)return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===THREE.RGBA_PVRTC_2BPPV1_Format)return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(null!==(extension=extensions.get("EXT_blend_minmax"))){if(p===THREE.MinEquation)return extension.MIN_EXT;if(p===THREE.MaxEquation)return extension.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);var _canvas=(parameters=parameters||{}).canvas!==undefined?parameters.canvas:document.createElement("canvas"),_context=parameters.context!==undefined?parameters.context:null,_width=_canvas.width,_height=_canvas.height,pixelRatio=1,_alpha=parameters.alpha!==undefined&&parameters.alpha,_depth=parameters.depth===undefined||parameters.depth,_stencil=parameters.stencil===undefined||parameters.stencil,_antialias=parameters.antialias!==undefined&&parameters.antialias,_premultipliedAlpha=parameters.premultipliedAlpha===undefined||parameters.premultipliedAlpha,_preserveDrawingBuffer=parameters.preserveDrawingBuffer!==undefined&&parameters.preserveDrawingBuffer,_clearColor=new THREE.Color(0),_clearAlpha=0,lights=[],opaqueObjects=[],opaqueObjectsLastIndex=-1,transparentObjects=[],transparentObjectsLastIndex=-1,opaqueImmediateObjects=[],opaqueImmediateObjectsLastIndex=-1,transparentImmediateObjects=[],transparentImmediateObjectsLastIndex=-1,morphInfluences=new Float32Array(8),sprites=[],lensFlares=[];this.domElement=_canvas,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var _gl,_this=this,_currentProgram=null,_currentFramebuffer=null,_currentMaterialId=-1,_currentGeometryProgram="",_currentCamera=null,_usedTextureUnits=0,_viewportX=0,_viewportY=0,_viewportWidth=_canvas.width,_viewportHeight=_canvas.height,_currentWidth=0,_currentHeight=0,_frustum=new THREE.Frustum,_projScreenMatrix=new THREE.Matrix4,_vector3=new THREE.Vector3,_direction=new THREE.Vector3,_lightsNeedUpdate=!0,_lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},_infoMemory={geometries:0,textures:0},_infoRender={calls:0,vertices:0,faces:0,points:0};this.info={render:_infoRender,memory:_infoMemory,programs:null};try{var attributes={alpha:_alpha,depth:_depth,stencil:_stencil,antialias:_antialias,premultipliedAlpha:_premultipliedAlpha,preserveDrawingBuffer:_preserveDrawingBuffer};if(null===(_gl=_context||_canvas.getContext("webgl",attributes)||_canvas.getContext("experimental-webgl",attributes)))throw null!==_canvas.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";_canvas.addEventListener("webglcontextlost",onContextLost,!1)}catch(error){console.error("THREE.WebGLRenderer: "+error)}var extensions=new THREE.WebGLExtensions(_gl);extensions.get("OES_texture_float"),extensions.get("OES_texture_float_linear"),extensions.get("OES_texture_half_float"),extensions.get("OES_texture_half_float_linear"),extensions.get("OES_standard_derivatives"),extensions.get("ANGLE_instanced_arrays"),extensions.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var capabilities=new THREE.WebGLCapabilities(_gl,extensions,parameters),state=new THREE.WebGLState(_gl,extensions,paramThreeToGL),properties=new THREE.WebGLProperties,objects=new THREE.WebGLObjects(_gl,properties,this.info),programCache=new THREE.WebGLPrograms(this,capabilities);this.info.programs=programCache.programs;var bufferRenderer=new THREE.WebGLBufferRenderer(_gl,extensions,_infoRender),indexedBufferRenderer=new THREE.WebGLIndexedBufferRenderer(_gl,extensions,_infoRender);setDefaultGLState(),this.context=_gl,this.capabilities=capabilities,this.extensions=extensions,this.state=state;var shadowMap=new THREE.WebGLShadowMap(this,lights,objects);this.shadowMap=shadowMap;var value,spritePlugin=new THREE.SpritePlugin(this,sprites),lensFlarePlugin=new THREE.LensFlarePlugin(this,lensFlares);this.getContext=function(){return _gl},this.getContextAttributes=function(){return _gl.getContextAttributes()},this.forceContextLoss=function(){extensions.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){if(value!==undefined)return value;var extension=extensions.get("EXT_texture_filter_anisotropic");return value=null!==extension?_gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},this.getPrecision=function(){return capabilities.precision},this.getPixelRatio=function(){return pixelRatio},this.setPixelRatio=function(value){value!==undefined&&(pixelRatio=value)},this.getSize=function(){return{width:_width,height:_height}},this.setSize=function(width,height,updateStyle){_width=width,_height=height,_canvas.width=width*pixelRatio,_canvas.height=height*pixelRatio,!1!==updateStyle&&(_canvas.style.width=width+"px",_canvas.style.height=height+"px"),this.setViewport(0,0,width,height)},this.setViewport=function(x,y,width,height){_viewportX=x*pixelRatio,_viewportY=y*pixelRatio,_viewportWidth=width*pixelRatio,_viewportHeight=height*pixelRatio,_gl.viewport(_viewportX,_viewportY,_viewportWidth,_viewportHeight)},this.setScissor=function(x,y,width,height){_gl.scissor(x*pixelRatio,y*pixelRatio,width*pixelRatio,height*pixelRatio)},this.enableScissorTest=function(boolean){state.setScissorTest(boolean)},this.getClearColor=function(){return _clearColor},this.setClearColor=function(color,alpha){_clearColor.set(color),_clearAlpha=alpha!==undefined?alpha:1,glClearColor(_clearColor.r,_clearColor.g,_clearColor.b,_clearAlpha)},this.getClearAlpha=function(){return _clearAlpha},this.setClearAlpha=function(alpha){_clearAlpha=alpha,glClearColor(_clearColor.r,_clearColor.g,_clearColor.b,_clearAlpha)},this.clear=function(color,depth,stencil){var bits=0;(color===undefined||color)&&(bits|=_gl.COLOR_BUFFER_BIT),(depth===undefined||depth)&&(bits|=_gl.DEPTH_BUFFER_BIT),(stencil===undefined||stencil)&&(bits|=_gl.STENCIL_BUFFER_BIT),_gl.clear(bits)},this.clearColor=function(){_gl.clear(_gl.COLOR_BUFFER_BIT)},this.clearDepth=function(){_gl.clear(_gl.DEPTH_BUFFER_BIT)},this.clearStencil=function(){_gl.clear(_gl.STENCIL_BUFFER_BIT)},this.clearTarget=function(renderTarget,color,depth,stencil){this.setRenderTarget(renderTarget),this.clear(color,depth,stencil)},this.resetGLState=resetGLState,this.dispose=function(){_canvas.removeEventListener("webglcontextlost",onContextLost,!1)},this.renderBufferImmediate=function(object,program,material){state.initAttributes();var buffers=properties.get(object);object.hasPositions&&!buffers.position&&(buffers.position=_gl.createBuffer()),object.hasNormals&&!buffers.normal&&(buffers.normal=_gl.createBuffer()),object.hasUvs&&!buffers.uv&&(buffers.uv=_gl.createBuffer()),object.hasColors&&!buffers.color&&(buffers.color=_gl.createBuffer());var attributes=program.getAttributes();if(object.hasPositions&&(_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.position),_gl.bufferData(_gl.ARRAY_BUFFER,object.positionArray,_gl.DYNAMIC_DRAW),state.enableAttribute(attributes.position),_gl.vertexAttribPointer(attributes.position,3,_gl.FLOAT,!1,0,0)),object.hasNormals){if(_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.normal),"MeshPhongMaterial"!==material.type&&material.shading===THREE.FlatShading)for(var i=0,l=3*object.count;i<l;i+=9){var array=object.normalArray,nx=(array[i+0]+array[i+3]+array[i+6])/3,ny=(array[i+1]+array[i+4]+array[i+7])/3,nz=(array[i+2]+array[i+5]+array[i+8])/3;array[i+0]=nx,array[i+1]=ny,array[i+2]=nz,array[i+3]=nx,array[i+4]=ny,array[i+5]=nz,array[i+6]=nx,array[i+7]=ny,array[i+8]=nz}_gl.bufferData(_gl.ARRAY_BUFFER,object.normalArray,_gl.DYNAMIC_DRAW),state.enableAttribute(attributes.normal),_gl.vertexAttribPointer(attributes.normal,3,_gl.FLOAT,!1,0,0)}object.hasUvs&&material.map&&(_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.uv),_gl.bufferData(_gl.ARRAY_BUFFER,object.uvArray,_gl.DYNAMIC_DRAW),state.enableAttribute(attributes.uv),_gl.vertexAttribPointer(attributes.uv,2,_gl.FLOAT,!1,0,0)),object.hasColors&&material.vertexColors!==THREE.NoColors&&(_gl.bindBuffer(_gl.ARRAY_BUFFER,buffers.color),_gl.bufferData(_gl.ARRAY_BUFFER,object.colorArray,_gl.DYNAMIC_DRAW),state.enableAttribute(attributes.color),_gl.vertexAttribPointer(attributes.color,3,_gl.FLOAT,!1,0,0)),state.disableUnusedAttributes(),_gl.drawArrays(_gl.TRIANGLES,0,object.count),object.count=0},this.renderBufferDirect=function(camera,lights,fog,geometry,material,object,group){setMaterial(material);var program=setProgram(camera,lights,fog,material,object),updateBuffers=!1,geometryProgram=geometry.id+"_"+program.id+"_"+material.wireframe;geometryProgram!==_currentGeometryProgram&&(_currentGeometryProgram=geometryProgram,updateBuffers=!0);var morphTargetInfluences=object.morphTargetInfluences;if(morphTargetInfluences!==undefined){for(var activeInfluences=[],i=0,l=morphTargetInfluences.length;i<l;i++){var influence=morphTargetInfluences[i];activeInfluences.push([influence,i])}activeInfluences.sort(numericalSort),activeInfluences.length>8&&(activeInfluences.length=8);var morphAttributes=geometry.morphAttributes;for(i=0,l=activeInfluences.length;i<l;i++){influence=activeInfluences[i];if(morphInfluences[i]=influence[0],0!==influence[0]){var index=influence[1];!0===material.morphTargets&&morphAttributes.position&&geometry.addAttribute("morphTarget"+i,morphAttributes.position[index]),!0===material.morphNormals&&morphAttributes.normal&&geometry.addAttribute("morphNormal"+i,morphAttributes.normal[index])}else!0===material.morphTargets&&geometry.removeAttribute("morphTarget"+i),!0===material.morphNormals&&geometry.removeAttribute("morphNormal"+i)}
var uniforms=program.getUniforms();null!==uniforms.morphTargetInfluences&&_gl.uniform1fv(uniforms.morphTargetInfluences,morphInfluences),updateBuffers=!0}index=geometry.index;var renderer,position=geometry.attributes.position;if(!0===material.wireframe&&(index=objects.getWireframeAttribute(geometry)),null!==index?(renderer=indexedBufferRenderer).setIndex(index):renderer=bufferRenderer,updateBuffers&&(setupVertexAttributes(material,program,geometry),null!==index&&_gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER,objects.getAttributeBuffer(index))),group===undefined){var count;count=null!==index?index.count:position instanceof THREE.InterleavedBufferAttribute?position.data.array.length/3:position.count;var drawRange=geometry.drawRange;group={start:drawRange.start,count:Math.min(drawRange.count,count)}}if(object instanceof THREE.Mesh)!0===material.wireframe?(state.setLineWidth(material.wireframeLinewidth*pixelRatio),renderer.setMode(_gl.LINES)):renderer.setMode(_gl.TRIANGLES),geometry instanceof THREE.InstancedBufferGeometry&&geometry.maxInstancedCount>0?renderer.renderInstances(geometry):renderer.render(group.start,group.count);else if(object instanceof THREE.Line){var lineWidth=material.linewidth;lineWidth===undefined&&(lineWidth=1),state.setLineWidth(lineWidth*pixelRatio),object instanceof THREE.LineSegments?renderer.setMode(_gl.LINES):renderer.setMode(_gl.LINE_STRIP),renderer.render(group.start,group.count)}else object instanceof THREE.Points&&(renderer.setMode(_gl.POINTS),renderer.render(group.start,group.count))},this.render=function(scene,camera,renderTarget,forceClear){if(camera instanceof THREE.Camera!=!1){var fog=scene.fog;if(_currentGeometryProgram="",_currentMaterialId=-1,_currentCamera=null,_lightsNeedUpdate=!0,!0===scene.autoUpdate&&scene.updateMatrixWorld(),null===camera.parent&&camera.updateMatrixWorld(),camera.matrixWorldInverse.getInverse(camera.matrixWorld),_projScreenMatrix.multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse),_frustum.setFromMatrix(_projScreenMatrix),lights.length=0,opaqueObjectsLastIndex=-1,transparentObjectsLastIndex=-1,opaqueImmediateObjectsLastIndex=-1,transparentImmediateObjectsLastIndex=-1,sprites.length=0,lensFlares.length=0,projectObject(scene),opaqueObjects.length=opaqueObjectsLastIndex+1,transparentObjects.length=transparentObjectsLastIndex+1,opaqueImmediateObjects.length=opaqueImmediateObjectsLastIndex+1,transparentImmediateObjects.length=transparentImmediateObjectsLastIndex+1,!0===_this.sortObjects&&(opaqueObjects.sort(painterSortStable),transparentObjects.sort(reversePainterSortStable)),shadowMap.render(scene,camera),_infoRender.calls=0,_infoRender.vertices=0,_infoRender.faces=0,_infoRender.points=0,this.setRenderTarget(renderTarget),(this.autoClear||forceClear)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),scene.overrideMaterial){var overrideMaterial=scene.overrideMaterial;renderObjects(opaqueObjects,camera,lights,fog,overrideMaterial),renderObjects(transparentObjects,camera,lights,fog,overrideMaterial),renderObjectsImmediate(opaqueImmediateObjects,camera,lights,fog,overrideMaterial),renderObjectsImmediate(transparentImmediateObjects,camera,lights,fog,overrideMaterial)}else state.setBlending(THREE.NoBlending),renderObjects(opaqueObjects,camera,lights,fog),renderObjectsImmediate(opaqueImmediateObjects,camera,lights,fog),renderObjects(transparentObjects,camera,lights,fog),renderObjectsImmediate(transparentImmediateObjects,camera,lights,fog);spritePlugin.render(scene,camera),lensFlarePlugin.render(scene,camera,_currentWidth,_currentHeight),renderTarget&&renderTarget.generateMipmaps&&renderTarget.minFilter!==THREE.NearestFilter&&renderTarget.minFilter!==THREE.LinearFilter&&updateRenderTargetMipmap(renderTarget),state.setDepthTest(!0),state.setDepthWrite(!0),state.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(cullFace,frontFaceDirection){cullFace===THREE.CullFaceNone?state.disable(_gl.CULL_FACE):(frontFaceDirection===THREE.FrontFaceDirectionCW?_gl.frontFace(_gl.CW):_gl.frontFace(_gl.CCW),cullFace===THREE.CullFaceBack?_gl.cullFace(_gl.BACK):cullFace===THREE.CullFaceFront?_gl.cullFace(_gl.FRONT):_gl.cullFace(_gl.FRONT_AND_BACK),state.enable(_gl.CULL_FACE))},this.setTexture=function(texture,slot){var textureProperties=properties.get(texture);if(texture.version>0&&textureProperties.__version!==texture.version){var image=texture.image;return image===undefined?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",texture):!1===image.complete?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",texture):void uploadTexture(textureProperties,texture,slot)}state.activeTexture(_gl.TEXTURE0+slot),state.bindTexture(_gl.TEXTURE_2D,textureProperties.__webglTexture)},this.setRenderTarget=function(renderTarget){var framebuffer,width,height,vx,vy,isCube=renderTarget instanceof THREE.WebGLRenderTargetCube;if(renderTarget&&properties.get(renderTarget).__webglFramebuffer===undefined){var renderTargetProperties=properties.get(renderTarget);renderTarget.depthBuffer===undefined&&(renderTarget.depthBuffer=!0),renderTarget.stencilBuffer===undefined&&(renderTarget.stencilBuffer=!0),renderTarget.addEventListener("dispose",onRenderTargetDispose),renderTargetProperties.__webglTexture=_gl.createTexture(),_infoMemory.textures++;var isTargetPowerOfTwo=THREE.Math.isPowerOfTwo(renderTarget.width)&&THREE.Math.isPowerOfTwo(renderTarget.height),glFormat=paramThreeToGL(renderTarget.format),glType=paramThreeToGL(renderTarget.type);if(isCube){renderTargetProperties.__webglFramebuffer=[],renderTargetProperties.__webglRenderbuffer=[],state.bindTexture(_gl.TEXTURE_CUBE_MAP,renderTargetProperties.__webglTexture),setTextureParameters(_gl.TEXTURE_CUBE_MAP,renderTarget,isTargetPowerOfTwo);for(var i=0;i<6;i++)renderTargetProperties.__webglFramebuffer[i]=_gl.createFramebuffer(),renderTargetProperties.__webglRenderbuffer[i]=_gl.createRenderbuffer(),state.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,glFormat,renderTarget.width,renderTarget.height,0,glFormat,glType,null),setupFrameBuffer(renderTargetProperties.__webglFramebuffer[i],renderTarget,_gl.TEXTURE_CUBE_MAP_POSITIVE_X+i),setupRenderBuffer(renderTargetProperties.__webglRenderbuffer[i],renderTarget);renderTarget.generateMipmaps&&isTargetPowerOfTwo&&_gl.generateMipmap(_gl.TEXTURE_CUBE_MAP)}else renderTargetProperties.__webglFramebuffer=_gl.createFramebuffer(),renderTarget.shareDepthFrom?renderTargetProperties.__webglRenderbuffer=renderTarget.shareDepthFrom.__webglRenderbuffer:renderTargetProperties.__webglRenderbuffer=_gl.createRenderbuffer(),state.bindTexture(_gl.TEXTURE_2D,renderTargetProperties.__webglTexture),setTextureParameters(_gl.TEXTURE_2D,renderTarget,isTargetPowerOfTwo),state.texImage2D(_gl.TEXTURE_2D,0,glFormat,renderTarget.width,renderTarget.height,0,glFormat,glType,null),setupFrameBuffer(renderTargetProperties.__webglFramebuffer,renderTarget,_gl.TEXTURE_2D),renderTarget.shareDepthFrom?renderTarget.depthBuffer&&!renderTarget.stencilBuffer?_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_ATTACHMENT,_gl.RENDERBUFFER,renderTargetProperties.__webglRenderbuffer):renderTarget.depthBuffer&&renderTarget.stencilBuffer&&_gl.framebufferRenderbuffer(_gl.FRAMEBUFFER,_gl.DEPTH_STENCIL_ATTACHMENT,_gl.RENDERBUFFER,renderTargetProperties.__webglRenderbuffer):setupRenderBuffer(renderTargetProperties.__webglRenderbuffer,renderTarget),renderTarget.generateMipmaps&&isTargetPowerOfTwo&&_gl.generateMipmap(_gl.TEXTURE_2D);isCube?state.bindTexture(_gl.TEXTURE_CUBE_MAP,null):state.bindTexture(_gl.TEXTURE_2D,null),_gl.bindRenderbuffer(_gl.RENDERBUFFER,null),_gl.bindFramebuffer(_gl.FRAMEBUFFER,null)}if(renderTarget){renderTargetProperties=properties.get(renderTarget);framebuffer=isCube?renderTargetProperties.__webglFramebuffer[renderTarget.activeCubeFace]:renderTargetProperties.__webglFramebuffer,width=renderTarget.width,height=renderTarget.height,vx=0,vy=0}else framebuffer=null,width=_viewportWidth,height=_viewportHeight,vx=_viewportX,vy=_viewportY;framebuffer!==_currentFramebuffer&&(_gl.bindFramebuffer(_gl.FRAMEBUFFER,framebuffer),_gl.viewport(vx,vy,width,height),_currentFramebuffer=framebuffer),_currentWidth=width,_currentHeight=height},this.readRenderTargetPixels=function(renderTarget,x,y,width,height,buffer){if(renderTarget instanceof THREE.WebGLRenderTarget){if(properties.get(renderTarget).__webglFramebuffer){if(renderTarget.format!==THREE.RGBAFormat)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");var restore=!1;properties.get(renderTarget).__webglFramebuffer!==_currentFramebuffer&&(_gl.bindFramebuffer(_gl.FRAMEBUFFER,properties.get(renderTarget).__webglFramebuffer),restore=!0),_gl.checkFramebufferStatus(_gl.FRAMEBUFFER)===_gl.FRAMEBUFFER_COMPLETE?_gl.readPixels(x,y,width,height,_gl.RGBA,_gl.UNSIGNED_BYTE,buffer):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),restore&&_gl.bindFramebuffer(_gl.FRAMEBUFFER,_currentFramebuffer)}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),extensions.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),extensions.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),extensions.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),extensions.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),extensions.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),extensions.get("EXT_blend_minmax")},this.supportsVertexTextures=function(){return capabilities.vertexTextures},this.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),extensions.get("ANGLE_instanced_arrays")},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Object.defineProperties(this,{shadowMapEnabled:{get:function(){return shadowMap.enabled},set:function(value){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),shadowMap.enabled=value}},shadowMapType:{get:function(){return shadowMap.type},set:function(value){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),shadowMap.type=value}},shadowMapCullFace:{get:function(){return shadowMap.cullFace},set:function(value){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),shadowMap.cullFace=value}},shadowMapDebug:{get:function(){return shadowMap.debug},set:function(value){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug."),shadowMap.debug=value}}})},THREE.WebGLRenderTarget=function(width,height,options){this.uuid=THREE.Math.generateUUID(),this.width=width,this.height=height,options=options||{},this.wrapS=options.wrapS!==undefined?options.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=options.wrapT!==undefined?options.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=options.magFilter!==undefined?options.magFilter:THREE.LinearFilter,this.minFilter=options.minFilter!==undefined?options.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=options.anisotropy!==undefined?options.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=options.format!==undefined?options.format:THREE.RGBAFormat,this.type=options.type!==undefined?options.type:THREE.UnsignedByteType,this.depthBuffer=options.depthBuffer===undefined||options.depthBuffer,this.stencilBuffer=options.stencilBuffer===undefined||options.stencilBuffer,this.generateMipmaps=!0,this.shareDepthFrom=options.shareDepthFrom!==undefined?options.shareDepthFrom:null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(width,height){this.width===width&&this.height===height||(this.width=width,this.height=height,this.dispose())},clone:function(){return(new this.constructor).copy(this)},copy:function(source){return this.width=source.width,this.height=source.height,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.format=source.format,this.type=source.type,this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,this.generateMipmaps=source.generateMipmaps,this.shareDepthFrom=source.shareDepthFrom,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(width,height,options){THREE.WebGLRenderTarget.call(this,width,height,options),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.WebGLBufferRenderer=function(_gl,extensions,_infoRender){function setMode(value){mode=value}function render(start,count){_gl.drawArrays(mode,start,count),_infoRender.calls++,_infoRender.vertices+=count,mode===_gl.TRIANGLES&&(_infoRender.faces+=count/3)}function renderInstances(geometry){var extension=extensions.get("ANGLE_instanced_arrays");if(null!==extension){var position=geometry.attributes.position;position instanceof THREE.InterleavedBufferAttribute?extension.drawArraysInstancedANGLE(mode,0,position.data.count,geometry.maxInstancedCount):extension.drawArraysInstancedANGLE(mode,0,position.count,geometry.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}var mode;this.setMode=setMode,this.render=render,this.renderInstances=renderInstances},THREE.WebGLIndexedBufferRenderer=function(_gl,extensions,_infoRender){function setMode(value){mode=value}function setIndex(index){index.array instanceof Uint32Array&&extensions.get("OES_element_index_uint")?(type=_gl.UNSIGNED_INT,size=4):(type=_gl.UNSIGNED_SHORT,size=2)}function render(start,count){_gl.drawElements(mode,count,type,start*size),_infoRender.calls++,_infoRender.vertices+=count,mode===_gl.TRIANGLES&&(_infoRender.faces+=count/3)}function renderInstances(geometry){var extension=extensions.get("ANGLE_instanced_arrays");if(null!==extension){var index=geometry.index;extension.drawElementsInstancedANGLE(mode,index.array.length,type,0,geometry.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}var mode,type,size;this.setMode=setMode,this.setIndex=setIndex,this.render=render,this.renderInstances=renderInstances},THREE.WebGLExtensions=function(gl){var extensions={};this.get=function(name){if(extensions[name]!==undefined)return extensions[name];var extension;switch(name){case"EXT_texture_filter_anisotropic":extension=gl.getExtension("EXT_texture_filter_anisotropic")||gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":extension=gl.getExtension("WEBGL_compressed_texture_s3tc")||gl.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":extension=gl.getExtension("WEBGL_compressed_texture_pvrtc")||gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:extension=gl.getExtension(name)}return null===extension&&console.warn("THREE.WebGLRenderer: "+name+" extension not supported."),extensions[name]=extension,extension}},THREE.WebGLCapabilities=function(gl,extensions,parameters){function getMaxPrecision(precision){if("highp"===precision){if(gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT).precision>0&&gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT).precision>0)return"highp";precision="mediump"}return"mediump"===precision&&gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.MEDIUM_FLOAT).precision>0&&gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}this.getMaxPrecision=getMaxPrecision,this.precision=parameters.precision!==undefined?parameters.precision:"highp",this.logarithmicDepthBuffer=parameters.logarithmicDepthBuffer!==undefined&&parameters.logarithmicDepthBuffer,this.maxTextures=gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=gl.getParameter(gl.MAX_TEXTURE_SIZE),this.maxCubemapSize=gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=gl.getParameter(gl.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=gl.getParameter(gl.MAX_VARYING_VECTORS),this.maxFragmentUniforms=gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!extensions.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var _maxPrecision=getMaxPrecision(this.precision);_maxPrecision!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",_maxPrecision,"instead."),this.precision=_maxPrecision),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!extensions.get("EXT_frag_depth"))},THREE.WebGLGeometries=function(gl,properties,info){function get(object){var buffergeometry,geometry=object.geometry;return geometries[geometry.id]!==undefined?geometries[geometry.id]:(geometry.addEventListener("dispose",onGeometryDispose),geometry instanceof THREE.BufferGeometry?buffergeometry=geometry:geometry instanceof THREE.Geometry&&(geometry._bufferGeometry===undefined&&(geometry._bufferGeometry=(new THREE.BufferGeometry).setFromObject(object)),buffergeometry=geometry._bufferGeometry),geometries[geometry.id]=buffergeometry,info.memory.geometries++,buffergeometry)}function onGeometryDispose(event){var geometry=event.target;deleteAttributes(geometries[geometry.id].attributes),geometry.removeEventListener("dispose",onGeometryDispose),delete geometries[geometry.id];var property=properties.get(geometry);property.wireframe&&deleteAttribute(property.wireframe),info.memory.geometries--}function getAttributeBuffer(attribute){return attribute instanceof THREE.InterleavedBufferAttribute?properties.get(attribute.data).__webglBuffer:properties.get(attribute).__webglBuffer}function deleteAttribute(attribute){var buffer=getAttributeBuffer(attribute);buffer!==undefined&&(gl.deleteBuffer(buffer),removeAttributeBuffer(attribute))}function deleteAttributes(attributes){for(var name in attributes)deleteAttribute(attributes[name])}function removeAttributeBuffer(attribute){attribute instanceof THREE.InterleavedBufferAttribute?properties["delete"](attribute.data):properties["delete"](attribute)}var geometries={};this.get=get},THREE.WebGLObjects=function(gl,properties,info){function update(object){var geometry=geometries.get(object);object.geometry instanceof THREE.Geometry&&geometry.updateFromObject(object);var index=geometry.index,attributes=geometry.attributes;for(var name in null!==index&&updateAttribute(index,gl.ELEMENT_ARRAY_BUFFER),attributes)updateAttribute(attributes[name],gl.ARRAY_BUFFER);var morphAttributes=geometry.morphAttributes;for(var name in morphAttributes)for(var array=morphAttributes[name],i=0,l=array.length;i<l;i++)updateAttribute(array[i],gl.ARRAY_BUFFER);return geometry}function updateAttribute(attribute,bufferType){var data=attribute instanceof THREE.InterleavedBufferAttribute?attribute.data:attribute,attributeProperties=properties.get(data);attributeProperties.__webglBuffer===undefined?createBuffer(attributeProperties,data,bufferType):attributeProperties.version!==data.version&&updateBuffer(attributeProperties,data,bufferType)}function createBuffer(attributeProperties,data,bufferType){attributeProperties.__webglBuffer=gl.createBuffer(),gl.bindBuffer(bufferType,attributeProperties.__webglBuffer);var usage=data.dynamic?gl.DYNAMIC_DRAW:gl.STATIC_DRAW;gl.bufferData(bufferType,data.array,usage),attributeProperties.version=data.version}function updateBuffer(attributeProperties,data,bufferType){gl.bindBuffer(bufferType,attributeProperties.__webglBuffer),!1===data.dynamic||-1===data.updateRange.count?gl.bufferSubData(bufferType,0,data.array):0===data.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(gl.bufferSubData(bufferType,data.updateRange.offset*data.array.BYTES_PER_ELEMENT,data.array.subarray(data.updateRange.offset,data.updateRange.offset+data.updateRange.count)),data.updateRange.count=0),attributeProperties.version=data.version}function getAttributeBuffer(attribute){return attribute instanceof THREE.InterleavedBufferAttribute?properties.get(attribute.data).__webglBuffer:properties.get(attribute).__webglBuffer}function getWireframeAttribute(geometry){var property=properties.get(geometry);if(property.wireframe!==undefined)return property.wireframe;var indices=[],index=geometry.index,attributes=geometry.attributes,position=attributes.position;if(null!==index)for(var edges={},i=0,l=(array=index.array).length;i<l;i+=3){var a=array[i+0],b=array[i+1],c=array[i+2];checkEdge(edges,a,b)&&indices.push(a,b),checkEdge(edges,b,c)&&indices.push(b,c),checkEdge(edges,c,a)&&indices.push(c,a)}else{var array;for(i=0,l=(array=attributes.position.array).length/3-1;i<l;i+=3){a=i+0,b=i+1,c=i+2;indices.push(a,b,b,c,c,a)}}var TypeArray=position.count>65535?Uint32Array:Uint16Array,attribute=new THREE.BufferAttribute(new TypeArray(indices),1);return updateAttribute(attribute,gl.ELEMENT_ARRAY_BUFFER),property.wireframe=attribute,attribute}function checkEdge(edges,a,b){if(a>b){var tmp=a;a=b,b=tmp}var list=edges[a];return list===undefined?(edges[a]=[b],!0):-1===list.indexOf(b)&&(list.push(b),!0)}var geometries=new THREE.WebGLGeometries(gl,properties,info);this.getAttributeBuffer=getAttributeBuffer,this.getWireframeAttribute=getWireframeAttribute,this.update=update},THREE.WebGLProgram=function(){function generateDefines(defines){var chunks=[];for(var name in defines){var value=defines[name];!1!==value&&chunks.push("#define "+name+" "+value)}return chunks.join("\n")}function fetchUniformLocations(gl,program){for(var uniforms={},n=gl.getProgramParameter(program,gl.ACTIVE_UNIFORMS),i=0;i<n;i++){var name=gl.getActiveUniform(program,i).name,location=gl.getUniformLocation(program,name),suffixPos=name.lastIndexOf("[0]");-1!==suffixPos&&suffixPos===name.length-3&&(uniforms[name.substr(0,suffixPos)]=location),uniforms[name]=location}return uniforms}function fetchAttributeLocations(gl,program){for(var attributes={},n=gl.getProgramParameter(program,gl.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var name=gl.getActiveAttrib(program,i).name;attributes[name]=gl.getAttribLocation(program,name)}return attributes}function filterEmptyLine(string){return""!==string}var programIdCount=0;return function(renderer,code,material,parameters){var gl=renderer.context,defines=material.defines,vertexShader=material.__webglShader.vertexShader,fragmentShader=material.__webglShader.fragmentShader,shadowMapTypeDefine="SHADOWMAP_TYPE_BASIC";parameters.shadowMapType===THREE.PCFShadowMap?shadowMapTypeDefine="SHADOWMAP_TYPE_PCF":parameters.shadowMapType===THREE.PCFSoftShadowMap&&(shadowMapTypeDefine="SHADOWMAP_TYPE_PCF_SOFT");var envMapTypeDefine="ENVMAP_TYPE_CUBE",envMapModeDefine="ENVMAP_MODE_REFLECTION",envMapBlendingDefine="ENVMAP_BLENDING_MULTIPLY";if(parameters.envMap){switch(material.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:envMapTypeDefine="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:envMapTypeDefine="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:envMapTypeDefine="ENVMAP_TYPE_SPHERE"}switch(material.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:envMapModeDefine="ENVMAP_MODE_REFRACTION"}switch(material.combine){case THREE.MultiplyOperation:envMapBlendingDefine="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:envMapBlendingDefine="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:envMapBlendingDefine="ENVMAP_BLENDING_ADD"}}var prefixVertex,prefixFragment,gammaFactorDefine=renderer.gammaFactor>0?renderer.gammaFactor:1,customDefines=generateDefines(defines),program=gl.createProgram();material instanceof THREE.RawShaderMaterial?(prefixVertex="",prefixFragment=""):(prefixVertex=["precision "+parameters.precision+" float;","precision "+parameters.precision+" int;","#define SHADER_NAME "+material.__webglShader.name,customDefines,parameters.supportsVertexTextures?"#define VERTEX_TEXTURES":"",renderer.gammaInput?"#define GAMMA_INPUT":"",renderer.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+gammaFactorDefine,"#define MAX_DIR_LIGHTS "+parameters.maxDirLights,"#define MAX_POINT_LIGHTS "+parameters.maxPointLights,"#define MAX_SPOT_LIGHTS "+parameters.maxSpotLights,"#define MAX_HEMI_LIGHTS "+parameters.maxHemiLights,"#define MAX_SHADOWS "+parameters.maxShadows,"#define MAX_BONES "+parameters.maxBones,parameters.map?"#define USE_MAP":"",parameters.envMap?"#define USE_ENVMAP":"",parameters.envMap?"#define "+envMapModeDefine:"",parameters.lightMap?"#define USE_LIGHTMAP":"",parameters.aoMap?"#define USE_AOMAP":"",parameters.emissiveMap?"#define USE_EMISSIVEMAP":"",parameters.bumpMap?"#define USE_BUMPMAP":"",parameters.normalMap?"#define USE_NORMALMAP":"",parameters.displacementMap&&parameters.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",parameters.specularMap?"#define USE_SPECULARMAP":"",parameters.alphaMap?"#define USE_ALPHAMAP":"",parameters.vertexColors?"#define USE_COLOR":"",parameters.flatShading?"#define FLAT_SHADED":"",parameters.skinning?"#define USE_SKINNING":"",parameters.useVertexTexture?"#define BONE_TEXTURE":"",parameters.morphTargets?"#define USE_MORPHTARGETS":"",parameters.morphNormals&&!1===parameters.flatShading?"#define USE_MORPHNORMALS":"",parameters.doubleSided?"#define DOUBLE_SIDED":"",parameters.flipSided?"#define FLIP_SIDED":"",parameters.shadowMapEnabled?"#define USE_SHADOWMAP":"",parameters.shadowMapEnabled?"#define "+shadowMapTypeDefine:"",parameters.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",parameters.sizeAttenuation?"#define USE_SIZEATTENUATION":"",parameters.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",parameters.logarithmicDepthBuffer&&renderer.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),prefixFragment=[parameters.bumpMap||parameters.normalMap||parameters.flatShading||material.derivatives?"#extension GL_OES_standard_derivatives : enable":"",parameters.logarithmicDepthBuffer&&renderer.extensions.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"","precision "+parameters.precision+" float;","precision "+parameters.precision+" int;","#define SHADER_NAME "+material.__webglShader.name,customDefines,"#define MAX_DIR_LIGHTS "+parameters.maxDirLights,"#define MAX_POINT_LIGHTS "+parameters.maxPointLights,"#define MAX_SPOT_LIGHTS "+parameters.maxSpotLights,"#define MAX_HEMI_LIGHTS "+parameters.maxHemiLights,"#define MAX_SHADOWS "+parameters.maxShadows,parameters.alphaTest?"#define ALPHATEST "+parameters.alphaTest:"",renderer.gammaInput?"#define GAMMA_INPUT":"",renderer.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+gammaFactorDefine,parameters.useFog&&parameters.fog?"#define USE_FOG":"",parameters.useFog&&parameters.fogExp?"#define FOG_EXP2":"",parameters.map?"#define USE_MAP":"",parameters.envMap?"#define USE_ENVMAP":"",parameters.envMap?"#define "+envMapTypeDefine:"",parameters.envMap?"#define "+envMapModeDefine:"",parameters.envMap?"#define "+envMapBlendingDefine:"",parameters.lightMap?"#define USE_LIGHTMAP":"",parameters.aoMap?"#define USE_AOMAP":"",parameters.emissiveMap?"#define USE_EMISSIVEMAP":"",parameters.bumpMap?"#define USE_BUMPMAP":"",parameters.normalMap?"#define USE_NORMALMAP":"",parameters.specularMap?"#define USE_SPECULARMAP":"",parameters.alphaMap?"#define USE_ALPHAMAP":"",parameters.vertexColors?"#define USE_COLOR":"",parameters.flatShading?"#define FLAT_SHADED":"",parameters.metal?"#define METAL":"",parameters.doubleSided?"#define DOUBLE_SIDED":"",parameters.flipSided?"#define FLIP_SIDED":"",parameters.shadowMapEnabled?"#define USE_SHADOWMAP":"",parameters.shadowMapEnabled?"#define "+shadowMapTypeDefine:"",parameters.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",parameters.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",parameters.logarithmicDepthBuffer&&renderer.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(filterEmptyLine).join("\n"));var vertexGlsl=prefixVertex+vertexShader,fragmentGlsl=prefixFragment+fragmentShader,glVertexShader=THREE.WebGLShader(gl,gl.VERTEX_SHADER,vertexGlsl),glFragmentShader=THREE.WebGLShader(gl,gl.FRAGMENT_SHADER,fragmentGlsl);gl.attachShader(program,glVertexShader),gl.attachShader(program,glFragmentShader),material.index0AttributeName!==undefined?gl.bindAttribLocation(program,0,material.index0AttributeName):!0===parameters.morphTargets&&gl.bindAttribLocation(program,0,"position"),gl.linkProgram(program);var cachedUniforms,cachedAttributes,programLog=gl.getProgramInfoLog(program),vertexLog=gl.getShaderInfoLog(glVertexShader),fragmentLog=gl.getShaderInfoLog(glFragmentShader),runnable=!0,haveDiagnostics=!0;return!1===gl.getProgramParameter(program,gl.LINK_STATUS)?(runnable=!1,console.error("THREE.WebGLProgram: shader error: ",gl.getError(),"gl.VALIDATE_STATUS",gl.getProgramParameter(program,gl.VALIDATE_STATUS),"gl.getProgramInfoLog",programLog,vertexLog,fragmentLog)):""!==programLog?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",programLog):""!==vertexLog&&""!==fragmentLog||(haveDiagnostics=!1),haveDiagnostics&&(this.diagnostics={runnable:runnable,material:material,programLog:programLog,vertexShader:{log:vertexLog,prefix:prefixVertex},fragmentShader:{log:fragmentLog,prefix:prefixFragment}}),gl.deleteShader(glVertexShader),gl.deleteShader(glFragmentShader),this.getUniforms=function(){return cachedUniforms===undefined&&(cachedUniforms=fetchUniformLocations(gl,program)),cachedUniforms},this.getAttributes=function(){
return cachedAttributes===undefined&&(cachedAttributes=fetchAttributeLocations(gl,program)),cachedAttributes},this.destroy=function(){gl.deleteProgram(program),this.program=undefined},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=programIdCount++,this.code=code,this.usedTimes=1,this.program=program,this.vertexShader=glVertexShader,this.fragmentShader=glFragmentShader,this}}(),THREE.WebGLPrograms=function(renderer,capabilities){function allocateBones(object){if(capabilities.floatVertexTextures&&object&&object.skeleton&&object.skeleton.useVertexTexture)return 1024;var nVertexUniforms=capabilities.maxVertexUniforms,maxBones=Math.floor((nVertexUniforms-20)/4);return object!==undefined&&object instanceof THREE.SkinnedMesh&&(maxBones=Math.min(object.skeleton.bones.length,maxBones))<object.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+object.skeleton.bones.length+", this GPU supports just "+maxBones+" (try OpenGL instead of ANGLE)"),maxBones}function allocateLights(lights){for(var dirLights=0,pointLights=0,spotLights=0,hemiLights=0,l=0,ll=lights.length;l<ll;l++){var light=lights[l];light.onlyShadow||!1===light.visible||(light instanceof THREE.DirectionalLight&&dirLights++,light instanceof THREE.PointLight&&pointLights++,light instanceof THREE.SpotLight&&spotLights++,light instanceof THREE.HemisphereLight&&hemiLights++)}return{directional:dirLights,point:pointLights,spot:spotLights,hemi:hemiLights}}function allocateShadows(lights){for(var maxShadows=0,l=0,ll=lights.length;l<ll;l++){var light=lights[l];light.castShadow&&(light instanceof THREE.SpotLight&&maxShadows++,light instanceof THREE.DirectionalLight&&maxShadows++)}return maxShadows}var programs=[],shaderIDs={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},parameterNames=["precision","supportsVertexTextures","map","envMap","envMapMode","lightMap","aoMap","emissiveMap","bumpMap","normalMap","specularMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","maxDirLights","maxPointLights","maxSpotLights","maxHemiLights","maxShadows","shadowMapEnabled","shadowMapType","shadowMapDebug","alphaTest","metal","doubleSided","flipSided"];this.getParameters=function(material,lights,fog,object){var shaderID=shaderIDs[material.type],maxLightCount=allocateLights(lights),maxShadows=allocateShadows(lights),maxBones=allocateBones(object),precision=renderer.getPrecision();return null!==material.precision&&(precision=capabilities.getMaxPrecision(material.precision))!==material.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",material.precision,"not supported, using",precision,"instead."),{shaderID:shaderID,precision:precision,supportsVertexTextures:capabilities.vertexTextures,map:!!material.map,envMap:!!material.envMap,envMapMode:material.envMap&&material.envMap.mapping,lightMap:!!material.lightMap,aoMap:!!material.aoMap,emissiveMap:!!material.emissiveMap,bumpMap:!!material.bumpMap,normalMap:!!material.normalMap,displacementMap:!!material.displacementMap,specularMap:!!material.specularMap,alphaMap:!!material.alphaMap,combine:material.combine,vertexColors:material.vertexColors,fog:fog,useFog:material.fog,fogExp:fog instanceof THREE.FogExp2,flatShading:material.shading===THREE.FlatShading,sizeAttenuation:material.sizeAttenuation,logarithmicDepthBuffer:renderer.logarithmicDepthBuffer,skinning:material.skinning,maxBones:maxBones,useVertexTexture:capabilities.floatVertexTextures&&object&&object.skeleton&&object.skeleton.useVertexTexture,morphTargets:material.morphTargets,morphNormals:material.morphNormals,maxMorphTargets:renderer.maxMorphTargets,maxMorphNormals:renderer.maxMorphNormals,maxDirLights:maxLightCount.directional,maxPointLights:maxLightCount.point,maxSpotLights:maxLightCount.spot,maxHemiLights:maxLightCount.hemi,maxShadows:maxShadows,shadowMapEnabled:renderer.shadowMap.enabled&&object.receiveShadow&&maxShadows>0,shadowMapType:renderer.shadowMap.type,shadowMapDebug:renderer.shadowMap.debug,alphaTest:material.alphaTest,metal:material.metal,doubleSided:material.side===THREE.DoubleSide,flipSided:material.side===THREE.BackSide}},this.getProgramCode=function(material,parameters){var chunks=[];if(parameters.shaderID?chunks.push(parameters.shaderID):(chunks.push(material.fragmentShader),chunks.push(material.vertexShader)),material.defines!==undefined)for(var name in material.defines)chunks.push(name),chunks.push(material.defines[name]);for(var i=0;i<parameterNames.length;i++){var parameterName=parameterNames[i];chunks.push(parameterName),chunks.push(parameters[parameterName])}return chunks.join()},this.acquireProgram=function(material,parameters,code){for(var program,p=0,pl=programs.length;p<pl;p++){var programInfo=programs[p];if(programInfo.code===code){++(program=programInfo).usedTimes;break}}return program===undefined&&(program=new THREE.WebGLProgram(renderer,code,material,parameters),programs.push(program)),program},this.releaseProgram=function(program){if(0==--program.usedTimes){var i=programs.indexOf(program);programs[i]=programs[programs.length-1],programs.pop(),program.destroy()}},this.programs=programs},THREE.WebGLProperties=function(){var properties={};this.get=function(object){var uuid=object.uuid,map=properties[uuid];return map===undefined&&(map={},properties[uuid]=map),map},this["delete"]=function(object){delete properties[object.uuid]},this.clear=function(){properties={}}},THREE.WebGLShader=function(){var addLineNumbers=function(string){for(var lines=string.split("\n"),i=0;i<lines.length;i++)lines[i]=i+1+": "+lines[i];return lines.join("\n")};return function(gl,type,string){var shader=gl.createShader(type);return gl.shaderSource(shader,string),gl.compileShader(shader),!1===gl.getShaderParameter(shader,gl.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==gl.getShaderInfoLog(shader)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",type===gl.VERTEX_SHADER?"vertex":"fragment",gl.getShaderInfoLog(shader),addLineNumbers(string)),shader}}(),THREE.WebGLShadowMap=function(_renderer,_lights,_objects){function getDepthMaterial(object,material){var depthMaterial,geometry=object.geometry,useMorphing=geometry.morphTargets!==undefined&&geometry.morphTargets.length>0&&material.morphTargets,useSkinning=object instanceof THREE.SkinnedMesh&&material.skinning;return(depthMaterial=object.customDepthMaterial?object.customDepthMaterial:useSkinning?useMorphing?_depthMaterialMorphSkin:_depthMaterialSkin:useMorphing?_depthMaterialMorph:_depthMaterial).visible=material.visible,depthMaterial.wireframe=material.wireframe,depthMaterial.wireframeLinewidth=material.wireframeLinewidth,depthMaterial}function projectObject(object,camera){if(!1!==object.visible){if(object instanceof THREE.Mesh||object instanceof THREE.Line||object instanceof THREE.Points)if(object.castShadow&&(!1===object.frustumCulled||!0===_frustum.intersectsObject(object)))!0===object.material.visible&&(object.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld),_renderList.push(object));for(var children=object.children,i=0,l=children.length;i<l;i++)projectObject(children[i],camera)}}var _gl=_renderer.context,_state=_renderer.state,_frustum=new THREE.Frustum,_projScreenMatrix=new THREE.Matrix4,_matrixPosition=(new THREE.Vector3,new THREE.Vector3,new THREE.Vector3),_renderList=[],depthShader=THREE.ShaderLib.depthRGBA,depthUniforms=THREE.UniformsUtils.clone(depthShader.uniforms),_depthMaterial=new THREE.ShaderMaterial({uniforms:depthUniforms,vertexShader:depthShader.vertexShader,fragmentShader:depthShader.fragmentShader}),_depthMaterialMorph=new THREE.ShaderMaterial({uniforms:depthUniforms,vertexShader:depthShader.vertexShader,fragmentShader:depthShader.fragmentShader,morphTargets:!0}),_depthMaterialSkin=new THREE.ShaderMaterial({uniforms:depthUniforms,vertexShader:depthShader.vertexShader,fragmentShader:depthShader.fragmentShader,skinning:!0}),_depthMaterialMorphSkin=new THREE.ShaderMaterial({uniforms:depthUniforms,vertexShader:depthShader.vertexShader,fragmentShader:depthShader.fragmentShader,morphTargets:!0,skinning:!0});_depthMaterial._shadowPass=!0,_depthMaterialMorph._shadowPass=!0,_depthMaterialSkin._shadowPass=!0,_depthMaterialMorphSkin._shadowPass=!0;var scope=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=THREE.PCFShadowMap,this.cullFace=THREE.CullFaceFront,this.render=function(scene){if(!1!==scope.enabled&&(!1!==scope.autoUpdate||!1!==scope.needsUpdate)){_gl.clearColor(1,1,1,1),_state.disable(_gl.BLEND),_state.enable(_gl.CULL_FACE),_gl.frontFace(_gl.CCW),scope.cullFace===THREE.CullFaceFront?_gl.cullFace(_gl.FRONT):_gl.cullFace(_gl.BACK),_state.setDepthTest(!0);for(var i=0,il=_lights.length;i<il;i++){var light=_lights[i];if(light.castShadow){if(!light.shadowMap){var shadowFilter=THREE.LinearFilter;scope.type===THREE.PCFSoftShadowMap&&(shadowFilter=THREE.NearestFilter);var pars={minFilter:shadowFilter,magFilter:shadowFilter,format:THREE.RGBAFormat};light.shadowMap=new THREE.WebGLRenderTarget(light.shadowMapWidth,light.shadowMapHeight,pars),light.shadowMapSize=new THREE.Vector2(light.shadowMapWidth,light.shadowMapHeight),light.shadowMatrix=new THREE.Matrix4}if(!light.shadowCamera){if(light instanceof THREE.SpotLight)light.shadowCamera=new THREE.PerspectiveCamera(light.shadowCameraFov,light.shadowMapWidth/light.shadowMapHeight,light.shadowCameraNear,light.shadowCameraFar);else{if(!(light instanceof THREE.DirectionalLight)){console.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",light);continue}light.shadowCamera=new THREE.OrthographicCamera(light.shadowCameraLeft,light.shadowCameraRight,light.shadowCameraTop,light.shadowCameraBottom,light.shadowCameraNear,light.shadowCameraFar)}scene.add(light.shadowCamera),!0===scene.autoUpdate&&scene.updateMatrixWorld()}light.shadowCameraVisible&&!light.cameraHelper&&(light.cameraHelper=new THREE.CameraHelper(light.shadowCamera),scene.add(light.cameraHelper));var shadowMap=light.shadowMap,shadowMatrix=light.shadowMatrix,shadowCamera=light.shadowCamera;shadowCamera.position.setFromMatrixPosition(light.matrixWorld),_matrixPosition.setFromMatrixPosition(light.target.matrixWorld),shadowCamera.lookAt(_matrixPosition),shadowCamera.updateMatrixWorld(),shadowCamera.matrixWorldInverse.getInverse(shadowCamera.matrixWorld),light.cameraHelper&&(light.cameraHelper.visible=light.shadowCameraVisible),light.shadowCameraVisible&&light.cameraHelper.update(),shadowMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),shadowMatrix.multiply(shadowCamera.projectionMatrix),shadowMatrix.multiply(shadowCamera.matrixWorldInverse),_projScreenMatrix.multiplyMatrices(shadowCamera.projectionMatrix,shadowCamera.matrixWorldInverse),_frustum.setFromMatrix(_projScreenMatrix),_renderer.setRenderTarget(shadowMap),_renderer.clear(),_renderList.length=0,projectObject(scene,shadowCamera);for(var j=0,jl=_renderList.length;j<jl;j++){var object=_renderList[j],geometry=_objects.update(object),material=object.material;if(material instanceof THREE.MeshFaceMaterial)for(var groups=geometry.groups,materials=material.materials,k=0,kl=groups.length;k<kl;k++){var group=groups[k],groupMaterial=materials[group.materialIndex];!0===groupMaterial.visible&&_renderer.renderBufferDirect(shadowCamera,_lights,null,geometry,getDepthMaterial(object,groupMaterial),object,group)}else _renderer.renderBufferDirect(shadowCamera,_lights,null,geometry,getDepthMaterial(object,material),object)}}}var clearColor=_renderer.getClearColor(),clearAlpha=_renderer.getClearAlpha();_renderer.setClearColor(clearColor,clearAlpha),_state.enable(_gl.BLEND),scope.cullFace===THREE.CullFaceFront&&_gl.cullFace(_gl.BACK),_renderer.resetGLState(),scope.needsUpdate=!1}}},THREE.WebGLState=function(gl,extensions,paramThreeToGL){var _this=this,newAttributes=new Uint8Array(16),enabledAttributes=new Uint8Array(16),capabilities={},compressedTextureFormats=null,currentBlending=null,currentBlendEquation=null,currentBlendSrc=null,currentBlendDst=null,currentBlendEquationAlpha=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null,currentDepthFunc=null,currentDepthWrite=null,currentColorWrite=null,currentFlipSided=null,currentLineWidth=null,currentPolygonOffsetFactor=null,currentPolygonOffsetUnits=null,maxTextures=gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS),currentTextureSlot=undefined,currentBoundTextures={};this.init=function(){gl.clearColor(0,0,0,1),gl.clearDepth(1),gl.clearStencil(0),this.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL),gl.frontFace(gl.CCW),gl.cullFace(gl.BACK),this.enable(gl.CULL_FACE),this.enable(gl.BLEND),gl.blendEquation(gl.FUNC_ADD),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var i=0,l=newAttributes.length;i<l;i++)newAttributes[i]=0},this.enableAttribute=function(attribute){newAttributes[attribute]=1,0===enabledAttributes[attribute]&&(gl.enableVertexAttribArray(attribute),enabledAttributes[attribute]=1)},this.disableUnusedAttributes=function(){for(var i=0,l=enabledAttributes.length;i<l;i++)enabledAttributes[i]!==newAttributes[i]&&(gl.disableVertexAttribArray(i),enabledAttributes[i]=0)},this.enable=function(id){!0!==capabilities[id]&&(gl.enable(id),capabilities[id]=!0)},this.disable=function(id){!1!==capabilities[id]&&(gl.disable(id),capabilities[id]=!1)},this.getCompressedTextureFormats=function(){if(null===compressedTextureFormats&&(compressedTextureFormats=[],extensions.get("WEBGL_compressed_texture_pvrtc")||extensions.get("WEBGL_compressed_texture_s3tc")))for(var formats=gl.getParameter(gl.COMPRESSED_TEXTURE_FORMATS),i=0;i<formats.length;i++)compressedTextureFormats.push(formats[i]);return compressedTextureFormats},this.setBlending=function(blending,blendEquation,blendSrc,blendDst,blendEquationAlpha,blendSrcAlpha,blendDstAlpha){blending!==currentBlending&&(blending===THREE.NoBlending?this.disable(gl.BLEND):blending===THREE.AdditiveBlending?(this.enable(gl.BLEND),gl.blendEquation(gl.FUNC_ADD),gl.blendFunc(gl.SRC_ALPHA,gl.ONE)):blending===THREE.SubtractiveBlending?(this.enable(gl.BLEND),gl.blendEquation(gl.FUNC_ADD),gl.blendFunc(gl.ZERO,gl.ONE_MINUS_SRC_COLOR)):blending===THREE.MultiplyBlending?(this.enable(gl.BLEND),gl.blendEquation(gl.FUNC_ADD),gl.blendFunc(gl.ZERO,gl.SRC_COLOR)):blending===THREE.CustomBlending?this.enable(gl.BLEND):(this.enable(gl.BLEND),gl.blendEquationSeparate(gl.FUNC_ADD,gl.FUNC_ADD),gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA)),currentBlending=blending),blending===THREE.CustomBlending?(blendEquationAlpha=blendEquationAlpha||blendEquation,blendSrcAlpha=blendSrcAlpha||blendSrc,blendDstAlpha=blendDstAlpha||blendDst,blendEquation===currentBlendEquation&&blendEquationAlpha===currentBlendEquationAlpha||(gl.blendEquationSeparate(paramThreeToGL(blendEquation),paramThreeToGL(blendEquationAlpha)),currentBlendEquation=blendEquation,currentBlendEquationAlpha=blendEquationAlpha),blendSrc===currentBlendSrc&&blendDst===currentBlendDst&&blendSrcAlpha===currentBlendSrcAlpha&&blendDstAlpha===currentBlendDstAlpha||(gl.blendFuncSeparate(paramThreeToGL(blendSrc),paramThreeToGL(blendDst),paramThreeToGL(blendSrcAlpha),paramThreeToGL(blendDstAlpha)),currentBlendSrc=blendSrc,currentBlendDst=blendDst,currentBlendSrcAlpha=blendSrcAlpha,currentBlendDstAlpha=blendDstAlpha)):(currentBlendEquation=null,currentBlendSrc=null,currentBlendDst=null,currentBlendEquationAlpha=null,currentBlendSrcAlpha=null,currentBlendDstAlpha=null)},this.setDepthFunc=function(depthFunc){if(currentDepthFunc!==depthFunc){if(depthFunc)switch(depthFunc){case THREE.NeverDepth:gl.depthFunc(gl.NEVER);break;case THREE.AlwaysDepth:gl.depthFunc(gl.ALWAYS);break;case THREE.LessDepth:gl.depthFunc(gl.LESS);break;case THREE.LessEqualDepth:gl.depthFunc(gl.LEQUAL);break;case THREE.EqualDepth:gl.depthFunc(gl.EQUAL);break;case THREE.GreaterEqualDepth:gl.depthFunc(gl.GEQUAL);break;case THREE.GreaterDepth:gl.depthFunc(gl.GREATER);break;case THREE.NotEqualDepth:gl.depthFunc(gl.NOTEQUAL);break;default:gl.depthFunc(gl.LEQUAL)}else gl.depthFunc(gl.LEQUAL);currentDepthFunc=depthFunc}},this.setDepthTest=function(depthTest){depthTest?this.enable(gl.DEPTH_TEST):this.disable(gl.DEPTH_TEST)},this.setDepthWrite=function(depthWrite){currentDepthWrite!==depthWrite&&(gl.depthMask(depthWrite),currentDepthWrite=depthWrite)},this.setColorWrite=function(colorWrite){currentColorWrite!==colorWrite&&(gl.colorMask(colorWrite,colorWrite,colorWrite,colorWrite),currentColorWrite=colorWrite)},this.setFlipSided=function(flipSided){currentFlipSided!==flipSided&&(flipSided?gl.frontFace(gl.CW):gl.frontFace(gl.CCW),currentFlipSided=flipSided)},this.setLineWidth=function(width){width!==currentLineWidth&&(gl.lineWidth(width),currentLineWidth=width)},this.setPolygonOffset=function(polygonOffset,factor,units){polygonOffset?this.enable(gl.POLYGON_OFFSET_FILL):this.disable(gl.POLYGON_OFFSET_FILL),!polygonOffset||currentPolygonOffsetFactor===factor&&currentPolygonOffsetUnits===units||(gl.polygonOffset(factor,units),currentPolygonOffsetFactor=factor,currentPolygonOffsetUnits=units)},this.setScissorTest=function(scissorTest){scissorTest?this.enable(gl.SCISSOR_TEST):this.disable(gl.SCISSOR_TEST)},this.activeTexture=function(webglSlot){webglSlot===undefined&&(webglSlot=gl.TEXTURE0+maxTextures-1),currentTextureSlot!==webglSlot&&(gl.activeTexture(webglSlot),currentTextureSlot=webglSlot)},this.bindTexture=function(webglType,webglTexture){currentTextureSlot===undefined&&_this.activeTexture();var boundTexture=currentBoundTextures[currentTextureSlot];boundTexture===undefined&&(boundTexture={type:undefined,texture:undefined},currentBoundTextures[currentTextureSlot]=boundTexture),boundTexture.type===webglType&&boundTexture.texture===webglTexture||(gl.bindTexture(webglType,webglTexture),boundTexture.type=webglType,boundTexture.texture=webglTexture)},this.compressedTexImage2D=function(){try{gl.compressedTexImage2D.apply(gl,arguments)}catch(error){console.error(error)}},this.texImage2D=function(){try{gl.texImage2D.apply(gl,arguments)}catch(error){console.error(error)}},this.reset=function(){for(var i=0;i<enabledAttributes.length;i++)1===enabledAttributes[i]&&(gl.disableVertexAttribArray(i),enabledAttributes[i]=0);capabilities={},compressedTextureFormats=null,currentBlending=null,currentDepthWrite=null,currentColorWrite=null,currentFlipSided=null}},THREE.LensFlarePlugin=function(renderer,flares){function createProgram(shader){var program=gl.createProgram(),fragmentShader=gl.createShader(gl.FRAGMENT_SHADER),vertexShader=gl.createShader(gl.VERTEX_SHADER),prefix="precision "+renderer.getPrecision()+" float;\n";return gl.shaderSource(fragmentShader,prefix+shader.fragmentShader),gl.shaderSource(vertexShader,prefix+shader.vertexShader),gl.compileShader(fragmentShader),gl.compileShader(vertexShader),gl.attachShader(program,fragmentShader),gl.attachShader(program,vertexShader),gl.linkProgram(program),program}var vertexBuffer,elementBuffer,program,attributes,uniforms,hasVertexTexture,tempTexture,occlusionTexture,gl=renderer.context,state=renderer.state,init=function(){var shader,vertices=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),faces=new Uint16Array([0,1,2,0,2,3]);vertexBuffer=gl.createBuffer(),elementBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,faces,gl.STATIC_DRAW),tempTexture=gl.createTexture(),occlusionTexture=gl.createTexture(),state.bindTexture(gl.TEXTURE_2D,tempTexture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGB,16,16,0,gl.RGB,gl.UNSIGNED_BYTE,null),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),state.bindTexture(gl.TEXTURE_2D,occlusionTexture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,16,16,0,gl.RGBA,gl.UNSIGNED_BYTE,null),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),shader=(hasVertexTexture=gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0)?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},program=createProgram(shader),attributes={vertex:gl.getAttribLocation(program,"position"),uv:gl.getAttribLocation(program,"uv")},uniforms={renderType:gl.getUniformLocation(program,"renderType"),map:gl.getUniformLocation(program,"map"),occlusionMap:gl.getUniformLocation(program,"occlusionMap"),opacity:gl.getUniformLocation(program,"opacity"),color:gl.getUniformLocation(program,"color"),scale:gl.getUniformLocation(program,"scale"),rotation:gl.getUniformLocation(program,"rotation"),screenPosition:gl.getUniformLocation(program,"screenPosition")}};this.render=function(scene,camera,viewportWidth,viewportHeight){if(0!==flares.length){var tempPosition=new THREE.Vector3,invAspect=viewportHeight/viewportWidth,halfViewportWidth=.5*viewportWidth,halfViewportHeight=.5*viewportHeight,size=16/viewportHeight,scale=new THREE.Vector2(size*invAspect,size),screenPosition=new THREE.Vector3(1,1,0),screenPositionPixels=new THREE.Vector2(1,1);program===undefined&&init(),gl.useProgram(program),state.initAttributes(),state.enableAttribute(attributes.vertex),state.enableAttribute(attributes.uv),state.disableUnusedAttributes(),gl.uniform1i(uniforms.occlusionMap,0),gl.uniform1i(uniforms.map,1),gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer),gl.vertexAttribPointer(attributes.vertex,2,gl.FLOAT,!1,16,0),gl.vertexAttribPointer(attributes.uv,2,gl.FLOAT,!1,16,8),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer),state.disable(gl.CULL_FACE),gl.depthMask(!1);for(var i=0,l=flares.length;i<l;i++){size=16/viewportHeight,scale.set(size*invAspect,size);var flare=flares[i];if(tempPosition.set(flare.matrixWorld.elements[12],flare.matrixWorld.elements[13],flare.matrixWorld.elements[14]),tempPosition.applyMatrix4(camera.matrixWorldInverse),tempPosition.applyProjection(camera.projectionMatrix),screenPosition.copy(tempPosition),screenPositionPixels.x=screenPosition.x*halfViewportWidth+halfViewportWidth,screenPositionPixels.y=screenPosition.y*halfViewportHeight+halfViewportHeight,hasVertexTexture||screenPositionPixels.x>0&&screenPositionPixels.x<viewportWidth&&screenPositionPixels.y>0&&screenPositionPixels.y<viewportHeight){state.activeTexture(gl.TEXTURE0),state.bindTexture(gl.TEXTURE_2D,null),state.activeTexture(gl.TEXTURE1),state.bindTexture(gl.TEXTURE_2D,tempTexture),gl.copyTexImage2D(gl.TEXTURE_2D,0,gl.RGB,screenPositionPixels.x-8,screenPositionPixels.y-8,16,16,0),gl.uniform1i(uniforms.renderType,0),gl.uniform2f(uniforms.scale,scale.x,scale.y),gl.uniform3f(uniforms.screenPosition,screenPosition.x,screenPosition.y,screenPosition.z),state.disable(gl.BLEND),state.enable(gl.DEPTH_TEST),gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0),state.activeTexture(gl.TEXTURE0),state.bindTexture(gl.TEXTURE_2D,occlusionTexture),gl.copyTexImage2D(gl.TEXTURE_2D,0,gl.RGBA,screenPositionPixels.x-8,screenPositionPixels.y-8,16,16,0),gl.uniform1i(uniforms.renderType,1),state.disable(gl.DEPTH_TEST),state.activeTexture(gl.TEXTURE1),state.bindTexture(gl.TEXTURE_2D,tempTexture),gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0),flare.positionScreen.copy(screenPosition),flare.customUpdateCallback?flare.customUpdateCallback(flare):flare.updateLensFlares(),gl.uniform1i(uniforms.renderType,2),state.enable(gl.BLEND);for(var j=0,jl=flare.lensFlares.length;j<jl;j++){var sprite=flare.lensFlares[j];sprite.opacity>.001&&sprite.scale>.001&&(screenPosition.x=sprite.x,screenPosition.y=sprite.y,screenPosition.z=sprite.z,size=sprite.size*sprite.scale/viewportHeight,scale.x=size*invAspect,scale.y=size,gl.uniform3f(uniforms.screenPosition,screenPosition.x,screenPosition.y,screenPosition.z),gl.uniform2f(uniforms.scale,scale.x,scale.y),gl.uniform1f(uniforms.rotation,sprite.rotation),gl.uniform1f(uniforms.opacity,sprite.opacity),gl.uniform3f(uniforms.color,sprite.color.r,sprite.color.g,sprite.color.b),state.setBlending(sprite.blending,sprite.blendEquation,sprite.blendSrc,sprite.blendDst),renderer.setTexture(sprite.texture,1),gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0))}}}state.enable(gl.CULL_FACE),state.enable(gl.DEPTH_TEST),gl.depthMask(!0),renderer.resetGLState()}}},THREE.SpritePlugin=function(renderer,sprites){function createProgram(){var program=gl.createProgram(),vertexShader=gl.createShader(gl.VERTEX_SHADER),fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);return gl.shaderSource(vertexShader,["precision "+renderer.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),gl.shaderSource(fragmentShader,["precision "+renderer.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),gl.compileShader(vertexShader),gl.compileShader(fragmentShader),gl.attachShader(program,vertexShader),gl.attachShader(program,fragmentShader),gl.linkProgram(program),program}function painterSortStable(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var vertexBuffer,elementBuffer,program,attributes,uniforms,texture,gl=renderer.context,state=renderer.state,spritePosition=new THREE.Vector3,spriteRotation=new THREE.Quaternion,spriteScale=new THREE.Vector3,init=function(){var vertices=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),faces=new Uint16Array([0,1,2,0,2,3]);vertexBuffer=gl.createBuffer(),elementBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,faces,gl.STATIC_DRAW),program=createProgram(),attributes={position:gl.getAttribLocation(program,"position"),uv:gl.getAttribLocation(program,"uv")},uniforms={uvOffset:gl.getUniformLocation(program,"uvOffset"),uvScale:gl.getUniformLocation(program,"uvScale"),rotation:gl.getUniformLocation(program,"rotation"),scale:gl.getUniformLocation(program,"scale"),color:gl.getUniformLocation(program,"color"),map:gl.getUniformLocation(program,"map"),opacity:gl.getUniformLocation(program,"opacity"),modelViewMatrix:gl.getUniformLocation(program,"modelViewMatrix"),projectionMatrix:gl.getUniformLocation(program,"projectionMatrix"),fogType:gl.getUniformLocation(program,"fogType"),fogDensity:gl.getUniformLocation(program,"fogDensity"),fogNear:gl.getUniformLocation(program,"fogNear"),fogFar:gl.getUniformLocation(program,"fogFar"),fogColor:gl.getUniformLocation(program,"fogColor"),alphaTest:gl.getUniformLocation(program,"alphaTest")};var canvas=document.createElement("canvas");canvas.width=8,canvas.height=8;var context=canvas.getContext("2d");context.fillStyle="white",context.fillRect(0,0,8,8),(texture=new THREE.Texture(canvas)).needsUpdate=!0};this.render=function(scene,camera){if(0!==sprites.length){program===undefined&&init(),gl.useProgram(program),state.initAttributes(),state.enableAttribute(attributes.position),state.enableAttribute(attributes.uv),state.disableUnusedAttributes(),state.disable(gl.CULL_FACE),state.enable(gl.BLEND),gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer),gl.vertexAttribPointer(attributes.position,2,gl.FLOAT,!1,16,0),gl.vertexAttribPointer(attributes.uv,2,gl.FLOAT,!1,16,8),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,elementBuffer),gl.uniformMatrix4fv(uniforms.projectionMatrix,!1,camera.projectionMatrix.elements),state.activeTexture(gl.TEXTURE0),gl.uniform1i(uniforms.map,0);var oldFogType=0,sceneFogType=0,fog=scene.fog
;fog?(gl.uniform3f(uniforms.fogColor,fog.color.r,fog.color.g,fog.color.b),fog instanceof THREE.Fog?(gl.uniform1f(uniforms.fogNear,fog.near),gl.uniform1f(uniforms.fogFar,fog.far),gl.uniform1i(uniforms.fogType,1),oldFogType=1,sceneFogType=1):fog instanceof THREE.FogExp2&&(gl.uniform1f(uniforms.fogDensity,fog.density),gl.uniform1i(uniforms.fogType,2),oldFogType=2,sceneFogType=2)):(gl.uniform1i(uniforms.fogType,0),oldFogType=0,sceneFogType=0);for(var i=0,l=sprites.length;i<l;i++){(sprite=sprites[i]).modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,sprite.matrixWorld),sprite.z=-sprite.modelViewMatrix.elements[14]}sprites.sort(painterSortStable);var scale=[];for(i=0,l=sprites.length;i<l;i++){var sprite,material=(sprite=sprites[i]).material;gl.uniform1f(uniforms.alphaTest,material.alphaTest),gl.uniformMatrix4fv(uniforms.modelViewMatrix,!1,sprite.modelViewMatrix.elements),sprite.matrixWorld.decompose(spritePosition,spriteRotation,spriteScale),scale[0]=spriteScale.x,scale[1]=spriteScale.y;var fogType=0;scene.fog&&material.fog&&(fogType=sceneFogType),oldFogType!==fogType&&(gl.uniform1i(uniforms.fogType,fogType),oldFogType=fogType),null!==material.map?(gl.uniform2f(uniforms.uvOffset,material.map.offset.x,material.map.offset.y),gl.uniform2f(uniforms.uvScale,material.map.repeat.x,material.map.repeat.y)):(gl.uniform2f(uniforms.uvOffset,0,0),gl.uniform2f(uniforms.uvScale,1,1)),gl.uniform1f(uniforms.opacity,material.opacity),gl.uniform3f(uniforms.color,material.color.r,material.color.g,material.color.b),gl.uniform1f(uniforms.rotation,material.rotation),gl.uniform2fv(uniforms.scale,scale),state.setBlending(material.blending,material.blendEquation,material.blendSrc,material.blendDst),state.setDepthTest(material.depthTest),state.setDepthWrite(material.depthWrite),material.map&&material.map.image&&material.map.image.width?renderer.setTexture(material.map,0):renderer.setTexture(texture,0),gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0)}state.enable(gl.CULL_FACE),renderer.resetGLState()}}},THREE.GeometryUtils={merge:function(geometry1,geometry2,materialIndexOffset){var matrix;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),geometry2 instanceof THREE.Mesh&&(geometry2.matrixAutoUpdate&&geometry2.updateMatrix(),matrix=geometry2.matrix,geometry2=geometry2.geometry),geometry1.merge(geometry2,matrix,materialIndexOffset)},center:function(geometry){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),geometry.center()}},THREE.ImageUtils={crossOrigin:undefined,loadTexture:function(url,mapping,onLoad,onError){var loader=new THREE.ImageLoader;loader.crossOrigin=this.crossOrigin;var texture=new THREE.Texture(undefined,mapping);return loader.load(url,function(image){texture.image=image,texture.needsUpdate=!0,onLoad&&onLoad(texture)},undefined,function(event){onError&&onError(event)}),texture.sourceFile=url,texture},loadTextureCube:function(array,mapping,onLoad,onError){var images=[],loader=new THREE.ImageLoader;loader.crossOrigin=this.crossOrigin;for(var texture=new THREE.CubeTexture(images,mapping),loaded=0,loadTexture=function(i){loader.load(array[i],function(image){texture.images[i]=image,6===(loaded+=1)&&(texture.needsUpdate=!0,onLoad&&onLoad(texture))},undefined,onError)},i=0,il=array.length;i<il;++i)loadTexture(i);return texture},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(image,depth){var cross=function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]},subtract=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2]]},normalize=function(a){var l=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/l,a[1]/l,a[2]/l]};depth|=1;var width=image.width,height=image.height,canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;var context=canvas.getContext("2d");context.drawImage(image,0,0);for(var data=context.getImageData(0,0,width,height).data,imageData=context.createImageData(width,height),output=imageData.data,x=0;x<width;x++)for(var y=0;y<height;y++){var ly=y-1<0?0:y-1,uy=y+1>height-1?height-1:y+1,lx=x-1<0?0:x-1,ux=x+1>width-1?width-1:x+1,points=[],origin=[0,0,data[4*(y*width+x)]/255*depth];points.push([-1,0,data[4*(y*width+lx)]/255*depth]),points.push([-1,-1,data[4*(ly*width+lx)]/255*depth]),points.push([0,-1,data[4*(ly*width+x)]/255*depth]),points.push([1,-1,data[4*(ly*width+ux)]/255*depth]),points.push([1,0,data[4*(y*width+ux)]/255*depth]),points.push([1,1,data[4*(uy*width+ux)]/255*depth]),points.push([0,1,data[4*(uy*width+x)]/255*depth]),points.push([-1,1,data[4*(uy*width+lx)]/255*depth]);for(var normals=[],num_points=points.length,i=0;i<num_points;i++){var v1=points[i],v2=points[(i+1)%num_points];v1=subtract(v1,origin),v2=subtract(v2,origin),normals.push(normalize(cross(v1,v2)))}var normal=[0,0,0];for(i=0;i<normals.length;i++)normal[0]+=normals[i][0],normal[1]+=normals[i][1],normal[2]+=normals[i][2];normal[0]/=normals.length,normal[1]/=normals.length,normal[2]/=normals.length;var idx=4*(y*width+x);output[idx]=(normal[0]+1)/2*255|0,output[idx+1]=(normal[1]+1)/2*255|0,output[idx+2]=255*normal[2]|0,output[idx+3]=255}return context.putImageData(imageData,0,0),canvas},generateDataTexture:function(width,height,color){for(var size=width*height,data=new Uint8Array(3*size),r=Math.floor(255*color.r),g=Math.floor(255*color.g),b=Math.floor(255*color.b),i=0;i<size;i++)data[3*i]=r,data[3*i+1]=g,data[3*i+2]=b;var texture=new THREE.DataTexture(data,width,height,THREE.RGBFormat);return texture.needsUpdate=!0,texture}},THREE.SceneUtils={createMultiMaterialObject:function(geometry,materials){for(var group=new THREE.Group,i=0,l=materials.length;i<l;i++)group.add(new THREE.Mesh(geometry,materials[i]));return group},detach:function(child,parent,scene){child.applyMatrix(parent.matrixWorld),parent.remove(child),scene.add(child)},attach:function(child,scene,parent){var matrixWorldInverse=new THREE.Matrix4;matrixWorldInverse.getInverse(parent.matrixWorld),child.applyMatrix(matrixWorldInverse),scene.remove(child),parent.add(child)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face.toLowerCase()][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(data){var family=data.familyName.toLowerCase(),ThreeFont=this;return ThreeFont.faces[family]=ThreeFont.faces[family]||{},ThreeFont.faces[family][data.cssFontWeight]=ThreeFont.faces[family][data.cssFontWeight]||{},ThreeFont.faces[family][data.cssFontWeight][data.cssFontStyle]=data,ThreeFont.faces[family][data.cssFontWeight][data.cssFontStyle]=data,data},drawText:function(text){var i,face=this.getFace(),scale=this.size/face.resolution,offset=0,chars=String(text).split(""),length=chars.length,fontPaths=[];for(i=0;i<length;i++){var path=new THREE.Path,ret=this.extractGlyphPoints(chars[i],face,scale,offset,path);offset+=ret.offset,fontPaths.push(ret.path)}return{paths:fontPaths,offset:offset/2}},extractGlyphPoints:function(c,face,scale,offset,path){var i,i2,divisions,outline,length,scaleX,scaleY,x,y,cpx,cpy,cpx0,cpy0,cpx1,cpy1,cpx2,cpy2,laste,pts=[],glyph=face.glyphs[c]||face.glyphs["?"];if(glyph){if(glyph.o)for(length=(outline=glyph._cachedOutline||(glyph._cachedOutline=glyph.o.split(" "))).length,scaleX=scale,scaleY=scale,i=0;i<length;)switch(outline[i++]){case"m":x=outline[i++]*scaleX+offset,y=outline[i++]*scaleY,path.moveTo(x,y);break;case"l":x=outline[i++]*scaleX+offset,y=outline[i++]*scaleY,path.lineTo(x,y);break;case"q":if(cpx=outline[i++]*scaleX+offset,cpy=outline[i++]*scaleY,cpx1=outline[i++]*scaleX+offset,cpy1=outline[i++]*scaleY,path.quadraticCurveTo(cpx1,cpy1,cpx,cpy),laste=pts[pts.length-1])for(cpx0=laste.x,cpy0=laste.y,i2=1,divisions=this.divisions;i2<=divisions;i2++){var t=i2/divisions;THREE.Shape.Utils.b2(t,cpx0,cpx1,cpx),THREE.Shape.Utils.b2(t,cpy0,cpy1,cpy)}break;case"b":if(cpx=outline[i++]*scaleX+offset,cpy=outline[i++]*scaleY,cpx1=outline[i++]*scaleX+offset,cpy1=outline[i++]*scaleY,cpx2=outline[i++]*scaleX+offset,cpy2=outline[i++]*scaleY,path.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,cpx,cpy),laste=pts[pts.length-1])for(cpx0=laste.x,cpy0=laste.y,i2=1,divisions=this.divisions;i2<=divisions;i2++){t=i2/divisions;THREE.Shape.Utils.b3(t,cpx0,cpx1,cpx2,cpx),THREE.Shape.Utils.b3(t,cpy0,cpy1,cpy2,cpy)}}return{offset:glyph.ha*scale,path:path}}}},THREE.FontUtils.generateShapes=function(text,parameters){var size=(parameters=parameters||{}).size!==undefined?parameters.size:100,curveSegments=parameters.curveSegments!==undefined?parameters.curveSegments:4,font=parameters.font!==undefined?parameters.font:"helvetiker",weight=parameters.weight!==undefined?parameters.weight:"normal",style=parameters.style!==undefined?parameters.style:"normal";THREE.FontUtils.size=size,THREE.FontUtils.divisions=curveSegments,THREE.FontUtils.face=font,THREE.FontUtils.weight=weight,THREE.FontUtils.style=style;for(var paths=THREE.FontUtils.drawText(text).paths,shapes=[],p=0,pl=paths.length;p<pl;p++)Array.prototype.push.apply(shapes,paths[p].toShapes());return shapes},function(namespace){var EPSILON=1e-10,process=function(contour,indices){var n=contour.length;if(n<3)return null;var u,v,w,result=[],verts=[],vertIndices=[];if(area(contour)>0)for(v=0;v<n;v++)verts[v]=v;else for(v=0;v<n;v++)verts[v]=n-1-v;var nv=n,count=2*nv;for(v=nv-1;nv>2;){if(count--<=0)return console.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()"),indices?vertIndices:result;if(nv<=(u=v)&&(u=0),nv<=(v=u+1)&&(v=0),nv<=(w=v+1)&&(w=0),snip(contour,u,v,w,nv,verts)){var a,b,c,s,t;for(a=verts[u],b=verts[v],c=verts[w],result.push([contour[a],contour[b],contour[c]]),vertIndices.push([verts[u],verts[v],verts[w]]),s=v,t=v+1;t<nv;s++,t++)verts[s]=verts[t];count=2*--nv}}return indices?vertIndices:result},area=function(contour){for(var n=contour.length,a=0,p=n-1,q=0;q<n;p=q++)a+=contour[p].x*contour[q].y-contour[q].x*contour[p].y;return.5*a},snip=function(contour,u,v,w,n,verts){var p,ax,ay,bx,by,cx,cy,px,py,aX,aY,bX,bY,cX,cY;if(ax=contour[verts[u]].x,ay=contour[verts[u]].y,bx=contour[verts[v]].x,by=contour[verts[v]].y,cx=contour[verts[w]].x,cy=contour[verts[w]].y,EPSILON>(bx-ax)*(cy-ay)-(by-ay)*(cx-ax))return!1;for(aX=cx-bx,aY=cy-by,bX=ax-cx,bY=ay-cy,cX=bx-ax,cY=by-ay,p=0;p<n;p++)if(px=contour[verts[p]].x,py=contour[verts[p]].y,!(px===ax&&py===ay||px===bx&&py===by||px===cx&&py===cy)&&aX*(py-by)-aY*(px-bx)>=-EPSILON&&bX*(py-cy)-bY*(px-cx)>=-EPSILON&&cX*(py-ay)-cY*(px-ax)>=-EPSILON)return!1;return!0};namespace.Triangulate=process,namespace.Triangulate.area=area}(THREE.FontUtils),THREE.typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},"undefined"!=typeof self&&(self._typeface_js=THREE.typeface_js),THREE.Audio=function(listener){THREE.Object3D.call(this),this.type="Audio",this.context=listener.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.constructor=THREE.Audio,THREE.Audio.prototype.load=function(file){var scope=this,request=new XMLHttpRequest;return request.open("GET",file,!0),request.responseType="arraybuffer",request.onload=function(){scope.context.decodeAudioData(this.response,function(buffer){scope.source.buffer=buffer,scope.autoplay&&scope.play()})},request.send(),this},THREE.Audio.prototype.play=function(){if(!0!==this.isPlaying){var source=this.context.createBufferSource();source.buffer=this.source.buffer,source.loop=this.source.loop,source.onended=this.source.onended,source.start(0,this.startTime),source.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=source,this.connect()}else console.warn("THREE.Audio: Audio is already playing.")},THREE.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},THREE.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},THREE.Audio.prototype.connect=function(){this.filter!==undefined?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)},THREE.Audio.prototype.disconnect=function(){this.filter!==undefined?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)},THREE.Audio.prototype.setFilter=function(value){!0===this.isPlaying?(this.disconnect(),this.filter=value,this.connect()):this.filter=value},THREE.Audio.prototype.getFilter=function(){return this.filter},THREE.Audio.prototype.setPlaybackRate=function(value){this.playbackRate=value,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate)},THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate},THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1},THREE.Audio.prototype.setLoop=function(value){this.source.loop=value},THREE.Audio.prototype.getLoop=function(){return this.source.loop},THREE.Audio.prototype.setRefDistance=function(value){this.panner.refDistance=value},THREE.Audio.prototype.getRefDistance=function(){return this.panner.refDistance},THREE.Audio.prototype.setRolloffFactor=function(value){this.panner.rolloffFactor=value},THREE.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor},THREE.Audio.prototype.setVolume=function(value){this.gain.gain.value=value},THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value},THREE.Audio.prototype.updateMatrixWorld=function(){var position=new THREE.Vector3;return function(force){THREE.Object3D.prototype.updateMatrixWorld.call(this,force),position.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(position.x,position.y,position.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.constructor=THREE.AudioListener,THREE.AudioListener.prototype.updateMatrixWorld=function(){var position=new THREE.Vector3,quaternion=new THREE.Quaternion,scale=new THREE.Vector3,orientation=new THREE.Vector3;return function(force){THREE.Object3D.prototype.updateMatrixWorld.call(this,force);var listener=this.context.listener,up=this.up;this.matrixWorld.decompose(position,quaternion,scale),orientation.set(0,0,-1).applyQuaternion(quaternion),listener.setPosition(position.x,position.y,position.z),listener.setOrientation(orientation.x,orientation.y,orientation.z,up.x,up.y,up.z)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(u){var t=this.getUtoTmapping(u);return this.getPoint(t)},THREE.Curve.prototype.getPoints=function(divisions){divisions||(divisions=5);var d,pts=[];for(d=0;d<=divisions;d++)pts.push(this.getPoint(d/divisions));return pts},THREE.Curve.prototype.getSpacedPoints=function(divisions){divisions||(divisions=5);var d,pts=[];for(d=0;d<=divisions;d++)pts.push(this.getPointAt(d/divisions));return pts},THREE.Curve.prototype.getLength=function(){var lengths=this.getLengths();return lengths[lengths.length-1]},THREE.Curve.prototype.getLengths=function(divisions){if(divisions||(divisions=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===divisions+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var current,p,cache=[],last=this.getPoint(0),sum=0;for(cache.push(0),p=1;p<=divisions;p++)sum+=(current=this.getPoint(p/divisions)).distanceTo(last),cache.push(sum),last=current;return this.cacheArcLengths=cache,cache},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(u,distance){var targetArcLength,arcLengths=this.getLengths(),i=0,il=arcLengths.length;targetArcLength=distance||u*arcLengths[il-1];for(var comparison,low=0,high=il-1;low<=high;)if((comparison=arcLengths[i=Math.floor(low+(high-low)/2)]-targetArcLength)<0)low=i+1;else{if(!(comparison>0)){high=i;break}high=i-1}if(arcLengths[i=high]===targetArcLength)return i/(il-1);var lengthBefore=arcLengths[i];return(i+(targetArcLength-lengthBefore)/(arcLengths[i+1]-lengthBefore))/(il-1)},THREE.Curve.prototype.getTangent=function(t){var delta=1e-4,t1=t-delta,t2=t+delta;t1<0&&(t1=0),t2>1&&(t2=1);var pt1=this.getPoint(t1);return this.getPoint(t2).clone().sub(pt1).normalize()},THREE.Curve.prototype.getTangentAt=function(u){var t=this.getUtoTmapping(u);return this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(t,p0,p1,p2){return 2*(1-t)*(p1-p0)+2*t*(p2-p1)},tangentCubicBezier:function(t,p0,p1,p2,p3){return-3*p0*(1-t)*(1-t)+3*p1*(1-t)*(1-t)-6*t*p1*(1-t)+6*t*p2*(1-t)-3*t*t*p2+3*t*t*p3},tangentSpline:function(t){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(p0,p1,p2,p3,t){var v0=.5*(p2-p0),v1=.5*(p3-p1),t2=t*t;return(2*p1-2*p2+v0+v1)*(t*t2)+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}},THREE.Curve.create=function(constructor,getPointFunc){return constructor.prototype=Object.create(THREE.Curve.prototype),constructor.prototype.constructor=constructor,constructor.prototype.getPoint=getPointFunc,constructor},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.constructor=THREE.CurvePath,THREE.CurvePath.prototype.add=function(curve){this.curves.push(curve)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var startPoint=this.curves[0].getPoint(0),endPoint=this.curves[this.curves.length-1].getPoint(1);startPoint.equals(endPoint)||this.curves.push(new THREE.LineCurve(endPoint,startPoint))},THREE.CurvePath.prototype.getPoint=function(t){for(var curve,d=t*this.getLength(),curveLengths=this.getCurveLengths(),i=0;i<curveLengths.length;){if(curveLengths[i]>=d){var u=1-(curveLengths[i]-d)/(curve=this.curves[i]).getLength();return curve.getPointAt(u)}i++}return null},THREE.CurvePath.prototype.getLength=function(){var lens=this.getCurveLengths();return lens[lens.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var i,lengths=[],sums=0,il=this.curves.length;for(i=0;i<il;i++)sums+=this.curves[i].getLength(),lengths.push(sums);return this.cacheLengths=lengths,lengths},THREE.CurvePath.prototype.getBoundingBox=function(){var maxX,maxY,maxZ,minX,minY,minZ,p,i,il,sum,points=this.getPoints();maxX=maxY=Number.NEGATIVE_INFINITY,minX=minY=Number.POSITIVE_INFINITY;var v3=points[0]instanceof THREE.Vector3;for(sum=v3?new THREE.Vector3:new THREE.Vector2,i=0,il=points.length;i<il;i++)(p=points[i]).x>maxX?maxX=p.x:p.x<minX&&(minX=p.x),p.y>maxY?maxY=p.y:p.y<minY&&(minY=p.y),v3&&(p.z>maxZ?maxZ=p.z:p.z<minZ&&(minZ=p.z)),sum.add(p);var ret={minX:minX,minY:minY,maxX:maxX,maxY:maxY};return v3&&(ret.maxZ=maxZ,ret.minZ=minZ),ret},THREE.CurvePath.prototype.createPointsGeometry=function(divisions){var pts=this.getPoints(divisions,!0);return this.createGeometry(pts)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(divisions){var pts=this.getSpacedPoints(divisions,!0);return this.createGeometry(pts)},THREE.CurvePath.prototype.createGeometry=function(points){for(var geometry=new THREE.Geometry,i=0;i<points.length;i++)geometry.vertices.push(new THREE.Vector3(points[i].x,points[i].y,points[i].z||0));return geometry},THREE.CurvePath.prototype.addWrapPath=function(bendpath){this.bends.push(bendpath)},THREE.CurvePath.prototype.getTransformedPoints=function(segments,bends){var i,il,oldPts=this.getPoints(segments);for(bends||(bends=this.bends),i=0,il=bends.length;i<il;i++)oldPts=this.getWrapPoints(oldPts,bends[i]);return oldPts},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(segments,bends){var i,il,oldPts=this.getSpacedPoints(segments);for(bends||(bends=this.bends),i=0,il=bends.length;i<il;i++)oldPts=this.getWrapPoints(oldPts,bends[i]);return oldPts},THREE.CurvePath.prototype.getWrapPoints=function(oldPts,path){var i,il,p,oldX,oldY,xNorm,bounds=this.getBoundingBox();for(i=0,il=oldPts.length;i<il;i++){oldX=(p=oldPts[i]).x,oldY=p.y,xNorm=oldX/bounds.maxX,xNorm=path.getUtoTmapping(xNorm,oldX);var pathPt=path.getPoint(xNorm),normal=path.getTangent(xNorm);normal.set(-normal.y,normal.x).multiplyScalar(oldY),p.x=pathPt.x+normal.x,p.y=pathPt.y+normal.y}return oldPts},THREE.Path=function(points){THREE.CurvePath.call(this),this.actions=[],points&&this.fromPoints(points)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.Path.prototype.constructor=THREE.Path,THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(vectors){this.moveTo(vectors[0].x,vectors[0].y);for(var v=1,vlen=vectors.length;v<vlen;v++)this.lineTo(vectors[v].x,vectors[v].y)},THREE.Path.prototype.moveTo=function(){var args=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:args})},THREE.Path.prototype.lineTo=function(x,y){var args=Array.prototype.slice.call(arguments),lastargs=this.actions[this.actions.length-1].args,x0=lastargs[lastargs.length-2],y0=lastargs[lastargs.length-1],curve=new THREE.LineCurve(new THREE.Vector2(x0,y0),new THREE.Vector2(x,y));this.curves.push(curve),this.actions.push({action:THREE.PathActions.LINE_TO,args:args})},THREE.Path.prototype.quadraticCurveTo=function(aCPx,aCPy,aX,aY){var args=Array.prototype.slice.call(arguments),lastargs=this.actions[this.actions.length-1].args,x0=lastargs[lastargs.length-2],y0=lastargs[lastargs.length-1],curve=new THREE.QuadraticBezierCurve(new THREE.Vector2(x0,y0),new THREE.Vector2(aCPx,aCPy),new THREE.Vector2(aX,aY));this.curves.push(curve),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:args})},THREE.Path.prototype.bezierCurveTo=function(aCP1x,aCP1y,aCP2x,aCP2y,aX,aY){var args=Array.prototype.slice.call(arguments),lastargs=this.actions[this.actions.length-1].args,x0=lastargs[lastargs.length-2],y0=lastargs[lastargs.length-1],curve=new THREE.CubicBezierCurve(new THREE.Vector2(x0,y0),new THREE.Vector2(aCP1x,aCP1y),new THREE.Vector2(aCP2x,aCP2y),new THREE.Vector2(aX,aY));this.curves.push(curve),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:args})},THREE.Path.prototype.splineThru=function(pts){var args=Array.prototype.slice.call(arguments),lastargs=this.actions[this.actions.length-1].args,x0=lastargs[lastargs.length-2],y0=lastargs[lastargs.length-1],npts=[new THREE.Vector2(x0,y0)];Array.prototype.push.apply(npts,pts);var curve=new THREE.SplineCurve(npts);this.curves.push(curve),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:args})},THREE.Path.prototype.arc=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){var lastargs=this.actions[this.actions.length-1].args,x0=lastargs[lastargs.length-2],y0=lastargs[lastargs.length-1];this.absarc(aX+x0,aY+y0,aRadius,aStartAngle,aEndAngle,aClockwise)},THREE.Path.prototype.absarc=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){this.absellipse(aX,aY,aRadius,aRadius,aStartAngle,aEndAngle,aClockwise)},THREE.Path.prototype.ellipse=function(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){var lastargs=this.actions[this.actions.length-1].args,x0=lastargs[lastargs.length-2],y0=lastargs[lastargs.length-1];this.absellipse(aX+x0,aY+y0,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation)},THREE.Path.prototype.absellipse=function(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){var args=[aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation||0],curve=new THREE.EllipseCurve(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation);this.curves.push(curve);var lastPoint=curve.getPoint(1);args.push(lastPoint.x),args.push(lastPoint.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:args})},THREE.Path.prototype.getSpacedPoints=function(divisions){divisions||(divisions=40);for(var points=[],i=0;i<divisions;i++)points.push(this.getPoint(i/divisions));return points},THREE.Path.prototype.getPoints=function(divisions,closedPath){if(this.useSpacedPoints)return this.getSpacedPoints(divisions,closedPath);divisions=divisions||12;var i,il,item,action,args,cpx,cpy,cpx2,cpy2,cpx1,cpy1,cpx0,cpy0,laste,j,t,tx,ty,points=[];for(i=0,il=this.actions.length;i<il;i++)switch(action=(item=this.actions[i]).action,args=item.args,action){case THREE.PathActions.MOVE_TO:case THREE.PathActions.LINE_TO:points.push(new THREE.Vector2(args[0],args[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(cpx=args[2],cpy=args[3],cpx1=args[0],cpy1=args[1],points.length>0?(cpx0=(laste=points[points.length-1]).x,cpy0=laste.y):(cpx0=(laste=this.actions[i-1].args)[laste.length-2],cpy0=laste[laste.length-1]),j=1;j<=divisions;j++)t=j/divisions,tx=THREE.Shape.Utils.b2(t,cpx0,cpx1,cpx),ty=THREE.Shape.Utils.b2(t,cpy0,cpy1,cpy),points.push(new THREE.Vector2(tx,ty));break;case THREE.PathActions.BEZIER_CURVE_TO:for(cpx=args[4],cpy=args[5],cpx1=args[0],cpy1=args[1],cpx2=args[2],cpy2=args[3],points.length>0?(cpx0=(laste=points[points.length-1]).x,cpy0=laste.y):(cpx0=(laste=this.actions[i-1].args)[laste.length-2],cpy0=laste[laste.length-1]),j=1;j<=divisions;j++)t=j/divisions,tx=THREE.Shape.Utils.b3(t,cpx0,cpx1,cpx2,cpx),ty=THREE.Shape.Utils.b3(t,cpy0,cpy1,cpy2,cpy),points.push(new THREE.Vector2(tx,ty));break;case THREE.PathActions.CSPLINE_THRU:laste=this.actions[i-1].args;var spts=[new THREE.Vector2(laste[laste.length-2],laste[laste.length-1])],n=divisions*args[0].length;spts=spts.concat(args[0]);var spline=new THREE.SplineCurve(spts);for(j=1;j<=n;j++)points.push(spline.getPointAt(j/n));break;case THREE.PathActions.ARC:var aX=args[0],aY=args[1],aRadius=args[2],aStartAngle=args[3],aEndAngle=args[4],aClockwise=!!args[5],deltaAngle=aEndAngle-aStartAngle,tdivisions=2*divisions;for(j=1;j<=tdivisions;j++)t=j/tdivisions,aClockwise||(t=1-t),angle=aStartAngle+t*deltaAngle,tx=aX+aRadius*Math.cos(angle),ty=aY+aRadius*Math.sin(angle),points.push(new THREE.Vector2(tx,ty));break;case THREE.PathActions.ELLIPSE:aX=args[0],aY=args[1];var angle,cos,sin,xRadius=args[2],yRadius=args[3],aRotation=(aStartAngle=args[4],aEndAngle=args[5],aClockwise=!!args[6],args[7]);deltaAngle=aEndAngle-aStartAngle,tdivisions=2*divisions;for(0!==aRotation&&(cos=Math.cos(aRotation),sin=Math.sin(aRotation)),j=1;j<=tdivisions;j++){if(t=j/tdivisions,aClockwise||(t=1-t),angle=aStartAngle+t*deltaAngle,tx=aX+xRadius*Math.cos(angle),ty=aY+yRadius*Math.sin(angle),0!==aRotation){var x=tx;tx=(x-aX)*cos-(ty-aY)*sin+aX,ty=(x-aX)*sin+(ty-aY)*cos+aY}points.push(new THREE.Vector2(tx,ty))}}var lastPoint=points[points.length-1],EPSILON=1e-10;return Math.abs(lastPoint.x-points[0].x)<EPSILON&&Math.abs(lastPoint.y-points[0].y)<EPSILON&&points.splice(points.length-1,1),closedPath&&points.push(points[0]),points},THREE.Path.prototype.toShapes=function(isCCW,noHoles){function extractSubpaths(inActions){var i,il,item,action,args,subPaths=[],lastPath=new THREE.Path;for(i=0,il=inActions.length;i<il;i++)args=(item=inActions[i]).args,(action=item.action)===THREE.PathActions.MOVE_TO&&0!==lastPath.actions.length&&(subPaths.push(lastPath),lastPath=new THREE.Path),lastPath[action].apply(lastPath,args);return 0!==lastPath.actions.length&&subPaths.push(lastPath),subPaths}function toShapesNoHoles(inSubpaths){for(var shapes=[],i=0,il=inSubpaths.length;i<il;i++){var tmpPath=inSubpaths[i],tmpShape=new THREE.Shape;tmpShape.actions=tmpPath.actions,tmpShape.curves=tmpPath.curves,shapes.push(tmpShape)}return shapes}function isPointInsidePolygon(inPt,inPolygon){for(var EPSILON=1e-10,polyLen=inPolygon.length,inside=!1,p=polyLen-1,q=0;q<polyLen;p=q++){var edgeLowPt=inPolygon[p],edgeHighPt=inPolygon[q],edgeDx=edgeHighPt.x-edgeLowPt.x,edgeDy=edgeHighPt.y-edgeLowPt.y;if(Math.abs(edgeDy)>EPSILON){if(edgeDy<0&&(edgeLowPt=inPolygon[q],edgeDx=-edgeDx,edgeHighPt=inPolygon[p],edgeDy=-edgeDy),inPt.y<edgeLowPt.y||inPt.y>edgeHighPt.y)continue;if(inPt.y===edgeLowPt.y){if(inPt.x===edgeLowPt.x)return!0}else{var perpEdge=edgeDy*(inPt.x-edgeLowPt.x)-edgeDx*(inPt.y-edgeLowPt.y);if(0===perpEdge)return!0;if(perpEdge<0)continue;inside=!inside}}else{if(inPt.y!==edgeLowPt.y)continue;if(edgeHighPt.x<=inPt.x&&inPt.x<=edgeLowPt.x||edgeLowPt.x<=inPt.x&&inPt.x<=edgeHighPt.x)return!0}}return inside}var subPaths=extractSubpaths(this.actions);if(0===subPaths.length)return[];if(!0===noHoles)return toShapesNoHoles(subPaths);var solid,tmpPath,tmpShape,shapes=[];if(1===subPaths.length)return tmpPath=subPaths[0],(tmpShape=new THREE.Shape).actions=tmpPath.actions,tmpShape.curves=tmpPath.curves,shapes.push(tmpShape),shapes;var holesFirst=!THREE.Shape.Utils.isClockWise(subPaths[0].getPoints());holesFirst=isCCW?!holesFirst:holesFirst;var tmpPoints,i,il,tmpHoles,j,jl,betterShapeHoles=[],newShapes=[],newShapeHoles=[],mainIdx=0;for(newShapes[mainIdx]=undefined,newShapeHoles[mainIdx]=[],i=0,il=subPaths.length;i<il;i++)tmpPoints=(tmpPath=subPaths[i]).getPoints(),solid=THREE.Shape.Utils.isClockWise(tmpPoints),(solid=isCCW?!solid:solid)?(!holesFirst&&newShapes[mainIdx]&&mainIdx++,newShapes[mainIdx]={s:new THREE.Shape,p:tmpPoints},newShapes[mainIdx].s.actions=tmpPath.actions,newShapes[mainIdx].s.curves=tmpPath.curves,holesFirst&&mainIdx++,newShapeHoles[mainIdx]=[]):newShapeHoles[mainIdx].push({h:tmpPath,p:tmpPoints[0]});if(!newShapes[0])return toShapesNoHoles(subPaths);if(newShapes.length>1){for(var ambiguous=!1,toChange=[],sIdx=0,sLen=newShapes.length;sIdx<sLen;sIdx++)betterShapeHoles[sIdx]=[];for(sIdx=0,sLen=newShapes.length;sIdx<sLen;sIdx++)for(var sho=newShapeHoles[sIdx],hIdx=0;hIdx<sho.length;hIdx++){for(var ho=sho[hIdx],hole_unassigned=!0,s2Idx=0;s2Idx<newShapes.length;s2Idx++)isPointInsidePolygon(ho.p,newShapes[s2Idx].p)&&(sIdx!==s2Idx&&toChange.push({froms:sIdx,tos:s2Idx,hole:hIdx}),hole_unassigned?(hole_unassigned=!1,betterShapeHoles[s2Idx].push(ho)):ambiguous=!0);hole_unassigned&&betterShapeHoles[sIdx].push(ho)}toChange.length>0&&(ambiguous||(newShapeHoles=betterShapeHoles))}for(i=0,il=newShapes.length;i<il;i++)for(tmpShape=newShapes[i].s,shapes.push(tmpShape),j=0,jl=(tmpHoles=newShapeHoles[i]).length;j<jl;j++)tmpShape.holes.push(tmpHoles[j].h);return shapes},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.constructor=THREE.Shape,THREE.Shape.prototype.extrude=function(options){return new THREE.ExtrudeGeometry(this,options)},THREE.Shape.prototype.makeGeometry=function(options){return new THREE.ShapeGeometry(this,options)},THREE.Shape.prototype.getPointsHoles=function(divisions){var i,il=this.holes.length,holesPts=[];for(i=0;i<il;i++)holesPts[i]=this.holes[i].getTransformedPoints(divisions,this.bends);return holesPts},THREE.Shape.prototype.getSpacedPointsHoles=function(divisions){var i,il=this.holes.length,holesPts=[];for(i=0;i<il;i++)holesPts[i]=this.holes[i].getTransformedSpacedPoints(divisions,this.bends);return holesPts},THREE.Shape.prototype.extractAllPoints=function(divisions){return{shape:this.getTransformedPoints(divisions),holes:this.getPointsHoles(divisions)}},THREE.Shape.prototype.extractPoints=function(divisions){return this.useSpacedPoints?this.extractAllSpacedPoints(divisions):this.extractAllPoints(divisions)},THREE.Shape.prototype.extractAllSpacedPoints=function(divisions){return{shape:this.getTransformedSpacedPoints(divisions),holes:this.getSpacedPointsHoles(divisions)}},THREE.Shape.Utils={triangulateShape:function(contour,holes){function point_in_segment_2D_colin(inSegPt1,inSegPt2,inOtherPt){return inSegPt1.x!==inSegPt2.x?inSegPt1.x<inSegPt2.x?inSegPt1.x<=inOtherPt.x&&inOtherPt.x<=inSegPt2.x:inSegPt2.x<=inOtherPt.x&&inOtherPt.x<=inSegPt1.x:inSegPt1.y<inSegPt2.y?inSegPt1.y<=inOtherPt.y&&inOtherPt.y<=inSegPt2.y:inSegPt2.y<=inOtherPt.y&&inOtherPt.y<=inSegPt1.y}
function intersect_segments_2D(inSeg1Pt1,inSeg1Pt2,inSeg2Pt1,inSeg2Pt2,inExcludeAdjacentSegs){var EPSILON=1e-10,seg1dx=inSeg1Pt2.x-inSeg1Pt1.x,seg1dy=inSeg1Pt2.y-inSeg1Pt1.y,seg2dx=inSeg2Pt2.x-inSeg2Pt1.x,seg2dy=inSeg2Pt2.y-inSeg2Pt1.y,seg1seg2dx=inSeg1Pt1.x-inSeg2Pt1.x,seg1seg2dy=inSeg1Pt1.y-inSeg2Pt1.y,limit=seg1dy*seg2dx-seg1dx*seg2dy,perpSeg1=seg1dy*seg1seg2dx-seg1dx*seg1seg2dy;if(Math.abs(limit)>EPSILON){var perpSeg2;if(limit>0){if(perpSeg1<0||perpSeg1>limit)return[];if((perpSeg2=seg2dy*seg1seg2dx-seg2dx*seg1seg2dy)<0||perpSeg2>limit)return[]}else{if(perpSeg1>0||perpSeg1<limit)return[];if((perpSeg2=seg2dy*seg1seg2dx-seg2dx*seg1seg2dy)>0||perpSeg2<limit)return[]}if(0===perpSeg2)return!inExcludeAdjacentSegs||0!==perpSeg1&&perpSeg1!==limit?[inSeg1Pt1]:[];if(perpSeg2===limit)return!inExcludeAdjacentSegs||0!==perpSeg1&&perpSeg1!==limit?[inSeg1Pt2]:[];if(0===perpSeg1)return[inSeg2Pt1];if(perpSeg1===limit)return[inSeg2Pt2];var factorSeg1=perpSeg2/limit;return[{x:inSeg1Pt1.x+factorSeg1*seg1dx,y:inSeg1Pt1.y+factorSeg1*seg1dy}]}if(0!==perpSeg1||seg2dy*seg1seg2dx!=seg2dx*seg1seg2dy)return[];var seg1min,seg1max,seg1minVal,seg1maxVal,seg2min,seg2max,seg2minVal,seg2maxVal,seg1Pt=0===seg1dx&&0===seg1dy,seg2Pt=0===seg2dx&&0===seg2dy;return seg1Pt&&seg2Pt?inSeg1Pt1.x!==inSeg2Pt1.x||inSeg1Pt1.y!==inSeg2Pt1.y?[]:[inSeg1Pt1]:seg1Pt?point_in_segment_2D_colin(inSeg2Pt1,inSeg2Pt2,inSeg1Pt1)?[inSeg1Pt1]:[]:seg2Pt?point_in_segment_2D_colin(inSeg1Pt1,inSeg1Pt2,inSeg2Pt1)?[inSeg2Pt1]:[]:(0!==seg1dx?(inSeg1Pt1.x<inSeg1Pt2.x?(seg1min=inSeg1Pt1,seg1minVal=inSeg1Pt1.x,seg1max=inSeg1Pt2,seg1maxVal=inSeg1Pt2.x):(seg1min=inSeg1Pt2,seg1minVal=inSeg1Pt2.x,seg1max=inSeg1Pt1,seg1maxVal=inSeg1Pt1.x),inSeg2Pt1.x<inSeg2Pt2.x?(seg2min=inSeg2Pt1,seg2minVal=inSeg2Pt1.x,seg2max=inSeg2Pt2,seg2maxVal=inSeg2Pt2.x):(seg2min=inSeg2Pt2,seg2minVal=inSeg2Pt2.x,seg2max=inSeg2Pt1,seg2maxVal=inSeg2Pt1.x)):(inSeg1Pt1.y<inSeg1Pt2.y?(seg1min=inSeg1Pt1,seg1minVal=inSeg1Pt1.y,seg1max=inSeg1Pt2,seg1maxVal=inSeg1Pt2.y):(seg1min=inSeg1Pt2,seg1minVal=inSeg1Pt2.y,seg1max=inSeg1Pt1,seg1maxVal=inSeg1Pt1.y),inSeg2Pt1.y<inSeg2Pt2.y?(seg2min=inSeg2Pt1,seg2minVal=inSeg2Pt1.y,seg2max=inSeg2Pt2,seg2maxVal=inSeg2Pt2.y):(seg2min=inSeg2Pt2,seg2minVal=inSeg2Pt2.y,seg2max=inSeg2Pt1,seg2maxVal=inSeg2Pt1.y)),seg1minVal<=seg2minVal?seg1maxVal<seg2minVal?[]:seg1maxVal===seg2minVal?inExcludeAdjacentSegs?[]:[seg2min]:seg1maxVal<=seg2maxVal?[seg2min,seg1max]:[seg2min,seg2max]:seg1minVal>seg2maxVal?[]:seg1minVal===seg2maxVal?inExcludeAdjacentSegs?[]:[seg1min]:seg1maxVal<=seg2maxVal?[seg1min,seg1max]:[seg1min,seg2max])}function isPointInsideAngle(inVertex,inLegFromPt,inLegToPt,inOtherPt){var EPSILON=1e-10,legFromPtX=inLegFromPt.x-inVertex.x,legFromPtY=inLegFromPt.y-inVertex.y,legToPtX=inLegToPt.x-inVertex.x,legToPtY=inLegToPt.y-inVertex.y,otherPtX=inOtherPt.x-inVertex.x,otherPtY=inOtherPt.y-inVertex.y,from2toAngle=legFromPtX*legToPtY-legFromPtY*legToPtX,from2otherAngle=legFromPtX*otherPtY-legFromPtY*otherPtX;if(Math.abs(from2toAngle)>EPSILON){var other2toAngle=otherPtX*legToPtY-otherPtY*legToPtX;return from2toAngle>0?from2otherAngle>=0&&other2toAngle>=0:from2otherAngle>=0||other2toAngle>=0}return from2otherAngle>0}function removeHoles(contour,holes){function isCutLineInsideAngles(inShapeIdx,inHoleIdx){var lastShapeIdx=shape.length-1,prevShapeIdx=inShapeIdx-1;prevShapeIdx<0&&(prevShapeIdx=lastShapeIdx);var nextShapeIdx=inShapeIdx+1;nextShapeIdx>lastShapeIdx&&(nextShapeIdx=0);var insideAngle=isPointInsideAngle(shape[inShapeIdx],shape[prevShapeIdx],shape[nextShapeIdx],hole[inHoleIdx]);if(!insideAngle)return!1;var lastHoleIdx=hole.length-1,prevHoleIdx=inHoleIdx-1;prevHoleIdx<0&&(prevHoleIdx=lastHoleIdx);var nextHoleIdx=inHoleIdx+1;return nextHoleIdx>lastHoleIdx&&(nextHoleIdx=0),!!(insideAngle=isPointInsideAngle(hole[inHoleIdx],hole[prevHoleIdx],hole[nextHoleIdx],shape[inShapeIdx]))}function intersectsShapeEdge(inShapePt,inHolePt){var sIdx,nextIdx;for(sIdx=0;sIdx<shape.length;sIdx++)if(nextIdx=sIdx+1,nextIdx%=shape.length,intersect_segments_2D(inShapePt,inHolePt,shape[sIdx],shape[nextIdx],!0).length>0)return!0;return!1}function intersectsHoleEdge(inShapePt,inHolePt){var ihIdx,chkHole,hIdx,nextIdx;for(ihIdx=0;ihIdx<indepHoles.length;ihIdx++)for(chkHole=holes[indepHoles[ihIdx]],hIdx=0;hIdx<chkHole.length;hIdx++)if(nextIdx=hIdx+1,nextIdx%=chkHole.length,intersect_segments_2D(inShapePt,inHolePt,chkHole[hIdx],chkHole[nextIdx],!0).length>0)return!0;return!1}for(var hole,holeIndex,shapeIndex,shapePt,holePt,holeIdx,cutKey,tmpShape1,tmpShape2,tmpHole1,tmpHole2,shape=contour.concat(),indepHoles=[],failedCuts=[],h=0,hl=holes.length;h<hl;h++)indepHoles.push(h);for(var minShapeIndex=0,counter=2*indepHoles.length;indepHoles.length>0;){if(--counter<0){console.log("Infinite Loop! Holes left:"+indepHoles.length+", Probably Hole outside Shape!");break}for(shapeIndex=minShapeIndex;shapeIndex<shape.length;shapeIndex++){shapePt=shape[shapeIndex],holeIndex=-1;for(h=0;h<indepHoles.length;h++)if(holeIdx=indepHoles[h],failedCuts[cutKey=shapePt.x+":"+shapePt.y+":"+holeIdx]===undefined){hole=holes[holeIdx];for(var h2=0;h2<hole.length;h2++)if(holePt=hole[h2],isCutLineInsideAngles(shapeIndex,h2)&&!intersectsShapeEdge(shapePt,holePt)&&!intersectsHoleEdge(shapePt,holePt)){holeIndex=h2,indepHoles.splice(h,1),tmpShape1=shape.slice(0,shapeIndex+1),tmpShape2=shape.slice(shapeIndex),tmpHole1=hole.slice(holeIndex),tmpHole2=hole.slice(0,holeIndex+1),shape=tmpShape1.concat(tmpHole1).concat(tmpHole2).concat(tmpShape2),minShapeIndex=shapeIndex;break}if(holeIndex>=0)break;failedCuts[cutKey]=!0}if(holeIndex>=0)break}}return shape}for(var i,il,f,face,key,index,allPointsMap={},allpoints=contour.concat(),h=0,hl=holes.length;h<hl;h++)Array.prototype.push.apply(allpoints,holes[h]);for(i=0,il=allpoints.length;i<il;i++)allPointsMap[key=allpoints[i].x+":"+allpoints[i].y]!==undefined&&console.warn("THREE.Shape: Duplicate point",key),allPointsMap[key]=i;var shapeWithoutHoles=removeHoles(contour,holes),triangles=THREE.FontUtils.Triangulate(shapeWithoutHoles,!1);for(i=0,il=triangles.length;i<il;i++)for(face=triangles[i],f=0;f<3;f++)(index=allPointsMap[key=face[f].x+":"+face[f].y])!==undefined&&(face[f]=index);return triangles.concat()},isClockWise:function(pts){return THREE.FontUtils.Triangulate.area(pts)<0},b2p0:function(t,p){var k=1-t;return k*k*p},b2p1:function(t,p){return 2*(1-t)*t*p},b2p2:function(t,p){return t*t*p},b2:function(t,p0,p1,p2){return this.b2p0(t,p0)+this.b2p1(t,p1)+this.b2p2(t,p2)},b3p0:function(t,p){var k=1-t;return k*k*k*p},b3p1:function(t,p){var k=1-t;return 3*k*k*t*p},b3p2:function(t,p){return 3*(1-t)*t*t*p},b3p3:function(t,p){return t*t*t*p},b3:function(t,p0,p1,p2,p3){return this.b3p0(t,p0)+this.b3p1(t,p1)+this.b3p2(t,p2)+this.b3p3(t,p3)}},THREE.LineCurve=function(v1,v2){this.v1=v1,this.v2=v2},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.constructor=THREE.LineCurve,THREE.LineCurve.prototype.getPoint=function(t){var point=this.v2.clone().sub(this.v1);return point.multiplyScalar(t).add(this.v1),point},THREE.LineCurve.prototype.getPointAt=function(u){return this.getPoint(u)},THREE.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(v0,v1,v2){this.v0=v0,this.v1=v1,this.v2=v2},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve,THREE.QuadraticBezierCurve.prototype.getPoint=function(t){var vector=new THREE.Vector2;return vector.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),vector.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),vector},THREE.QuadraticBezierCurve.prototype.getTangent=function(t){var vector=new THREE.Vector2;return vector.x=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.x,this.v1.x,this.v2.x),vector.y=THREE.Curve.Utils.tangentQuadraticBezier(t,this.v0.y,this.v1.y,this.v2.y),vector.normalize()},THREE.CubicBezierCurve=function(v0,v1,v2,v3){this.v0=v0,this.v1=v1,this.v2=v2,this.v3=v3},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve,THREE.CubicBezierCurve.prototype.getPoint=function(t){var tx,ty;return tx=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),ty=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(tx,ty)},THREE.CubicBezierCurve.prototype.getTangent=function(t){var tx,ty;tx=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),ty=THREE.Curve.Utils.tangentCubicBezier(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var tangent=new THREE.Vector2(tx,ty);return tangent.normalize(),tangent},THREE.SplineCurve=function(points){this.points=points==undefined?[]:points},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.constructor=THREE.SplineCurve,THREE.SplineCurve.prototype.getPoint=function(t){var points=this.points,point=(points.length-1)*t,intPoint=Math.floor(point),weight=point-intPoint,point0=points[0===intPoint?intPoint:intPoint-1],point1=points[intPoint],point2=points[intPoint>points.length-2?points.length-1:intPoint+1],point3=points[intPoint>points.length-3?points.length-1:intPoint+2],vector=new THREE.Vector2;return vector.x=THREE.Curve.Utils.interpolate(point0.x,point1.x,point2.x,point3.x,weight),vector.y=THREE.Curve.Utils.interpolate(point0.y,point1.y,point2.y,point3.y,weight),vector},THREE.EllipseCurve=function(aX,aY,xRadius,yRadius,aStartAngle,aEndAngle,aClockwise,aRotation){this.aX=aX,this.aY=aY,this.xRadius=xRadius,this.yRadius=yRadius,this.aStartAngle=aStartAngle,this.aEndAngle=aEndAngle,this.aClockwise=aClockwise,this.aRotation=aRotation||0},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve,THREE.EllipseCurve.prototype.getPoint=function(t){var angle,deltaAngle=this.aEndAngle-this.aStartAngle;deltaAngle<0&&(deltaAngle+=2*Math.PI),deltaAngle>2*Math.PI&&(deltaAngle-=2*Math.PI),angle=!0===this.aClockwise?this.aEndAngle+(1-t)*(2*Math.PI-deltaAngle):this.aStartAngle+t*deltaAngle;var x=this.aX+this.xRadius*Math.cos(angle),y=this.aY+this.yRadius*Math.sin(angle);if(0!==this.aRotation){var cos=Math.cos(this.aRotation),sin=Math.sin(this.aRotation),tx=x,ty=y;x=(tx-this.aX)*cos-(ty-this.aY)*sin+this.aX,y=(tx-this.aX)*sin+(ty-this.aY)*cos+this.aY}return new THREE.Vector2(x,y)},THREE.ArcCurve=function(aX,aY,aRadius,aStartAngle,aEndAngle,aClockwise){THREE.EllipseCurve.call(this,aX,aY,aRadius,aRadius,aStartAngle,aEndAngle,aClockwise)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.ArcCurve.prototype.constructor=THREE.ArcCurve,THREE.LineCurve3=THREE.Curve.create(function(v1,v2){this.v1=v1,this.v2=v2},function(t){var vector=new THREE.Vector3;return vector.subVectors(this.v2,this.v1),vector.multiplyScalar(t),vector.add(this.v1),vector}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(v0,v1,v2){this.v0=v0,this.v1=v1,this.v2=v2},function(t){var vector=new THREE.Vector3;return vector.x=THREE.Shape.Utils.b2(t,this.v0.x,this.v1.x,this.v2.x),vector.y=THREE.Shape.Utils.b2(t,this.v0.y,this.v1.y,this.v2.y),vector.z=THREE.Shape.Utils.b2(t,this.v0.z,this.v1.z,this.v2.z),vector}),THREE.CubicBezierCurve3=THREE.Curve.create(function(v0,v1,v2,v3){this.v0=v0,this.v1=v1,this.v2=v2,this.v3=v3},function(t){var vector=new THREE.Vector3;return vector.x=THREE.Shape.Utils.b3(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),vector.y=THREE.Shape.Utils.b3(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),vector.z=THREE.Shape.Utils.b3(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z),vector}),THREE.SplineCurve3=THREE.Curve.create(function(points){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=points==undefined?[]:points},function(t){var points=this.points,point=(points.length-1)*t,intPoint=Math.floor(point),weight=point-intPoint,point0=points[0==intPoint?intPoint:intPoint-1],point1=points[intPoint],point2=points[intPoint>points.length-2?points.length-1:intPoint+1],point3=points[intPoint>points.length-3?points.length-1:intPoint+2],vector=new THREE.Vector3;return vector.x=THREE.Curve.Utils.interpolate(point0.x,point1.x,point2.x,point3.x,weight),vector.y=THREE.Curve.Utils.interpolate(point0.y,point1.y,point2.y,point3.y,weight),vector.z=THREE.Curve.Utils.interpolate(point0.z,point1.z,point2.z,point3.z,weight),vector}),THREE.CatmullRomCurve3=function(){function CubicPoly(){}var tmp=new THREE.Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;return CubicPoly.prototype.init=function(x0,x1,t0,t1){this.c0=x0,this.c1=t0,this.c2=-3*x0+3*x1-2*t0-t1,this.c3=2*x0-2*x1+t0+t1},CubicPoly.prototype.initNonuniformCatmullRom=function(x0,x1,x2,x3,dt0,dt1,dt2){var t1=(x1-x0)/dt0-(x2-x0)/(dt0+dt1)+(x2-x1)/dt1,t2=(x2-x1)/dt1-(x3-x1)/(dt1+dt2)+(x3-x2)/dt2;t1*=dt1,t2*=dt1,this.init(x1,x2,t1,t2)},CubicPoly.prototype.initCatmullRom=function(x0,x1,x2,x3,tension){this.init(x1,x2,tension*(x2-x0),tension*(x3-x1))},CubicPoly.prototype.calc=function(t){var t2=t*t,t3=t2*t;return this.c0+this.c1*t+this.c2*t2+this.c3*t3},THREE.Curve.create(function(p){this.points=p||[]},function(t){var point,intPoint,weight,l,p0,p1,p2,p3,points=this.points;if((l=points.length)<2&&console.log("duh, you need at least 2 points"),0===(weight=(point=(l-1)*t)-(intPoint=Math.floor(point)))&&intPoint===l-1&&(intPoint=l-2,weight=1),0===intPoint?(tmp.subVectors(points[0],points[1]).add(points[0]),p0=tmp):p0=points[intPoint-1],p1=points[intPoint],p2=points[intPoint+1],intPoint+2<l?p3=points[intPoint+2]:(tmp.subVectors(points[l-1],points[l-2]).add(points[l-2]),p3=tmp),this.type===undefined||"centripetal"===this.type||"chordal"===this.type){var pow="chordal"===this.type?.5:.25,dt0=Math.pow(p0.distanceToSquared(p1),pow),dt1=Math.pow(p1.distanceToSquared(p2),pow),dt2=Math.pow(p2.distanceToSquared(p3),pow);dt1<1e-4&&(dt1=1),dt0<1e-4&&(dt0=dt1),dt2<1e-4&&(dt2=dt1),px.initNonuniformCatmullRom(p0.x,p1.x,p2.x,p3.x,dt0,dt1,dt2),py.initNonuniformCatmullRom(p0.y,p1.y,p2.y,p3.y,dt0,dt1,dt2),pz.initNonuniformCatmullRom(p0.z,p1.z,p2.z,p3.z,dt0,dt1,dt2)}else if("catmullrom"===this.type){var tension=this.tension!==undefined?this.tension:.5;px.initCatmullRom(p0.x,p1.x,p2.x,p3.x,tension),py.initCatmullRom(p0.y,p1.y,p2.y,p3.y,tension),pz.initCatmullRom(p0.z,p1.z,p2.z,p3.z,tension)}return new THREE.Vector3(px.calc(weight),py.calc(weight),pz.calc(weight))})}(),THREE.ClosedSplineCurve3=THREE.Curve.create(function(points){this.points=points==undefined?[]:points},function(t){var points=this.points,point=(points.length-0)*t,intPoint=Math.floor(point),weight=point-intPoint,point0=points[((intPoint+=intPoint>0?0:(Math.floor(Math.abs(intPoint)/points.length)+1)*points.length)-1)%points.length],point1=points[intPoint%points.length],point2=points[(intPoint+1)%points.length],point3=points[(intPoint+2)%points.length],vector=new THREE.Vector3;return vector.x=THREE.Curve.Utils.interpolate(point0.x,point1.x,point2.x,point3.x,weight),vector.y=THREE.Curve.Utils.interpolate(point0.y,point1.y,point2.y,point3.y,weight),vector.z=THREE.Curve.Utils.interpolate(point0.z,point1.z,point2.z,point3.z,weight),vector}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(data){if(!0===data.initialized)return data;for(var h=0;h<data.hierarchy.length;h++){for(var k=0;k<data.hierarchy[h].keys.length;k++)if(data.hierarchy[h].keys[k].time<0&&(data.hierarchy[h].keys[k].time=0),data.hierarchy[h].keys[k].rot!==undefined&&!(data.hierarchy[h].keys[k].rot instanceof THREE.Quaternion)){var quat=data.hierarchy[h].keys[k].rot;data.hierarchy[h].keys[k].rot=(new THREE.Quaternion).fromArray(quat)}if(data.hierarchy[h].keys.length&&data.hierarchy[h].keys[0].morphTargets!==undefined){var usedMorphTargets={};for(k=0;k<data.hierarchy[h].keys.length;k++)for(var m=0;m<data.hierarchy[h].keys[k].morphTargets.length;m++){usedMorphTargets[morphTargetName=data.hierarchy[h].keys[k].morphTargets[m]]=-1}data.hierarchy[h].usedMorphTargets=usedMorphTargets;for(k=0;k<data.hierarchy[h].keys.length;k++){var influences={};for(var morphTargetName in usedMorphTargets){for(m=0;m<data.hierarchy[h].keys[k].morphTargets.length;m++)if(data.hierarchy[h].keys[k].morphTargets[m]===morphTargetName){influences[morphTargetName]=data.hierarchy[h].keys[k].morphTargetsInfluences[m];break}m===data.hierarchy[h].keys[k].morphTargets.length&&(influences[morphTargetName]=0)}data.hierarchy[h].keys[k].morphTargetsInfluences=influences}}for(k=1;k<data.hierarchy[h].keys.length;k++)data.hierarchy[h].keys[k].time===data.hierarchy[h].keys[k-1].time&&(data.hierarchy[h].keys.splice(k,1),k--);for(k=0;k<data.hierarchy[h].keys.length;k++)data.hierarchy[h].keys[k].index=k}return data.initialized=!0,data},parse:function(root){var parseRecurseHierarchy=function(root,hierarchy){hierarchy.push(root);for(var c=0;c<root.children.length;c++)parseRecurseHierarchy(root.children[c],hierarchy)},hierarchy=[];if(root instanceof THREE.SkinnedMesh)for(var b=0;b<root.skeleton.bones.length;b++)hierarchy.push(root.skeleton.bones[b]);else parseRecurseHierarchy(root,hierarchy);return hierarchy},play:function(animation){-1===this.animations.indexOf(animation)&&this.animations.push(animation)},stop:function(animation){var index=this.animations.indexOf(animation);-1!==index&&this.animations.splice(index,1)},update:function(deltaTimeMS){for(var i=0;i<this.animations.length;i++)this.animations[i].resetBlendWeights();for(i=0;i<this.animations.length;i++)this.animations[i].update(deltaTimeMS)}},THREE.Animation=function(root,data){this.root=root,this.data=THREE.AnimationHandler.init(data),this.hierarchy=THREE.AnimationHandler.parse(root),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype={constructor:THREE.Animation,keyTypes:["pos","rot","scl"],play:function(startTime,weight){this.currentTime=startTime!==undefined?startTime:0,this.weight=weight!==undefined?weight:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},reset:function(){for(var h=0,hl=this.hierarchy.length;h<hl;h++){var object=this.hierarchy[h];object.animationCache===undefined&&(object.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});var name=this.data.name,animations=object.animationCache.animations,animationCache=animations[name];animationCache===undefined&&(animationCache={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:object.matrix},animations[name]=animationCache);for(var t=0;t<3;t++){for(var type=this.keyTypes[t],prevKey=this.data.hierarchy[h].keys[0],nextKey=this.getNextKeyWith(type,h,1);nextKey.time<this.currentTime&&nextKey.index>prevKey.index;)prevKey=nextKey,nextKey=this.getNextKeyWith(type,h,nextKey.index+1);animationCache.prevKey[type]=prevKey,animationCache.nextKey[type]=nextKey}}},resetBlendWeights:function(){for(var h=0,hl=this.hierarchy.length;h<hl;h++){var animationCache=this.hierarchy[h].animationCache;if(animationCache!==undefined){var blending=animationCache.blending;blending.positionWeight=0,blending.quaternionWeight=0,blending.scaleWeight=0}}},update:function(){var points=[],target=new THREE.Vector3,newVector=new THREE.Vector3,newQuat=new THREE.Quaternion,interpolateCatmullRom=function(points,scale){var point,intPoint,weight,w2,w3,pa,pb,pc,pd,c=[],v3=[];return weight=(point=(points.length-1)*scale)-(intPoint=Math.floor(point)),c[0]=0===intPoint?intPoint:intPoint-1,c[1]=intPoint,c[2]=intPoint>points.length-2?intPoint:intPoint+1,c[3]=intPoint>points.length-3?intPoint:intPoint+2,pa=points[c[0]],pb=points[c[1]],pc=points[c[2]],pd=points[c[3]],w3=weight*(w2=weight*weight),v3[0]=interpolate(pa[0],pb[0],pc[0],pd[0],weight,w2,w3),v3[1]=interpolate(pa[1],pb[1],pc[1],pd[1],weight,w2,w3),v3[2]=interpolate(pa[2],pb[2],pc[2],pd[2],weight,w2,w3),v3},interpolate=function(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1};return function(delta){if(!1!==this.isPlaying&&(this.currentTime+=delta*this.timeScale,0!==this.weight)){var duration=this.data.length;(this.currentTime>duration||this.currentTime<0)&&(this.loop?(this.currentTime%=duration,this.currentTime<0&&(this.currentTime+=duration),this.reset()):this.stop());for(var h=0,hl=this.hierarchy.length;h<hl;h++)for(var object=this.hierarchy[h],animationCache=object.animationCache.animations[this.data.name],blending=object.animationCache.blending,t=0;t<3;t++){var type=this.keyTypes[t],prevKey=animationCache.prevKey[type],nextKey=animationCache.nextKey[type];if(this.timeScale>0&&nextKey.time<=this.currentTime||this.timeScale<0&&prevKey.time>=this.currentTime){for(prevKey=this.data.hierarchy[h].keys[0],nextKey=this.getNextKeyWith(type,h,1);nextKey.time<this.currentTime&&nextKey.index>prevKey.index;)prevKey=nextKey,nextKey=this.getNextKeyWith(type,h,nextKey.index+1);animationCache.prevKey[type]=prevKey,animationCache.nextKey[type]=nextKey}var scale=(this.currentTime-prevKey.time)/(nextKey.time-prevKey.time),prevXYZ=prevKey[type],nextXYZ=nextKey[type];if(scale<0&&(scale=0),scale>1&&(scale=1),"pos"===type){if(this.interpolationType===THREE.AnimationHandler.LINEAR){newVector.x=prevXYZ[0]+(nextXYZ[0]-prevXYZ[0])*scale,newVector.y=prevXYZ[1]+(nextXYZ[1]-prevXYZ[1])*scale,newVector.z=prevXYZ[2]+(nextXYZ[2]-prevXYZ[2])*scale;var proportionalWeight=this.weight/(this.weight+blending.positionWeight);object.position.lerp(newVector,proportionalWeight),blending.positionWeight+=this.weight}else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){points[0]=this.getPrevKeyWith("pos",h,prevKey.index-1).pos,points[1]=prevXYZ,points[2]=nextXYZ,points[3]=this.getNextKeyWith("pos",h,nextKey.index+1).pos;var currentPoint=interpolateCatmullRom(points,scale=.33*scale+.33);proportionalWeight=this.weight/(this.weight+blending.positionWeight);blending.positionWeight+=this.weight;var vector=object.position;if(vector.x=vector.x+(currentPoint[0]-vector.x)*proportionalWeight,vector.y=vector.y+(currentPoint[1]-vector.y)*proportionalWeight,vector.z=vector.z+(currentPoint[2]-vector.z)*proportionalWeight,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){var forwardPoint=interpolateCatmullRom(points,1.01*scale);target.set(forwardPoint[0],forwardPoint[1],forwardPoint[2]),target.sub(vector),target.y=0,target.normalize();var angle=Math.atan2(target.x,target.z);object.rotation.set(0,angle,0)}}}else if("rot"===type)if(THREE.Quaternion.slerp(prevXYZ,nextXYZ,newQuat,scale),0===blending.quaternionWeight)object.quaternion.copy(newQuat),blending.quaternionWeight=this.weight;else{proportionalWeight=this.weight/(this.weight+blending.quaternionWeight);THREE.Quaternion.slerp(object.quaternion,newQuat,object.quaternion,proportionalWeight),blending.quaternionWeight+=this.weight}else if("scl"===type){newVector.x=prevXYZ[0]+(nextXYZ[0]-prevXYZ[0])*scale,newVector.y=prevXYZ[1]+(nextXYZ[1]-prevXYZ[1])*scale,newVector.z=prevXYZ[2]+(nextXYZ[2]-prevXYZ[2])*scale;proportionalWeight=this.weight/(this.weight+blending.scaleWeight);object.scale.lerp(newVector,proportionalWeight),blending.scaleWeight+=this.weight}}return!0}}}(),getNextKeyWith:function(type,h,key){var keys=this.data.hierarchy[h].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?key=key<keys.length-1?key:keys.length-1:key%=keys.length;key<keys.length;key++)if(keys[key][type]!==undefined)return keys[key];return this.data.hierarchy[h].keys[0]},getPrevKeyWith:function(type,h,key){var keys=this.data.hierarchy[h].keys;for(key=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?key>0?key:0:key>=0?key:key+keys.length;key>=0;key--)if(keys[key][type]!==undefined)return keys[key];return this.data.hierarchy[h].keys[keys.length-1]}},THREE.KeyFrameAnimation=function(data){this.root=data.node,this.data=THREE.AnimationHandler.init(data),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var h=0,hl=this.hierarchy.length;h<hl;h++){var keys=this.data.hierarchy[h].keys,sids=this.data.hierarchy[h].sids,obj=this.hierarchy[h];if(keys.length&&sids){for(var s=0;s<sids.length;s++){var sid=sids[s],next=this.getNextKeyWith(sid,h,0);next&&next.apply(sid)}obj.matrixAutoUpdate=!1,this.data.hierarchy[h].node.updateMatrix(),obj.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype={constructor:THREE.KeyFrameAnimation,play:function(startTime){if(this.currentTime=startTime!==undefined?startTime:0,!1===this.isPlaying){this.isPlaying=!0;var h,object,node,hl=this.hierarchy.length;for(h=0;h<hl;h++){object=this.hierarchy[h],(node=this.data.hierarchy[h]).animationCache===undefined&&(node.animationCache={},node.animationCache.prevKey=null,node.animationCache.nextKey=null,node.animationCache.originalMatrix=object.matrix);var keys=this.data.hierarchy[h].keys;keys.length&&(node.animationCache.prevKey=keys[0],node.animationCache.nextKey=keys[1],this.startTime=Math.min(keys[0].time,this.startTime),this.endTime=Math.max(keys[keys.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.stop(this);for(var h=0;h<this.data.hierarchy.length;h++){var obj=this.hierarchy[h],node=this.data.hierarchy[h];if(node.animationCache!==undefined){var original=node.animationCache.originalMatrix;original.copy(obj.matrix),obj.matrix=original,delete node.animationCache}}},update:function(delta){if(!1!==this.isPlaying){this.currentTime+=delta*this.timeScale;var duration=this.data.length;!0===this.loop&&this.currentTime>duration&&(this.currentTime%=duration),this.currentTime=Math.min(this.currentTime,duration);for(var h=0,hl=this.hierarchy.length;h<hl;h++){var object=this.hierarchy[h],node=this.data.hierarchy[h],keys=node.keys,animationCache=node.animationCache;if(keys.length){var prevKey=animationCache.prevKey,nextKey=animationCache.nextKey;if(nextKey.time<=this.currentTime){for(;nextKey.time<this.currentTime&&nextKey.index>prevKey.index;)nextKey=keys[(prevKey=nextKey).index+1];animationCache.prevKey=prevKey,animationCache.nextKey=nextKey}nextKey.time>=this.currentTime?prevKey.interpolate(nextKey,this.currentTime):prevKey.interpolate(nextKey,nextKey.time),this.data.hierarchy[h].node.updateMatrix(),object.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(sid,h,key){var keys=this.data.hierarchy[h].keys;for(key%=keys.length;key<keys.length;key++)if(keys[key].hasTarget(sid))return keys[key];return keys[0]},getPrevKeyWith:function(sid,h,key){var keys=this.data.hierarchy[h].keys;for(key=key>=0?key:key+keys.length;key>=0;key--)if(keys[key].hasTarget(sid))return keys[key];return keys[keys.length-1]}},THREE.MorphAnimation=function(mesh){this.mesh=mesh,this.frames=mesh.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.lastFrame=0,this.currentFrame=0,this.isPlaying=!1},THREE.MorphAnimation.prototype={constructor:THREE.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(delta){if(!1!==this.isPlaying){this.currentTime+=delta,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var frameTime=this.duration/this.frames,frame=Math.floor(this.currentTime/frameTime),influences=this.mesh.morphTargetInfluences;frame!==this.currentFrame&&(influences[this.lastFrame]=0,influences[this.currentFrame]=1,influences[frame]=0,this.lastFrame=this.currentFrame,this.currentFrame=frame);var mix=this.currentTime%frameTime/frameTime;influences[frame]=mix,influences[this.lastFrame]=1-mix}}},THREE.BoxGeometry=function(width,height,depth,widthSegments,heightSegments,depthSegments){function buildPlane(u,v,udir,vdir,width,height,depth,materialIndex){var w,ix,iy,gridX=scope.widthSegments,gridY=scope.heightSegments,width_half=width/2,height_half=height/2,offset=scope.vertices.length;"x"===u&&"y"===v||"y"===u&&"x"===v?w="z":"x"===u&&"z"===v||"z"===u&&"x"===v?(w="y",gridY=scope.depthSegments):("z"===u&&"y"===v||"y"===u&&"z"===v)&&(w="x",gridX=scope.depthSegments);var gridX1=gridX+1,gridY1=gridY+1,segment_width=width/gridX,segment_height=height/gridY,normal=new THREE.Vector3;for(normal[w]=depth>0?1:-1,iy=0;iy<gridY1;iy++)for(ix=0;ix<gridX1;ix++){var vector=new THREE.Vector3;vector[u]=(ix*segment_width-width_half)*udir,vector[v]=(iy*segment_height-height_half)*vdir,vector[w]=depth,scope.vertices.push(vector)}for(iy=0;iy<gridY;iy++)for(ix=0;ix<gridX;ix++){var a=ix+gridX1*iy,b=ix+gridX1*(iy+1),c=ix+1+gridX1*(iy+1),d=ix+1+gridX1*iy,uva=new THREE.Vector2(ix/gridX,1-iy/gridY),uvb=new THREE.Vector2(ix/gridX,1-(iy+1)/gridY),uvc=new THREE.Vector2((ix+1)/gridX,1-(iy+1)/gridY),uvd=new THREE.Vector2((ix+1)/gridX,1-iy/gridY),face=new THREE.Face3(a+offset,b+offset,d+offset);face.normal.copy(normal),face.vertexNormals.push(normal.clone(),normal.clone(),normal.clone()),face.materialIndex=materialIndex,scope.faces.push(face),scope.faceVertexUvs[0].push([uva,uvb,uvd]),(face=new THREE.Face3(b+offset,c+offset,d+offset)).normal.copy(normal),face.vertexNormals.push(normal.clone(),normal.clone(),normal.clone()),face.materialIndex=materialIndex,scope.faces.push(face),scope.faceVertexUvs[0].push([uvb.clone(),uvc,uvd.clone()])}}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:width,height:height,depth:depth,widthSegments:widthSegments,heightSegments:heightSegments,depthSegments:depthSegments},this.widthSegments=widthSegments||1,this.heightSegments=heightSegments||1,this.depthSegments=depthSegments||1;var scope=this,width_half=width/2,height_half=height/2,depth_half=depth/2;buildPlane("z","y",-1,-1,depth,height,width_half,0),buildPlane("z","y",1,-1,depth,height,-width_half,1),buildPlane("x","z",1,1,width,depth,height_half,2),buildPlane("x","z",1,-1,width,depth,-height_half,3),buildPlane("x","y",1,-1,width,height,depth_half,4),buildPlane("x","y",-1,-1,width,height,-depth_half,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry,THREE.BoxGeometry.prototype.clone=function(){return new THREE.BoxGeometry(this.parameters.width,this.parameters.height,this.parameters.depth,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.depthSegments)},THREE.CubeGeometry=THREE.BoxGeometry,THREE.CircleGeometry=function(radius,segments,thetaStart,thetaLength){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:radius,segments:segments,thetaStart:thetaStart,thetaLength:thetaLength},radius=radius||50,segments=segments!==undefined?Math.max(3,segments):8,thetaStart=thetaStart!==undefined?thetaStart:0,thetaLength=thetaLength!==undefined?thetaLength:2*Math.PI;var i,uvs=[],center=new THREE.Vector3,centerUV=new THREE.Vector2(.5,.5);for(this.vertices.push(center),uvs.push(centerUV),i=0;i<=segments;i++){var vertex=new THREE.Vector3,segment=thetaStart+i/segments*thetaLength;vertex.x=radius*Math.cos(segment),vertex.y=radius*Math.sin(segment),this.vertices.push(vertex),uvs.push(new THREE.Vector2((vertex.x/radius+1)/2,(vertex.y/radius+1)/2))}var n=new THREE.Vector3(0,0,1);for(i=1;i<=segments;i++)this.faces.push(new THREE.Face3(i,i+1,0,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([uvs[i].clone(),uvs[i+1].clone(),centerUV.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,radius)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry,THREE.CircleGeometry.prototype.clone=function(){return new THREE.CircleGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength)},THREE.CircleBufferGeometry=function(radius,segments,thetaStart,thetaLength){THREE.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:radius,segments:segments,thetaStart:thetaStart,thetaLength:thetaLength},radius=radius||50,segments=segments!==undefined?Math.max(3,segments):8,
thetaStart=thetaStart!==undefined?thetaStart:0,thetaLength=thetaLength!==undefined?thetaLength:2*Math.PI;var vertices=segments+2,positions=new Float32Array(3*vertices),normals=new Float32Array(3*vertices),uvs=new Float32Array(2*vertices);normals[3]=1,uvs[0]=.5,uvs[1]=.5;for(var s=0,i=3,ii=2;s<=segments;s++,i+=3,ii+=2){var segment=thetaStart+s/segments*thetaLength;positions[i]=radius*Math.cos(segment),positions[i+1]=radius*Math.sin(segment),normals[i+2]=1,uvs[ii]=(positions[i]/radius+1)/2,uvs[ii+1]=(positions[i+1]/radius+1)/2}var indices=[];for(i=1;i<=segments;i++)indices.push(i),indices.push(i+1),indices.push(0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(indices),1)),this.addAttribute("position",new THREE.BufferAttribute(positions,3)),this.addAttribute("normal",new THREE.BufferAttribute(normals,3)),this.addAttribute("uv",new THREE.BufferAttribute(uvs,2)),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,radius)},THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry,THREE.CircleBufferGeometry.prototype.clone=function(){var geometry=new THREE.CircleBufferGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength);return geometry.copy(this),geometry},THREE.CylinderGeometry=function(radiusTop,radiusBottom,height,radialSegments,heightSegments,openEnded,thetaStart,thetaLength){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:radiusTop,radiusBottom:radiusBottom,height:height,radialSegments:radialSegments,heightSegments:heightSegments,openEnded:openEnded,thetaStart:thetaStart,thetaLength:thetaLength},radiusTop=radiusTop!==undefined?radiusTop:20,radiusBottom=radiusBottom!==undefined?radiusBottom:20,height=height!==undefined?height:100,radialSegments=radialSegments||8,heightSegments=heightSegments||1,openEnded=openEnded!==undefined&&openEnded,thetaStart=thetaStart!==undefined?thetaStart:0,thetaLength=thetaLength!==undefined?thetaLength:2*Math.PI;var x,y,heightHalf=height/2,vertices=[],uvs=[];for(y=0;y<=heightSegments;y++){var verticesRow=[],uvsRow=[],v=y/heightSegments,radius=v*(radiusBottom-radiusTop)+radiusTop;for(x=0;x<=radialSegments;x++){var u=x/radialSegments,vertex=new THREE.Vector3;vertex.x=radius*Math.sin(u*thetaLength+thetaStart),vertex.y=-v*height+heightHalf,vertex.z=radius*Math.cos(u*thetaLength+thetaStart),this.vertices.push(vertex),verticesRow.push(this.vertices.length-1),uvsRow.push(new THREE.Vector2(u,1-v))}vertices.push(verticesRow),uvs.push(uvsRow)}var na,nb,tanTheta=(radiusBottom-radiusTop)/height;for(x=0;x<radialSegments;x++)for(0!==radiusTop?(na=this.vertices[vertices[0][x]].clone(),nb=this.vertices[vertices[0][x+1]].clone()):(na=this.vertices[vertices[1][x]].clone(),nb=this.vertices[vertices[1][x+1]].clone()),na.setY(Math.sqrt(na.x*na.x+na.z*na.z)*tanTheta).normalize(),nb.setY(Math.sqrt(nb.x*nb.x+nb.z*nb.z)*tanTheta).normalize(),y=0;y<heightSegments;y++){var v1=vertices[y][x],v2=vertices[y+1][x],v3=vertices[y+1][x+1],v4=vertices[y][x+1],n1=na.clone(),n2=na.clone(),n3=nb.clone(),n4=nb.clone(),uv1=uvs[y][x].clone(),uv2=uvs[y+1][x].clone(),uv3=uvs[y+1][x+1].clone(),uv4=uvs[y][x+1].clone();this.faces.push(new THREE.Face3(v1,v2,v4,[n1,n2,n4])),this.faceVertexUvs[0].push([uv1,uv2,uv4]),this.faces.push(new THREE.Face3(v2,v3,v4,[n2.clone(),n3,n4.clone()])),this.faceVertexUvs[0].push([uv2.clone(),uv3,uv4.clone()])}if(!1===openEnded&&radiusTop>0)for(this.vertices.push(new THREE.Vector3(0,heightHalf,0)),x=0;x<radialSegments;x++){v1=vertices[0][x],v2=vertices[0][x+1],v3=this.vertices.length-1,n1=new THREE.Vector3(0,1,0),n2=new THREE.Vector3(0,1,0),n3=new THREE.Vector3(0,1,0),uv1=uvs[0][x].clone(),uv2=uvs[0][x+1].clone(),uv3=new THREE.Vector2(uv2.x,0);this.faces.push(new THREE.Face3(v1,v2,v3,[n1,n2,n3],undefined,1)),this.faceVertexUvs[0].push([uv1,uv2,uv3])}if(!1===openEnded&&radiusBottom>0)for(this.vertices.push(new THREE.Vector3(0,-heightHalf,0)),x=0;x<radialSegments;x++){v1=vertices[heightSegments][x+1],v2=vertices[heightSegments][x],v3=this.vertices.length-1,n1=new THREE.Vector3(0,-1,0),n2=new THREE.Vector3(0,-1,0),n3=new THREE.Vector3(0,-1,0),uv1=uvs[heightSegments][x+1].clone(),uv2=uvs[heightSegments][x].clone(),uv3=new THREE.Vector2(uv2.x,1);this.faces.push(new THREE.Face3(v1,v2,v3,[n1,n2,n3],undefined,2)),this.faceVertexUvs[0].push([uv1,uv2,uv3])}this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.CylinderGeometry.prototype.clone=function(){return new THREE.CylinderGeometry(this.parameters.radiusTop,this.parameters.radiusBottom,this.parameters.height,this.parameters.radialSegments,this.parameters.heightSegments,this.parameters.openEnded,this.parameters.thetaStart,this.parameters.thetaLength)},THREE.EdgesGeometry=function(geometry,thresholdAngle){THREE.BufferGeometry.call(this),thresholdAngle=thresholdAngle!==undefined?thresholdAngle:1;var geometry2,thresholdDot=Math.cos(THREE.Math.degToRad(thresholdAngle)),edge=[0,0],hash={},sortFunction=function(a,b){return a-b},keys=["a","b","c"];geometry instanceof THREE.BufferGeometry?(geometry2=new THREE.Geometry).fromBufferGeometry(geometry):geometry2=geometry.clone(),geometry2.mergeVertices(),geometry2.computeFaceNormals();for(var vertices=geometry2.vertices,faces=geometry2.faces,i=0,l=faces.length;i<l;i++)for(var face=faces[i],j=0;j<3;j++){edge[0]=face[keys[j]],edge[1]=face[keys[(j+1)%3]],edge.sort(sortFunction),hash[key=edge.toString()]===undefined?hash[key]={vert1:edge[0],vert2:edge[1],face1:i,face2:undefined}:hash[key].face2=i}var coords=[];for(var key in hash){var h=hash[key];if(h.face2===undefined||faces[h.face1].normal.dot(faces[h.face2].normal)<=thresholdDot){var vertex=vertices[h.vert1];coords.push(vertex.x),coords.push(vertex.y),coords.push(vertex.z),vertex=vertices[h.vert2],coords.push(vertex.x),coords.push(vertex.y),coords.push(vertex.z)}}this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(coords),3))},THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry,THREE.ExtrudeGeometry=function(shapes,options){void 0!==shapes?(THREE.Geometry.call(this),this.type="ExtrudeGeometry",shapes=Array.isArray(shapes)?shapes:[shapes],this.addShapeList(shapes,options),this.computeFaceNormals()):shapes=[]},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry,THREE.ExtrudeGeometry.prototype.addShapeList=function(shapes,options){for(var sl=shapes.length,s=0;s<sl;s++){var shape=shapes[s];this.addShape(shape,options)}},THREE.ExtrudeGeometry.prototype.addShape=function(shape,options){function scalePt2(pt,vec,size){return vec||console.error("THREE.ExtrudeGeometry: vec does not exist"),vec.clone().multiplyScalar(size).add(pt)}function getBevelVec(inPt,inPrev,inNext){var v_trans_x,v_trans_y,EPSILON=1e-10,shrink_by=1,v_prev_x=inPt.x-inPrev.x,v_prev_y=inPt.y-inPrev.y,v_next_x=inNext.x-inPt.x,v_next_y=inNext.y-inPt.y,v_prev_lensq=v_prev_x*v_prev_x+v_prev_y*v_prev_y,collinear0=v_prev_x*v_next_y-v_prev_y*v_next_x;if(Math.abs(collinear0)>EPSILON){var v_prev_len=Math.sqrt(v_prev_lensq),v_next_len=Math.sqrt(v_next_x*v_next_x+v_next_y*v_next_y),ptPrevShift_x=inPrev.x-v_prev_y/v_prev_len,ptPrevShift_y=inPrev.y+v_prev_x/v_prev_len,sf=((inNext.x-v_next_y/v_next_len-ptPrevShift_x)*v_next_y-(inNext.y+v_next_x/v_next_len-ptPrevShift_y)*v_next_x)/(v_prev_x*v_next_y-v_prev_y*v_next_x),v_trans_lensq=(v_trans_x=ptPrevShift_x+v_prev_x*sf-inPt.x)*v_trans_x+(v_trans_y=ptPrevShift_y+v_prev_y*sf-inPt.y)*v_trans_y;if(v_trans_lensq<=2)return new THREE.Vector2(v_trans_x,v_trans_y);shrink_by=Math.sqrt(v_trans_lensq/2)}else{var direction_eq=!1;v_prev_x>EPSILON?v_next_x>EPSILON&&(direction_eq=!0):v_prev_x<-EPSILON?v_next_x<-EPSILON&&(direction_eq=!0):Math.sign(v_prev_y)===Math.sign(v_next_y)&&(direction_eq=!0),direction_eq?(v_trans_x=-v_prev_y,v_trans_y=v_prev_x,shrink_by=Math.sqrt(v_prev_lensq)):(v_trans_x=v_prev_x,v_trans_y=v_prev_y,shrink_by=Math.sqrt(v_prev_lensq/2))}return new THREE.Vector2(v_trans_x/shrink_by,v_trans_y/shrink_by)}function buildLidFaces(){if(bevelEnabled){var layer=0,offset=vlen*layer;for(i=0;i<flen;i++)f3((face=faces[i])[2]+offset,face[1]+offset,face[0]+offset);for(offset=vlen*(layer=steps+2*bevelSegments),i=0;i<flen;i++)f3((face=faces[i])[0]+offset,face[1]+offset,face[2]+offset)}else{for(i=0;i<flen;i++)f3((face=faces[i])[2],face[1],face[0]);for(i=0;i<flen;i++)f3((face=faces[i])[0]+vlen*steps,face[1]+vlen*steps,face[2]+vlen*steps)}}function buildSideFaces(){var layeroffset=0;for(sidewalls(contour,layeroffset),layeroffset+=contour.length,h=0,hl=holes.length;h<hl;h++)sidewalls(ahole=holes[h],layeroffset),layeroffset+=ahole.length}function sidewalls(contour,layeroffset){var j,k;for(i=contour.length;--i>=0;){j=i,(k=i-1)<0&&(k=contour.length-1);var s=0,sl=steps+2*bevelSegments;for(s=0;s<sl;s++){var slen1=vlen*s,slen2=vlen*(s+1);f4(layeroffset+j+slen1,layeroffset+k+slen1,layeroffset+k+slen2,layeroffset+j+slen2,contour,s,sl,j,k)}}}function v(x,y,z){scope.vertices.push(new THREE.Vector3(x,y,z))}function f3(a,b,c){a+=shapesOffset,b+=shapesOffset,c+=shapesOffset,scope.faces.push(new THREE.Face3(a,b,c));var uvs=uvgen.generateTopUV(scope,a,b,c);scope.faceVertexUvs[0].push(uvs)}function f4(a,b,c,d){a+=shapesOffset,b+=shapesOffset,c+=shapesOffset,d+=shapesOffset,scope.faces.push(new THREE.Face3(a,b,d)),scope.faces.push(new THREE.Face3(b,c,d));var uvs=uvgen.generateSideWallUV(scope,a,b,c,d);scope.faceVertexUvs[0].push([uvs[0],uvs[1],uvs[3]]),scope.faceVertexUvs[0].push([uvs[1],uvs[2],uvs[3]])}var extrudePts,splineTube,binormal,normal,position2,ahole,h,hl,amount=options.amount!==undefined?options.amount:100,bevelThickness=options.bevelThickness!==undefined?options.bevelThickness:6,bevelSize=options.bevelSize!==undefined?options.bevelSize:bevelThickness-2,bevelSegments=options.bevelSegments!==undefined?options.bevelSegments:3,bevelEnabled=options.bevelEnabled===undefined||options.bevelEnabled,curveSegments=options.curveSegments!==undefined?options.curveSegments:12,steps=options.steps!==undefined?options.steps:1,extrudePath=options.extrudePath,extrudeByPath=!1,uvgen=options.UVGenerator!==undefined?options.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;extrudePath&&(extrudePts=extrudePath.getSpacedPoints(steps),extrudeByPath=!0,bevelEnabled=!1,splineTube=options.frames!==undefined?options.frames:new THREE.TubeGeometry.FrenetFrames(extrudePath,steps,!1),binormal=new THREE.Vector3,normal=new THREE.Vector3,position2=new THREE.Vector3),bevelEnabled||(bevelSegments=0,bevelThickness=0,bevelSize=0);var scope=this,shapesOffset=this.vertices.length,shapePoints=shape.extractPoints(curveSegments),vertices=shapePoints.shape,holes=shapePoints.holes,reverse=!THREE.Shape.Utils.isClockWise(vertices);if(reverse){for(vertices=vertices.reverse(),h=0,hl=holes.length;h<hl;h++)ahole=holes[h],THREE.Shape.Utils.isClockWise(ahole)&&(holes[h]=ahole.reverse());reverse=!1}var faces=THREE.Shape.Utils.triangulateShape(vertices,holes),contour=vertices;for(h=0,hl=holes.length;h<hl;h++)ahole=holes[h],vertices=vertices.concat(ahole);for(var b,bs,t,z,vert,face,vlen=vertices.length,flen=faces.length,contourMovements=[],i=0,il=contour.length,j=il-1,k=i+1;i<il;i++,j++,k++)j===il&&(j=0),k===il&&(k=0),contourMovements[i]=getBevelVec(contour[i],contour[j],contour[k]);var oneHoleMovements,s,holesMovements=[],verticesMovements=contourMovements.concat();for(h=0,hl=holes.length;h<hl;h++){for(ahole=holes[h],oneHoleMovements=[],i=0,j=(il=ahole.length)-1,k=i+1;i<il;i++,j++,k++)j===il&&(j=0),k===il&&(k=0),oneHoleMovements[i]=getBevelVec(ahole[i],ahole[j],ahole[k]);holesMovements.push(oneHoleMovements),verticesMovements=verticesMovements.concat(oneHoleMovements)}for(b=0;b<bevelSegments;b++){for(z=bevelThickness*(1-(t=b/bevelSegments)),bs=bevelSize*Math.sin(t*Math.PI/2),i=0,il=contour.length;i<il;i++)v((vert=scalePt2(contour[i],contourMovements[i],bs)).x,vert.y,-z);for(h=0,hl=holes.length;h<hl;h++)for(ahole=holes[h],oneHoleMovements=holesMovements[h],i=0,il=ahole.length;i<il;i++)v((vert=scalePt2(ahole[i],oneHoleMovements[i],bs)).x,vert.y,-z)}for(bs=bevelSize,i=0;i<vlen;i++)vert=bevelEnabled?scalePt2(vertices[i],verticesMovements[i],bs):vertices[i],extrudeByPath?(normal.copy(splineTube.normals[0]).multiplyScalar(vert.x),binormal.copy(splineTube.binormals[0]).multiplyScalar(vert.y),position2.copy(extrudePts[0]).add(normal).add(binormal),v(position2.x,position2.y,position2.z)):v(vert.x,vert.y,0);for(s=1;s<=steps;s++)for(i=0;i<vlen;i++)vert=bevelEnabled?scalePt2(vertices[i],verticesMovements[i],bs):vertices[i],extrudeByPath?(normal.copy(splineTube.normals[s]).multiplyScalar(vert.x),binormal.copy(splineTube.binormals[s]).multiplyScalar(vert.y),position2.copy(extrudePts[s]).add(normal).add(binormal),v(position2.x,position2.y,position2.z)):v(vert.x,vert.y,amount/steps*s);for(b=bevelSegments-1;b>=0;b--){for(z=bevelThickness*(1-(t=b/bevelSegments)),bs=bevelSize*Math.sin(t*Math.PI/2),i=0,il=contour.length;i<il;i++)v((vert=scalePt2(contour[i],contourMovements[i],bs)).x,vert.y,amount+z);for(h=0,hl=holes.length;h<hl;h++)for(ahole=holes[h],oneHoleMovements=holesMovements[h],i=0,il=ahole.length;i<il;i++)vert=scalePt2(ahole[i],oneHoleMovements[i],bs),extrudeByPath?v(vert.x,vert.y+extrudePts[steps-1].y,extrudePts[steps-1].x+z):v(vert.x,vert.y,amount+z)}buildLidFaces(),buildSideFaces()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(geometry,indexA,indexB,indexC){var vertices=geometry.vertices,a=vertices[indexA],b=vertices[indexB],c=vertices[indexC];return[new THREE.Vector2(a.x,a.y),new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y)]},generateSideWallUV:function(geometry,indexA,indexB,indexC,indexD){var vertices=geometry.vertices,a=vertices[indexA],b=vertices[indexB],c=vertices[indexC],d=vertices[indexD];return Math.abs(a.y-b.y)<.01?[new THREE.Vector2(a.x,1-a.z),new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z)]:[new THREE.Vector2(a.y,1-a.z),new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,1-d.z)]}},THREE.ShapeGeometry=function(shapes,options){THREE.Geometry.call(this),this.type="ShapeGeometry",!1===Array.isArray(shapes)&&(shapes=[shapes]),this.addShapeList(shapes,options),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry,THREE.ShapeGeometry.prototype.addShapeList=function(shapes,options){for(var i=0,l=shapes.length;i<l;i++)this.addShape(shapes[i],options);return this},THREE.ShapeGeometry.prototype.addShape=function(shape,options){options===undefined&&(options={});var i,l,hole,curveSegments=options.curveSegments!==undefined?options.curveSegments:12,material=options.material,uvgen=options.UVGenerator===undefined?THREE.ExtrudeGeometry.WorldUVGenerator:options.UVGenerator,shapesOffset=this.vertices.length,shapePoints=shape.extractPoints(curveSegments),vertices=shapePoints.shape,holes=shapePoints.holes,reverse=!THREE.Shape.Utils.isClockWise(vertices);if(reverse){for(vertices=vertices.reverse(),i=0,l=holes.length;i<l;i++)hole=holes[i],THREE.Shape.Utils.isClockWise(hole)&&(holes[i]=hole.reverse());reverse=!1}var faces=THREE.Shape.Utils.triangulateShape(vertices,holes);for(i=0,l=holes.length;i<l;i++)hole=holes[i],vertices=vertices.concat(hole);var vert,face,vlen=vertices.length,flen=faces.length;for(i=0;i<vlen;i++)vert=vertices[i],this.vertices.push(new THREE.Vector3(vert.x,vert.y,0));for(i=0;i<flen;i++){var a=(face=faces[i])[0]+shapesOffset,b=face[1]+shapesOffset,c=face[2]+shapesOffset;this.faces.push(new THREE.Face3(a,b,c,null,null,material)),this.faceVertexUvs[0].push(uvgen.generateTopUV(this,a,b,c))}},THREE.LatheGeometry=function(points,segments,phiStart,phiLength){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:points,segments:segments,phiStart:phiStart,phiLength:phiLength},segments=segments||12,phiStart=phiStart||0,phiLength=phiLength||2*Math.PI;for(var inversePointLength=1/(points.length-1),inverseSegments=1/segments,i=0,il=segments;i<=il;i++)for(var phi=phiStart+i*inverseSegments*phiLength,c=Math.cos(phi),s=Math.sin(phi),j=0,jl=points.length;j<jl;j++){var pt=points[j],vertex=new THREE.Vector3;vertex.x=c*pt.x-s*pt.y,vertex.y=s*pt.x+c*pt.y,vertex.z=pt.z,this.vertices.push(vertex)}var np=points.length;for(i=0,il=segments;i<il;i++)for(j=0,jl=points.length-1;j<jl;j++){var base=j+np*i,a=base,b=base+np,d=(c=base+1+np,base+1),u0=i*inverseSegments,v0=j*inversePointLength,u1=u0+inverseSegments,v1=v0+inversePointLength;this.faces.push(new THREE.Face3(a,b,d)),this.faceVertexUvs[0].push([new THREE.Vector2(u0,v0),new THREE.Vector2(u1,v0),new THREE.Vector2(u0,v1)]),this.faces.push(new THREE.Face3(b,c,d)),this.faceVertexUvs[0].push([new THREE.Vector2(u1,v0),new THREE.Vector2(u1,v1),new THREE.Vector2(u0,v1)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry,THREE.PlaneGeometry=function(width,height,widthSegments,heightSegments){THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:width,height:height,widthSegments:widthSegments,heightSegments:heightSegments},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(width,height,widthSegments,heightSegments))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.PlaneGeometry.prototype.clone=function(){return new THREE.PlaneGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments)},THREE.PlaneBufferGeometry=function(width,height,widthSegments,heightSegments){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:width,height:height,widthSegments:widthSegments,heightSegments:heightSegments};for(var width_half=width/2,height_half=height/2,gridX=Math.floor(widthSegments)||1,gridY=Math.floor(heightSegments)||1,gridX1=gridX+1,gridY1=gridY+1,segment_width=width/gridX,segment_height=height/gridY,vertices=new Float32Array(gridX1*gridY1*3),normals=new Float32Array(gridX1*gridY1*3),uvs=new Float32Array(gridX1*gridY1*2),offset=0,offset2=0,iy=0;iy<gridY1;iy++)for(var y=iy*segment_height-height_half,ix=0;ix<gridX1;ix++){var x=ix*segment_width-width_half;vertices[offset]=x,vertices[offset+1]=-y,normals[offset+2]=1,uvs[offset2]=ix/gridX,uvs[offset2+1]=1-iy/gridY,offset+=3,offset2+=2}offset=0;var indices=new(vertices.length/3>65535?Uint32Array:Uint16Array)(gridX*gridY*6);for(iy=0;iy<gridY;iy++)for(ix=0;ix<gridX;ix++){var a=ix+gridX1*iy,b=ix+gridX1*(iy+1),c=ix+1+gridX1*(iy+1),d=ix+1+gridX1*iy;indices[offset]=a,indices[offset+1]=b,indices[offset+2]=d,indices[offset+3]=b,indices[offset+4]=c,indices[offset+5]=d,offset+=6}this.setIndex(new THREE.BufferAttribute(indices,1)),this.addAttribute("position",new THREE.BufferAttribute(vertices,3)),this.addAttribute("normal",new THREE.BufferAttribute(normals,3)),this.addAttribute("uv",new THREE.BufferAttribute(uvs,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry,THREE.PlaneBufferGeometry.prototype.clone=function(){var geometry=new THREE.PlaneBufferGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments);return geometry.copy(this),geometry},THREE.RingGeometry=function(innerRadius,outerRadius,thetaSegments,phiSegments,thetaStart,thetaLength){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:innerRadius,outerRadius:outerRadius,thetaSegments:thetaSegments,phiSegments:phiSegments,thetaStart:thetaStart,thetaLength:thetaLength},innerRadius=innerRadius||0,outerRadius=outerRadius||50,thetaStart=thetaStart!==undefined?thetaStart:0,thetaLength=thetaLength!==undefined?thetaLength:2*Math.PI,thetaSegments=thetaSegments!==undefined?Math.max(3,thetaSegments):8;var i,o,uvs=[],radius=innerRadius,radiusStep=(outerRadius-innerRadius)/(phiSegments=phiSegments!==undefined?Math.max(1,phiSegments):8);for(i=0;i<phiSegments+1;i++){for(o=0;o<thetaSegments+1;o++){var vertex=new THREE.Vector3,segment=thetaStart+o/thetaSegments*thetaLength;vertex.x=radius*Math.cos(segment),vertex.y=radius*Math.sin(segment),this.vertices.push(vertex),uvs.push(new THREE.Vector2((vertex.x/outerRadius+1)/2,(vertex.y/outerRadius+1)/2))}radius+=radiusStep}var n=new THREE.Vector3(0,0,1);for(i=0;i<phiSegments;i++){var thetaSegment=i*(thetaSegments+1);for(o=0;o<thetaSegments;o++){var v1=segment=o+thetaSegment,v2=segment+thetaSegments+1,v3=segment+thetaSegments+2;this.faces.push(new THREE.Face3(v1,v2,v3,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([uvs[v1].clone(),uvs[v2].clone(),uvs[v3].clone()]),v1=segment,v2=segment+thetaSegments+2,v3=segment+1,this.faces.push(new THREE.Face3(v1,v2,v3,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([uvs[v1].clone(),uvs[v2].clone(),uvs[v3].clone()])}}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,radius)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry.prototype.constructor=THREE.RingGeometry,THREE.RingGeometry.prototype.clone=function(){return new THREE.RingGeometry(this.parameters.innerRadius,this.parameters.outerRadius,this.parameters.thetaSegments,this.parameters.phiSegments,this.parameters.thetaStart,this.parameters.thetaLength)},THREE.SphereGeometry=function(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:radius,widthSegments:widthSegments,heightSegments:heightSegments,phiStart:phiStart,phiLength:phiLength,thetaStart:thetaStart,thetaLength:thetaLength},this.fromBufferGeometry(new THREE.SphereBufferGeometry(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength))},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.SphereGeometry.prototype.clone=function(){return new THREE.SphereGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength)},THREE.SphereBufferGeometry=function(radius,widthSegments,heightSegments,phiStart,phiLength,thetaStart,thetaLength){THREE.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:radius,widthSegments:widthSegments,heightSegments:heightSegments,phiStart:phiStart,phiLength:phiLength,thetaStart:thetaStart,thetaLength:thetaLength},radius=radius||50,widthSegments=Math.max(3,Math.floor(widthSegments)||8),heightSegments=Math.max(2,Math.floor(heightSegments)||6),phiStart=phiStart!==undefined?phiStart:0,phiLength=phiLength!==undefined?phiLength:2*Math.PI;for(var thetaEnd=(thetaStart=thetaStart!==undefined?thetaStart:0)+(thetaLength=thetaLength!==undefined?thetaLength:Math.PI),vertexCount=(widthSegments+1)*(heightSegments+1),positions=new THREE.BufferAttribute(new Float32Array(3*vertexCount),3),normals=new THREE.BufferAttribute(new Float32Array(3*vertexCount),3),uvs=new THREE.BufferAttribute(new Float32Array(2*vertexCount),2),index=0,vertices=[],normal=new THREE.Vector3,y=0;y<=heightSegments;y++){for(var verticesRow=[],v=y/heightSegments,x=0;x<=widthSegments;x++){var u=x/widthSegments,px=-radius*Math.cos(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength),py=radius*Math.cos(thetaStart+v*thetaLength),pz=radius*Math.sin(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength);normal.set(px,py,pz).normalize(),positions.setXYZ(index,px,py,pz),normals.setXYZ(index,normal.x,normal.y,normal.z),uvs.setXY(index,u,1-v),verticesRow.push(index),index++}vertices.push(verticesRow)}var indices=[];for(y=0;y<heightSegments;y++)for(x=0;x<widthSegments;x++){var v1=vertices[y][x+1],v2=vertices[y][x],v3=vertices[y+1][x],v4=vertices[y+1][x+1];(0!==y||thetaStart>0)&&indices.push(v1,v2,v4),(y!==heightSegments-1||thetaEnd<Math.PI)&&indices.push(v2,v3,v4)}this.setIndex(new THREE.BufferAttribute(new Uint16Array(indices),1)),this.addAttribute("position",positions),this.addAttribute("normal",normals),this.addAttribute("uv",uvs),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,radius)},THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry,THREE.SphereBufferGeometry.prototype.clone=function(){var geometry=new THREE.SphereBufferGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength);return geometry.copy(this),geometry},THREE.TextGeometry=function(text,parameters){parameters=parameters||{};var textShapes=THREE.FontUtils.generateShapes(text,parameters);parameters.amount=parameters.height!==undefined?parameters.height:50,parameters.bevelThickness===undefined&&(parameters.bevelThickness=10),parameters.bevelSize===undefined&&(parameters.bevelSize=8),parameters.bevelEnabled===undefined&&(parameters.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,textShapes,parameters),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TextGeometry.prototype.constructor=THREE.TextGeometry,THREE.TorusGeometry=function(radius,tube,radialSegments,tubularSegments,arc){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:radius,tube:tube,radialSegments:radialSegments,tubularSegments:tubularSegments,arc:arc},radius=radius||100,tube=tube||40,radialSegments=radialSegments||8,tubularSegments=tubularSegments||6,arc=arc||2*Math.PI;for(var center=new THREE.Vector3,uvs=[],normals=[],j=0;j<=radialSegments;j++)for(var i=0;i<=tubularSegments;i++){var u=i/tubularSegments*arc,v=j/radialSegments*Math.PI*2;center.x=radius*Math.cos(u),center.y=radius*Math.sin(u);var vertex=new THREE.Vector3;vertex.x=(radius+tube*Math.cos(v))*Math.cos(u),vertex.y=(radius+tube*Math.cos(v))*Math.sin(u),vertex.z=tube*Math.sin(v),this.vertices.push(vertex),uvs.push(new THREE.Vector2(i/tubularSegments,j/radialSegments)),normals.push(vertex.clone().sub(center).normalize())}for(j=1;j<=radialSegments;j++)for(i=1;i<=tubularSegments;i++){var a=(tubularSegments+1)*j+i-1,b=(tubularSegments+1)*(j-1)+i-1,c=(tubularSegments+1)*(j-1)+i,d=(tubularSegments+1)*j+i,face=new THREE.Face3(a,b,d,[normals[a].clone(),normals[b].clone(),normals[d].clone()]);this.faces.push(face),this.faceVertexUvs[0].push([uvs[a].clone(),uvs[b].clone(),uvs[d].clone()]),face=new THREE.Face3(b,c,d,[normals[b].clone(),normals[c].clone(),normals[d].clone()]),this.faces.push(face),this.faceVertexUvs[0].push([uvs[b].clone(),uvs[c].clone(),uvs[d].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry,THREE.TorusGeometry.prototype.clone=function(){return new THREE.TorusGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.arc)},THREE.TorusKnotGeometry=function(radius,tube,radialSegments,tubularSegments,p,q,heightScale){function getPos(u,in_q,in_p,radius,heightScale){var cu=Math.cos(u),su=Math.sin(u),quOverP=in_q/in_p*u,cs=Math.cos(quOverP),tx=radius*(2+cs)*.5*cu,ty=radius*(2+cs)*su*.5,tz=heightScale*radius*Math.sin(quOverP)*.5;return new THREE.Vector3(tx,ty,tz)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:radius,tube:tube,radialSegments:radialSegments,tubularSegments:tubularSegments,p:p,q:q,heightScale:heightScale},radius=radius||100,tube=tube||40,radialSegments=radialSegments||64,tubularSegments=tubularSegments||8,p=p||2,q=q||3,heightScale=heightScale||1;for(var grid=new Array(radialSegments),tang=new THREE.Vector3,n=new THREE.Vector3,bitan=new THREE.Vector3,i=0;i<radialSegments;++i){grid[i]=new Array(tubularSegments);var u=i/radialSegments*2*p*Math.PI,p1=getPos(u,q,p,radius,heightScale),p2=getPos(u+.01,q,p,radius,heightScale);tang.subVectors(p2,p1),n.addVectors(p2,p1),bitan.crossVectors(tang,n),n.crossVectors(bitan,tang),bitan.normalize(),n.normalize();for(var j=0;j<tubularSegments;++j){var v=j/tubularSegments*2*Math.PI,cx=-tube*Math.cos(v),cy=tube*Math.sin(v),pos=new THREE.Vector3;pos.x=p1.x+cx*n.x+cy*bitan.x,pos.y=p1.y+cx*n.y+cy*bitan.y,pos.z=p1.z+cx*n.z+cy*bitan.z,grid[i][j]=this.vertices.push(pos)-1}}for(i=0;i<radialSegments;++i)for(j=0;j<tubularSegments;++j){var ip=(i+1)%radialSegments,jp=(j+1)%tubularSegments,a=grid[i][j],b=grid[ip][j],c=grid[ip][jp],d=grid[i][jp],uva=new THREE.Vector2(i/radialSegments,j/tubularSegments),uvb=new THREE.Vector2((i+1)/radialSegments,j/tubularSegments),uvc=new THREE.Vector2((i+1)/radialSegments,(j+1)/tubularSegments),uvd=new THREE.Vector2(i/radialSegments,(j+1)/tubularSegments);this.faces.push(new THREE.Face3(a,b,d)),this.faceVertexUvs[0].push([uva,uvb,uvd]),this.faces.push(new THREE.Face3(b,c,d)),this.faceVertexUvs[0].push([uvb.clone(),uvc,uvd.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry,THREE.TorusKnotGeometry.prototype.clone=function(){return new THREE.TorusKnotGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.p,this.parameters.q,this.parameters.heightScale)},THREE.TubeGeometry=function(path,segments,radius,radialSegments,closed,taper){function vert(x,y,z){return scope.vertices.push(new THREE.Vector3(x,y,z))-1}THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:path,segments:segments,radius:radius,radialSegments:radialSegments,closed:closed},segments=segments||64,radius=radius||1,radialSegments=radialSegments||8,closed=closed||!1,taper=taper||THREE.TubeGeometry.NoTaper;var normal,binormal,u,v,r,cx,cy,pos,i,j,ip,jp,a,b,c,d,uva,uvb,uvc,uvd,grid=[],scope=this,numpoints=segments+1,pos2=new THREE.Vector3,frames=new THREE.TubeGeometry.FrenetFrames(path,segments,closed),tangents=frames.tangents,normals=frames.normals,binormals=frames.binormals;for(this.tangents=tangents,this.normals=normals,this.binormals=binormals,i=0;i<numpoints;i++)for(grid[i]=[],u=i/(numpoints-1),pos=path.getPointAt(u),tangents[i],normal=normals[i],binormal=binormals[i],r=radius*taper(u),j=0;j<radialSegments;j++)v=j/radialSegments*2*Math.PI,cx=-r*Math.cos(v),cy=r*Math.sin(v),pos2.copy(pos),pos2.x+=cx*normal.x+cy*binormal.x,pos2.y+=cx*normal.y+cy*binormal.y,pos2.z+=cx*normal.z+cy*binormal.z,grid[i][j]=vert(pos2.x,pos2.y,pos2.z);for(i=0;i<segments;i++)for(j=0;j<radialSegments;j++)ip=closed?(i+1)%segments:i+1,jp=(j+1)%radialSegments,a=grid[i][j],b=grid[ip][j],c=grid[ip][jp],d=grid[i][jp],uva=new THREE.Vector2(i/segments,j/radialSegments),uvb=new THREE.Vector2((i+1)/segments,j/radialSegments),uvc=new THREE.Vector2((i+1)/segments,(j+1)/radialSegments),uvd=new THREE.Vector2(i/segments,(j+1)/radialSegments),this.faces.push(new THREE.Face3(a,b,d)),this.faceVertexUvs[0].push([uva,uvb,uvd]),this.faces.push(new THREE.Face3(b,c,d)),this.faceVertexUvs[0].push([uvb.clone(),uvc,uvd.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry,THREE.TubeGeometry.NoTaper=function(){return 1},THREE.TubeGeometry.SinusoidalTaper=function(u){return Math.sin(Math.PI*u)},THREE.TubeGeometry.FrenetFrames=function(path,segments,closed){function initialNormal3(){normals[0]=new THREE.Vector3,binormals[0]=new THREE.Vector3,smallest=Number.MAX_VALUE,tx=Math.abs(tangents[0].x),ty=Math.abs(tangents[0].y),tz=Math.abs(tangents[0].z),tx<=smallest&&(smallest=tx,normal.set(1,0,0)),ty<=smallest&&(smallest=ty,normal.set(0,1,0)),tz<=smallest&&normal.set(0,0,1),vec.crossVectors(tangents[0],normal).normalize(),normals[0].crossVectors(tangents[0],vec),binormals[0].crossVectors(tangents[0],normals[0])}var theta,smallest,tx,ty,tz,i,u,normal=new THREE.Vector3,tangents=[],normals=[],binormals=[],vec=new THREE.Vector3,mat=new THREE.Matrix4,numpoints=segments+1,epsilon=1e-4;for(this.tangents=tangents,
this.normals=normals,this.binormals=binormals,i=0;i<numpoints;i++)u=i/(numpoints-1),tangents[i]=path.getTangentAt(u),tangents[i].normalize();for(initialNormal3(),i=1;i<numpoints;i++)normals[i]=normals[i-1].clone(),binormals[i]=binormals[i-1].clone(),vec.crossVectors(tangents[i-1],tangents[i]),vec.length()>epsilon&&(vec.normalize(),theta=Math.acos(THREE.Math.clamp(tangents[i-1].dot(tangents[i]),-1,1)),normals[i].applyMatrix4(mat.makeRotationAxis(vec,theta))),binormals[i].crossVectors(tangents[i],normals[i]);if(closed)for(theta=Math.acos(THREE.Math.clamp(normals[0].dot(normals[numpoints-1]),-1,1)),theta/=numpoints-1,tangents[0].dot(vec.crossVectors(normals[0],normals[numpoints-1]))>0&&(theta=-theta),i=1;i<numpoints;i++)normals[i].applyMatrix4(mat.makeRotationAxis(tangents[i],theta*i)),binormals[i].crossVectors(tangents[i],normals[i])},THREE.PolyhedronGeometry=function(vertices,indices,radius,detail){function prepare(vector){var vertex=vector.normalize().clone();vertex.index=that.vertices.push(vertex)-1;var u=azimuth(vector)/2/Math.PI+.5,v=inclination(vector)/Math.PI+.5;return vertex.uv=new THREE.Vector2(u,1-v),vertex}function make(v1,v2,v3,materialIndex){var face=new THREE.Face3(v1.index,v2.index,v3.index,[v1.clone(),v2.clone(),v3.clone()],undefined,materialIndex);that.faces.push(face),centroid.copy(v1).add(v2).add(v3).divideScalar(3);var azi=azimuth(centroid);that.faceVertexUvs[0].push([correctUV(v1.uv,v1,azi),correctUV(v2.uv,v2,azi),correctUV(v3.uv,v3,azi)])}function subdivide(face,detail){for(var cols=Math.pow(2,detail),a=prepare(that.vertices[face.a]),b=prepare(that.vertices[face.b]),c=prepare(that.vertices[face.c]),v=[],materialIndex=face.materialIndex,i=0;i<=cols;i++){v[i]=[];for(var aj=prepare(a.clone().lerp(c,i/cols)),bj=prepare(b.clone().lerp(c,i/cols)),rows=cols-i,j=0;j<=rows;j++)v[i][j]=0===j&&i===cols?aj:prepare(aj.clone().lerp(bj,j/rows))}for(i=0;i<cols;i++)for(j=0;j<2*(cols-i)-1;j++){var k=Math.floor(j/2);j%2==0?make(v[i][k+1],v[i+1][k],v[i][k],materialIndex):make(v[i][k+1],v[i+1][k+1],v[i+1][k],materialIndex)}}function azimuth(vector){return Math.atan2(vector.z,-vector.x)}function inclination(vector){return Math.atan2(-vector.y,Math.sqrt(vector.x*vector.x+vector.z*vector.z))}function correctUV(uv,vector,azimuth){return azimuth<0&&1===uv.x&&(uv=new THREE.Vector2(uv.x-1,uv.y)),0===vector.x&&0===vector.z&&(uv=new THREE.Vector2(azimuth/2/Math.PI+.5,uv.y)),uv.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:vertices,indices:indices,radius:radius,detail:detail},radius=radius||1,detail=detail||0;for(var that=this,i=0,l=vertices.length;i<l;i+=3)prepare(new THREE.Vector3(vertices[i],vertices[i+1],vertices[i+2]));var p=this.vertices,faces=[],j=(i=0,0);for(l=indices.length;i<l;i+=3,j++){var v1=p[indices[i]],v2=p[indices[i+1]],v3=p[indices[i+2]];faces[j]=new THREE.Face3(v1.index,v2.index,v3.index,[v1.clone(),v2.clone(),v3.clone()],undefined,j)}var centroid=new THREE.Vector3;for(i=0,l=faces.length;i<l;i++)subdivide(faces[i],detail);for(i=0,l=this.faceVertexUvs[0].length;i<l;i++){var uvs=this.faceVertexUvs[0][i],x0=uvs[0].x,x1=uvs[1].x,x2=uvs[2].x,max=Math.max(x0,Math.max(x1,x2)),min=Math.min(x0,Math.min(x1,x2));max>.9&&min<.1&&(x0<.2&&(uvs[0].x+=1),x1<.2&&(uvs[1].x+=1),x2<.2&&(uvs[2].x+=1))}for(i=0,l=this.vertices.length;i<l;i++)this.vertices[i].multiplyScalar(radius);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,radius)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.PolyhedronGeometry.prototype.clone=function(){return new THREE.PolyhedronGeometry(this.parameters.vertices,this.parameters.indices,this.parameters.radius,this.parameters.detail).copy(this)},THREE.PolyhedronGeometry.prototype.copy=function(source){return THREE.Geometry.prototype.copy.call(this,source),this},THREE.DodecahedronGeometry=function(radius,detail){var t=(1+Math.sqrt(5))/2,r=1/t,vertices=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-t,0,-r,t,0,r,-t,0,r,t,-r,-t,0,-r,t,0,r,-t,0,r,t,0,-t,0,-r,t,0,-r,-t,0,r,t,0,r],indices=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail),this.type="DodecahedronGeometry",this.parameters={radius:radius,detail:detail}},THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry,THREE.DodecahedronGeometry.prototype.clone=function(){var geometry=new THREE.DodecahedronGeometry(this.parameters.radius,this.parameters.detail);return geometry.copy(this),geometry},THREE.IcosahedronGeometry=function(radius,detail){var t=(1+Math.sqrt(5))/2,vertices=[-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1],indices=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail),this.type="IcosahedronGeometry",this.parameters={radius:radius,detail:detail}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,THREE.IcosahedronGeometry.prototype.clone=function(){var geometry=new THREE.IcosahedronGeometry(this.parameters.radius,this.parameters.detail);return geometry.copy(this),geometry},THREE.OctahedronGeometry=function(radius,detail){var vertices=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],indices=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail),this.type="OctahedronGeometry",this.parameters={radius:radius,detail:detail}},THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry,THREE.OctahedronGeometry.prototype.clone=function(){var geometry=new THREE.OctahedronGeometry(this.parameters.radius,this.parameters.detail);return geometry.copy(this),geometry},THREE.TetrahedronGeometry=function(radius,detail){var vertices=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],indices=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,vertices,indices,radius,detail),this.type="TetrahedronGeometry",this.parameters={radius:radius,detail:detail}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry,THREE.TetrahedronGeometry.prototype.clone=function(){var geometry=new THREE.TetrahedronGeometry(this.parameters.radius,this.parameters.detail);return geometry.copy(this),geometry},THREE.ParametricGeometry=function(func,slices,stacks){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:func,slices:slices,stacks:stacks};var i,j,p,v,a,b,c,d,uva,uvb,uvc,uvd,verts=this.vertices,faces=this.faces,uvs=this.faceVertexUvs[0],sliceCount=slices+1;for(i=0;i<=stacks;i++)for(v=i/stacks,j=0;j<=slices;j++)p=func(j/slices,v),verts.push(p);for(i=0;i<stacks;i++)for(j=0;j<slices;j++)a=i*sliceCount+j,b=i*sliceCount+j+1,c=(i+1)*sliceCount+j+1,d=(i+1)*sliceCount+j,uva=new THREE.Vector2(j/slices,i/stacks),uvb=new THREE.Vector2((j+1)/slices,i/stacks),uvc=new THREE.Vector2((j+1)/slices,(i+1)/stacks),uvd=new THREE.Vector2(j/slices,(i+1)/stacks),faces.push(new THREE.Face3(a,b,d)),uvs.push([uva,uvb,uvd]),faces.push(new THREE.Face3(b,c,d)),uvs.push([uvb.clone(),uvc,uvd.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry,THREE.WireframeGeometry=function(geometry){THREE.BufferGeometry.call(this);var edge=[0,0],hash={},sortFunction=function(a,b){return a-b},keys=["a","b","c"];if(geometry instanceof THREE.Geometry){for(var vertices=geometry.vertices,faces=geometry.faces,numEdges=0,edges=new Uint32Array(6*faces.length),i=0,l=faces.length;i<l;i++)for(var face=faces[i],j=0;j<3;j++){edge[0]=face[keys[j]],edge[1]=face[keys[(j+1)%3]],edge.sort(sortFunction),hash[key=edge.toString()]===undefined&&(edges[2*numEdges]=edge[0],edges[2*numEdges+1]=edge[1],hash[key]=!0,numEdges++)}var coords=new Float32Array(2*numEdges*3);for(i=0,l=numEdges;i<l;i++)for(j=0;j<2;j++){var vertex=vertices[edges[2*i+j]];coords[(index=6*i+3*j)+0]=vertex.x,coords[index+1]=vertex.y,coords[index+2]=vertex.z}this.addAttribute("position",new THREE.BufferAttribute(coords,3))}else if(geometry instanceof THREE.BufferGeometry)if(null!==geometry.index){var indices=geometry.index.array,drawcalls=(vertices=geometry.attributes.position,geometry.drawcalls);numEdges=0;0===drawcalls.length&&geometry.addDrawCall(0,indices.length);edges=new Uint32Array(2*indices.length);for(var o=0,ol=drawcalls.length;o<ol;++o)for(var drawcall=drawcalls[o],start=drawcall.start,il=(i=start,start+drawcall.count);i<il;i+=3)for(j=0;j<3;j++){var key;edge[0]=indices[i+j],edge[1]=indices[i+(j+1)%3],edge.sort(sortFunction),hash[key=edge.toString()]===undefined&&(edges[2*numEdges]=edge[0],edges[2*numEdges+1]=edge[1],hash[key]=!0,numEdges++)}for(coords=new Float32Array(2*numEdges*3),i=0,l=numEdges;i<l;i++)for(j=0;j<2;j++){var index=6*i+3*j,index2=edges[2*i+j];coords[index+0]=vertices.getX(index2),coords[index+1]=vertices.getY(index2),coords[index+2]=vertices.getZ(index2)}this.addAttribute("position",new THREE.BufferAttribute(coords,3))}else{var numTris=(numEdges=(vertices=geometry.attributes.position.array).length/3)/3;for(coords=new Float32Array(2*numEdges*3),i=0,l=numTris;i<l;i++)for(j=0;j<3;j++){var index1=9*i+3*j;coords[(index=18*i+6*j)+0]=vertices[index1],coords[index+1]=vertices[index1+1],coords[index+2]=vertices[index1+2];index2=9*i+(j+1)%3*3;coords[index+3]=vertices[index2],coords[index+4]=vertices[index2+1],coords[index+5]=vertices[index2+2]}this.addAttribute("position",new THREE.BufferAttribute(coords,3))}},THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry,THREE.AxisHelper=function(size){size=size||1;var vertices=new Float32Array([0,0,0,size,0,0,0,0,0,0,size,0,0,0,0,0,0,size]),colors=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),geometry=new THREE.BufferGeometry;geometry.addAttribute("position",new THREE.BufferAttribute(vertices,3)),geometry.addAttribute("color",new THREE.BufferAttribute(colors,3));var material=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,geometry,material)},THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.AxisHelper.prototype.constructor=THREE.AxisHelper,THREE.ArrowHelper=function(){var lineGeometry=new THREE.Geometry;lineGeometry.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var coneGeometry=new THREE.CylinderGeometry(0,.5,1,5,1);return coneGeometry.translate(0,-.5,0),function(dir,origin,length,color,headLength,headWidth){THREE.Object3D.call(this),color===undefined&&(color=16776960),length===undefined&&(length=1),headLength===undefined&&(headLength=.2*length),headWidth===undefined&&(headWidth=.2*headLength),this.position.copy(origin),headLength<length&&(this.line=new THREE.Line(lineGeometry,new THREE.LineBasicMaterial({color:color})),this.line.matrixAutoUpdate=!1,this.add(this.line)),this.cone=new THREE.Mesh(coneGeometry,new THREE.MeshBasicMaterial({color:color})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(dir),this.setLength(length,headLength,headWidth)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper,THREE.ArrowHelper.prototype.setDirection=function(){var radians,axis=new THREE.Vector3;return function(dir){dir.y>.99999?this.quaternion.set(0,0,0,1):dir.y<-.99999?this.quaternion.set(1,0,0,0):(axis.set(dir.z,0,-dir.x).normalize(),radians=Math.acos(dir.y),this.quaternion.setFromAxisAngle(axis,radians))}}(),THREE.ArrowHelper.prototype.setLength=function(length,headLength,headWidth){headLength===undefined&&(headLength=.2*length),headWidth===undefined&&(headWidth=.2*headLength),headLength<length&&(this.line.scale.set(1,length-headLength,1),this.line.updateMatrix()),this.cone.scale.set(headWidth,headLength,headWidth),this.cone.position.y=length,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(color){this.line!==undefined&&this.line.material.color.set(color),this.cone.material.color.set(color)},THREE.BoxHelper=function(object){var indices=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),positions=new Float32Array(24),geometry=new THREE.BufferGeometry;geometry.setIndex(new THREE.BufferAttribute(indices,1)),geometry.addAttribute("position",new THREE.BufferAttribute(positions,3)),THREE.LineSegments.call(this,geometry,new THREE.LineBasicMaterial({color:16776960})),object!==undefined&&this.update(object)},THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.BoxHelper.prototype.constructor=THREE.BoxHelper,THREE.BoxHelper.prototype.update=function(){var box=new THREE.Box3;return function(object){if(box.setFromObject(object),!box.empty()){var min=box.min,max=box.max,position=this.geometry.attributes.position,array=position.array;array[0]=max.x,array[1]=max.y,array[2]=max.z,array[3]=min.x,array[4]=max.y,array[5]=max.z,array[6]=min.x,array[7]=min.y,array[8]=max.z,array[9]=max.x,array[10]=min.y,array[11]=max.z,array[12]=max.x,array[13]=max.y,array[14]=min.z,array[15]=min.x,array[16]=max.y,array[17]=min.z,array[18]=min.x,array[19]=min.y,array[20]=min.z,array[21]=max.x,array[22]=min.y,array[23]=min.z,position.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),THREE.BoundingBoxHelper=function(object,hex){var color=hex!==undefined?hex:8947848;this.object=object,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:color,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper,THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(camera){function addLine(a,b,hex){addPoint(a,hex),addPoint(b,hex)}function addPoint(id,hex){geometry.vertices.push(new THREE.Vector3),geometry.colors.push(new THREE.Color(hex)),pointMap[id]===undefined&&(pointMap[id]=[]),pointMap[id].push(geometry.vertices.length-1)}var geometry=new THREE.Geometry,material=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),pointMap={},hexFrustum=16755200,hexCone=16711680,hexUp=43775,hexTarget=16777215,hexCross=3355443;addLine("n1","n2",hexFrustum),addLine("n2","n4",hexFrustum),addLine("n4","n3",hexFrustum),addLine("n3","n1",hexFrustum),addLine("f1","f2",hexFrustum),addLine("f2","f4",hexFrustum),addLine("f4","f3",hexFrustum),addLine("f3","f1",hexFrustum),addLine("n1","f1",hexFrustum),addLine("n2","f2",hexFrustum),addLine("n3","f3",hexFrustum),addLine("n4","f4",hexFrustum),addLine("p","n1",hexCone),addLine("p","n2",hexCone),addLine("p","n3",hexCone),addLine("p","n4",hexCone),addLine("u1","u2",hexUp),addLine("u2","u3",hexUp),addLine("u3","u1",hexUp),addLine("c","t",hexTarget),addLine("p","c",hexCross),addLine("cn1","cn2",hexCross),addLine("cn3","cn4",hexCross),addLine("cf1","cf2",hexCross),addLine("cf3","cf4",hexCross),THREE.LineSegments.call(this,geometry,material),this.camera=camera,this.matrix=camera.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=pointMap,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.CameraHelper.prototype.constructor=THREE.CameraHelper,THREE.CameraHelper.prototype.update=function(){var geometry,pointMap,vector=new THREE.Vector3,camera=new THREE.Camera,setPoint=function(point,x,y,z){vector.set(x,y,z).unproject(camera);var points=pointMap[point];if(points!==undefined)for(var i=0,il=points.length;i<il;i++)geometry.vertices[points[i]].copy(vector)};return function(){geometry=this.geometry,pointMap=this.pointMap;var w=1,h=1;camera.projectionMatrix.copy(this.camera.projectionMatrix),setPoint("c",0,0,-1),setPoint("t",0,0,1),setPoint("n1",-w,-h,-1),setPoint("n2",w,-h,-1),setPoint("n3",-w,h,-1),setPoint("n4",w,h,-1),setPoint("f1",-w,-h,1),setPoint("f2",w,-h,1),setPoint("f3",-w,h,1),setPoint("f4",w,h,1),setPoint("u1",.7*w,1.1*h,-1),setPoint("u2",.7*-w,1.1*h,-1),setPoint("u3",0,2*h,-1),setPoint("cf1",-w,0,1),setPoint("cf2",w,0,1),setPoint("cf3",0,-h,1),setPoint("cf4",0,h,1),setPoint("cn1",-w,0,-1),setPoint("cn2",w,0,-1),setPoint("cn3",0,-h,-1),setPoint("cn4",0,h,-1),geometry.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(light,size){THREE.Object3D.call(this),this.light=light,this.light.updateMatrixWorld(),this.matrix=light.matrixWorld,this.matrixAutoUpdate=!1,size=size||1;var geometry=new THREE.Geometry;geometry.vertices.push(new THREE.Vector3(-size,size,0),new THREE.Vector3(size,size,0),new THREE.Vector3(size,-size,0),new THREE.Vector3(-size,-size,0),new THREE.Vector3(-size,size,0));var material=new THREE.LineBasicMaterial({fog:!1});material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(geometry,material),this.add(this.lightPlane),(geometry=new THREE.Geometry).vertices.push(new THREE.Vector3,new THREE.Vector3),(material=new THREE.LineBasicMaterial({fog:!1})).color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(geometry,material),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper,THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var v1=new THREE.Vector3,v2=new THREE.Vector3,v3=new THREE.Vector3;return function(){v1.setFromMatrixPosition(this.light.matrixWorld),v2.setFromMatrixPosition(this.light.target.matrixWorld),v3.subVectors(v2,v1),this.lightPlane.lookAt(v3),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(v3),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(object,hex,thresholdAngle){var color=hex!==undefined?hex:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(object.geometry,thresholdAngle),new THREE.LineBasicMaterial({color:color})),this.matrix=object.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper,THREE.FaceNormalsHelper=function(object,size,hex,linewidth){this.object=object,this.size=size!==undefined?size:1;var color=hex!==undefined?hex:16776960,width=linewidth!==undefined?linewidth:1,nNormals=0,objGeometry=this.object.geometry;objGeometry instanceof THREE.Geometry?nNormals=objGeometry.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var geometry=new THREE.BufferGeometry,positions=new THREE.Float32Attribute(2*nNormals*3,3);geometry.addAttribute("position",positions),THREE.LineSegments.call(this,geometry,new THREE.LineBasicMaterial({color:color,linewidth:width})),this.matrixAutoUpdate=!1,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper,THREE.FaceNormalsHelper.prototype.update=function(){var v1=new THREE.Vector3,v2=new THREE.Vector3,normalMatrix=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0),normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var matrixWorld=this.object.matrixWorld,position=this.geometry.attributes.position,objGeometry=this.object.geometry,vertices=objGeometry.vertices,faces=objGeometry.faces,idx=0,i=0,l=faces.length;i<l;i++){var face=faces[i],normal=face.normal;v1.copy(vertices[face.a]).add(vertices[face.b]).add(vertices[face.c]).divideScalar(3).applyMatrix4(matrixWorld),v2.copy(normal).applyMatrix3(normalMatrix).normalize().multiplyScalar(this.size).add(v1),position.setXYZ(idx,v1.x,v1.y,v1.z),idx+=1,position.setXYZ(idx,v2.x,v2.y,v2.z),idx+=1}return position.needsUpdate=!0,this}}(),THREE.GridHelper=function(size,step){var geometry=new THREE.Geometry,material=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var i=-size;i<=size;i+=step){geometry.vertices.push(new THREE.Vector3(-size,0,i),new THREE.Vector3(size,0,i),new THREE.Vector3(i,0,-size),new THREE.Vector3(i,0,size));var color=0===i?this.color1:this.color2;geometry.colors.push(color,color,color,color)}THREE.LineSegments.call(this,geometry,material)},THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.GridHelper.prototype.constructor=THREE.GridHelper,THREE.GridHelper.prototype.setColors=function(colorCenterLine,colorGrid){this.color1.set(colorCenterLine),this.color2.set(colorGrid),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(light,sphereSize){THREE.Object3D.call(this),this.light=light,this.light.updateMatrixWorld(),this.matrix=light.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var geometry=new THREE.SphereGeometry(sphereSize,4,2);geometry.rotateX(-Math.PI/2);for(var i=0,il=8;i<il;i++)geometry.faces[i].color=this.colors[i<4?0:1];var material=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(geometry,material),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper,THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var vector=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(vector.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(light,sphereSize){this.light=light,this.light.updateMatrixWorld();var geometry=new THREE.SphereGeometry(sphereSize,4,2),material=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});material.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,geometry,material),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper,THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.SkeletonHelper=function(object){this.bones=this.getBoneList(object);for(var geometry=new THREE.Geometry,i=0;i<this.bones.length;i++){this.bones[i].parent instanceof THREE.Bone&&(geometry.vertices.push(new THREE.Vector3),geometry.vertices.push(new THREE.Vector3),geometry.colors.push(new THREE.Color(0,0,1)),geometry.colors.push(new THREE.Color(0,1,0)))}geometry.dynamic=!0;var material=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,geometry,material),this.root=object,this.matrix=object.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper,THREE.SkeletonHelper.prototype.getBoneList=function(object){var boneList=[];object instanceof THREE.Bone&&boneList.push(object);for(var i=0;i<object.children.length;i++)boneList.push.apply(boneList,this.getBoneList(object.children[i]));return boneList},THREE.SkeletonHelper.prototype.update=function(){for(var geometry=this.geometry,matrixWorldInv=(new THREE.Matrix4).getInverse(this.root.matrixWorld),boneMatrix=new THREE.Matrix4,j=0,i=0;i<this.bones.length;i++){var bone=this.bones[i];bone.parent instanceof THREE.Bone&&(boneMatrix.multiplyMatrices(matrixWorldInv,bone.matrixWorld),geometry.vertices[j].setFromMatrixPosition(boneMatrix),boneMatrix.multiplyMatrices(matrixWorldInv,bone.parent.matrixWorld),geometry.vertices[j+1].setFromMatrixPosition(boneMatrix),j+=2)}geometry.verticesNeedUpdate=!0,geometry.computeBoundingSphere()},THREE.SpotLightHelper=function(light){THREE.Object3D.call(this),this.light=light,this.light.updateMatrixWorld(),this.matrix=light.matrixWorld,this.matrixAutoUpdate=!1;var geometry=new THREE.CylinderGeometry(0,1,1,8,1,!0);geometry.translate(0,-.5,0),geometry.rotateX(-Math.PI/2);var material=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(geometry,material),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper,THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var vector=new THREE.Vector3,vector2=new THREE.Vector3;return function(){var coneLength=this.light.distance?this.light.distance:1e4,coneWidth=coneLength*Math.tan(this.light.angle);this.cone.scale.set(coneWidth,coneWidth,coneLength),vector.setFromMatrixPosition(this.light.matrixWorld),vector2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vector2.sub(vector)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(object,size,hex,linewidth){this.object=object,this.size=size!==undefined?size:1;var color=hex!==undefined?hex:16711680,width=linewidth!==undefined?linewidth:1,nNormals=0,objGeometry=this.object.geometry;objGeometry instanceof THREE.Geometry?nNormals=3*objGeometry.faces.length:objGeometry instanceof THREE.BufferGeometry&&(nNormals=objGeometry.attributes.normal.count);var geometry=new THREE.BufferGeometry,positions=new THREE.Float32Attribute(2*nNormals*3,3);geometry.addAttribute("position",positions),THREE.LineSegments.call(this,geometry,new THREE.LineBasicMaterial({color:color,linewidth:width})),this.matrixAutoUpdate=!1,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper,THREE.VertexNormalsHelper.prototype.update=function(){var v1=new THREE.Vector3,v2=new THREE.Vector3,normalMatrix=new THREE.Matrix3;return function(){var keys=["a","b","c"];this.object.updateMatrixWorld(!0),normalMatrix.getNormalMatrix(this.object.matrixWorld);var matrixWorld=this.object.matrixWorld,position=this.geometry.attributes.position,objGeometry=this.object.geometry;if(objGeometry instanceof THREE.Geometry)for(var vertices=objGeometry.vertices,faces=objGeometry.faces,idx=0,i=0,l=faces.length;i<l;i++)for(var face=faces[i],j=0,jl=face.vertexNormals.length;j<jl;j++){var vertex=vertices[face[keys[j]]],normal=face.vertexNormals[j];v1.copy(vertex).applyMatrix4(matrixWorld),v2.copy(normal).applyMatrix3(normalMatrix).normalize().multiplyScalar(this.size).add(v1),position.setXYZ(idx,v1.x,v1.y,v1.z),idx+=1,position.setXYZ(idx,v2.x,v2.y,v2.z),idx+=1}else if(objGeometry instanceof THREE.BufferGeometry){var objPos=objGeometry.attributes.position,objNorm=objGeometry.attributes.normal;for(idx=0,j=0,jl=objPos.count;j<jl;j++)v1.set(objPos.getX(j),objPos.getY(j),objPos.getZ(j)).applyMatrix4(matrixWorld),v2.set(objNorm.getX(j),objNorm.getY(j),objNorm.getZ(j)),v2.applyMatrix3(normalMatrix).normalize().multiplyScalar(this.size).add(v1),position.setXYZ(idx,v1.x,v1.y,v1.z),idx+=1,position.setXYZ(idx,v2.x,v2.y,v2.z),idx+=1}return position.needsUpdate=!0,this}}(),THREE.WireframeHelper=function(object,hex){var color=hex!==undefined?hex:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(object.geometry),new THREE.LineBasicMaterial({color:color})),this.matrix=object.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper,THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject,THREE.MorphBlendMesh=function(geometry,material){THREE.Mesh.call(this,geometry,material),this.animationsMap={},this.animationsList=[];var numFrames=this.geometry.morphTargets.length,name="__default",startFrame=0,endFrame=numFrames-1,fps=numFrames/1;this.createAnimation(name,startFrame,endFrame,fps),this.setAnimationWeight(name,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh,THREE.MorphBlendMesh.prototype.createAnimation=function(name,start,end,fps){var animation={start:start,end:end,length:end-start+1,fps:fps,duration:(end-start)/fps,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[name]=animation,this.animationsList.push(animation)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(fps){for(var firstAnimation,pattern=/([a-z]+)_?(\d+)/,frameRanges={},geometry=this.geometry,i=0,il=geometry.morphTargets.length;i<il;i++){var chunks=geometry.morphTargets[i].name.match(pattern);if(chunks&&chunks.length>1)frameRanges[name=chunks[1]]||(frameRanges[name]={start:Infinity,end:-Infinity}),i<(range=frameRanges[name]).start&&(range.start=i),i>range.end&&(range.end=i),firstAnimation||(firstAnimation=name)}for(var name in frameRanges){var range=frameRanges[name];this.createAnimation(name,range.start,range.end,fps)}this.firstAnimation=firstAnimation},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(name){var animation=this.animationsMap[name];animation&&(animation.direction=1,animation.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(name){var animation=this.animationsMap[name];animation&&(animation.direction=-1,animation.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(name,fps){var animation=this.animationsMap[name];animation&&(animation.fps=fps,animation.duration=(animation.end-animation.start)/animation.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(name,duration){var animation=this.animationsMap[name];animation&&(animation.duration=duration,animation.fps=(animation.end-animation.start)/animation.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(name,weight){var animation=this.animationsMap[name];animation&&(animation.weight=weight)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(name,time){var animation=this.animationsMap[name];animation&&(animation.time=time)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(name){var time=0,animation=this.animationsMap[name];return animation&&(time=animation.time),time},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(name){var duration=-1,animation=this.animationsMap[name];return animation&&(duration=animation.duration),duration},THREE.MorphBlendMesh.prototype.playAnimation=function(name){var animation=this.animationsMap[name];animation?(animation.time=0,animation.active=!0):console.warn("THREE.MorphBlendMesh: animation["+name+"] undefined in .playAnimation()")},THREE.MorphBlendMesh.prototype.stopAnimation=function(name){var animation=this.animationsMap[name];animation&&(animation.active=!1)},THREE.MorphBlendMesh.prototype.update=function(delta){for(var i=0,il=this.animationsList.length;i<il;i++){var animation=this.animationsList[i]
;if(animation.active){var frameTime=animation.duration/animation.length;animation.time+=animation.direction*delta,animation.mirroredLoop?(animation.time>animation.duration||animation.time<0)&&(animation.direction*=-1,animation.time>animation.duration&&(animation.time=animation.duration,animation.directionBackwards=!0),animation.time<0&&(animation.time=0,animation.directionBackwards=!1)):(animation.time=animation.time%animation.duration,animation.time<0&&(animation.time+=animation.duration));var keyframe=animation.start+THREE.Math.clamp(Math.floor(animation.time/frameTime),0,animation.length-1),weight=animation.weight;keyframe!==animation.currentFrame&&(this.morphTargetInfluences[animation.lastFrame]=0,this.morphTargetInfluences[animation.currentFrame]=1*weight,this.morphTargetInfluences[keyframe]=0,animation.lastFrame=animation.currentFrame,animation.currentFrame=keyframe);var mix=animation.time%frameTime/frameTime;animation.directionBackwards&&(mix=1-mix),animation.currentFrame!==animation.lastFrame?(this.morphTargetInfluences[animation.currentFrame]=mix*weight,this.morphTargetInfluences[animation.lastFrame]=(1-mix)*weight):this.morphTargetInfluences[animation.currentFrame]=weight}}},function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c("object"==typeof exports?require("jquery"):a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(window),function(){"use strict";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp)for(c in b={},d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c]);else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&((b={})[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(-1!==(d=b(f[e],c))&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)!0===(c=g[e][d]).once&&this.removeListener(a,c.listener),c.listener.apply(this,b||[])===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function c(a){var b=parseFloat(a);return-1===a.indexOf("%")&&!isNaN(b)&&b}function d(){}function e(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=h.length;c>b;b++){a[h[b]]=0}return a}function f(b){function d(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||g("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),c}}(),k=b("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[k]="border-box";var f=document.body||document.documentElement;f.appendChild(e);var h=j(e);l=200===c(h.width),f.removeChild(e)}}}function f(a){if(d(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var b=j(a);if("none"===b.display)return e();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var g=f.isBorderBox=!(!k||!b[k]||"border-box"!==b[k]),m=0,n=h.length;n>m;m++){var o=h[m],p=b[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=g&&l,y=c(b.width);!1!==y&&(f.width=y+(x?0:r+v));var z=c(b.height);return!1!==z&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf("%"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return f}var g="undefined"==typeof console?d:function(a){console.error(a)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],f):"object"==typeof exports?module.exports=f(require("desandro-get-style-property")):a.getSize=f(a.getStyleProperty)}(window),function(a){function b(a){"function"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){(0,g[a])()}}function e(e){return"complete"===f.readyState?d():(e.bind(f,"DOMContentLoaded",c),e.bind(f,"readystatechange",c),e.bind(a,"load",c)),b}var f=a.document,g=[];b.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)}(window),function(a){"use strict";function b(a,b){return a[g](b)}function c(a){a.parentNode||document.createDocumentFragment().appendChild(a)}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matches)return"matches";if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var f=b[c]+"MatchesSelector";if(a[f])return f}}();if(g){var i=b(document.createElement("div"),"div");f=i?b:e}else f=d;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(a,b){"use strict";"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("doc-ready"),require("desandro-matches-selector")):a.fizzyUIUtils=b(a,a.docReady,a.matchesSelector)}(window,function(a,b,c){var d={extend:function(a,b){for(var c in b)a[c]=b[c];return a},modulo:function(a,b){return(a%b+b)%b}},e=Object.prototype.toString;d.isArray=function(a){return"[object Array]"==e.call(a)},d.makeArray=function(a){var b=[];if(d.isArray(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b},d.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},d.removeFrom=function(a,b){var c=d.indexOf(a,b);-1!=c&&a.splice(c,1)},d.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1==a.nodeType&&"string"==typeof a.nodeName},d.setText=function(){function a(a,c){a[b=b||(void 0!==document.documentElement.textContent?"textContent":"innerText")]=c}var b;return a}(),d.getParent=function(a,b){for(;a!=document.body;)if(a=a.parentNode,c(a,b))return a},d.getQueryElement=function(a){return"string"==typeof a?document.querySelector(a):a},d.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},d.filterFindElements=function(a,b){for(var e=[],f=0,g=(a=d.makeArray(a)).length;g>f;f++){var h=a[f];if(d.isElement(h))if(b){c(h,b)&&e.push(h);for(var i=h.querySelectorAll(b),j=0,k=i.length;k>j;j++)e.push(i[j])}else e.push(h)}return e},d.debounceMethod=function(a,b,c){var d=a.prototype[b],e=b+"Timeout";a.prototype[b]=function(){var a=this[e];a&&clearTimeout(a);var b=arguments,f=this;this[e]=setTimeout(function(){d.apply(f,b),delete f[e]},c||100)}},d.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()};var f=a.console;return d.htmlInit=function(c,e){b(function(){for(var b=d.toDashed(e),g=document.querySelectorAll(".js-"+b),h="data-"+b+"-options",i=0,j=g.length;j>i;i++){var k,l=g[i],m=l.getAttribute(h);try{k=m&&JSON.parse(m)}catch(n){f&&f.error("Error parsing "+h+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+n);continue}var o=new c(l,k),p=a.jQuery;p&&p.data(l,e,o)}})},d}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(c,d,e,f){return b(a,c,d,e,f)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(a.Outlayer={},a.Outlayer.Item=b(a,a.EventEmitter,a.getSize,a.getStyleProperty,a.fizzyUIUtils))}(window,function(a,b,c,d,e){"use strict";function f(a){for(var b in a)return!1;return null,!0}function g(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}function h(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}var i=a.getComputedStyle,j=i?function(a){return i(a,null)}:function(a){return a.currentStyle},k=d("transition"),l=d("transform"),m=k&&l,n=!!d("perspective"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[k],p=["transform","transition","transitionDuration","transitionProperty"],q=function(){for(var a={},b=0,c=p.length;c>b;b++){var e=p[b],f=d(e);f&&f!==e&&(a[e]=f)}return a}();e.extend(g.prototype,b.prototype),g.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.getSize=function(){this.size=c(this.element)},g.prototype.css=function(a){var b=this.element.style;for(var c in a){b[q[c]||c]=a[c]}},g.prototype.getPosition=function(){var a=j(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=a[c?"left":"right"],f=a[d?"top":"bottom"],g=this.layout.size,h=-1!=e.indexOf("%")?parseFloat(e)/100*g.width:parseInt(e,10),i=-1!=f.indexOf("%")?parseFloat(f)/100*g.height:parseInt(f,10);h=isNaN(h)?0:h,i=isNaN(i)?0:i,h-=c?g.paddingLeft:g.paddingRight,i-=d?g.paddingTop:g.paddingBottom,this.position.x=h,this.position.y=i},g.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={},d=b.isOriginLeft?"paddingLeft":"paddingRight",e=b.isOriginLeft?"left":"right",f=b.isOriginLeft?"right":"left",g=this.position.x+a[d];c[e]=this.getXValue(g),c[f]="";var h=b.isOriginTop?"paddingTop":"paddingBottom",i=b.isOriginTop?"top":"bottom",j=b.isOriginTop?"bottom":"top",k=this.position.y+a[h];c[i]=this.getYValue(k),c[j]="",this.css(c),this.emitEvent("layout",[this])},g.prototype.getXValue=function(a){var b=this.layout.options;return b.percentPosition&&!b.isHorizontal?a/this.layout.size.width*100+"%":a+"px"},g.prototype.getYValue=function(a){var b=this.layout.options;return b.percentPosition&&b.isHorizontal?a/this.layout.size.height*100+"%":a+"px"},g.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),!g||this.isTransitioning){var h=a-c,i=b-d,j={};j.transform=this.getTranslate(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},g.prototype.getTranslate=function(a,b){var c=this.layout.options;return a=c.isOriginLeft?a:-a,b=c.isOriginTop?b:-b,n?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px, "+b+"px)"},g.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},g.prototype.moveTo=m?g.prototype._transitionTo:g.prototype.goTo,g.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},g.prototype._nonTransition=function(a){for(var b in this.css(a.to),a.isCleaning&&this._removeStyles(a.to),a.onTransitionEnd)a.onTransitionEnd[b].call(this)},g.prototype._transition=function(a){if(parseFloat(this.layout.options.transitionDuration)){var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);this.element.offsetHeight;null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0}else this._nonTransition(a)};var r="opacity,"+h(q.transform||"transform");g.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:r,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(o,this,!1))},g.prototype.transition=g.prototype[k?"_transition":"_nonTransition"],g.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},g.prototype.onotransitionend=function(a){this.ontransitionend(a)};var s={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};g.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,c=s[a.propertyName]||a.propertyName;if(delete b.ingProperties[c],f(b.ingProperties)&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd)b.onEnd[c].call(this),delete b.onEnd[c];this.emitEvent("transitionEnd",[this])}},g.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},g.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var t={transitionProperty:"",transitionDuration:""};return g.prototype.removeTransitionStyles=function(){this.css(t)},g.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},g.prototype.remove=function(){if(k&&parseFloat(this.layout.options.transitionDuration)){var a=this;this.once("transitionEnd",function(){a.removeElem()}),this.hide()}else this.removeElem()},g.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options,b={};b[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},g.prototype.getHideRevealTransitionEndProperty=function(a){var b=this.layout.options[a];if(b.opacity)return"opacity";for(var c in b)return c},g.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options,b={};b[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},g.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},g}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):"object"==typeof exports?module.exports=b(a,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=b(a,a.eventie,a.EventEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(a,b,c,d,e,f){"use strict";function g(a,b){var c=e.getQueryElement(a);if(c){this.element=c,i&&(this.$element=i(this.element)),this.options=e.extend({},this.constructor.defaults),this.option(b);var d=++k;this.element.outlayerGUID=d,l[d]=this,this._create(),this.options.isInitLayout&&this.layout()}else h&&h.error("Bad element for "+this.constructor.namespace+": "+(c||a))}var h=a.console,i=a.jQuery,j=function(){},k=0,l={};return g.namespace="outlayer",g.Item=f,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e.extend(g.prototype,c.prototype),g.prototype.option=function(a){e.extend(this.options,a)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var h=new c(b[e],this);d.push(h)}return d},g.prototype._filterFindItemElements=function(a){return e.filterFindElements(a,this.options.itemSelector)},g.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=d(this.element)},g.prototype._getMeasurement=function(a,b){var c,f=this.options[a];f?("string"==typeof f?c=this.element.querySelector(f):e.isElement(f)&&(c=f),this[a]=c?d(c)[b]:f):this[a]=0},g.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},g.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},g.prototype._layoutItems=function(a,b){if(this._emitCompleteOnItems("layout",a),a&&a.length){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this._getItemLayoutPosition(f);g.item=f,g.isInstant=b||f.isLayoutInstant,c.push(g)}this._processLayoutQueue(c)}},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},g.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},g.prototype._getContainerSize=j,g.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},g.prototype._emitCompleteOnItems=function(a,b){function c(){e.dispatchEvent(a+"Complete",null,[b])}function d(){++g===f&&c()}var e=this,f=b.length;if(b&&f)for(var g=0,h=0,i=b.length;i>h;h++){b[h].once(a,d)}else c()},g.prototype.dispatchEvent=function(a,b,c){var d=b?[b].concat(c):c;if(this.emitEvent(a,d),i)if(this.$element=this.$element||i(this.element),b){var e=i.Event(b);e.type=a,this.$element.trigger(e,c)}else this.$element.trigger(a,c)},g.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},g.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},g.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},g.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e.removeFrom(this.stamps,d),this.unignore(d)}},g.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=e.makeArray(a)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},g.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},g.prototype._manageStamp=j,g.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,e=d(a);return{left:b.left-c.left-e.marginLeft,top:b.top-c.top-e.marginTop,right:c.right-b.right-e.marginRight,bottom:c.bottom-b.bottom-e.marginBottom}},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.bindResize=function(){this.isResizeBound||(b.bind(a,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&b.unbind(a,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var a=d(this.element);return this.size&&a&&a.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},g.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},g.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},g.prototype.reveal=function(a){this._emitCompleteOnItems("reveal",a);for(var b=a&&a.length,c=0;b&&b>c;c++){a[c].reveal()}},g.prototype.hide=function(a){this._emitCompleteOnItems("hide",a);for(var b=a&&a.length,c=0;b&&b>c;c++){a[c].hide()}},g.prototype.revealItemElements=function(a){var b=this.getItems(a);this.reveal(b)},g.prototype.hideItemElements=function(a){var b=this.getItems(a);this.hide(b)},g.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},g.prototype.getItems=function(a){for(var b=[],c=0,d=(a=e.makeArray(a)).length;d>c;c++){var f=a[c],g=this.getItem(f);g&&b.push(g)}return b},g.prototype.remove=function(a){var b=this.getItems(a);if(this._emitCompleteOnItems("remove",b),b&&b.length)for(var c=0,d=b.length;d>c;c++){var f=b[c];f.remove(),e.removeFrom(this.items,f)}},g.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){this.items[b].destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete l[e],delete this.element.outlayerGUID,i&&i.removeData(this.element,this.constructor.namespace)},g.data=function(a){var b=(a=e.getQueryElement(a))&&a.outlayerGUID;return b&&l[b]},g.create=function(a,b){function c(){g.apply(this,arguments)}return Object.create?c.prototype=Object.create(g.prototype):e.extend(c.prototype,g.prototype),c.prototype.constructor=c,c.defaults=e.extend({},g.defaults),e.extend(c.defaults,b),c.prototype.settings={},c.namespace=a,c.data=g.data,c.Item=function(){f.apply(this,arguments)},c.Item.prototype=new f,e.htmlInit(c,a),i&&i.bridget&&i.bridget(a,c),c},g.Item=f,g}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],b):"object"==typeof exports?module.exports=b(require("outlayer")):(a.Isotope=a.Isotope||{},a.Isotope.Item=b(a.Outlayer))}(window,function(a){"use strict";function b(){a.Item.apply(this,arguments)}b.prototype=new a.Item,b.prototype._create=function(){this.id=this.layout.itemGUID++,a.Item.prototype._create.call(this),this.sortData={}},b.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var a=this.layout.options.getSortData,b=this.layout._sorters;for(var c in a){var d=b[c];this.sortData[c]=d(this.element,this)}}};var c=b.prototype.destroy;return b.prototype.destroy=function(){c.apply(this,arguments),this.css({display:""})},b}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],b):"object"==typeof exports?module.exports=b(require("get-size"),require("outlayer")):(a.Isotope=a.Isotope||{},a.Isotope.LayoutMode=b(a.getSize,a.Outlayer))}(window,function(a,b){"use strict";function c(a){this.isotope=a,a&&(this.options=a.options[this.namespace],this.element=a.element,this.items=a.filteredItems,this.size=a.size)}return function(){function a(a){return function(){return b.prototype[a].apply(this.isotope,arguments)}}for(var d=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],e=0,f=d.length;f>e;e++){var g=d[e];c.prototype[g]=a(g)}}(),c.prototype.needsVerticalResizeLayout=function(){var b=a(this.isotope.element);return this.isotope.size&&b&&b.innerHeight!=this.isotope.size.innerHeight},c.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},c.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},c.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},c.prototype.getSegmentSize=function(a,b){var c=a+b,d="outer"+b;if(this._getMeasurement(c,d),!this[c]){var e=this.getFirstItemSize();this[c]=e&&e[d]||this.isotope.size["inner"+b]}},c.prototype.getFirstItemSize=function(){var b=this.isotope.filteredItems[0];return b&&b.element&&a(b.element)},c.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},c.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},c.modes={},c.create=function(a,b){function d(){c.apply(this,arguments)}return d.prototype=new c,b&&(d.options=b),d.prototype.namespace=a,c.modes[a]=d,d},c}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],b):"object"==typeof exports?module.exports=b(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):a.Masonry=b(a.Outlayer,a.getSize,a.fizzyUIUtils)}(window,function(a,b,c){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}var d=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,f=e/d,g=d-e%d;f=Math[g&&1>g?"round":"floor"](f),this.cols=Math.max(f,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,e=Math[b&&1>b?"round":"ceil"](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c.indexOf(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}),function(a,b){"use strict"
;"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],b):"object"==typeof exports?module.exports=b(require("../layout-mode"),require("masonry-layout")):b(a.Isotope.LayoutMode,a.Masonry)}(window,function(a,b){"use strict";function c(a,b){for(var c in b)a[c]=b[c];return a}var d=a.create("masonry"),e=d.prototype._getElementOffset,f=d.prototype.layout,g=d.prototype._getMeasurement;c(d.prototype,b.prototype),d.prototype._getElementOffset=e,d.prototype.layout=f,d.prototype._getMeasurement=g;var h=d.prototype.measureColumns;d.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,h.call(this)};var i=d.prototype._manageStamp;return d.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,i.apply(this,arguments)},d}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],b):"object"==typeof exports?module.exports=b(require("../layout-mode")):b(a.Isotope.LayoutMode)}(window,function(a){"use strict";var b=a.create("fitRows");return b.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth+this.gutter,c=this.isotope.size.innerWidth+this.gutter;0!==this.x&&b+this.x>c&&(this.x=0,this.y=this.maxY);var d={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+a.size.outerHeight),this.x+=b,d},b.prototype._getContainerSize=function(){return{height:this.maxY}},b}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],b):"object"==typeof exports?module.exports=b(require("../layout-mode")):b(a.Isotope.LayoutMode)}(window,function(a){"use strict";var b=a.create("vertical",{horizontalAlignment:0});return b.prototype._resetLayout=function(){this.y=0},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=(this.isotope.size.innerWidth-a.size.outerWidth)*this.options.horizontalAlignment,c=this.y;return this.y+=a.size.outerHeight,{x:b,y:c}},b.prototype._getContainerSize=function(){return{height:this.y}},b}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(c,d,e,f,g,h){return b(a,c,d,e,f,g,h)}):"object"==typeof exports?module.exports=b(a,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical")):a.Isotope=b(a,a.Outlayer,a.getSize,a.matchesSelector,a.fizzyUIUtils,a.Isotope.Item,a.Isotope.LayoutMode)}(window,function(a,b,c,d,e,f,g){function h(a,b){return function(c,d){for(var e=0,f=a.length;f>e;e++){var g=a[e],h=c.sortData[g],i=d.sortData[g];if(h>i||i>h)return(h>i?1:-1)*((void 0!==b[g]?b[g]:b)?1:-1)}return 0}}var i=a.jQuery,j=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s+|\s+$/g,"")},l=document.documentElement.textContent?function(a){return a.textContent}:function(a){return a.innerText},m=b.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});m.Item=f,m.LayoutMode=g,m.prototype._create=function(){for(var a in this.itemGUID=0,this._sorters={},this._getSorters(),b.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"],g.modes)this._initLayoutMode(a)},m.prototype.reloadItems=function(){this.itemGUID=0,b.prototype.reloadItems.call(this)},m.prototype._itemize=function(){for(var a=b.prototype._itemize.apply(this,arguments),c=0,d=a.length;d>c;c++){a[c].id=this.itemGUID++}return this._updateItemsSortData(a),a},m.prototype._initLayoutMode=function(a){var b=g.modes[a],c=this.options[a]||{};this.options[a]=b.options?e.extend(b.options,c):c,this.modes[a]=new b(this)},m.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},m.prototype._layout=function(){var a=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,a),this._isLayoutInited=!0},m.prototype.arrange=function(a){function b(){d.reveal(c.needReveal),d.hide(c.needHide)}this.option(a),this._getIsInstant();var c=this._filter(this.items);this.filteredItems=c.matches;var d=this;this._bindArrangeComplete(),this._isInstant?this._noTransition(b):b(),this._sort(),this._layout()},m.prototype._init=m.prototype.arrange,m.prototype._getIsInstant=function(){var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=a,a},m.prototype._bindArrangeComplete=function(){function a(){b&&c&&d&&e.dispatchEvent("arrangeComplete",null,[e.filteredItems])}var b,c,d,e=this;this.once("layoutComplete",function(){b=!0,a()}),this.once("hideComplete",function(){c=!0,a()}),this.once("revealComplete",function(){d=!0,a()})},m.prototype._filter=function(a){var b=this.options.filter;b=b||"*";for(var c=[],d=[],e=[],f=this._getFilterTest(b),g=0,h=a.length;h>g;g++){var i=a[g];if(!i.isIgnored){var j=f(i);j&&c.push(i),j&&i.isHidden?d.push(i):j||i.isHidden||e.push(i)}}return{matches:c,needReveal:d,needHide:e}},m.prototype._getFilterTest=function(a){return i&&this.options.isJQueryFiltering?function(b){return i(b.element).is(a)}:"function"==typeof a?function(b){return a(b.element)}:function(b){return d(b.element,a)}},m.prototype.updateSortData=function(a){var b;a?(a=e.makeArray(a),b=this.getItems(a)):b=this.items,this._getSorters(),this._updateItemsSortData(b)},m.prototype._getSorters=function(){var a=this.options.getSortData;for(var b in a){var c=a[b];this._sorters[b]=n(c)}},m.prototype._updateItemsSortData=function(a){for(var b=a&&a.length,c=0;b&&b>c;c++){a[c].updateSortData()}};var n=function(){function a(a){if("string"!=typeof a)return a;var c=j(a).split(" "),d=c[0],e=d.match(/^\[(.+)\]$/),g=b(e&&e[1],d),h=m.sortDataParsers[c[1]];return h?function(a){return a&&h(g(a))}:function(a){return a&&g(a)}}function b(a,b){return a?function(b){return b.getAttribute(a)}:function(a){var c=a.querySelector(b);return c&&l(c)}}return a}();m.sortDataParsers={parseInt:function(a){return parseInt(a,10)},parseFloat:function(a){return parseFloat(a)}},m.prototype._sort=function(){var a=this.options.sortBy;if(a){var c=h([].concat.apply(a,this.sortHistory),this.options.sortAscending);this.filteredItems.sort(c),a!=this.sortHistory[0]&&this.sortHistory.unshift(a)}},m.prototype._mode=function(){var a=this.options.layoutMode,b=this.modes[a];if(!b)throw new Error("No layout mode: "+a);return b.options=this.options[a],b},m.prototype._resetLayout=function(){b.prototype._resetLayout.call(this),this._mode()._resetLayout()},m.prototype._getItemLayoutPosition=function(a){return this._mode()._getItemLayoutPosition(a)},m.prototype._manageStamp=function(a){this._mode()._manageStamp(a)},m.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},m.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},m.prototype.appended=function(a){var b=this.addItems(a);if(b.length){var c=this._filterRevealAdded(b);this.filteredItems=this.filteredItems.concat(c)}},m.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){this._resetLayout(),this._manageStamps();var c=this._filterRevealAdded(b);this.layoutItems(this.filteredItems),this.filteredItems=c.concat(this.filteredItems),this.items=b.concat(this.items)}},m.prototype._filterRevealAdded=function(a){var b=this._filter(a);return this.hide(b.needHide),this.reveal(b.matches),this.layoutItems(b.matches,!0),b.matches},m.prototype.insert=function(a){var b=this.addItems(a);if(b.length){var c,d,e=b.length;for(c=0;e>c;c++)d=b[c],this.element.appendChild(d.element);var f=this._filter(b).matches;for(c=0;e>c;c++)b[c].isLayoutInstant=!0;for(this.arrange(),c=0;e>c;c++)delete b[c].isLayoutInstant;this.reveal(f)}};var o=m.prototype.remove;return m.prototype.remove=function(a){a=e.makeArray(a);var b=this.getItems(a);o.call(this,a);var c=b&&b.length;if(c)for(var d=0;c>d;d++){var f=b[d];e.removeFrom(this.filteredItems,f)}},m.prototype.shuffle=function(){for(var a=0,b=this.items.length;b>a;a++){this.items[a].sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},m.prototype._noTransition=function(a){var b=this.options.transitionDuration;this.options.transitionDuration=0;var c=a.call(this);return this.options.transitionDuration=b,c},m.prototype.getFilteredItemElements=function(){for(var a=[],b=0,c=this.filteredItems.length;c>b;b++)a.push(this.filteredItems[b].element);return a},m}),function(a){function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){(d(a,b)?f:e)(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define("classie/classie",g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"function"==typeof define&&define.amd?define("packery/js/rect",b):"object"==typeof exports?module.exports=b():(a.Packery=a.Packery||{},a.Packery.Rect=b())}(window,function(){function a(b){for(var c in a.defaults)this[c]=a.defaults[c];for(c in b)this[c]=b[c]}return(window.Packery=function(){}).Rect=a,a.defaults={x:0,y:0,width:0,height:0},a.prototype.contains=function(a){var b=a.width||0,c=a.height||0;return this.x<=a.x&&this.y<=a.y&&this.x+this.width>=a.x+b&&this.y+this.height>=a.y+c},a.prototype.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return this.x<d&&b>a.x&&this.y<e&&c>a.y},a.prototype.getMaximalFreeRects=function(b){if(!this.overlaps(b))return!1;var c,d=[],e=this.x+this.width,f=this.y+this.height,g=b.x+b.width,h=b.y+b.height;return this.y<b.y&&(c=new a({x:this.x,y:this.y,width:this.width,height:b.y-this.y}),d.push(c)),e>g&&(c=new a({x:g,y:this.y,width:e-g,height:this.height}),d.push(c)),f>h&&(c=new a({x:this.x,y:h,width:this.width,height:f-h}),d.push(c)),this.x<b.x&&(c=new a({x:this.x,y:this.y,width:b.x-this.x,height:this.height}),d.push(c)),d},a.prototype.canFit=function(a){return this.width>=a.width&&this.height>=a.height},a}),function(a,b){if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],b);else if("object"==typeof exports)module.exports=b(require("./rect"));else{var c=a.Packery=a.Packery||{};c.Packer=b(c.Rect)}}(window,function(a){function b(a,b,c){this.width=a||0,this.height=b||0,this.sortDirection=c||"downwardLeftToRight",this.reset()}b.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var b=new a({x:0,y:0,width:this.width,height:this.height});this.spaces.push(b),this.sorter=c[this.sortDirection]||c.downwardLeftToRight},b.prototype.pack=function(a){for(var b=0,c=this.spaces.length;c>b;b++){var d=this.spaces[b];if(d.canFit(a)){this.placeInSpace(a,d);break}}},b.prototype.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},b.prototype.placed=function(a){for(var b=[],c=0,d=this.spaces.length;d>c;c++){var e=this.spaces[c],f=e.getMaximalFreeRects(a);f?b.push.apply(b,f):b.push(e)}this.spaces=b,this.mergeSortSpaces()},b.prototype.mergeSortSpaces=function(){b.mergeRects(this.spaces),this.spaces.sort(this.sorter)},b.prototype.addSpace=function(a){this.spaces.push(a),this.mergeSortSpaces()},b.mergeRects=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d){var e=a.slice(0);e.splice(b,1);for(var f=0,g=0,h=e.length;h>g;g++){var i=e[g],j=b>g?0:1;d.contains(i)&&(a.splice(g+j-f,1),f++)}}}return a};var c={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return b}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],b):"object"==typeof exports?module.exports=b(require("desandro-get-style-property"),require("outlayer"),require("./rect")):a.Packery.Item=b(a.getStyleProperty,a.Outlayer,a.Packery.Rect)}(window,function(a,b,c){var d=a("transform"),e=function(){b.Item.apply(this,arguments)};e.prototype=new b.Item;var f=e.prototype._create;return e.prototype._create=function(){f.call(this),this.rect=new c,this.placeRect=new c},e.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&d&&(this.element.style[d]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},e.prototype.dragMove=function(a,b){this.didDrag=!0;var c=this.layout.size;a-=c.paddingLeft,b-=c.paddingTop,this.positionPlaceRect(a,b)},e.prototype.dragStop=function(){this.getPosition();var a=this.position.x!=this.placeRect.x,b=this.position.y!=this.placeRect.y;this.needsPositioning=a||b,this.didDrag=!1},e.prototype.positionPlaceRect=function(a,b,c){this.placeRect.x=this.getPlaceRectCoord(a,!0),this.placeRect.y=this.getPlaceRectCoord(b,!1,c)},e.prototype.getPlaceRectCoord=function(a,b,c){var h,d=b?"Width":"Height",e=this.size["outer"+d],f=this.layout[b?"columnWidth":"rowHeight"],g=this.layout.size["inner"+d];if(b||(g=Math.max(g,this.layout.maxY),this.layout.rowHeight||(g-=this.layout.gutter)),f){var i;f+=this.layout.gutter,g+=b?this.layout.gutter:0,a=Math.round(a/f),i=this.layout.options.isHorizontal?b?"ceil":"floor":b?"floor":"ceil";var j=Math[i](g/f);h=j-=Math.ceil(e/f)}else h=g-e;return a=c?a:Math.min(a,h),a*=f||1,Math.max(0,a)},e.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},e.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},e}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/packery",["classie/classie","get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],b):"object"==typeof exports?module.exports=b(require("desandro-classie"),require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):a.Packery=b(a.classie,a.getSize,a.Outlayer,a.Packery.Rect,a.Packery.Packer,a.Packery.Item)}(window,function(a,b,c,d,e,f){function g(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function h(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}d.prototype.canFit=function(a){return this.width>=a.width-1&&this.height>=a.height-1};var i=c.create("packery");return i.Item=f,i.prototype._create=function(){c.prototype._create.call(this),this.packer=new e,this.stamp(this.options.stamped);var a=this;this.handleDraggabilly={dragStart:function(){a.itemDragStart(this.element)},dragMove:function(){a.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){a.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(b){a.itemDragStart(b.currentTarget)},drag:function(b,c){a.itemDragMove(b.currentTarget,c.position.left,c.position.top)},stop:function(b){a.itemDragEnd(b.currentTarget)}}},i.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var a=this.packer;this.options.isHorizontal?(a.width=Number.POSITIVE_INFINITY,a.height=this.size.innerHeight+this.gutter,a.sortDirection="rightwardTopToBottom"):(a.width=this.size.innerWidth+this.gutter,a.height=Number.POSITIVE_INFINITY,a.sortDirection="downwardLeftToRight"),a.reset(),this.maxY=0,this.maxX=0},i.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},i.prototype._getItemLayoutPosition=function(a){return this._packItem(a),a.rect},i.prototype._packItem=function(a){this._setRectSize(a.element,a.rect),this.packer.pack(a.rect),this._setMaxXY(a.rect)},i.prototype._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX),this.maxY=Math.max(a.y+a.height,this.maxY)},i.prototype._setRectSize=function(a,c){var d=b(a),e=d.outerWidth,f=d.outerHeight;(e||f)&&(e=this._applyGridGutter(e,this.columnWidth),f=this._applyGridGutter(f,this.rowHeight)),c.width=Math.min(e,this.packer.width),c.height=Math.min(f,this.packer.height)},i.prototype._applyGridGutter=function(a,b){if(!b)return a+this.gutter;var c=a%(b+=this.gutter);return Math[c&&1>c?"round":"ceil"](a/b)*b},i.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},i.prototype._manageStamp=function(a){var b,c=this.getItem(a);if(c&&c.isPlacing)b=c.placeRect;else{var e=this._getElementOffset(a);b=new d({x:this.options.isOriginLeft?e.left:e.right,y:this.options.isOriginTop?e.top:e.bottom})}this._setRectSize(a,b),this.packer.placed(b),this._setMaxXY(b)},i.prototype.sortItemsByPosition=function(){var a=this.options.isHorizontal?h:g;this.items.sort(a)},i.prototype.fit=function(a,b,c){var d=this.getItem(a);d&&(this._getMeasurements(),this.stamp(d.element),d.getSize(),d.isPlacing=!0,b=void 0===b?d.rect.x:b,c=void 0===c?d.rect.y:c,d.positionPlaceRect(b,c,!0),this._bindFitEvents(d),d.moveTo(d.placeRect.x,d.placeRect.y),this.layout(),this.unstamp(d.element),this.sortItemsByPosition(),d.isPlacing=!1,d.copyPlaceRectPosition())},i.prototype._bindFitEvents=function(a){function b(){2==++d&&c.emitEvent("fitComplete",[a])}var c=this,d=0;a.on("layout",function(){return b(),!0}),this.on("layoutComplete",function(){return b(),!0})},i.prototype.resize=function(){var a=b(this.element),c=this.size&&a,d=this.options.isHorizontal?"innerHeight":"innerWidth";c&&a[d]==this.size[d]||this.layout()},i.prototype.itemDragStart=function(a){this.stamp(a);var b=this.getItem(a);b&&b.dragStart()},i.prototype.itemDragMove=function(a,b,c){function d(){f.layout(),delete f.dragTimeout}var e=this.getItem(a);e&&e.dragMove(b,c);var f=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(d,40)},i.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},i.prototype.itemDragEnd=function(b){var c,d=this.getItem(b);if(d&&(c=d.didDrag,d.dragStop()),d&&(c||d.needsPositioning)){a.add(d.element,"is-positioning-post-drag");var e=this._getDragEndLayoutComplete(b,d);d.needsPositioning?(d.on("layout",e),d.moveTo(d.placeRect.x,d.placeRect.y)):d&&d.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",e),this.layout()}else this.unstamp(b)},i.prototype._getDragEndLayoutComplete=function(b,c){var d=c&&c.needsPositioning,e=0,f=d?2:1,g=this;return function(){return++e!=f||(c&&(a.remove(c.element,"is-positioning-post-drag"),c.isPlacing=!1,c.copyPlaceRectPosition()),g.unstamp(b),g.sortItemsByPosition(),d&&g.emitEvent("dragItemPositioned",[c]),!0)}},i.prototype.bindDraggabillyEvents=function(a){a.on("dragStart",this.handleDraggabilly.dragStart),a.on("dragMove",this.handleDraggabilly.dragMove),a.on("dragEnd",this.handleDraggabilly.dragEnd)},i.prototype.bindUIDraggableEvents=function(a){a.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},i.Rect=d,i.Packer=e,i}),function(a,b){"function"==typeof define&&define.amd?define(["isotope/js/layout-mode","packery/js/packery","get-size/get-size"],b):"object"==typeof exports?module.exports=b(require("isotope-layout/js/layout-mode"),require("packery"),require("get-size")):b(a.Isotope.LayoutMode,a.Packery,a.getSize)}(window,function(a,b,c){function d(a,b){for(var c in b)a[c]=b[c];return a}var e=a.create("packery"),f=e.prototype._getElementOffset,g=e.prototype._getMeasurement;d(e.prototype,b.prototype),e.prototype._getElementOffset=f,e.prototype._getMeasurement=g;var h=e.prototype._resetLayout;e.prototype._resetLayout=function(){this.packer=this.packer||new b.Packer,h.apply(this,arguments)};var i=e.prototype._getItemLayoutPosition;e.prototype._getItemLayoutPosition=function(a){return a.rect=a.rect||new b.Rect,i.call(this,a)};var j=e.prototype._manageStamp;return e.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,j.apply(this,arguments)},e.prototype.needsResizeLayout=function(){var a=c(this.element),b=this.size&&a,d=this.options.isHorizontal?"innerHeight":"innerWidth";return b&&a[d]!=this.size[d]},e}),function(){var slice=[].slice;window.HAML=function(){function HAML(){}return HAML.escape=function(text){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;")},HAML.cleanValue=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return"\x93"+text;default:return text}},HAML.extend=function(){var i,key,len,obj,source,sources,val;for(obj=arguments[0],i=0,len=(sources=2<=arguments.length?slice.call(arguments,1):[]).length;i<len;i++)for(key in source=sources[i])val=source[key],obj[key]=val;return obj},HAML.globals=function(){return{}},HAML.context=function(locals){return this.extend({},HAML.globals(),locals)},HAML.preserve=function(text){return text.replace(/\n/g,"&#x000A;")},HAML.findAndPreserve=function(text){var tags;return tags="textarea,pre".split(",").join("|"),text.replace(/\r/g,"").replace(RegExp("<("+tags+")>([\\s\\S]*?)<\\/\\1>","g"),function(str,tag,content){return"<"+tag+">"+window.HAML.preserve(content)+"</"+tag+">"})},HAML.surround=function(start,end,fn){var ref;return start+(null!=(ref=fn.call(this))?ref.replace(/^\s+|\s+$/g,""):void 0)+end},HAML.succeed=function(end,fn){var ref;return(null!=(ref=fn.call(this))?ref.replace(/\s+$/g,""):void 0)+end},HAML.precede=function(start,fn){var ref;return start+(null!=(ref=fn.call(this))?ref.replace(/^\s+/g,""):void 0)},HAML.reference=function(object,prefix){var id,name,ref;if(name=prefix?prefix+"_":"","function"==typeof object.hamlObjectRef?name+=object.hamlObjectRef():name+=((null!=(ref=object.constructor)?ref.name:void 0)||"object").replace(/\W+/g,"_").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase(),id="function"==typeof object.to_key?object.to_key():"function"==typeof object.id?object.id():object.id?object.id:object)return"class='"+name+"'"+" id='"+name+"_"+id+"'"},HAML}()}.call(this),function(){var h=[].slice;String.prototype.autoLink=function(){var b,f,d,a,e,g;return e=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<(a=1<=arguments.length?h.call(arguments,0):[]).length?(d=a[0],f=function(){var c;for(b in c=[],d)g=d[b],"callback"!==b&&c.push(" "+b+"='"+g+"'");return c}().join(""),this.replace(e,function(c,b,a){return""+b+(("function"==typeof d.callback?d.callback(a):void 0)||"<a href='"+a+"'"+f+">"+a+"</a>")})):this.replace(e,"$1<a href='$2'>$2</a>")}}.call(this),function(){}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/carousel"]=function(context){return function(){var $c,$e,$o,i,item,len,ref;for($e=window.HAML.escape,$c=window.HAML.cleanValue,($o=[]).push("<section class='giv_carousel'>\n  <div class='slides'>"),i=0,len=(ref=this.giv_data.interactive_carousel_items).length;i<len;i++)item=ref[i],$o.push("    <div class='slide'>\n      <div class='image_container' data-overlay='overlay_"+$c(item.id)+"'>\n        <img class='img-lazy' src='/assets/loading_320x240.png' data-lazy='"+$c(item.image_left_url)+"' alt='"+$c(item.image_left_title)+"'>\n        <div class='image_title'>"),$o.push("          "+$e($c(item.image_left_title))),$o.push("        </div>"),item.image_right_url!==giv.missing&&($o.push("        <img class='img-lazy' src='/assets/loading_320x240.png' data-lazy='"+$c(item.image_right_url)+"' alt='"+$c(item.image_right_title)+"'>\n        <div class='image_title'>"),$o.push("          "+$e($c(item.image_right_title))),$o.push("        </div>")),$o.push("      </div>\n      <div class='slide_description' style='display: none;'>\n        <h1 class='topic_title'>"),$o.push("          "+$e($c(this.giv_data.title+", "+item.title))),$o.push("        </h1>\n        <p>"),$o.push("          "+$e($c(item.description))),$o.push("        </p>\n      </div>\n    </div>\n    <div class='overlay_container' id='overlay_"+item.id+"' style='display: none;'>\n      <div class='close_btn'></div>\n      <div class='panzoom_container'>\n        <div class='images'>\n          <div class='image left_image'>\n            <div class='image_title'>"),$o.push("              "+$e($c(item.image_left_title))),$o.push("            </div>\n            <img class='img-lazy' src='/assets/loading_320x240.png' data-lazy='"+$c(item.image_left_url)+"' alt='"+$c(item.image_left_title)+"'>\n          </div>"),item.image_right_url!==giv.missing&&($o.push("          <div class='image image_right'>\n            <div class='image_title'>"),$o.push("              "+$e($c(item.image_right_title))),$o.push("            </div>\n            <img class='img-lazy' src='/assets/loading_320x240.png' data-lazy='"+$c(item.image_right_url)+"' alt='"+$c(item.image_right_title)+"'>\n          </div>")),$o.push("        </div>\n      </div>\n    </div>");return $o.push("  </div>"),$o.push("  "+$c(window.JST["global_ice_viewer/topic_info"](this))),$o.push("</section>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/image"]=function(context){return function(){var $c,$o;return $c=window.HAML.cleanValue,($o=[]).push("<section class='giv_image'>\n  <img src='"+$c(this.giv_data.image_url)+"' alt=''>"),$o.push("  "+$c(window.JST["global_ice_viewer/topic_info"](this))),$o.push("</section>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/intro"]=function(context){return function(){var $c,$e,$o;return $e=window.HAML.escape,$c=window.HAML.cleanValue,($o=[]).push("<div class='intro_container'>\n  <div class='title'>"),$o.push("    "+$e($c(this.giv_data.title))),$o.push("  </div>\n  <h1 class='subtitle'>"),$o.push("    "+$e($c(this.giv_data.subtitle))),$o.push("  </h1>\n  <div class='description'>"),$o.push("    "+$c(this.giv_data.description)),$o.push("  </div>\n  <header>\n    <h3>SELECT A TOPIC</h3>\n  </header>\n  <nav class='interface_nav'></nav>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/nav"]=function(context){return function(){var $c,$e,$o,i,id,len,topic,topics;for($e=window.HAML.escape,$c=window.HAML.cleanValue,$o=[],topics=this.giv_data.topics,$o.push("<ul>"),i=0,len=topics.length;i<len;i++)(topic=topics[i]).title.toLowerCase(),id=topic.id,$o.push("  <li>\n    <a class='"+["topic_link","topic_"+$c(id)].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-topic='"+$c(id)+"'>\n      <div class='img_text_container'>\n        <div class='img'></div>\n        <div class='text_container'>\n          <div class='nav_item_title'>"),$o.push("            "+$e($c(topic.title))),$o.push("          </div>\n        </div>\n      </div>\n    </a>\n  </li>");return $o.push("</ul>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/sources"]=function(context){return function(){var $c,$o;return $c=window.HAML.cleanValue,($o=[]).push("<div class='sources'>"),$o.push("  "+$c(this.giv_data)),$o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/time_series"]=function(context){return function(){var $c,$o;return $c=window.HAML.cleanValue,($o=[]).push("<section class='giv_time_series'>\n  <div id='time_series_container'></div>"),$o.push("  "+$c(window.JST["global_ice_viewer/topic_info"](this))),$o.push("</section>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/time_series_inner"]=function(context){return function(){var $c,$e,$o,current,ed,end_year,i,j,months,ref,sd,start_year,ts_image;if($e=window.HAML.escape,$c=window.HAML.cleanValue,$o=[],sd=new Date(this.time_series.time_series_images[0].date),ed=new Date(this.time_series.time_series_images[this.time_series.time_series_images.length-1].date),months=["January","February","March","April","May","June","July","August","September","October","November","December"],start_year=sd.getFullYear(),end_year=ed.getFullYear(),this.time_series)if(this.time_series.time_series_images&&this.time_series.time_series_images.length>0){for($o.push("<div class='spinner'>\n  <img src='/assets/loader-gif-300-spinner-white.gif'>\n</div>\n<section class='chart_container time_series' id='time_series_"+this.time_series.id+"'>\n  <header class='clearfix'>\n    <h2 class='chart_article_title'>"),$o.push("      "+$e($c(this.time_series.title))),$o.push("    </h2>\n    <div class='article_subtitle'>\n      <div>"),$o.push("        "+$c(this.time_series.credit)),$o.push("      </div>\n    </div>\n    <div class='readout'>\n      <div class='title'>\n        <div class='monthValue'>"),$o.push("          "+$e($c(months[sd.getMonth()]+" "+sd.getDate()+", "+sd.getFullYear()))),$o.push("        </div>\n      </div>\n      <div class='date_of_change'>\n        \x91<div class='change_number lastValue' style='display: none;'></div>\x92\n      </div>\n      <div class='hint init'>\n        Drag\n      </div>\n    </div>\n  </header>\n  <article class='images'>"),i=j=0,ref=this.time_series.time_series_images.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)ts_image=this.time_series.time_series_images[i],new Date(ts_image.date),current=0===i?"current":"",$o.push("    <div class='"+["image",""+$c(current)].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' id='time_series_"+this.time_series.id+"_image_"+i+"' data-date='"+$c(ts_image.date)+"'>\n      <img data-src='/system/time_series_images/"+$c(ts_image.id)+"_"+$c(ts_image.image_file_name)+"' src='/assets/interactives/shim_722x405.gif' alt='"+$c(this.time_series.title)+", image #"+$c(i)+"'>\n    </div>\n    <div class='loading_text'>loading time series images...</div>");$o.push("  </article>\n  <div class='start_year' style='display:none;'>"),$o.push("    "+$e($c(start_year))),$o.push("  </div>\n  <div class='end_year' style='display:none;'>"),$o.push("    "+$e($c(end_year))),$o.push("  </div>\n  <footer>\n    <div class='controllers_container'>\n      \x91<div class='play_pause'>\n        <div class='fi-play play_button'></div>\n        <div class='fi-pause pause_button'></div>\n        <div class='fi-refresh reset_button'></div>\n      </div>\x92\n      \x91<div class='beginning_date'>"),$o.push("        "+$e($c(start_year))),$o.push("      </div>\x92\n      <input class='trackbar_controller' aria-disabled='false' style='display: none;' type='text' value='"+$c(0)+"'>\n      \x91<div class='ending_date'>"),$o.push("        "+$e($c(end_year))),$o.push("      </div>\x92\n    </div>\n  </footer>\n</section>")}else $o.push("<p class='error'>\n  No images associated with that time series.\n</p>");else $o.push("<p class='error'>\n  Unknown time series\n</p>");return $o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(window.HAML.context(context))}
}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/topic"]=function(context){return function(){var $c,$e,$o,button_class,i,interactive,j,len,len1,ref,ref1;if($e=window.HAML.escape,$c=window.HAML.cleanValue,$o=[],this.giv_data.title.toLowerCase(),$o.push("<div class='topic_container' data-topic='"+$c(this.giv_data.id)+"'>"),"image"===this.default_interactive.interactive_type){for($o.push("  <div class='ice_viewer_map'>\n    <img class='map_image' src='"+$c(this.default_interactive.image_url)+"'>"),i=0,len=(ref=this.giv_data.interactive_items).length;i<len;i++)(interactive=ref[i]).map_top&&interactive.map_left&&($o.push("    <a class='detail_link hotspot' href='javascript:void(0)' style='top: "+$c(interactive.map_top)+"%; left: "+$c(interactive.map_left)+"%;' data-popover='hotspot-"+$c(interactive.id)+"' data-topic='"+$c(this.giv_data.id)+"' data-subtopic='"+$c(interactive.id)+"'>\n      <div class='hotspot_inner'>\n        <div></div>\n      </div>\n      <![if gt IE 9]>\n      <div class=\"pulsate\"></div>\n      <![endif]>\n    </a>\n    <div class='popover' id='hotspot-"+interactive.id+"'>\n      <img src='"+$c(interactive.map_thumb_url)+"' style='width: 100%'>\n      <div class='location_info'>\n        <h2>"),$o.push("          "+$e($c(interactive.title))),$o.push("        </h2>\n      </div>\n    </div>"));$o.push("  </div>")}else"video"===this.default_interactive.interactive_type&&$o.push("  <div class='giv_video'>\n    <div class='video_wrapper'>\n      <div class='spinner'>\n        <img src='/assets/loader-gif-300-spinner-white.gif'>\n      </div>\n      <div id='video_"+this.default_interactive.id+"'></div>\n    </div>\n  </div>");for($o.push("  <footer class='article_footer'>\x92"),j=0,len1=(ref1=this.giv_data.interactive_items).length;j<len1;j++)!1!==(interactive=ref1[j])["default"]||interactive.map_top||interactive.map_left||(button_class="video"===interactive.interactive_type?"video_button button":"button",$o.push("  <a class='"+["detail_link",""+$c(button_class)].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='javascript:void(0)' data-topic='"+$c(this.giv_data.id)+"' data-subtopic='"+$c(interactive.id)+"'>\n  \x91<div class='"+["icon",""+$c(interactive.interactive_type)].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></div>\x92\n  <div class='button_text'>"),$o.push("  "+$e($c(interactive.title))),$o.push("  </div>\n  </a>"));return $o.push("  \x91</footer>\n  <header class='article_header'>"),this.giv_data.vital_sign&&($o.push("    \x91<div class='rate_of_change'>\n      <div class='unit_container'>\n        <div class='"+["value",""+$c(parseFloat(this.giv_data.vital_sign.value)>0?"up":void 0)].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n          <svg id='Layer_1' height='100%' space='preserve' version='1.1' viewbox='0 0 641.3 742' x='0px' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' y='0px'>\n            <line stroke-miterlimit='10' stroke-width='44' x1='321' x2='321' y1='0' y2='698'></line>\n            <line stroke-miterlimit='10' stroke-width='44' x1='308' x2='627' y1='725' y2='450'></line>\n            <line stroke-miterlimit='10' stroke-width='44' x1='334' x2='15' y1='727' y2='452'></line>\n          </svg>\n        </div>\n        <h2 class='unit_value'>"),$o.push("          "+$e($c(Math.abs(parseFloat(this.giv_data.vital_sign.value))))),$o.push("        </h2>\n        <div class='unit_type'>"),$o.push("          "+$e($c(this.giv_data.vital_sign.units))),$o.push("        </div>\n        <div class='unit_description_container'>\n          \x91<a class='unit_description' href='javascript:void(0)'>"),$o.push("            "+$c(this.giv_data.vital_sign.giv_description)),$o.push("          </a>\x92\n        </div>\n      </div>\n    </div>\x92")),$o.push("    <div class='about_link'>\n      <a class='about' href='javascript:void(0)' data-topic='"+$c(this.giv_data.id)+"' data-aboutid='"+$c(this.giv_data.about_id)+"'>\n        <span>"),$o.push("          "+$e($c(this.giv_data.about_link_text))),$o.push("        </span>\n      </a>\n    </div>\n  </header>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/topic_info"]=function(context){return function(){var $c,$e,$o,info_class;return $e=window.HAML.escape,$c=window.HAML.cleanValue,$o=[],info_class=this.giv_data.map_top&&"video"!==this.giv_data.interactive_type?"map_layout":"full_width",$o.push("<div class='"+["topic_info",""+$c(info_class)].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='grid_layout'>\n    <div class='primary_column'>\n      <div class='description'>\n        <h1 class='topic_title'>"),$o.push("          "+$e($c(this.giv_data.title))),$o.push("        </h1>"),$o.push("        "+$c(this.giv_data.description)),$o.push("      </div>\n      <a class='topic_link' href='javascript:void(0)' data-topic='"+$c(this.topic)+"'>\n        \u2039 BACK TO MAP \n      </a>\n    </div>"),this.giv_data.minimap_image_url!==giv.missing&&($o.push("    <div class='secondary_column'>\n      <a class='minimap' href='javascript:void(0)' data-topic='"+$c(this.topic)+"'>\n        <img src='"+$c(this.giv_data.minimap_image_url)+"'>"),this.giv_data.map_top&&$o.push("        <div class='location_dot' style='top: "+$c(this.giv_data.map_top)+"%; left: "+$c(this.giv_data.map_left)+"%;'></div>"),$o.push("      </a>\n    </div>")),$o.push("  </div>\n  <footer>\n    <a class='topic_link' href='javascript:void(0)' data-topic='"+$c(this.topic)+"'>\n      \u2039 BACK TO MAP  \n    </a>\n  </footer>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["global_ice_viewer/video"]=function(context){return function(){var $c,$o;return $c=window.HAML.cleanValue,($o=[]).push("<section class='giv_video'>\n  <div class='video_wrapper'>\n    <div class='spinner'>\n      <img src='/assets/loader-gif-300-spinner-white.gif'>\n    </div>\n    <div class='video_container'>\n      <div id='video_"+this.giv_data.id+"'></div>\n    </div>\n  </div>"),$o.push("  "+$c(window.JST["global_ice_viewer/topic_info"](this))),$o.push("</section>"),$o.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(context))}}.call(this),function(a,b){function c(b){var c,d=a("<div></div>").css({width:"100%"});return b.append(d),c=b.width()-d.width(),d.remove(),c}function d(e,f){var g=e.getBoundingClientRect(),h=g.top,i=g.bottom,j=g.left,k=g.right,l=a.extend({tolerance:0,viewport:b},f),m=!1,n=l.viewport.jquery?l.viewport:a(l.viewport);n.length||(console.warn("isInViewport: The viewport selector you have provided matches no element on page."),console.warn("isInViewport: Defaulting to viewport as window"),n=a(b));var o=n.height(),p=n.width(),q=n[0].toString();if(n[0]!==b&&"[object Window]"!==q&&"[object DOMWindow]"!==q){var r=n[0].getBoundingClientRect();h-=r.top,i-=r.top,j-=r.left,k-=r.left,d.scrollBarWidth=d.scrollBarWidth||c(n),p-=d.scrollBarWidth}return l.tolerance=~~Math.round(parseFloat(l.tolerance)),l.tolerance<0&&(l.tolerance=o+l.tolerance),0>=k||j>=p?m:m=l.tolerance?h<=l.tolerance&&i>=l.tolerance:i>0&&o>=h}String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^\s*(.*?)\s*$/,"$1")});var e=function(b){if(1===arguments.length&&"function"==typeof b&&(b=[b]),!(b instanceof Array))throw new SyntaxError("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions");for(var c=0;c<b.length;c++)if("function"==typeof b[c])for(var d=0;d<this.length;d++)b[c].call(a(this[d]));else console.warn("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"),console.warn("isInViewport: Ignoring non-function values in array and moving on");return this};a.fn["do"]=function(a){return console.warn("isInViewport: .do is deprecated as it causes issues in IE and some browsers since it's a reserved word. Use $.fn.run instead i.e., $(el).run(fn)."),e(a)},a.fn.run=e;var f=function(b){if(b){var c=b.split(",");return 1===c.length&&isNaN(c[0])&&(c[1]=c[0],c[0]=void 0),{tolerance:c[0]?c[0].trim():void 0,viewport:c[1]?a(c[1].trim()):void 0}}return{}};a.extend(a.expr[":"],{"in-viewport":a.expr.createPseudo?a.expr.createPseudo(function(a){return function(b){return d(b,f(a))}}):function(a,b,c){return d(a,f(c[3]))}}),a.fn.isInViewport=function(a){return this.filter(function(b,c){return d(c,a)})}}(jQuery,window),function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return!!Array.isArray(a)&&(g(a,c[b],c),!0)}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;(d=a.prototype=Object.create(e)).constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b&&b[0]||d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if((e=(c=ma[g])?c+f:b)in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var c=a.options.inputClass;return new(c||(xa?M:ya?P:wa?R:L))(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e==0,g=b&(Ga|Ha)&&d-e==0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches;setTimeout(function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)},cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=!c||a.CSS.supports("touch-action",d)}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return(b=b||{}).recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var d,c=a.element;c.style&&(g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={}))}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length==0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(!this.manager.session.prevented){var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0}b.preventDefault()},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return b[(a=_(a,this)).id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return-1===r(b,a=_(a,this))&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=!this.pTime||a.timeStamp-this.pTime<b.interval,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;if(this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a,0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer"),function(e){function t(r){if(n[r])return n[r].exports;var l=n[r]={exports:{},id:r,loaded:!1};return e[r].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(2),l=n(13),i=n(4),o=n(8);window.React=r,window.ReactDOM=l,window.createReactClass=i,window.PropTypes=o},function(e){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(e){l[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(e){return!1}}var l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e){for(var r,a,u=n(e),c=1;c<arguments.length;c++){for(var s in r=Object(arguments[c]))i.call(r,s)&&(u[s]=r[s]);if(l){a=l(r);for(var f=0;f<a.length;f++)o.call(r,a[f])&&(u[a[f]]=r[a[f]])}}return u}},function(e,t,n){"use strict";e.exports=n(10)},function(e,t,n){"use strict";function r(e){return e}function l(e,t,n){function l(e,t){var n=g.hasOwnProperty(t)?g[t]:null;x.hasOwnProperty(t)&&u("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&u("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function i(e,n){if(n){u("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),u(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;for(var o in n.hasOwnProperty(c)&&w.mixins(e,n.mixins),n)if(n.hasOwnProperty(o)&&o!==c){var a=n[o],s=r.hasOwnProperty(o);if(l(s,o),w.hasOwnProperty(o))w[o](e,a);else{var f=g.hasOwnProperty(o);if("function"==typeof a&&!f&&!s&&!1!==n.autobind)i.push(o,a),r[o]=a;else if(s){var y=g[o];u(f&&("DEFINE_MANY_MERGED"===y||"DEFINE_MANY"===y),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",y,o),"DEFINE_MANY_MERGED"===y?r[o]=d(r[o],a):"DEFINE_MANY"===y&&(r[o]=p(r[o],a))}else r[o]=a}}}}function s(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){if(u(!(n in w),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in e){var o=b.hasOwnProperty(n)?b[n]:null;return u("DEFINE_MANY_MERGED"===o,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=d(e[n],r))}e[n]=r}}}function f(e,t){for(var n in u(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),
t)t.hasOwnProperty(n)&&(u(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var l={};return f(l,n),f(l,r),l}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){return t.bind(e)}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],l=t[n+1];e[r]=h(e,l)}}function y(e){var t=r(function(e,r,l){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=a,this.updater=l||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;u("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});for(var l in t.prototype=new T,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(i.bind(null,t)),i(t,E),i(t,e),i(t,k),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),u(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),g)t.prototype[l]||(t.prototype[l]=null);return t}var v=[],g={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},w={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=o({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=o({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=o({},e.propTypes,t)},statics:function(e,t){s(e,t)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},k={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},T=function(){};return o(T.prototype,e.prototype,x),y}var o=n(1),a=n(5),u=n(6),c="mixins";e.exports=l},function(e,t,n){"use strict";var r=n(2),l=n(3);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;e.exports=l(r.Component,r.isValidElement,i)},function(e){"use strict";var r={};e.exports=r},function(e){"use strict";function r(e,t,n,r,i,o,a,u){if(l(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,i,o,a,u],f=0;(c=new Error(t.replace(/%s/g,function(){return s[f++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}var l=function(){};e.exports=r},function(e,t,n){"use strict";function r(){}function l(){}var i=n(9);l.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,l,o){if(o!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){e.exports=n(7)()},function(e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){
/** @license React v16.9.0
	 * react.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function r(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}function l(e,t,n){this.props=e,this.context=t,this.refs=z,this.updater=n||F}function i(){}function o(e,t,n){this.props=e,this.context=t,this.refs=z,this.updater=n||F}function a(e,t,n){var r=void 0,l={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)W.call(t,r)&&!B.hasOwnProperty(r)&&(l[r]=t[r]);var a=arguments.length-2;if(1===a)l.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===l[r]&&(l[r]=a[r]);return{$$typeof:k,type:e,key:i,ref:o,props:l,_owner:j.current}}function u(e,t){return{$$typeof:k,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c(e){return"object"==typeof e&&null!==e&&e.$$typeof===k}function s(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function f(e,t,n,r){if(H.length){var l=H.pop();return l.result=e,l.keyPrefix=t,l.func=n,l.context=r,l.count=0,l}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function d(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>H.length&&H.push(e)}function p(e,t,n,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case k:case x:o=!0}}if(o)return n(l,e,""===t?"."+m(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){var u=t+m(i=e[a],a);o+=p(i,u,n,l)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=O&&e[O]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),a=0;!(i=e.next()).done;)o+=p(i=i.value,u=t+m(i,a++),n,l);else if("object"===i)throw n=""+e,r(Error(31),"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return o}function h(e,t,n){return null==e?0:p(e,"",t,n)}function m(e,t){return"object"==typeof e&&null!==e&&null!=e.key?s(e.key):t.toString(36)}function y(e,t){e.func.call(e.context,t,e.count++)}function v(e,t,n){var r=e.result,l=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?g(e,r,n,function(e){return e}):null!=e&&(c(e)&&(e=u(e,l+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(V,"$&/")+"/")+n)),r.push(e))}function g(e,t,n,r,l){var i="";null!=n&&(i=(""+n).replace(V,"$&/")+"/"),h(e,v,t=f(t,i,r,l)),d(t)}function b(){var e=A.current;if(null===e)throw r(Error(321));return e}var w=n(1),E="function"==typeof Symbol&&Symbol["for"],k=E?Symbol["for"]("react.element"):60103,x=E?Symbol["for"]("react.portal"):60106,T=E?Symbol["for"]("react.fragment"):60107,_=E?Symbol["for"]("react.strict_mode"):60108,C=E?Symbol["for"]("react.profiler"):60114,S=E?Symbol["for"]("react.provider"):60109,P=E?Symbol["for"]("react.context"):60110,N=E?Symbol["for"]("react.forward_ref"):60112,M=E?Symbol["for"]("react.suspense"):60113,R=E?Symbol["for"]("react.suspense_list"):60120,D=E?Symbol["for"]("react.memo"):60115,I=E?Symbol["for"]("react.lazy"):60116;E&&Symbol["for"]("react.fundamental"),E&&Symbol["for"]("react.responder");var O="function"==typeof Symbol&&Symbol.iterator,F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z={};l.prototype.isReactComponent={},l.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw r(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},l.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},i.prototype=l.prototype;var U=o.prototype=new i;U.constructor=o,w(U,l.prototype),U.isPureReactComponent=!0;var A={current:null},L={suspense:null},j={current:null},W=Object.prototype.hasOwnProperty,B={key:!0,ref:!0,__self:!0,__source:!0},V=/\/+/g,H=[],Y={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return g(e,r,null,t,n),r},forEach:function(e,t,n){return null==e?e:(h(e,y,t=f(null,null,t,n)),void d(t))},count:function(e){return h(e,function(){return null},null)},toArray:function(e){var t=[];return g(e,t,null,function(e){return e}),t},only:function(e){if(!c(e))throw r(Error(143));return e}},createRef:function(){return{current:null}},Component:l,PureComponent:o,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:P,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:S,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:N,render:e}},lazy:function(e){return{$$typeof:I,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:D,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return b().useCallback(e,t)},useContext:function(e,t){return b().useContext(e,t)},useEffect:function(e,t){return b().useEffect(e,t)},useImperativeHandle:function(e,t,n){return b().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return b().useLayoutEffect(e,t)},useMemo:function(e,t){return b().useMemo(e,t)},useReducer:function(e,t,n){return b().useReducer(e,t,n)},useRef:function(e){return b().useRef(e)},useState:function(e){return b().useState(e)},Fragment:T,Profiler:C,StrictMode:_,Suspense:M,unstable_SuspenseList:R,createElement:a,cloneElement:function(e,t,n){if(null==e)throw r(Error(267),e);var l=void 0,i=w({},e.props),o=e.key,a=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,u=j.current),void 0!==t.key&&(o=""+t.key);var c=void 0;for(l in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)W.call(t,l)&&!B.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}if(1===(l=arguments.length-2))i.children=n;else if(1<l){c=Array(l);for(var s=0;s<l;s++)c[s]=arguments[s+2];i.children=c}return{$$typeof:k,type:e.type,key:o,ref:a,props:i,_owner:u}},createFactory:function(e){var t=a.bind(null,e);return t.type=e,t},isValidElement:c,version:"16.9.0",unstable_withSuspenseConfig:function(e,t){var n=L.suspense;L.suspense=void 0===t?null:t;try{e()}finally{L.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:A,ReactCurrentBatchConfig:L,ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:w}},Q={"default":Y},$=Q&&Y||Q;e.exports=$["default"]||$},,function(e,t,n){
/** @license React v16.9.0
	 * react-dom.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function r(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}function l(){if(al)for(var e in ul){var t=ul[e],n=al.indexOf(e);if(!(-1<n))throw r(Error(96),e);if(!cl[n]){if(!t.extractEvents)throw r(Error(97),e);for(var l in cl[n]=t,n=t.eventTypes){var o=void 0,a=n[l],u=t,c=l;if(sl.hasOwnProperty(c))throw r(Error(99),c);sl[c]=a;var s=a.phasedRegistrationNames;if(s){for(o in s)s.hasOwnProperty(o)&&i(s[o],u,c);o=!0}else a.registrationName?(i(a.registrationName,u,c),o=!0):o=!1;if(!o)throw r(Error(98),l,e)}}}}function i(e,t,n){if(fl[e])throw r(Error(100),e);fl[e]=t,dl[e]=t.eventTypes[n].dependencies}function o(e,t,n){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}function a(){pl=!1,hl=null,o.apply(vl,arguments)}function u(){if(a.apply(this,arguments),pl){if(!pl)throw r(Error(198));var f=hl;pl=!1,hl=null,ml||(ml=!0,yl=f)}}function c(e,t,n){var r=e.type||"unknown-event";e.currentTarget=wl(n),u(r,t,void 0,e),e.currentTarget=null}function s(e,t){if(null==t)throw r(Error(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function f(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function d(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)c(e,t[r],n[r]);else t&&c(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function p(e){if(null!==e&&(El=s(El,e)),e=El,El=null,e){if(f(e,d),El)throw r(Error(95));if(ml)throw e=yl,ml=!1,yl=null,e}}function h(e,t){var n=e.stateNode;if(!n)return null;var l=gl(n);if(!l)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(l=!l.disabled)||(l=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!l;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw r(Error(231),t,typeof n);return n}function m(e){if(e[Tl])return e[Tl];for(;!e[Tl];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[Tl]).tag||6===e.tag?e:null}function y(e){return!(e=e[Tl])||5!==e.tag&&6!==e.tag?null:e}function v(e){if(5===e.tag||6===e.tag)return e.stateNode;throw r(Error(33))}function g(e){return e[_l]||null}function b(e){do{e=e["return"]}while(e&&5!==e.tag);return e||null}function w(e,t,n){(t=h(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=s(n._dispatchListeners,t),n._dispatchInstances=s(n._dispatchInstances,e))}function E(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=b(t);for(t=n.length;0<t--;)w(n[t],"captured",e);for(t=0;t<n.length;t++)w(n[t],"bubbled",e)}}function k(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=h(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=s(n._dispatchListeners,t),n._dispatchInstances=s(n._dispatchInstances,e))}function x(e){e&&e.dispatchConfig.registrationName&&k(e._targetInst,null,e)}function T(e){f(e,E)}function _(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function C(e){if(Pl[e])return Pl[e];if(!Sl[e])return e;var t,n=Sl[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nl)return Pl[e]=n[t];return e}function S(){if(Ul)return Ul;var e,t,n=zl,r=n.length,l="value"in Fl?Fl.value:Fl.textContent,i=l.length;for(e=0;e<r&&n[e]===l[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===l[i-t];t++);return Ul=l.slice(e,1<t?1-t:void 0)}function P(){return!0}function N(){return!1}function M(e,t,n,r){for(var l in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(l)&&((t=e[l])?this[l]=t(n):"target"===l?this.target=r:this[l]=n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?P:N,this.isPropagationStopped=N,this}function R(e,t,n,r){if(this.eventPool.length){var l=this.eventPool.pop();return this.call(l,e,t,n,r),l}return new this(e,t,n,r)}function D(e){if(!(e instanceof this))throw r(Error(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function I(e){e.eventPool=[],e.getPooled=R,e.release=D}function O(e,t){switch(e){case"keyup":return-1!==jl.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function F(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function z(e,t){switch(e){case"compositionend":return F(t);case"keypress":return 32!==t.which?null:($l=!0,Yl);case"textInput":return(e=t.data)===Yl&&$l?null:e;default:return null}}function U(e,t){if(ql)return"compositionend"===e||!Wl&&O(e,t)?(e=S(),Ul=zl=Fl=null,ql=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hl&&"ko"!==t.locale?null:t.data;default:return null}}function A(e){if(e=bl(e)){if("function"!=typeof Gl)throw r(Error(280));var t=gl(e.stateNode);Gl(e.stateNode,e.type,t)}}function L(e){Xl?Zl?Zl.push(e):Zl=[e]:Xl=e}function j(){if(Xl){var e=Xl,t=Zl;if(Zl=Xl=null,A(e),t)for(e=0;e<t.length;e++)A(t[e])}}function W(e,t){return e(t)}function B(e,t,n,r){return e(t,n,r)}function V(){}function H(){null===Xl&&null===Zl||(V(),j())}function Y(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ti[e.type]:"textarea"===t}function Q(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function $(e){if(!Cl)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function G(e){e._valueTracker||(e._valueTracker=K(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=gi&&e[gi]||e["@@iterator"])?e:null}function J(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ai:return"Fragment";case oi:return"Portal";case ci:return"Profiler";case ui:return"StrictMode";case hi:return"Suspense";case mi:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case fi:return"Context.Consumer";case si:return"Context.Provider";case pi:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case yi:return J(e.type);case vi:if(e=1===e._status?e._result:null)return J(e)}return null}function ee(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,l=e._debugSource,i=J(e.type);n=null,r&&(n=J(r.type)),r=i,i="",l?i=" (at "+l.fileName.replace(ri,"")+":"+l.lineNumber+")":n&&(i=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+i}t+=n,e=e["return"]}while(e);return t}function te(e){return!!wi.call(ki,e)||!wi.call(Ei,e)&&(bi.test(e)?ki[e]=!0:(Ei[e]=!0,!1))}function ne(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function re(e,t,n,r){if(null==t||ne(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function le(e,t,n,r,l,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i}function ie(e){return e[1].toUpperCase()}function oe(e,t,n,r){var l=xi.hasOwnProperty(t)?xi[t]:null;(null!==l?0===l.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(re(t,n,l,r)&&(n=null),r||null===l?te(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=null===n?3!==l.type&&"":n:(t=l.attributeName,r=l.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(l=l.type)||4===l&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function ae(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ue(e,t){var n=t.checked;return il({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ce(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ae(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function se(e,t){null!=(t=t.checked)&&oe(e,"checked",t,!1)}function fe(e,t){se(e,t);var n=ae(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?pe(e,t.type,n):t.hasOwnProperty("defaultValue")&&pe(e,t.type,ae(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function de(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function pe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function he(e,t,n){return(e=M.getPooled(_i.change,e,t,n)).type="change",L(n),T(e),e}function me(e){p(e)}function ye(e){if(X(v(e)))return e}function ve(e,t){if("change"===e)return t}function ge(){Ci&&(Ci.detachEvent("onpropertychange",be),Si=Ci=null)}function be(e){if("value"===e.propertyName&&ye(Si))if(e=he(Si,e,Q(e)),ei)p(e);else{ei=!0;try{W(me,e)}finally{ei=!1,H()}}}function we(e,t,n){"focus"===e?(ge(),Si=n,(Ci=t).attachEvent("onpropertychange",be)):"blur"===e&&ge()}function Ee(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ye(Si)}function ke(e,t){if("click"===e)return ye(t)}function xe(e,t){if("input"===e||"change"===e)return ye(t)}function Te(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ri[e])&&!!t[e]}function _e(){return Te}function Ce(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function Se(e,t){if(Ce(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ji.call(t,n[r])||!Ce(e[n[r]],t[n[r]]))return!1;return!0}function Pe(e,t){return{responder:e,props:t}}function Ne(e){var t=e;if(e.alternate)for(;t["return"];)t=t["return"];else{if(0!=(2&t.effectTag))return 1;for(;t["return"];)if(0!=(2&(t=t["return"]).effectTag))return 1}return 3===t.tag?2:3}function Me(e){if(2!==Ne(e))throw r(Error(188))}function Re(e){var t=e.alternate;if(!t){if(3===(t=Ne(e)))throw r(Error(188));return 1===t?null:e}for(var n=e,l=t;;){var i=n["return"];if(null===i)break;var o=i.alternate;if(null===o){if(null!==(l=i["return"])){n=l;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Me(i),e;if(o===l)return Me(i),t;o=o.sibling}throw r(Error(188))}if(n["return"]!==l["return"])n=i,l=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,l=o;break}if(u===l){a=!0,l=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,l=i;break}if(u===l){a=!0,l=o,n=i;break}u=u.sibling}if(!a)throw r(Error(189))}}if(n.alternate!==l)throw r(Error(190))}if(3!==n.tag)throw r(Error(188));return n.stateNode.current===n?e:t}function De(e){if(!(e=Re(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child["return"]=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t["return"]||t["return"]===e)return null;t=t["return"]}t.sibling["return"]=t["return"],t=t.sibling}}return null}function Ie(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Oe(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r["return"];)r=r["return"];if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=m(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var l=Q(e.nativeEvent);r=e.topLevelType;for(var i=e.nativeEvent,o=null,a=0;a<cl.length;a++){var u=cl[a];u&&(u=u.extractEvents(r,t,i,l))&&(o=s(o,u))}p(o)}}function Fe(e,t){ze(t,e,!1)}function ze(e,t,n){switch(uo(t)){case 0:var r=Ue.bind(null,t,1);break;case 1:r=Ae.bind(null,t,1);break;default:r=Le.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Ue(e,t,n){ei||V();var r=Le,l=ei;ei=!0;try{B(r,e,t,n)}finally{(ei=l)||H()}}function Ae(e,t,n){Le(e,t,n)}function Le(e,t,n){if(so){if(null===(t=m(t=Q(n)))||"number"!=typeof t.tag||2===Ne(t)||(t=null),co.length){var r=co.pop();r.topLevelType=e,r.nativeEvent=n,r.targetInst=t,e=r}else e={topLevelType:e,nativeEvent:n,targetInst:t,ancestors:[]};try{if(n=e,ei)Oe(n,void 0);else{ei=!0;try{Jl(Oe,n,void 0)}finally{ei=!1,H()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>co.length&&co.push(e)}}}function je(e){var t=fo.get(e);return void 0===t&&(t=new Set,fo.set(e,t)),t}function We(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Be(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ve(e,t){var r,n=Be(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Be(n)}}function He(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?He(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ye(){for(var e=window,t=We();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=We((e=t.contentWindow).document)}return t}function Qe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function $e(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return go||null==mo||mo!==We(n)?null:("selectionStart"in(n=mo)&&Qe(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vo&&Se(vo,n)?null:(vo=n,(e=M.getPooled(ho.select,yo,e,t)).type="select",e.target=mo,T(e),e))}function qe(e){var t="";return ll.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function Ke(e,t){return e=il({children:void 0},t),(t=qe(t.children))&&(e.children=t),e}function Ge(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ae(n),t=null,l=0;l<e.length;l++){if(e[l].value===n)return e[l].selected=!0,void(r&&(e[l].defaultSelected=!0));null!==t||e[l].disabled||(t=e[l])}null!==t&&(t.selected=!0)}}function Xe(e,t){if(null!=t.dangerouslySetInnerHTML)throw r(Error(91));return il({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ze(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw r(Error(92));if(Array.isArray(t)){if(!(1>=t.length))throw r(Error(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:ae(n)}}function Je(e,t){var n=ae(t.value),r=ae(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function et(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function tt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?tt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function rt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function lt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||xo.hasOwnProperty(e)&&xo[e]?(""+t).trim():t+"px"}function it(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),l=lt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}function ot(e,t){if(t){if(_o[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw r(Error(137),e,"");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw r(Error(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw r(Error(61))}if(null!=t.style&&"object"!=typeof t.style)throw r(Error(62),"")}}function at(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ut(e,t){var n=je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=dl[t];for(var r=0;r<t.length;r++){var l=t[r];if(!n.has(l)){switch(l){case"scroll":ze(e,"scroll",!0);break;case"focus":case"blur":ze(e,"focus",!0),ze(e,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":$(l)&&ze(e,l,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ol.indexOf(l)&&Fe(l,e)}n.add(l)}}}function ct(){}function st(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ft(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function dt(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function pt(e){0>Ro||(e.current=Mo[Ro],Mo[Ro]=null,Ro--)}function ht(e,t){Mo[++Ro]=e.current,e.current=t}function mt(e,t){var n=e.type.contextTypes;if(!n)return Do;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l,i={};for(l in n)i[l]=t[l];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yt(e){return null!=(e=e.childContextTypes)}function vt(e){pt(Oo,e),pt(Io,e)}function gt(e){pt(Oo,e),pt(Io,e)}function bt(e,t,n){if(Io.current!==Do)throw r(Error(168));ht(Io,t,e),ht(Oo,n,e)}function wt(e,t,n){var l=e.stateNode;if(e=t.childContextTypes,"function"!=typeof l.getChildContext)return n;for(var i in l=l.getChildContext())if(!(i in e))throw r(Error(108),J(t)||"Unknown",i);return il({},n,l)}function Et(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Do,Fo=Io.current,ht(Io,t,e),ht(Oo,Oo.current,e),!0}function kt(e,t,n){var l=e.stateNode;if(!l)throw r(Error(169));n?(t=wt(e,t,Fo),l.__reactInternalMemoizedMergedChildContext=t,pt(Oo,e),pt(Io,e),ht(Io,t,e)):pt(Oo,e),ht(Oo,n,e)}function xt(){switch(Bo()){case Vo:return 99;case Ho:return 98;case Yo:return 97;case Qo:return 96;case $o:return 95;default:throw r(Error(332))}}function Tt(e){switch(e){case 99:return Vo;case 98:return Ho;case 97:return Yo;case 96:return Qo;case 95:return $o;default:throw r(Error(332))}}function _t(e,t){return e=Tt(e),zo(e,t)}function Ct(e,t,n){return e=Tt(e),Uo(e,t,n)}function St(e){return null===Go?(Go=[e],Xo=Uo(Vo,Nt)):Go.push(e),qo}function Pt(){null!==Xo&&Ao(Xo),Nt()}function Nt(){if(!Zo&&null!==Go){Zo=!0;var e=0;try{var t=Go;_t(99,function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}}),Go=null}catch(t){throw null!==Go&&(Go=Go.slice(e+1)),Uo(Vo,Pt),t}finally{Zo=!1}}}function Mt(e,t){return 1073741823===t?99:1===t?95:0>=(e=10*(1073741821-t)-10*(1073741821-e))?99:250>=e?98:5250>=e?97:95}function Rt(e,t){if(e&&e.defaultProps)for(var n in t=il({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function Dt(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t["default"],e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}function It(){la=ra=na=null}function Ot(e,t){var n=e.type._context;ht(ta,n._currentValue,e),n._currentValue=t}function Ft(e){var t=ta.current;pt(ta,e),e.type._context._currentValue=t}function zt(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e["return"]}}function Ut(e,t){na=e,la=ra=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ka=!0),e.firstContext=null)}function At(e,t){if(la!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(la=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ra){if(null===na)throw r(Error(308));ra=t,na.dependencies={expirationTime:0,firstContext:t,responders:null}}else ra=ra.next=t;return e._currentValue}function Lt(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function jt(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Wt(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Bt(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Vt(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,l=null;null===r&&(r=e.updateQueue=Lt(e.memoizedState))}else r=e.updateQueue,l=n.updateQueue,null===r?null===l?(r=e.updateQueue=Lt(e.memoizedState),l=n.updateQueue=Lt(n.memoizedState)):r=e.updateQueue=jt(l):null===l&&(l=n.updateQueue=jt(r));null===l||r===l?Bt(r,t):null===r.lastUpdate||null===l.lastUpdate?(Bt(r,t),Bt(l,t)):(Bt(r,t),l.lastUpdate=t)}function Ht(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Lt(e.memoizedState):Yt(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Yt(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=jt(t)),t}function Qt(e,t,n,r,l,i){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(i,r,l):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(l="function"==typeof(e=n.payload)?e.call(i,r,l):e))break;return il({},r,l);case 2:ia=!0}return r}function $t(e,t,n,r,l){ia=!1;for(var i=(t=Yt(e,t)).baseState,o=null,a=0,u=t.firstUpdate,c=i;null!==u;){var s=u.expirationTime;s<l?(null===o&&(o=u,i=c),a<s&&(a=s)):(Er(s,u.suspenseConfig),c=Qt(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(s=null,u=t.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<l?(null===s&&(s=u,null===o&&(i=c)),a<f&&(a=f)):(c=Qt(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===o&&(t.lastUpdate=null),null===s?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===s&&(i=c),t.baseState=i,t.firstUpdate=o,t.firstCapturedUpdate=s,e.expirationTime=a,e.memoizedState=c}function qt(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Kt(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Kt(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Kt(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var l=t;if("function"!=typeof n)throw r(Error(191),n);n.call(l)}e=e.nextEffect}}function Gt(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:il({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}function Xt(e,t,n,r,l,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!(t.prototype&&t.prototype.isPureReactComponent&&Se(n,r)&&Se(l,i))}function Zt(e,t,n){var r=!1,l=Do,i=t.contextType;return"object"==typeof i&&null!==i?i=At(i):(l=yt(t)?Fo:Io.current,i=(r=null!=(r=t.contextTypes))?mt(e,l):Do),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ua,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function Jt(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ua.enqueueReplaceState(t,t.state,null)}function en(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=aa;var i=t.contextType;"object"==typeof i&&null!==i?l.context=At(i):(i=yt(t)?Fo:Io.current,l.context=mt(e,i)),null!==(i=e.updateQueue)&&($t(e,i,n,l,r),l.state=e.memoizedState),"function"==typeof(i=t.getDerivedStateFromProps)&&(Gt(e,t,i,n),l.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(t=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),t!==l.state&&ua.enqueueReplaceState(l,l.state,null),null!==(i=e.updateQueue)&&($t(e,i,n,l,r),l.state=e.memoizedState)),"function"==typeof l.componentDidMount&&(e.effectTag|=4)}function tn(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var l=void 0;if(n){if(1!==n.tag)throw r(Error(309));l=n.stateNode}if(!l)throw r(Error(147),e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=l.refs;t===aa&&(t=l.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw r(Error(284));if(!n._owner)throw r(Error(290),e)}return e}function nn(e,t){if("textarea"!==e.type)throw r(Error(31),"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function rn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function l(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Ur(e,t,n)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jr(n,e.mode,r))["return"]=e,t):((t=i(t,n,r))["return"]=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props,r)).ref=tn(e,t,n),r["return"]=e,r):((r=Ar(n.type,n.key,n.props,null,e.mode,r)).ref=tn(e,t,n),r["return"]=e,r)}function s(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r))["return"]=e,t):((t=i(t,n.children||[],r))["return"]=e,t)}function f(e,t,n,r,l){return null===t||7!==t.tag?((t=Lr(n,e.mode,r,l))["return"]=e,t):((t=i(t,n,r))["return"]=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=jr(""+t,e.mode,n))["return"]=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ii:return(n=Ar(t.type,t.key,t.props,null,e.mode,n)).ref=tn(e,null,t),n["return"]=e,n;case oi:return(t=Wr(t,e.mode,n))["return"]=e,t}if(ca(t)||Z(t))return(t=Lr(t,e.mode,n,null))["return"]=e,t;nn(e,t)}return null}function p(e,t,n,r){var l=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==l?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ii:return n.key===l?n.type===ai?f(e,t,n.props.children,r,l):c(e,t,n,r):null;case oi:return n.key===l?s(e,t,n,r):null}if(ca(n)||Z(n))return null!==l?null:f(e,t,n,r,null);nn(e,n)}return null}function h(e,t,n,r,l){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,l);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ii:return e=e.get(null===r.key?n:r.key)||null,r.type===ai?f(t,e,r.props.children,l,r.key):c(t,e,r,l);case oi:return s(t,e=e.get(null===r.key?n:r.key)||null,r,l)}if(ca(r)||Z(r))return f(t,e=e.get(n)||null,r,l,null);nn(t,r)}return null}function m(r,i,a,u){for(var c=null,s=null,f=i,m=i=0,y=null;null!==f&&m<a.length;m++){f.index>m?(y=f,f=null):y=f.sibling;var v=p(r,f,a[m],u);if(null===v){null===f&&(f=y);break}e&&f&&null===v.alternate&&t(r,f),i=o(v,i,m),null===s?c=v:s.sibling=v,s=v,f=y}if(m===a.length)return n(r,f),c;if(null===f){for(;m<a.length;m++)null!==(f=d(r,a[m],u))&&(i=o(f,i,m),null===s?c=f:s.sibling=f,s=f);return c}for(f=l(r,f);m<a.length;m++)null!==(y=h(f,r,m,a[m],u))&&(e&&null!==y.alternate&&f["delete"](null===y.key?m:y.key),i=o(y,i,m),null===s?c=y:s.sibling=y,s=y);return e&&f.forEach(function(e){return t(r,e)}),c}function y(i,a,u,c){var s=Z(u);if("function"!=typeof s)throw r(Error(150));if(null==(u=s.call(u)))throw r(Error(151));for(var f=s=null,m=a,y=a=0,v=null,g=u.next();null!==m&&!g.done;y++,g=u.next()){m.index>y?(v=m,m=null):v=m.sibling;var b=p(i,m,g.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,y),null===f?s=b:f.sibling=b,f=b,m=v}if(g.done)return n(i,m),s;if(null===m){for(;!g.done;y++,g=u.next())null!==(g=d(i,g.value,c))&&(a=o(g,a,y),null===f?s=g:f.sibling=g,f=g);return s}for(m=l(i,m);!g.done;y++,g=u.next())null!==(g=h(m,i,y,g.value,c))&&(e&&null!==g.alternate&&m["delete"](null===g.key?y:g.key),a=o(g,a,y),null===f?s=g:f.sibling=g,f=g);return e&&m.forEach(function(e){return t(i,e)}),s}return function(e,l,o,u){var c="object"==typeof o&&null!==o&&o.type===ai&&null===o.key;c&&(o=o.props.children);var s="object"==typeof o&&null!==o;if(s)switch(o.$$typeof){case ii:e:{for(s=o.key,c=l;null!==c;){if(c.key===s){if(7===c.tag?o.type===ai:c.elementType===o.type){n(e,c.sibling),(l=i(c,o.type===ai?o.props.children:o.props,u)).ref=tn(e,c,o),l["return"]=e,e=l;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===ai?((l=Lr(o.props.children,e.mode,u,o.key))["return"]=e,e=l):((u=Ar(o.type,o.key,o.props,null,e.mode,u)).ref=tn(e,l,o),u["return"]=e,e=u)}return a(e);case oi:e:{for(c=o.key;null!==l;){
if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===o.containerInfo&&l.stateNode.implementation===o.implementation){n(e,l.sibling),(l=i(l,o.children||[],u))["return"]=e,e=l;break e}n(e,l);break}t(e,l),l=l.sibling}(l=Wr(o,e.mode,u))["return"]=e,e=l}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==l&&6===l.tag?(n(e,l.sibling),(l=i(l,o,u))["return"]=e,e=l):(n(e,l),(l=jr(o,e.mode,u))["return"]=e,e=l),a(e);if(ca(o))return m(e,l,o,u);if(Z(o))return y(e,l,o,u);if(s&&nn(e,o),void 0===o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,r(Error(152),e.displayName||e.name||"Component")}return n(e,l)}}function ln(e){if(e===da)throw r(Error(174));return e}function on(e,t){ht(ma,t,e),ht(ha,e,e),ht(pa,da,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nt(null,"");break;default:t=nt(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}pt(pa,e),ht(pa,t,e)}function an(e){pt(pa,e),pt(ha,e),pt(ma,e)}function un(e){ln(ma.current);var t=ln(pa.current),n=nt(t,e.type);t!==n&&(ht(ha,e,e),ht(pa,n,e))}function cn(e){ha.current===e&&(pt(pa,e),pt(ha,e))}function sn(e){for(var t=e;null!==t;){if(13===t.tag){if(null!==t.memoizedState)return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child["return"]=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t["return"]||t["return"]===e)return null;t=t["return"]}t.sibling["return"]=t["return"],t=t.sibling}return null}function fn(){throw r(Error(321))}function dn(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ce(e[n],t[n]))return!1;return!0}function pn(e,t,n,l,i,o){if(Na=o,Ma=t,Da=null!==e?e.memoizedState:null,Pa.current=null===Da?Va:Ha,t=n(l,i),La){do{La=!1,Wa+=1,Da=null!==e?e.memoizedState:null,Fa=Ia,Ua=Oa=Ra=null,Pa.current=Ha,t=n(l,i)}while(La);ja=null,Wa=0}if(Pa.current=Ba,(e=Ma).memoizedState=Ia,e.expirationTime=za,e.updateQueue=Ua,e.effectTag|=Aa,e=null!==Ra&&null!==Ra.next,Na=0,Fa=Oa=Ia=Da=Ra=Ma=null,za=0,Ua=null,Aa=0,e)throw r(Error(300));return t}function hn(){Pa.current=Ba,Na=0,Fa=Oa=Ia=Da=Ra=Ma=null,za=0,Ua=null,Aa=0,La=!1,ja=null,Wa=0}function mn(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Oa?Ia=Oa=e:Oa=Oa.next=e,Oa}function yn(){if(null!==Fa)Fa=(Oa=Fa).next,Da=null!==(Ra=Da)?Ra.next:null;else{if(null===Da)throw r(Error(310));var e={memoizedState:(Ra=Da).memoizedState,baseState:Ra.baseState,queue:Ra.queue,baseUpdate:Ra.baseUpdate,next:null};Oa=null===Oa?Ia=e:Oa.next=e,Da=Ra.next}return Oa}function vn(e,t){return"function"==typeof t?t(e):t}function gn(e){var t=yn(),n=t.queue;if(null===n)throw r(Error(311));if(n.lastRenderedReducer=e,0<Wa){var l=n.dispatch;if(null!==ja){var i=ja.get(n);if(void 0!==i){ja["delete"](n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return Ce(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,l]}}return[t.memoizedState,l]}l=n.last;var a=t.baseUpdate;if(o=t.baseState,null!==a?(null!==l&&(l.next=null),l=a.next):l=null!==l?l.next:null,null!==l){var u=i=null,c=l,s=!1;do{var f=c.expirationTime;f<Na?(s||(s=!0,u=a,i=o),f>za&&(za=f)):(Er(f,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),a=c,c=c.next}while(null!==c&&c!==l);s||(u=a,i=o),Ce(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function bn(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Ua?(Ua={lastEffect:null}).lastEffect=e.next=e:null===(t=Ua.lastEffect)?Ua.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Ua.lastEffect=e),e}function wn(e,t,n,r){var l=mn();Aa|=e,l.memoizedState=bn(t,n,void 0,void 0===r?null:r)}function En(e,t,n,r){var l=yn();r=void 0===r?null:r;var i=void 0;if(null!==Ra){var o=Ra.memoizedState;if(i=o.destroy,null!==r&&dn(r,o.deps))return void bn(wa,n,i,r)}Aa|=e,l.memoizedState=bn(t,n,i,r)}function kn(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function xn(){}function Tn(e,t,n){if(!(25>Wa))throw r(Error(301));var l=e.alternate;if(e===Ma||null!==l&&l===Ma)if(La=!0,e={expirationTime:Na,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===ja&&(ja=new Map),void 0===(n=ja.get(t)))ja.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=ar(),o=oa.suspense;o={expirationTime:i=ur(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.last;if(null===a)o.next=o;else{var u=a.next;null!==u&&(o.next=u),a.next=o}if(t.last=o,0===e.expirationTime&&(null===l||0===l.expirationTime)&&null!==(l=t.lastRenderedReducer))try{var c=t.lastRenderedState,s=l(c,n);if(o.eagerReducer=l,o.eagerState=s,Ce(s,c))return}catch(e){}cr(e,i)}}function _n(e,t){var n=Or(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n["return"]=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Cn(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Sn(e){if($a){var t=Qa;if(t){var n=t;if(!Cn(e,t)){if(!(t=dt(n.nextSibling))||!Cn(e,t))return e.effectTag|=2,$a=!1,void(Ya=e);_n(Ya,n)}Ya=e,Qa=dt(t.firstChild)}else e.effectTag|=2,$a=!1,Ya=e}}function Pn(e){for(e=e["return"];null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e["return"];Ya=e}function Nn(e){if(e!==Ya)return!1;if(!$a)return Pn(e),$a=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ft(t,e.memoizedProps))for(t=Qa;t;)_n(e,t),t=dt(t.nextSibling);return Pn(e),Qa=Ya?dt(e.stateNode.nextSibling):null,!0}function Mn(){Qa=Ya=null,$a=!1}function Rn(e,t,n,r){t.child=null===e?fa(t,null,n,r):sa(t,e.child,n,r)}function Dn(e,t,n,r,l){n=n.render;var i=t.ref;return Ut(t,l),r=pn(e,t,n,r,i,l),null===e||Ka?(t.effectTag|=1,Rn(e,t,r,l),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=l&&(e.expirationTime=0),Vn(e,t,l))}function In(e,t,n,r,l,i){if(null===e){var o=n.type;return"function"!=typeof o||Fr(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ar(n.type,null,r,null,t.mode,i)).ref=t.ref,e["return"]=t,t.child=e):(t.tag=15,t.type=o,On(e,t,o,r,l,i))}return o=e.child,l<i&&(l=o.memoizedProps,(n=null!==(n=n.compare)?n:Se)(l,r)&&e.ref===t.ref)?Vn(e,t,i):(t.effectTag|=1,(e=Ur(o,r,i)).ref=t.ref,e["return"]=t,t.child=e)}function On(e,t,n,r,l,i){return null!==e&&Se(e.memoizedProps,r)&&e.ref===t.ref&&(Ka=!1,l<i)?Vn(e,t,i):zn(e,t,n,r,i)}function Fn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function zn(e,t,n,r,l){var i=yt(n)?Fo:Io.current;return i=mt(t,i),Ut(t,l),n=pn(e,t,n,r,i,l),null===e||Ka?(t.effectTag|=1,Rn(e,t,n,l),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=l&&(e.expirationTime=0),Vn(e,t,l))}function Un(e,t,n,r,l){if(yt(n)){var i=!0;Et(t)}else i=!1;if(Ut(t,l),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Zt(t,n,r,l),en(t,n,r,l),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=At(c):c=mt(t,c=yt(n)?Fo:Io.current);var s=n.getDerivedStateFromProps,f="function"==typeof s||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||u!==c)&&Jt(t,o,r,c),ia=!1;var d=t.memoizedState;u=o.state=d;var p=t.updateQueue;null!==p&&($t(t,p,r,o,l),u=t.memoizedState),a!==r||d!==u||Oo.current||ia?("function"==typeof s&&(Gt(t,n,s,r),u=t.memoizedState),(a=ia||Xt(t,n,a,r,d,u,c))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,a=t.memoizedProps,o.props=t.type===t.elementType?a:Rt(t.type,a),u=o.context,"object"==typeof(c=n.contextType)&&null!==c?c=At(c):c=mt(t,c=yt(n)?Fo:Io.current),(f="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||u!==c)&&Jt(t,o,r,c),ia=!1,u=t.memoizedState,d=o.state=u,null!==(p=t.updateQueue)&&($t(t,p,r,o,l),d=t.memoizedState),a!==r||u!==d||Oo.current||ia?("function"==typeof s&&(Gt(t,n,s,r),d=t.memoizedState),(s=ia||Xt(t,n,a,r,u,d,c))?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,c)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=c,r=s):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return An(e,t,n,r,i,l)}function An(e,t,n,r,l,i){Fn(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return l&&kt(t,n,!1),Vn(e,t,i);r=t.stateNode,qa.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=sa(t,e.child,null,i),t.child=sa(t,null,a,i)):Rn(e,t,a,i),t.memoizedState=r.state,l&&kt(t,n,!0),t.child}function Ln(e){var t=e.stateNode;t.pendingContext?bt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bt(e,t.context,!1),on(e,t.containerInfo)}function jn(e,t,n){var r,l=t.mode,i=t.pendingProps,o=ba.current,a=null,u=!1;if((r=0!=(64&t.effectTag))||(r=0!=(o&ga)&&(null===e||null!==e.memoizedState)),r?(a=Ga,u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=va),ht(ba,o&=ya,t),null===e)if(u){if(i=i.fallback,(e=Lr(null,l,0,null))["return"]=t,0==(2&t.mode))for(u=null!==t.memoizedState?t.child.child:t.child,e.child=u;null!==u;)u["return"]=e,u=u.sibling;(n=Lr(i,l,n,null))["return"]=t,e.sibling=n,l=e}else l=n=fa(t,null,i.children,n);else{if(null!==e.memoizedState)if(l=(o=e.child).sibling,u){if(i=i.fallback,(n=Ur(o,o.pendingProps,0))["return"]=t,0==(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==o.child)for(n.child=u;null!==u;)u["return"]=n,u=u.sibling;(i=Ur(l,i,l.expirationTime))["return"]=t,n.sibling=i,l=n,n.childExpirationTime=0,n=i}else l=n=sa(t,o.child,i.children,n);else if(o=e.child,u){if(u=i.fallback,(i=Lr(null,l,0,null))["return"]=t,i.child=o,null!==o&&(o["return"]=i),0==(2&t.mode))for(o=null!==t.memoizedState?t.child.child:t.child,i.child=o;null!==o;)o["return"]=i,o=o.sibling;(n=Lr(u,l,n,null))["return"]=t,i.sibling=n,n.effectTag|=2,l=i,i.childExpirationTime=0}else n=l=sa(t,o,i.children,n);t.stateNode=e.stateNode}return t.memoizedState=a,t.child=l,n}function Wn(e,t,n,r,l){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.last=r,i.tail=n,i.tailExpiration=0,i.tailMode=l)}function Bn(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(Rn(e,t,r.children,n),0!=((r=ba.current)&ga))r=r&ya|ga,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag){if(null!==e.memoizedState){e.expirationTime<n&&(e.expirationTime=n);var o=e.alternate;null!==o&&o.expirationTime<n&&(o.expirationTime=n),zt(e["return"],n)}}else if(null!==e.child){e.child["return"]=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e["return"]||e["return"]===t)break e;e=e["return"]}e.sibling["return"]=e["return"],e=e.sibling}r&=ya}if(ht(ba,r,t),0==(2&t.mode))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;null!==n;)null!==(r=n.alternate)&&null===sn(r)&&(l=n),n=n.sibling;null===(n=l)?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Wn(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;null!==l;){if(null!==(r=l.alternate)&&null===sn(r)){t.child=l;break}r=l.sibling,l.sibling=n,n=l,l=r}Wn(t,!0,n,null,i);break;case"together":Wn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw r(Error(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n["return"]=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps,e.expirationTime))["return"]=t;n.sibling=null}return t.child}function Hn(e){e.effectTag|=4}function Yn(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qn(e){switch(e.tag){case 1:yt(e.type)&&vt(e);var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:if(an(e),gt(e),0!=(64&(t=e.effectTag)))throw r(Error(285));return e.effectTag=-2049&t|64,e;case 5:return cn(e),null;case 13:return pt(ba,e),2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 19:return pt(ba,e),null;case 4:return an(e),null;case 10:return Ft(e),null;default:return null}}function $n(e,t){return{value:e,source:t,stack:ee(t)}}function qn(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ee(n)),null!==n&&J(n.type),t=t.value,null!==e&&1===e.tag&&J(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function Kn(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Nr(e,t)}}function Gn(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Nr(e,t)}else t.current=null}function Xn(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==wa){var l=r.destroy;r.destroy=void 0,void 0!==l&&l()}(r.tag&t)!==wa&&(l=r.create,r.destroy=l()),r=r.next}while(r!==n)}}function Zn(e,t){switch("function"==typeof Wu&&Wu(e),e.tag){case 0:case 11:case 14:case 15:var n=e.updateQueue;if(null!==n&&null!==(n=n.lastEffect)){var r=n.next;_t(97<t?97:t,function(){var t=r;do{var n=t.destroy;if(void 0!==n){var l=e;try{n()}catch(e){Nr(l,e)}}t=t.next}while(t!==r)})}break;case 1:Gn(e),"function"==typeof(t=e.stateNode).componentWillUnmount&&Kn(e,t);break;case 5:Gn(e);break;case 4:nr(e,t)}}function Jn(e,t){for(var n=e;;)if(Zn(n,t),null!==n.child&&4!==n.tag)n.child["return"]=n,n=n.child;else{if(n===e)break;for(;null===n.sibling;){if(null===n["return"]||n["return"]===e)return;n=n["return"]}n.sibling["return"]=n["return"],n=n.sibling}}function er(e){return 5===e.tag||3===e.tag||4===e.tag}function tr(e){e:{for(var t=e["return"];null!==t;){if(er(t)){var n=t;break e}t=t["return"]}throw r(Error(160))}switch(t=n.stateNode,n.tag){case 5:var l=!1;break;case 3:case 4:t=t.containerInfo,l=!0;break;default:throw r(Error(161))}16&n.effectTag&&(rt(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n["return"]||er(n["return"])){n=null;break e}n=n["return"]}for(n.sibling["return"]=n["return"],n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child["return"]=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o||20===i.tag){var a=o?i.stateNode:i.stateNode.instance;if(n)if(l){var u=a;a=n,8===(o=t).nodeType?o.parentNode.insertBefore(u,a):o.insertBefore(u,a)}else t.insertBefore(a,n);else l?(8===(u=t).nodeType?(o=u.parentNode).insertBefore(a,u):(o=u).appendChild(a),null!=(u=u._reactRootContainer)||null!==o.onclick||(o.onclick=ct)):t.appendChild(a)}else if(4!==i.tag&&null!==i.child){i.child["return"]=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i["return"]||i["return"]===e)return;i=i["return"]}i.sibling["return"]=i["return"],i=i.sibling}}function nr(e,t){for(var n=e,l=!1,i=void 0,o=void 0;;){if(!l){l=n["return"];e:for(;;){if(null===l)throw r(Error(160));switch(i=l.stateNode,l.tag){case 5:o=!1;break e;case 3:case 4:i=i.containerInfo,o=!0;break e}l=l["return"]}l=!0}if(5===n.tag||6===n.tag)if(Jn(n,t),o){var a=i,u=n.stateNode;8===a.nodeType?a.parentNode.removeChild(u):a.removeChild(u)}else i.removeChild(n.stateNode);else if(20===n.tag)u=n.stateNode.instance,Jn(n,t),o?8===(a=i).nodeType?a.parentNode.removeChild(u):a.removeChild(u):i.removeChild(u);else if(4===n.tag){if(null!==n.child){i=n.stateNode.containerInfo,o=!0,n.child["return"]=n,n=n.child;continue}}else if(Zn(n,t),null!==n.child){n.child["return"]=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n["return"]||n["return"]===e)return;4===(n=n["return"]).tag&&(l=!1)}n.sibling["return"]=n["return"],n=n.sibling}}function rr(e,t){switch(t.tag){case 0:case 11:case 14:case 15:Xn(ka,xa,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var l=t.memoizedProps,i=null!==e?e.memoizedProps:l;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[_l]=l,"input"===e&&"radio"===l.type&&null!=l.name&&se(n,l),at(e,i),t=at(e,l),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?it(n,u):"dangerouslySetInnerHTML"===a?ko(n,u):"children"===a?rt(n,u):oe(n,a,u,t)}switch(e){case"input":fe(n,l);break;case"textarea":Je(n,l);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!l.multiple,null!=(e=l.value)?Ge(n,!!l.multiple,e,!1):t!==!!l.multiple&&(null!=l.defaultValue?Ge(n,!!l.multiple,l.defaultValue,!0):Ge(n,!!l.multiple,l.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw r(Error(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t,null===t.memoizedState?l=!1:(l=!0,n=t.child,Tu=ea()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,l?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=lt("display",i));else if(6===e.tag)e.stateNode.nodeValue=l?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){(o=e.child.sibling)["return"]=e,e=o;continue}if(null!==e.child){e.child["return"]=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e["return"]||e["return"]===n)break e;e=e["return"]}e.sibling["return"]=e["return"],e=e.sibling}lr(t);break;case 19:lr(t);break;case 17:case 20:break;default:throw r(Error(163))}}function lr(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tu),t.forEach(function(t){var r=Rr.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ir(e,t,n){(n=Wt(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Su||(Su=!0,Pu=r),qn(e,t)},n}function or(e,t,n){(n=Wt(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var l=t.value;n.payload=function(){return qn(e,t),r(l)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Nu?Nu=new Set([this]):Nu.add(this),qn(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function ar(){return(mu&(uu|cu))!==ou?1073741821-(ea()/10|0):0!==Uu?Uu:Uu=1073741821-(ea()/10|0)}function ur(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var l=xt();if(0==(4&t))return 99===l?1073741823:1073741822;if((mu&uu)!==ou)return gu;if(null!==n)e=1073741821-25*(1+((1073741821-e+(0|n.timeoutMs||5e3)/10)/25|0));else switch(l){case 99:e=1073741823;break;case 98:e=1073741821-10*(1+((1073741821-e+15)/10|0));break;case 97:case 96:e=1073741821-25*(1+((1073741821-e+500)/25|0));break;case 95:e=1;break;default:throw r(Error(326))}return null!==yu&&e===gu&&--e,e}function cr(e,t){if(50<Fu)throw Fu=0,zu=null,r(Error(185));if(null!==(e=sr(e,t))){e.pingTime=0;var n=xt();if(1073741823===t)if((mu&au)!==ou&&(mu&(uu|cu))===ou)for(var l=wr(e,1073741823,!0);null!==l;)l=l(!0);else fr(e,99,1073741823),mu===ou&&Pt();else fr(e,n,t);(4&mu)===ou||98!==n&&99!==n||(null===Ou?Ou=new Map([[e,t]]):(void 0===(n=Ou.get(e))||n>t)&&Ou.set(e,t))}}function sr(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e["return"],l=null;if(null===r&&3===e.tag)l=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r["return"]&&3===r.tag){l=r.stateNode;break}r=r["return"]}return null!==l&&(t>l.firstPendingTime&&(l.firstPendingTime=t),0===(e=l.lastPendingTime)||t<e)&&(l.lastPendingTime=t),l}function fr(e,t,n){if(e.callbackExpirationTime<n){var r=e.callbackNode;null!==r&&r!==qo&&Ao(r),e.callbackExpirationTime=n,1073741823===n?e.callbackNode=St(dr.bind(null,e,wr.bind(null,e,n))):(r=null,1!==n&&(r={timeout:10*(1073741821-n)-ea()}),e.callbackNode=Ct(t,dr.bind(null,e,wr.bind(null,e,n)),r))}}function dr(e,t,n){var r=e.callbackNode,l=null;try{return null!==(l=t(n))?dr.bind(null,e,l):null}finally{null===l&&r===e.callbackNode&&(e.callbackNode=null,e.callbackExpirationTime=0)}}function pr(){(mu&(1|uu|cu))===ou&&(mr(),Cr())}function hr(e,t){var n=e.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=t)&&(Ct(97,function(){return n._onComplete(),null}),!0)}function mr(){if(null!==Ou){var e=Ou;Ou=null,e.forEach(function(e,t){St(wr.bind(null,t,e))}),Pt()}}function yr(e,t){var n=mu;mu|=1;try{return e(t)}finally{(mu=n)===ou&&Pt()}}function vr(e,t,n,r){var l=mu;mu|=4;try{return _t(98,e.bind(null,t,n,r))}finally{(mu=l)===ou&&Pt()}}function gr(e,t){var n=mu;mu&=-2,mu|=au;try{return e(t)}finally{(mu=n)===ou&&Pt()}}function br(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,No(n)),null!==vu)for(n=vu["return"];null!==n;){var r=n;switch(r.tag){case 1:var l=r.type.childContextTypes;null!=l&&vt(r);break;case 3:an(r),gt(r);break;case 5:cn(r);break;case 4:an(r);break;case 13:case 19:pt(ba,r);break;case 10:Ft(r)}n=n["return"]}yu=e,vu=Ur(e.current,null,t),gu=t,bu=su,Eu=wu=1073741823,ku=null,xu=!1}function wr(e,t,n){if((mu&(uu|cu))!==ou)throw r(Error(327));if(e.firstPendingTime<t)return null;if(n&&e.finishedExpirationTime===t)return Tr.bind(null,e);if(Cr(),e!==yu||t!==gu)br(e,t);else if(bu===pu)if(xu)br(e,t);else{var l=e.lastPendingTime;if(l<t)return wr.bind(null,e,l)}if(null!==vu){l=mu,mu|=uu;var i=lu.current;if(null===i&&(i=Ba),lu.current=Ba,n){if(1073741823!==t){var o=ar();if(o<t)return mu=l,It(),lu.current=i,wr.bind(null,e,o)}}else Uu=0;for(;;)try{if(n)for(;null!==vu;)vu=kr(vu);else for(;null!==vu&&!Lo();)vu=kr(vu);break}catch(n){if(It(),hn(),null===(o=vu)||null===o["return"])throw br(e,t),mu=l,n;e:{var a=e,u=o["return"],c=o,s=n,f=gu;if(c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var d=s,p=0!=(ba.current&va);s=u;do{var h;if((h=13===s.tag)&&(null!==s.memoizedState?h=!1:h=void 0!==(h=s.memoizedProps).fallback&&(!0!==h.unstable_avoidThisFallback||!p)),h){if(null===(u=s.updateQueue)?((u=new Set).add(d),s.updateQueue=u):u.add(d),0==(2&s.mode)){s.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((f=Wt(1073741823,null)).tag=2,Vt(c,f))),c.expirationTime=1073741823;break e}c=a,a=f,null===(p=c.pingCache)?(p=c.pingCache=new nu,u=new Set,p.set(d,u)):void 0===(u=p.get(d))&&(u=new Set,p.set(d,u)),u.has(a)||(u.add(a),c=Mr.bind(null,c,d,a),d.then(c,c)),s.effectTag|=2048,s.expirationTime=f;break e}s=s["return"]}while(null!==s);s=Error((J(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ee(c))}bu!==hu&&(bu=fu),s=$n(s,c),c=u;do{switch(c.tag){case 3:c.effectTag|=2048,c.expirationTime=f,Ht(c,f=ir(c,s,f));break e;case 1:if(d=s,a=c.type,u=c.stateNode,0==(64&c.effectTag)&&("function"==typeof a.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===Nu||!Nu.has(u)))){c.effectTag|=2048,c.expirationTime=f,Ht(c,f=or(c,d,f));break e}}c=c["return"]}while(null!==c)}vu=xr(o)}if(mu=l,It(),lu.current=i,null!==vu)return wr.bind(null,e,t)}if(e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,hr(e,t))return null;switch(yu=null,bu){case su:throw r(Error(328));case fu:return(l=e.lastPendingTime)<t?wr.bind(null,e,l):n?Tr.bind(null,e):(br(e,t),St(wr.bind(null,e,t)),null);case du:return 1073741823===wu&&!n&&10<(n=Tu+_u-ea())?xu?(br(e,t),wr.bind(null,e,t)):(l=e.lastPendingTime)<t?wr.bind(null,e,l):(e.timeoutHandle=Po(Tr.bind(null,e),n),null):Tr.bind(null,e);case pu:if(!n){if(xu)return br(e,t),wr.bind(null,e,t);if((n=e.lastPendingTime)<t)return wr.bind(null,e,n);if(1073741823!==Eu?n=10*(1073741821-Eu)-ea():1073741823===wu?n=0:(n=10*(1073741821-wu)-5e3,0>(n=(l=ea())-n)&&(n=0),(t=10*(1073741821-t)-l)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ru(n/1960))-n)&&(n=t)),10<n)return e.timeoutHandle=Po(Tr.bind(null,e),n),null}return Tr.bind(null,e);case hu:return!n&&1073741823!==wu&&null!==ku&&(l=wu,0>=(t=0|(i=ku).busyMinDurationMs)?t=0:(n=0|i.busyDelayMs,t=(l=ea()-(10*(1073741821-l)-(0|i.timeoutMs||5e3)))<=n?0:n+t-l),10<t)?(e.timeoutHandle=Po(Tr.bind(null,e),t),null):Tr.bind(null,e);default:throw r(Error(329))}}function Er(e,t){e<wu&&1<e&&(wu=e),null!==t&&e<Eu&&1<e&&(Eu=e,ku=t)}function kr(e){var t=Lu(e.alternate,e,gu);return e.memoizedProps=e.pendingProps,null===t&&(t=xr(e)),iu.current=null,t}function xr(e){vu=e;do{var t=vu.alternate;if(e=vu["return"],0==(1024&vu.effectTag)){e:{var n=t,l=gu,i=(t=vu).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:yt(t.type)&&vt(t);break;case 3:an(t),gt(t),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==n&&null!==n.child||(Nn(t),t.effectTag&=-3),Za(t);break;case 5:cn(t),l=ln(ma.current);var o=t.type;if(null!==n&&null!=t.stateNode)Ja(n,t,o,i,l),n.ref!==t.ref&&(t.effectTag|=128);else if(i){var a=ln(pa.current);if(Nn(t)){i=void 0,o=(n=t).stateNode;var u=n.type,c=n.memoizedProps;switch(o[Tl]=n,o[_l]=c,u){case"iframe":case"object":case"embed":Fe("load",o);break;case"video":case"audio":for(var s=0;s<Ol.length;s++)Fe(Ol[s],o);break;case"source":Fe("error",o);break;case"img":case"image":case"link":Fe("error",o),Fe("load",o);break;case"form":Fe("reset",o),Fe("submit",o);break;case"details":Fe("toggle",o);break;case"input":ce(o,c),Fe("invalid",o),ut(l,"onChange");break;case"select":o._wrapperState={wasMultiple:!!c.multiple},Fe("invalid",o),ut(l,"onChange");break;case"textarea":Ze(o,c),Fe("invalid",o),ut(l,"onChange")}for(i in ot(u,c),s=null,c)c.hasOwnProperty(i)&&(a=c[i],"children"===i?"string"==typeof a?o.textContent!==a&&(s=["children",a]):"number"==typeof a&&o.textContent!==""+a&&(s=["children",""+a]):fl.hasOwnProperty(i)&&null!=a&&ut(l,i));switch(u){case"input":G(o),de(o,c,!0);break;case"textarea":G(o),et(o,c);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(o.onclick=ct)}l=s,n.updateQueue=l,null!==l&&Hn(t)}else{c=o,n=i,u=t,s=9===l.nodeType?l:l.ownerDocument,a===wo.html&&(a=tt(c)),a===wo.html?"script"===c?((c=s.createElement("div")).innerHTML="<script></script>",s=c.removeChild(c.firstChild)):"string"==typeof n.is?s=s.createElement(c,{is:n.is}):(s=s.createElement(c),"select"===c&&(c=s,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):s=s.createElementNS(a,c),(c=s)[Tl]=u,c[_l]=n,Xa(n=c,t,!1,!1),u=n;var f=l,d=at(o,i);switch(o){case"iframe":case"object":case"embed":Fe("load",u),l=i;break;case"video":case"audio":for(l=0;l<Ol.length;l++)Fe(Ol[l],u);l=i;break;case"source":Fe("error",u),l=i;break;case"img":case"image":case"link":Fe("error",u),Fe("load",u),l=i;break;case"form":Fe("reset",u),Fe("submit",u),l=i;break;case"details":Fe("toggle",u),l=i;break;case"input":ce(u,i),l=ue(u,i),Fe("invalid",u),ut(f,"onChange");break;case"option":l=Ke(u,i);break;case"select":u._wrapperState={wasMultiple:!!i.multiple},l=il({},i,{value:void 0}),Fe("invalid",u),ut(f,"onChange");break;case"textarea":Ze(u,i),l=Xe(u,i),Fe("invalid",u),ut(f,"onChange");break;default:l=i}ot(o,l),c=void 0,s=o,a=u;var p=l;for(c in p)if(p.hasOwnProperty(c)){var h=p[c];"style"===c?it(a,h):"dangerouslySetInnerHTML"===c?null!=(h=h?h.__html:void 0)&&ko(a,h):"children"===c?"string"==typeof h?("textarea"!==s||""!==h)&&rt(a,h):"number"==typeof h&&rt(a,""+h):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(fl.hasOwnProperty(c)?null!=h&&ut(f,c):null!=h&&oe(a,c,h,d))}switch(o){case"input":G(u),de(u,i,!1);break;case"textarea":G(u),et(u,i);break;case"option":null!=i.value&&u.setAttribute("value",""+ae(i.value));break;case"select":l=u,u=i,l.multiple=!!u.multiple,null!=(c=u.value)?Ge(l,!!u.multiple,c,!1):null!=u.defaultValue&&Ge(l,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof l.onClick&&(u.onclick=ct)}st(o,i)&&Hn(t),t.stateNode=n}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw r(Error(166));break;case 6:if(n&&null!=t.stateNode)eu(n,t,n.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw r(Error(166));n=ln(ma.current),ln(pa.current),Nn(t)?(l=t.stateNode,n=t.memoizedProps,l[Tl]=t,l.nodeValue!==n&&Hn(t)):(l=t,(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Tl]=t,l.stateNode=n)}break;case 11:break;case 13:if(pt(ba,t),i=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=l;break e}l=null!==i,i=!1,null===n?Nn(t):(i=null!==(o=n.memoizedState),l||null===o||null!==(o=n.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=o,o.nextEffect=u):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),l&&!i&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(ba.current&va)?bu===su&&(bu=du):bu!==su&&bu!==du||(bu=pu)),(l||i)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:an(t),Za(t);break;case 10:Ft(t);break;case 9:case 14:break;case 17:yt(t.type)&&vt(t);break;case 18:break;case 19:if(pt(ba,t),null===(i=t.memoizedState))break;if(o=0!=(64&t.effectTag),null===(u=i.rendering)){if(o)Yn(i,!1);else if(bu!==su||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(u=sn(n))){for(t.effectTag|=64,Yn(i,!1),null!==(n=u.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),t.firstEffect=t.lastEffect=null,n=t.child;null!==n;)o=l,(i=n).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(u=i.alternate)?(i.childExpirationTime=0,i.expirationTime=o,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=u.childExpirationTime,i.expirationTime=u.expirationTime,i.child=u.child,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,o=u.dependencies,i.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),n=n.sibling;ht(ba,ba.current&ya|ga,t),t=t.child;break e}n=n.sibling}}else{if(!o)if(null!==(n=sn(u))){if(t.effectTag|=64,o=!0,Yn(i,!0),null===i.tail&&"hidden"===i.tailMode){null!==(l=n.updateQueue)&&(t.updateQueue=l,t.effectTag|=4),null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null);break}}else ea()>i.tailExpiration&&1<l&&(t.effectTag|=64,o=!0,Yn(i,!1),t.expirationTime=t.childExpirationTime=l-1);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(l=i.last)?l.sibling=u:t.child=u,i.last=u)}if(null!==i.tail){0===i.tailExpiration&&(i.tailExpiration=ea()+500),l=i.tail,i.rendering=l,i.tail=l.sibling,i.lastEffect=t.lastEffect,l.sibling=null,n=ba.current,ht(ba,n=o?n&ya|ga:n&ya,t),t=l;break e}break;case 20:break;default:throw r(Error(156))}t=null}if(l=vu,1===gu||1!==l.childExpirationTime){for(n=0,i=l.child;null!==i;)(o=i.expirationTime)>n&&(n=o),(u=i.childExpirationTime)>n&&(n=u),i=i.sibling
;l.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(1024&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=vu.firstEffect),null!==vu.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=vu.firstEffect),e.lastEffect=vu.lastEffect),1<vu.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=vu:e.firstEffect=vu,e.lastEffect=vu))}else{if(null!==(t=Qn(vu,gu)))return t.effectTag&=1023,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=1024)}if(null!==(t=vu.sibling))return t;vu=e}while(null!==vu);return bu===su&&(bu=hu),null}function Tr(e){var t=xt();return _t(99,_r.bind(null,e,t)),null!==Ru&&Ct(97,function(){return Cr(),null}),null}function _r(e,t){if(Cr(),(mu&(uu|cu))!==ou)throw r(Error(327));var n=e.finishedWork,l=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw r(Error(177));e.callbackNode=null,e.callbackExpirationTime=0;var i=n.expirationTime,o=n.childExpirationTime;if(i=o>i?o:i,e.firstPendingTime=i,i<e.lastPendingTime&&(e.lastPendingTime=i),e===yu&&(vu=yu=null,gu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){o=mu,mu|=cu,iu.current=null,Co=so;var a=Ye();if(Qe(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{var c=(u=(u=a.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var s=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(e){u=null;break e}var d=0,p=-1,h=-1,m=0,y=0,v=a,g=null;t:for(;;){for(var b;v!==u||0!==s&&3!==v.nodeType||(p=d+s),v!==f||0!==c&&3!==v.nodeType||(h=d+c),3===v.nodeType&&(d+=v.nodeValue.length),null!==(b=v.firstChild);)g=v,v=b;for(;;){if(v===a)break t;if(g===u&&++m===s&&(p=d),g===f&&++y===c&&(h=d),null!==(b=v.nextSibling))break;g=(v=g).parentNode}v=b}u=-1===p||-1===h?null:{start:p,end:h}}else u=null}u=u||{start:0,end:0}}else u=null;So={focusedElem:a,selectionRange:u},so=!1,Cu=i;do{try{for(;null!==Cu;){if(0!=(256&Cu.effectTag)){var w=Cu.alternate;switch((a=Cu).tag){case 0:case 11:case 15:Xn(Ea,wa,a);break;case 1:if(256&a.effectTag&&null!==w){var E=w.memoizedProps,k=w.memoizedState,x=a.stateNode,T=x.getSnapshotBeforeUpdate(a.elementType===a.type?E:Rt(a.type,E),k);x.__reactInternalSnapshotBeforeUpdate=T}break;case 3:case 5:case 6:case 4:case 17:break;default:throw r(Error(163))}}Cu=Cu.nextEffect}}catch(e){if(null===Cu)throw r(Error(330));Nr(Cu,e),Cu=Cu.nextEffect}}while(null!==Cu);Cu=i;do{try{for(w=t;null!==Cu;){var _=Cu.effectTag;if(16&_&&rt(Cu.stateNode,""),128&_){var C=Cu.alternate;if(null!==C){var S=C.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(14&_){case 2:tr(Cu),Cu.effectTag&=-3;break;case 6:tr(Cu),Cu.effectTag&=-3,rr(Cu.alternate,Cu);break;case 4:rr(Cu.alternate,Cu);break;case 8:nr(E=Cu,w),E["return"]=null,E.child=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null;var P=E.alternate;null!==P&&(P["return"]=null,P.child=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null)}Cu=Cu.nextEffect}}catch(e){if(null===Cu)throw r(Error(330));Nr(Cu,e),Cu=Cu.nextEffect}}while(null!==Cu);if(S=So,C=Ye(),_=S.focusedElem,w=S.selectionRange,C!==_&&_&&_.ownerDocument&&He(_.ownerDocument.documentElement,_)){null!==w&&Qe(_)&&(C=w.start,void 0===(S=w.end)&&(S=C),"selectionStart"in _?(_.selectionStart=C,_.selectionEnd=Math.min(S,_.value.length)):(S=(C=_.ownerDocument||document)&&C.defaultView||window).getSelection&&(S=S.getSelection(),E=_.textContent.length,P=Math.min(w.start,E),w=void 0===w.end?P:Math.min(w.end,E),!S.extend&&P>w&&(E=w,w=P,P=E),E=Ve(_,P),k=Ve(_,w),E&&k&&(1!==S.rangeCount||S.anchorNode!==E.node||S.anchorOffset!==E.offset||S.focusNode!==k.node||S.focusOffset!==k.offset)&&((C=C.createRange()).setStart(E.node,E.offset),S.removeAllRanges(),P>w?(S.addRange(C),S.extend(k.node,k.offset)):(C.setEnd(k.node,k.offset),S.addRange(C))))),C=[];for(S=_;S=S.parentNode;)1===S.nodeType&&C.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<C.length;_++)(S=C[_]).element.scrollLeft=S.left,S.element.scrollTop=S.top}So=null,so=!!Co,Co=null,e.current=n,Cu=i;do{try{for(_=l;null!==Cu;){var N=Cu.effectTag;if(36&N){var M=Cu.alternate;switch(S=_,(C=Cu).tag){case 0:case 11:case 15:Xn(Ta,_a,C);break;case 1:var R=C.stateNode;if(4&C.effectTag)if(null===M)R.componentDidMount();else{var D=C.elementType===C.type?M.memoizedProps:Rt(C.type,M.memoizedProps);R.componentDidUpdate(D,M.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var I=C.updateQueue;null!==I&&qt(C,I,R,S);break;case 3:var O=C.updateQueue;if(null!==O){if(P=null,null!==C.child)switch(C.child.tag){case 5:P=C.child.stateNode;break;case 1:P=C.child.stateNode}qt(C,O,P,S)}break;case 5:var F=C.stateNode;null===M&&4&C.effectTag&&(S=F,st(C.type,C.memoizedProps)&&S.focus());break;case 6:case 4:case 12:break;case 13:case 19:case 17:case 20:break;default:throw r(Error(163))}}if(128&N){var z=Cu.ref;if(null!==z){var U=Cu.stateNode;switch(Cu.tag){case 5:var A=U;break;default:A=U}"function"==typeof z?z(A):z.current=A}}512&N&&(Mu=!0),Cu=Cu.nextEffect}}catch(e){if(null===Cu)throw r(Error(330));Nr(Cu,e),Cu=Cu.nextEffect}}while(null!==Cu);Cu=null,Ko(),mu=o}else e.current=n;if(Mu)Mu=!1,Ru=e,Iu=l,Du=t;else for(Cu=i;null!==Cu;)t=Cu.nextEffect,Cu.nextEffect=null,Cu=t;if(0!==(t=e.firstPendingTime)?fr(e,N=Mt(N=ar(),t),t):Nu=null,"function"==typeof ju&&ju(n.stateNode,l),1073741823===t?e===zu?Fu++:(Fu=0,zu=e):Fu=0,Su)throw Su=!1,e=Pu,Pu=null,e;return(mu&au)!==ou?null:(Pt(),null)}function Cr(){if(null===Ru)return!1;var e=Ru,t=Iu,n=Du;return Ru=null,Iu=0,Du=90,_t(97<n?97:n,Sr.bind(null,e,t))}function Sr(e){if((mu&(uu|cu))!==ou)throw r(Error(331));var t=mu;for(mu|=cu,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:Xn(Sa,wa,n),Xn(wa,Ca,n)}}catch(t){if(null===e)throw r(Error(330));Nr(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return mu=t,Pt(),!0}function Pr(e,t,n){Vt(e,t=ir(e,t=$n(n,t),1073741823)),null!==(e=sr(e,1073741823))&&fr(e,99,1073741823)}function Nr(e,t){if(3===e.tag)Pr(e,e,t);else for(var n=e["return"];null!==n;){if(3===n.tag){Pr(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Nu||!Nu.has(r))){Vt(n,e=or(n,e=$n(t,e),1073741823)),null!==(n=sr(n,1073741823))&&fr(n,99,1073741823);break}}n=n["return"]}}function Mr(e,t,n){var r=e.pingCache;null!==r&&r["delete"](t),yu===e&&gu===n?bu===pu||bu===du&&1073741823===wu&&ea()-Tu<_u?br(e,gu):xu=!0:e.lastPendingTime<n||(0!==(t=e.pingTime)&&t<n||(e.pingTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),fr(e,t=Mt(t=ar(),n),n)))}function Rr(e,t){var n=e.stateNode;null!==n&&n["delete"](t),n=Mt(n=ar(),t=ur(n,e,null)),null!==(e=sr(e,t))&&fr(e,n,t)}function Dr(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);ju=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Wu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}return!0}function Ir(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this["return"]=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Or(e,t,n,r){return new Ir(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e){if("function"==typeof e)return Fr(e)?1:0;if(null!=e){if((e=e.$$typeof)===pi)return 11;if(e===yi)return 14}return 2}function Ur(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ar(e,t,n,l,i,o){var a=2;if(l=e,"function"==typeof e)Fr(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ai:return Lr(n.children,i,o,t);case di:a=8,i|=7;break;case ui:a=8,i|=1;break;case ci:return(e=Or(12,n,t,8|i)).elementType=ci,e.type=ci,e.expirationTime=o,e;case hi:return(e=Or(13,n,t,i)).type=hi,e.elementType=hi,e.expirationTime=o,e;case mi:return(e=Or(19,n,t,i)).elementType=mi,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case si:a=10;break e;case fi:a=9;break e;case pi:a=11;break e;case yi:a=14;break e;case vi:a=16,l=null;break e}throw r(Error(130),null==e?e:typeof e,"")}return(t=Or(a,n,t,i)).elementType=e,t.type=l,t.expirationTime=o,t}function Lr(e,t,n,r){return(e=Or(7,e,r,t)).expirationTime=n,e}function jr(e,t,n){return(e=Or(6,e,null,t)).expirationTime=n,e}function Wr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Br(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function Vr(e,t,n){return e=new Br(e,t,n),t=Or(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e}function Hr(e,t,n,l,i,o){var a=t.current;e:if(n){t:{if(2!==Ne(n=n._reactInternalFiber)||1!==n.tag)throw r(Error(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yt(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u["return"]}while(null!==u);throw r(Error(171))}if(1===n.tag){var c=n.type;if(yt(c)){n=wt(n,c,u);break e}}n=u}else n=Do;return null===t.context?t.context=n:t.pendingContext=n,t=o,(i=Wt(l,i)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Vt(a,i),cr(a,l),l}function Yr(e,t,n,r){var l=t.current,i=ar(),o=oa.suspense;return Hr(e,t,n,l=ur(i,l,o),o,r)}function Qr(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function $r(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:oi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qr(e){var t=1073741821-25*(1+((1073741821-ar()+500)/25|0));t<=Au&&--t,this._expirationTime=Au=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Kr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Gr(e,t,n){this._internalRoot=Vr(e,t,n)}function Xr(e,t){this._internalRoot=Vr(e,2,t)}function Zr(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jr(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Gr(e,0,t)}function el(e,t,n,r,l){var i=n._reactRootContainer,o=void 0;if(i){if(o=i._internalRoot,"function"==typeof l){var a=l;l=function(){var e=Qr(o);a.call(e)}}Yr(t,o,e,l)}else{if(i=n._reactRootContainer=Jr(n,r),o=i._internalRoot,"function"==typeof l){var u=l;l=function(){var e=Qr(o);u.call(e)}}gr(function(){Yr(t,o,e,l)})}return Qr(o)}function tl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zr(t))throw r(Error(200));return $r(e,t,null,n)}function nl(e,t){if(!Zr(e))throw r(Error(299),"unstable_createRoot");return new Xr(e,null!=t&&!0===t.hydrate)}function rl(e,t){if(!Zr(e))throw r(Error(299),"unstable_createRoot");return new Gr(e,1,null!=t&&!0===t.hydrate)}var ll=n(2),il=n(1),ol=n(16);if(!ll)throw r(Error(227));var al=null,ul={},cl=[],sl={},fl={},dl={},pl=!1,hl=null,ml=!1,yl=null,vl={onError:function(e){pl=!0,hl=e}},gl=null,bl=null,wl=null,El=null,kl={injectEventPluginOrder:function(e){if(al)throw r(Error(101));al=Array.prototype.slice.call(e),l()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!ul.hasOwnProperty(t)||ul[t]!==i){if(ul[t])throw r(Error(102),t);ul[t]=i,n=!0}}n&&l()}},xl=Math.random().toString(36).slice(2),Tl="__reactInternalInstance$"+xl,_l="__reactEventHandlers$"+xl,Cl=!("undefined"==typeof window||"undefined"==typeof window.document||"undefined"==typeof window.document.createElement),Sl={animationend:_("Animation","AnimationEnd"),animationiteration:_("Animation","AnimationIteration"),animationstart:_("Animation","AnimationStart"),transitionend:_("Transition","TransitionEnd")},Pl={},Nl={};Cl&&(Nl=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);var Ml=C("animationend"),Rl=C("animationiteration"),Dl=C("animationstart"),Il=C("transitionend"),Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fl=null,zl=null,Ul=null;il(M.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=P)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=P)},persist:function(){this.isPersistent=P},isPersistent:N,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=N,this._dispatchInstances=this._dispatchListeners=null}}),M.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},M.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var l=new t;return il(l,n.prototype),n.prototype=l,n.prototype.constructor=n,n.Interface=il({},r.Interface,e),n.extend=r.extend,I(n),n},I(M);var Al=M.extend({data:null}),Ll=M.extend({data:null}),jl=[9,13,27,32],Wl=Cl&&"CompositionEvent"in window,Bl=null;Cl&&"documentMode"in document&&(Bl=document.documentMode);var Vl=Cl&&"TextEvent"in window&&!Bl,Hl=Cl&&(!Wl||Bl&&8<Bl&&11>=Bl),Yl=String.fromCharCode(32),Ql={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},$l=!1,ql=!1,Kl={eventTypes:Ql,extractEvents:function(e,t,n,r){var l=void 0,i=void 0;if(Wl)e:{switch(e){case"compositionstart":l=Ql.compositionStart;break e;case"compositionend":l=Ql.compositionEnd;break e;case"compositionupdate":l=Ql.compositionUpdate;break e}l=void 0}else ql?O(e,n)&&(l=Ql.compositionEnd):"keydown"===e&&229===n.keyCode&&(l=Ql.compositionStart);return l?(Hl&&"ko"!==n.locale&&(ql||l!==Ql.compositionStart?l===Ql.compositionEnd&&ql&&(i=S()):(zl="value"in(Fl=r)?Fl.value:Fl.textContent,ql=!0)),l=Al.getPooled(l,t,n,r),i?l.data=i:null!==(i=F(n))&&(l.data=i),T(l),i=l):i=null,(e=Vl?z(e,n):U(e,n))?((t=Ll.getPooled(Ql.beforeInput,t,n,r)).data=e,T(t)):t=null,null===i?t:null===t?i:[i,t]}},Gl=null,Xl=null,Zl=null,Jl=W,ei=!1,ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ni=ll.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ni.hasOwnProperty("ReactCurrentDispatcher")||(ni.ReactCurrentDispatcher={current:null}),ni.hasOwnProperty("ReactCurrentBatchConfig")||(ni.ReactCurrentBatchConfig={suspense:null});var ri=/^(.*)[\\\/]/,li="function"==typeof Symbol&&Symbol["for"],ii=li?Symbol["for"]("react.element"):60103,oi=li?Symbol["for"]("react.portal"):60106,ai=li?Symbol["for"]("react.fragment"):60107,ui=li?Symbol["for"]("react.strict_mode"):60108,ci=li?Symbol["for"]("react.profiler"):60114,si=li?Symbol["for"]("react.provider"):60109,fi=li?Symbol["for"]("react.context"):60110,di=li?Symbol["for"]("react.concurrent_mode"):60111,pi=li?Symbol["for"]("react.forward_ref"):60112,hi=li?Symbol["for"]("react.suspense"):60113,mi=li?Symbol["for"]("react.suspense_list"):60120,yi=li?Symbol["for"]("react.memo"):60115,vi=li?Symbol["for"]("react.lazy"):60116;li&&Symbol["for"]("react.fundamental"),li&&Symbol["for"]("react.responder");var gi="function"==typeof Symbol&&Symbol.iterator,bi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wi=Object.prototype.hasOwnProperty,Ei={},ki={},xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xi[e]=new le(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xi[t]=new le(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){xi[e]=new le(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xi[e]=new le(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xi[e]=new le(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){xi[e]=new le(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){xi[e]=new le(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){xi[e]=new le(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){xi[e]=new le(e,5,!1,e.toLowerCase(),null,!1)});var Ti=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ti,ie);xi[t]=new le(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ti,ie);xi[t]=new le(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ti,ie);xi[t]=new le(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){xi[e]=new le(e,1,!1,e.toLowerCase(),null,!1)}),xi.xlinkHref=new le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){xi[e]=new le(e,1,!1,e.toLowerCase(),null,!0)});var _i={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Ci=null,Si=null,Pi=!1;Cl&&(Pi=$("input")&&(!document.documentMode||9<document.documentMode));var Ni={eventTypes:_i,_isInputEventSupported:Pi,extractEvents:function(e,t,n,r){var l=t?v(t):window,i=void 0,o=void 0,a=l.nodeName&&l.nodeName.toLowerCase();return"select"===a||"input"===a&&"file"===l.type?i=ve:Y(l)?Pi?i=xe:(i=Ee,o=we):(a=l.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(i=ke),i&&(i=i(e,t))?he(i,n,r):(o&&o(e,l,t),void("blur"===e&&(e=l._wrapperState)&&e.controlled&&"number"===l.type&&pe(l,"number",l.value)))}},Mi=M.extend({view:null,detail:null}),Ri={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Di=0,Ii=0,Oi=!1,Fi=!1,zi=Mi.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:_e,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Di;return Di=e.screenX,Oi?"mousemove"===e.type?e.screenX-t:0:(Oi=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ii;return Ii=e.screenY,Fi?"mousemove"===e.type?e.screenY-t:0:(Fi=!0,0)}}),Ui=zi.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ai={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Li={eventTypes:Ai,extractEvents:function(e,t,n,r){var l="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(l&&(n.relatedTarget||n.fromElement)||!i&&!l)return null;if(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,i?(i=t,t=(t=n.relatedTarget||n.toElement)?m(t):null):i=null,i===t)return null;var o=void 0,a=void 0,u=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(o=zi,a=Ai.mouseLeave,u=Ai.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=Ui,a=Ai.pointerLeave,u=Ai.pointerEnter,c="pointer");var s=null==i?l:v(i);if(l=null==t?l:v(t),(e=o.getPooled(a,i,n,r)).type=c+"leave",e.target=s,e.relatedTarget=l,(n=o.getPooled(u,t,n,r)).type=c+"enter",n.target=l,n.relatedTarget=s,r=t,i&&r)e:{for(l=r,c=0,o=t=i;o;o=b(o))c++;for(o=0,u=l;u;u=b(u))o++;for(;0<c-o;)t=b(t),c--;for(;0<o-c;)l=b(l),o--;for(;c--;){if(t===l||t===l.alternate)break e;t=b(t),l=b(l)}t=null}else t=null;for(l=t,t=[];i&&i!==l&&(null===(c=i.alternate)||c!==l);)t.push(i),i=b(i);for(i=[];r&&r!==l&&(null===(c=r.alternate)||c!==l);)i.push(r),r=b(r);for(r=0;r<t.length;r++)k(t[r],"bubbled",e);for(r=i.length;0<r--;)k(i[r],"captured",n);return[e,n]}},ji=Object.prototype.hasOwnProperty;new Map,new Map,new Set,new Map;for(var Wi=M.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Bi=M.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vi=Mi.extend({relatedTarget:null}),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qi=Mi.extend({key:function(e){if(e.key){var t=Hi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ie(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Yi[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:_e,charCode:function(e){return"keypress"===e.type?Ie(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ie(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),$i=zi.extend({dataTransfer:null}),qi=Mi.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:_e}),Ki=M.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Gi=zi.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Xi=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ml,"animationEnd",2],[Rl,"animationIteration",2],[Dl,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Il,"transitionEnd",2],["waiting","waiting",2]],Zi={},Ji={},eo=0;eo<Xi.length;eo++){var to=Xi[eo],no=to[0],ro=to[1],lo=to[2],io="on"+(ro[0].toUpperCase()+ro.slice(1)),oo={phasedRegistrationNames:{bubbled:io,captured:io+"Capture"},dependencies:[no],eventPriority:lo};Zi[ro]=oo,Ji[no]=oo}var ao={eventTypes:Zi,getEventPriority:function(e){return void 0!==(e=Ji[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var l=Ji[e];if(!l)return null;switch(e){case"keypress":if(0===Ie(n))return null;case"keydown":case"keyup":e=Qi;break;case"blur":case"focus":e=Vi;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=zi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=$i;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=qi;break;case Ml:case Rl:case Dl:e=Wi;break;case Il:e=Ki;break;case"scroll":e=Mi;break;case"wheel":e=Gi;break;case"copy":case"cut":case"paste":e=Bi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ui;break;default:e=M}return T(t=e.getPooled(l,t,n,r)),t}},uo=ao.getEventPriority,co=[],so=!0,fo=new("function"==typeof WeakMap?WeakMap:Map),po=Cl&&"documentMode"in document&&11>=document.documentMode,ho={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},mo=null,yo=null,vo=null,go=!1,bo={eventTypes:ho,extractEvents:function(e,t,n,r){var l,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(l=!i)){e:{i=je(i),l=dl.onSelect;for(var o=0;o<l.length;o++)if(!i.has(l[o])){i=!1;break e}i=!0}l=!i}if(l)return null;switch(i=t?v(t):window,e){case"focus":(Y(i)||"true"===i.contentEditable)&&(mo=i,yo=t,vo=null);break;case"blur":vo=yo=mo=null;break;case"mousedown":go=!0;break;case"contextmenu":case"mouseup":case"dragend":return go=!1,$e(n,r);case"selectionchange":if(po)break;case"keydown":case"keyup":return $e(n,r)}return null}};kl.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),gl=g,bl=y,wl=v,kl.injectEventPluginsByName({SimpleEventPlugin:ao,EnterLeaveEventPlugin:Li,ChangeEventPlugin:Ni,SelectEventPlugin:bo,BeforeInputEventPlugin:Kl});var wo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Eo=void 0,ko=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!==wo.svg||"innerHTML"in e)e.innerHTML=t;else{for((Eo=Eo||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Eo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),xo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},To=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(e){To.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xo[t]=xo[e]})});var _o=il({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Co=null,So=null,Po="function"==typeof setTimeout?setTimeout:void 0,No="function"==typeof clearTimeout?clearTimeout:void 0;new Set;var Mo=[],Ro=-1,Do={},Io={current:Do},Oo={current:!1
},Fo=Do,zo=ol.unstable_runWithPriority,Uo=ol.unstable_scheduleCallback,Ao=ol.unstable_cancelCallback,Lo=ol.unstable_shouldYield,jo=ol.unstable_requestPaint,Wo=ol.unstable_now,Bo=ol.unstable_getCurrentPriorityLevel,Vo=ol.unstable_ImmediatePriority,Ho=ol.unstable_UserBlockingPriority,Yo=ol.unstable_NormalPriority,Qo=ol.unstable_LowPriority,$o=ol.unstable_IdlePriority,qo={},Ko=void 0!==jo?jo:function(){},Go=null,Xo=null,Zo=!1,Jo=Wo(),ea=1e4>Jo?Wo:function(){return Wo()-Jo},ta={current:null},na=null,ra=null,la=null,ia=!1,oa=ni.ReactCurrentBatchConfig,aa=(new ll.Component).refs,ua={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Ne(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ar(),l=oa.suspense;(l=Wt(r=ur(r,e,l),l)).payload=t,null!=n&&(l.callback=n),Vt(e,l),cr(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ar(),l=oa.suspense;(l=Wt(r=ur(r,e,l),l)).tag=1,l.payload=t,null!=n&&(l.callback=n),Vt(e,l),cr(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ar(),r=oa.suspense;(r=Wt(n=ur(n,e,r),r)).tag=2,null!=t&&(r.callback=t),Vt(e,r),cr(e,n)}},ca=Array.isArray,sa=rn(!0),fa=rn(!1),da={},pa={current:da},ha={current:da},ma={current:da},ya=1,va=1,ga=2,ba={current:0},wa=0,Ea=2,ka=4,xa=8,Ta=16,_a=32,Ca=64,Sa=128,Pa=ni.ReactCurrentDispatcher,Na=0,Ma=null,Ra=null,Da=null,Ia=null,Oa=null,Fa=null,za=0,Ua=null,Aa=0,La=!1,ja=null,Wa=0,Ba={readContext:At,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useResponder:fn},Va={readContext:At,useCallback:function(e,t){return mn().memoizedState=[e,void 0===t?null:t],e},useContext:At,useEffect:function(e,t){return wn(516,Sa|Ca,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,wn(4,ka|_a,kn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wn(4,ka|_a,e,t)},useMemo:function(e,t){var n=mn();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Tn.bind(null,Ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},mn().memoizedState=e},useState:function(e){var t=mn();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:vn,lastRenderedState:e}).dispatch=Tn.bind(null,Ma,e),[t.memoizedState,e]},useDebugValue:xn,useResponder:Pe},Ha={readContext:At,useCallback:function(e,t){var n=yn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&dn(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:At,useEffect:function(e,t){return En(516,Sa|Ca,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,En(4,ka|_a,kn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return En(4,ka|_a,e,t)},useMemo:function(e,t){var n=yn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&dn(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:gn,useRef:function(){return yn().memoizedState},useState:function(e){return gn(vn,e)},useDebugValue:xn,useResponder:Pe},Ya=null,Qa=null,$a=!1,qa=ni.ReactCurrentOwner,Ka=!1,Ga={},Xa=void 0,Za=void 0,Ja=void 0,eu=void 0;Xa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(20===n.tag)e.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child["return"]=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n["return"]||n["return"]===t)return;n=n["return"]}n.sibling["return"]=n["return"],n=n.sibling}},Za=function(){},Ja=function(e,t,n,r,l){var i=e.memoizedProps;if(i!==r){var o=t.stateNode;switch(ln(pa.current),e=null,n){case"input":i=ue(o,i),r=ue(o,r),e=[];break;case"option":i=Ke(o,i),r=Ke(o,r),e=[];break;case"select":i=il({},i,{value:void 0}),r=il({},r,{value:void 0}),e=[];break;case"textarea":i=Xe(o,i),r=Xe(o,r),e=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(o.onclick=ct)}ot(n,r),o=n=void 0;var a=null;for(n in i)if(!r.hasOwnProperty(n)&&i.hasOwnProperty(n)&&null!=i[n])if("style"===n){var u=i[n];for(o in u)u.hasOwnProperty(o)&&(a||(a={}),a[o]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(fl.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=i?i[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(a||(a={}),a[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(a||(a={}),a[o]=c[o])}else a||(e||(e=[]),e.push(n,a)),a=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(fl.hasOwnProperty(n)?(null!=c&&ut(l,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}a&&(e=e||[]).push("style",a),l=e,(t.updateQueue=l)&&Hn(t)}},eu=function(e,t,n,r){n!==r&&Hn(t)};var tu="function"==typeof WeakSet?WeakSet:Set,nu="function"==typeof WeakMap?WeakMap:Map,ru=Math.ceil,lu=ni.ReactCurrentDispatcher,iu=ni.ReactCurrentOwner,ou=0,au=8,uu=16,cu=32,su=0,fu=1,du=2,pu=3,hu=4,mu=ou,yu=null,vu=null,gu=0,bu=su,wu=1073741823,Eu=1073741823,ku=null,xu=!1,Tu=0,_u=500,Cu=null,Su=!1,Pu=null,Nu=null,Mu=!1,Ru=null,Du=90,Iu=0,Ou=null,Fu=0,zu=null,Uu=0,Au=0,Lu=void 0;Lu=function(e,t,n){var l=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||Oo.current)Ka=!0;else if(l<n){switch(Ka=!1,t.tag){case 3:Ln(t),Mn();break;case 5:if(un(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:yt(t.type)&&Et(t);break;case 4:on(t,t.stateNode.containerInfo);break;case 10:Ot(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(l=t.child.childExpirationTime)&&l>=n?jn(e,t,n):(ht(ba,ba.current&ya,t),null!==(t=Vn(e,t,n))?t.sibling:null);ht(ba,ba.current&ya,t);break;case 19:if(l=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(l)return Bn(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ht(ba,ba.current,t),!l)return null}return Vn(e,t,n)}}else Ka=!1;switch(t.expirationTime=0,t.tag){case 2:if(l=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=mt(t,Io.current),Ut(t,n),i=pn(null,t,l,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,hn(),yt(l)){var o=!0;Et(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=l.getDerivedStateFromProps;"function"==typeof a&&Gt(t,l,a,e),i.updater=ua,t.stateNode=i,i._reactInternalFiber=t,en(t,l,e,n),t=An(null,t,l,!0,o,n)}else t.tag=0,Rn(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=Dt(i),t.type=i,o=t.tag=zr(i),e=Rt(i,e),o){case 0:t=zn(null,t,i,e,n);break;case 1:t=Un(null,t,i,e,n);break;case 11:t=Dn(null,t,i,e,n);break;case 14:t=In(null,t,i,Rt(i.type,e),l,n);break;default:throw r(Error(306),i,"")}return t;case 0:return l=t.type,i=t.pendingProps,zn(e,t,l,i=t.elementType===l?i:Rt(l,i),n);case 1:return l=t.type,i=t.pendingProps,Un(e,t,l,i=t.elementType===l?i:Rt(l,i),n);case 3:if(Ln(t),null===(l=t.updateQueue))throw r(Error(282));return i=null!==(i=t.memoizedState)?i.element:null,$t(t,l,t.pendingProps,null,n),(l=t.memoizedState.element)===i?(Mn(),t=Vn(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(Qa=dt(t.stateNode.containerInfo.firstChild),Ya=t,i=$a=!0),i?(t.effectTag|=2,t.child=fa(t,null,l,n)):(Rn(e,t,l,n),Mn()),t=t.child),t;case 5:return un(t),null===e&&Sn(t),l=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ft(l,i)?a=null:null!==o&&ft(l,o)&&(t.effectTag|=16),Fn(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Rn(e,t,a,n),t=t.child),t;case 6:return null===e&&Sn(t),null;case 13:return jn(e,t,n);case 4:return on(t,t.stateNode.containerInfo),l=t.pendingProps,null===e?t.child=sa(t,null,l,n):Rn(e,t,l,n),t.child;case 11:return l=t.type,i=t.pendingProps,Dn(e,t,l,i=t.elementType===l?i:Rt(l,i),n);case 7:return Rn(e,t,t.pendingProps,n),t.child;case 8:case 12:return Rn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(l=t.type._context,i=t.pendingProps,a=t.memoizedProps,Ot(t,o=i.value),null!==a){var u=a.value;if(0===(o=Ce(u,o)?0:0|("function"==typeof l._calculateChangedBits?l._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!Oo.current){t=Vn(e,t,n);break e}}else for(null!==(u=t.child)&&(u["return"]=t);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var s=c.firstContext;null!==s;){if(s.context===l&&0!=(s.observedBits&o)){1===u.tag&&((s=Wt(n,null)).tag=2,Vt(u,s)),u.expirationTime<n&&(u.expirationTime=n),null!==(s=u.alternate)&&s.expirationTime<n&&(s.expirationTime=n),zt(u["return"],n),c.expirationTime<n&&(c.expirationTime=n);break}s=s.next}}else a=10===u.tag&&u.type===t.type?null:u.child;if(null!==a)a["return"]=u;else for(a=u;null!==a;){if(a===t){a=null;break}if(null!==(u=a.sibling)){u["return"]=a["return"],a=u;break}a=a["return"]}u=a}}Rn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,l=(o=t.pendingProps).children,Ut(t,n),l=l(i=At(i,o.unstable_observedBits)),t.effectTag|=1,Rn(e,t,l,n),t.child;case 14:return o=Rt(i=t.type,t.pendingProps),In(e,t,i,o=Rt(i.type,o),l,n);case 15:return On(e,t,t.type,t.pendingProps,l,n);case 17:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Rt(l,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,yt(l)?(e=!0,Et(t)):e=!1,Ut(t,n),Zt(t,l,i,n),en(t,l,i,n),An(null,t,l,!0,e,n);case 19:return Bn(e,t,n)}throw r(Error(156))};var ju=null,Wu=null;Gl=function(e,t,n){switch(t){case"input":if(fe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var i=g(l);if(!i)throw r(Error(90));X(l),fe(l,i)}}}break;case"textarea":Je(e,n);break;case"select":null!=(t=n.value)&&Ge(e,!!n.multiple,t,!1)}},qr.prototype.render=function(e){if(!this._defer)throw r(Error(250));this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,l=new Kr;return Hr(e,t,null,n,null,l._onCommit),l},qr.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},qr.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(!this._defer||null===t)throw r(Error(251));if(this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var l=null,i=t;i!==this;)l=i,i=i._next;if(null===l)throw r(Error(251));l._next=i._next,this._next=t,e.firstBatch=this}if(this._defer=!1,t=n,(mu&(uu|cu))!==ou)throw r(Error(253));St(wr.bind(null,e,t)),Pt(),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},qr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Kr.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Kr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)throw r(Error(191),n);n()}}},Xr.prototype.render=Gr.prototype.render=function(e,t){var n=this._internalRoot,r=new Kr;return null!==(t=void 0===t?null:t)&&r.then(t),Yr(e,n,null,r._onCommit),r},Xr.prototype.unmount=Gr.prototype.unmount=function(e){var t=this._internalRoot,n=new Kr;return null!==(e=void 0===e?null:e)&&n.then(e),Yr(null,t,null,n._onCommit),n},Xr.prototype.createBatch=function(){var e=new qr(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},W=yr,B=vr,V=pr,Jl=function(e,t){var n=mu;mu|=2;try{return e(t)}finally{(mu=n)===ou&&Pt()}};var Bu={createPortal:tl,findDOMNode:function(e){if(null==e)e=null;else if(1!==e.nodeType){var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw r(Error(188));throw r(Error(268),Object.keys(e))}e=null===(e=De(t))?null:e.stateNode}return e},hydrate:function(e,t,n){if(!Zr(t))throw r(Error(200));return el(null,e,t,!0,n)},render:function(e,t,n){if(!Zr(t))throw r(Error(200));return el(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,l){if(!Zr(n))throw r(Error(200));if(null==e||void 0===e._reactInternalFiber)throw r(Error(38));return el(e,t,n,!1,l)},unmountComponentAtNode:function(e){if(!Zr(e))throw r(Error(40));return!!e._reactRootContainer&&(gr(function(){el(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return tl.apply(void 0,arguments)},unstable_batchedUpdates:yr,unstable_interactiveUpdates:function(e,t,n,r){return pr(),vr(e,t,n,r)},unstable_discreteUpdates:vr,unstable_flushDiscreteUpdates:pr,flushSync:function(e,t){if((mu&(uu|cu))!==ou)throw r(Error(187));var n=mu;mu|=1;try{return _t(99,e.bind(null,t))}finally{mu=n,Pt()}},unstable_createRoot:nl,unstable_createSyncRoot:rl,unstable_flushControlled:function(e){var t=mu;mu|=1;try{_t(99,e)}finally{(mu=t)===ou&&Pt()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[y,v,g,kl.injectEventPluginsByName,sl,T,function(e){f(e,x)},L,j,Le,p,Cr,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;Dr(il({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=De(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:m,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"});var Vu={"default":Bu},Hu=Vu&&Bu||Vu;e.exports=Hu["default"]||Hu},function(e,t,n){"use strict";function r(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(12)},,function(e,t){
/** @license React v0.15.0
	 * scheduler.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function n(e,t){var n=e.next;if(n===e)F=null;else{e===F&&(F=n);var r=e.previous;r.next=n,n.previous=r}e.next=e.previous=null,n=e.callback,r=A;var l=U;A=e.priorityLevel,U=e;try{var i=e.expirationTime<=t;switch(A){case 1:var o=n(i);break;case 2:case 3:case 4:o=n(i);break;case 5:o=n(i)}}catch(e){throw e}finally{A=r,U=l}if("function"==typeof o)if(t=e.expirationTime,e.callback=o,null===F)F=e.next=e.previous=e;else{o=null,i=F;do{if(t<=i.expirationTime){o=i;break}i=i.next}while(i!==F);null===o?o=F:o===F&&(F=e),(t=o.previous).next=o.previous=e,e.next=o,e.previous=t}}function r(e){if(null!==z&&z.startTime<=e)do{var t=z,n=t.next;if(t===n)z=null;else{z=n;var r=t.previous;r.next=n,n.previous=r}t.next=t.previous=null,a(t,t.expirationTime)}while(null!==z&&z.startTime<=e)}function l(e){W=!1,r(e),j||(null!==F?(j=!0,u(i)):null!==z&&c(l,z.startTime-e))}function i(e,i){j=!1,W&&(W=!1,s()),r(i),L=!0;try{if(e){if(null!==F)do{n(F,i),r(i=t.unstable_now())}while(null!==F&&!f())}else for(;null!==F&&F.expirationTime<=i;)n(F,i),r(i=t.unstable_now());return null!==F||(null!==z&&c(l,z.startTime-i),!1)}finally{L=!1}}function o(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function a(e,t){if(null===F)F=e.next=e.previous=e;else{var n=null,r=F;do{if(t<r.expirationTime){n=r;break}r=r.next}while(r!==F);null===n?n=F:n===F&&(F=e),(t=n.previous).next=n.previous=e,e.next=n,e.previous=t}}Object.defineProperty(t,"__esModule",{value:!0});var u=void 0,c=void 0,s=void 0,f=void 0,d=void 0;if(t.unstable_now=void 0,t.unstable_forceFrameRate=void 0,"undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,h=null,m=function(){if(null!==p)try{var e=t.unstable_now();p(!0,e),p=null}catch(e){throw setTimeout(m,0),e}};t.unstable_now=function(){return Date.now()},u=function(e){null!==p?setTimeout(u,0,e):(p=e,setTimeout(m,0))},c=function(e,t){h=setTimeout(e,t)},s=function(){clearTimeout(h)},f=function(){return!1},d=t.unstable_forceFrameRate=function(){}}else{var y=window.performance,v=window.Date,g=window.setTimeout,b=window.clearTimeout,w=window.requestAnimationFrame,E=window.cancelAnimationFrame;"undefined"!=typeof console&&("function"!=typeof w&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof E&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),t.unstable_now="object"==typeof y&&"function"==typeof y.now?function(){return y.now()}:function(){return v.now()};var k=!1,x=null,T=-1,_=-1,C=33.33,S=-1,P=-1,N=0,M=!1;f=function(){return t.unstable_now()>=N},d=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<e?(C=Math.floor(1e3/e),M=!0):(C=33.33,M=!1)};var R=function(){if(null!==x){var e=t.unstable_now(),n=0<N-e;try{x(n,e)||(x=null)}catch(e){throw I.postMessage(null),e}}},D=new MessageChannel,I=D.port2;D.port1.onmessage=R;var O=function(e){if(null===x)P=S=-1,k=!1;else{k=!0,w(function(e){b(T),O(e)});var n=function(){N=t.unstable_now()+C/2,R(),T=g(n,3*C)};if(T=g(n,3*C),-1!==S&&.1<e-S){var r=e-S;!M&&-1!==P&&r<C&&P<C&&(8.33>(C=r<P?P:r)&&(C=8.33)),P=r}S=e,N=e+C,I.postMessage(null)}};u=function(e){x=e,k||(k=!0,w(function(e){O(e)}))},c=function(e,n){_=g(function(){e(t.unstable_now())},n)},s=function(){b(_),_=-1}}var F=null,z=null,U=null,A=3,L=!1,j=!1,W=!1,B=d;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_scheduleCallback=function(e,n,r){var f=t.unstable_now();if("object"==typeof r&&null!==r){var d=r.delay;d="number"==typeof d&&0<d?f+d:f,r="number"==typeof r.timeout?r.timeout:o(e)}else r=o(e),d=f;if(e={callback:n,priorityLevel:e,startTime:d,expirationTime:r=d+r,next:null,previous:null},d>f){if(r=d,null===z)z=e.next=e.previous=e;else{n=null;var p=z;do{if(r<p.startTime){n=p;break}p=p.next}while(p!==z);null===n?n=z:n===z&&(z=e),(r=n.previous).next=n.previous=e,e.next=n,e.previous=r}null===F&&z===e&&(W?s():W=!0,c(l,d-f))}else a(e,r),j||L||(j=!0,u(i));return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(e===t)e===F?F=null:e===z&&(z=null);else{e===F?F=t:e===z&&(z=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_shouldYield=function(){var e=t.unstable_now();return r(e),null!==U&&null!==F&&F.startTime<=e&&F.expirationTime<U.expirationTime||f()},t.unstable_requestPaint=B,t.unstable_continueExecution=function(){j||L||(j=!0,u(i))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return F}},function(e,t,n){"use strict";e.exports=n(15)}]),function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("react"),require("react-dom"),require("react-dom/server")):"function"==typeof define&&define.amd?define(["react","react-dom","react-dom/server"],factory):"object"==typeof exports?exports.ReactRailsUJS=factory(require("react"),require("react-dom"),require("react-dom/server")):root.ReactRailsUJS=factory(root.React,root.ReactDOM,root.ReactDOMServer)}(this,function(__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_4__,__WEBPACK_EXTERNAL_MODULE_5__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module["default"]}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=6)}([function(module,exports){var topLevel="undefined"==typeof window?this:window;module.exports=function(className){var constructor;return constructor=topLevel[className],constructor||(constructor=eval(className)),constructor&&constructor["default"]&&(constructor=constructor["default"]),constructor}},function(module,exports,__webpack_require__){var nativeEvents=__webpack_require__(7),pjaxEvents=__webpack_require__(8),turbolinksEvents=__webpack_require__(9),turbolinksClassicDeprecatedEvents=__webpack_require__(11),turbolinksClassicEvents=__webpack_require__(10);module.exports=function(ujs){ujs.handleEvent&&("undefined"!=typeof Turbolinks&&"undefined"!=typeof Turbolinks.EVENTS&&turbolinksClassicEvents.teardown(ujs),turbolinksEvents.teardown(ujs),turbolinksClassicDeprecatedEvents.teardown(ujs),pjaxEvents.teardown(ujs),nativeEvents.teardown(ujs)),"addEventListener"in window?(ujs.handleEvent=function(eventName,callback){document.addEventListener(eventName,callback)},ujs.removeEvent=function(eventName,callback){document.removeEventListener(eventName,callback)}):(ujs.handleEvent=function(eventName,callback){window.attachEvent(eventName,callback)},ujs.removeEvent=function(eventName,callback){window.detachEvent(eventName,callback)}),"undefined"!=typeof Turbolinks&&Turbolinks.supported?"undefined"!=typeof Turbolinks.EVENTS?turbolinksClassicEvents.setup(ujs):"undefined"!=typeof Turbolinks.controller?turbolinksEvents.setup(ujs):turbolinksClassicDeprecatedEvents.setup(ujs):"undefined"!=typeof $&&"function"==typeof $.pjax?pjaxEvents.setup(ujs):nativeEvents.setup(ujs)}},function(module,exports,__webpack_require__){var fromGlobal=__webpack_require__(0),fromRequireContext=__webpack_require__(12);module.exports=function(reqctx){var fromCtx=fromRequireContext(reqctx);return function(className){var component;try{component=fromCtx(className)}catch(firstErr){try{component=fromGlobal(className)}catch(secondErr){console.error(firstErr),console.error(secondErr)}}return component}}},function(module){module.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(module){module.exports=__WEBPACK_EXTERNAL_MODULE_4__},function(module){module.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(module,exports,__webpack_require__){var React=__webpack_require__(3),ReactDOM=__webpack_require__(4),ReactDOMServer=__webpack_require__(5),detectEvents=__webpack_require__(1),constructorFromGlobal=__webpack_require__(0),constructorFromRequireContextWithGlobalFallback=__webpack_require__(2),ReactRailsUJS={CLASS_NAME_ATTR:"data-react-class",PROPS_ATTR:"data-react-props",RENDER_ATTR:"data-hydrate",CACHE_ID_ATTR:"data-react-cache-id",TURBOLINKS_PERMANENT_ATTR:"data-turbolinks-permanent",jQuery:"undefined"!=typeof window&&"undefined"!=typeof window.jQuery&&window.jQuery,components:{},findDOMNodes:function(searchSelector){var selector,parent,classNameAttr=ReactRailsUJS.CLASS_NAME_ATTR;switch(typeof searchSelector){case"undefined":selector="["+classNameAttr+"]",parent=document;break;case"object":selector="["+classNameAttr+"]",parent=searchSelector;break;case"string":selector=searchSelector+"["+classNameAttr+"], "+searchSelector+" ["+classNameAttr+"]",parent=document}return ReactRailsUJS.jQuery?ReactRailsUJS.jQuery(selector,parent):parent.querySelectorAll(selector)},getConstructor:constructorFromGlobal,useContext:function(requireContext){this.getConstructor=constructorFromRequireContextWithGlobalFallback(requireContext)},serverRender:function(renderFunction,componentName,props){var componentClass=this.getConstructor(componentName),element=React.createElement(componentClass,props);return ReactDOMServer[renderFunction](element)},mountComponents:function(searchSelector){for(var ujs=ReactRailsUJS,nodes=ujs.findDOMNodes(searchSelector),i=0;i<nodes.length;++i){var node=nodes[i],className=node.getAttribute(ujs.CLASS_NAME_ATTR),constructor=ujs.getConstructor(className),propsJson=node.getAttribute(ujs.PROPS_ATTR),props=propsJson&&JSON.parse(propsJson),hydrate=node.getAttribute(ujs.RENDER_ATTR),cacheId=node.getAttribute(ujs.CACHE_ID_ATTR),turbolinksPermanent=node.hasAttribute(ujs.TURBOLINKS_PERMANENT_ATTR);if(!constructor){var message="Cannot find component: '"+className+"'";throw console&&console.log&&console.log("%c[react-rails] %c"+message+" for element","font-weight: bold","",node),new Error(message+". Make sure your component is available to render.")}var component=this.components[cacheId];component===undefined&&(component=React.createElement(constructor,props),turbolinksPermanent&&(this.components[cacheId]=component)),component=hydrate&&"function"==typeof ReactDOM.hydrate?ReactDOM.hydrate(component,node):ReactDOM.render(component,node)}},unmountComponents:function(searchSelector){for(var nodes=ReactRailsUJS.findDOMNodes(searchSelector),i=0;i<nodes.length;++i){var node=nodes[i];ReactDOM.unmountComponentAtNode(node)}},detectEvents:function(){detectEvents(this)},handleMount:function(e){var target=undefined;e&&e.target&&(target=e.target),ReactRailsUJS.mountComponents(target)},handleUnmount:function(e){var target=undefined;e&&e.target&&(target=e.target),ReactRailsUJS.unmountComponents(target)}};"undefined"!=typeof window&&ReactRailsUJS.detectEvents(),self.ReactRailsUJS=ReactRailsUJS,module.exports=ReactRailsUJS},function(module){module.exports={setup:function(ujs){"addEventListener"in window?ujs.handleEvent("DOMContentLoaded",ujs.handleMount):ujs.handleEvent("onload",ujs.handleMount)},teardown:function(ujs){ujs.removeEvent("DOMContentLoaded",ujs.handleMount),ujs.removeEvent("onload",ujs.handleMount)}}},function(module){module.exports={setup:function(ujs){ujs.handleEvent("ready",ujs.handleMount),ujs.handleEvent("pjax:end",ujs.handleMount),ujs.handleEvent("pjax:beforeReplace",ujs.handleUnmount)},teardown:function(ujs){ujs.removeEvent("ready",ujs.handleMount),ujs.removeEvent("pjax:end",ujs.handleMount),ujs.removeEvent("pjax:beforeReplace",ujs.handleUnmount)}}},function(module){module.exports={setup:function(ujs){ujs.handleEvent("turbolinks:load",ujs.handleMount),ujs.handleEvent("turbolinks:before-render",ujs.handleUnmount)},teardown:function(ujs){ujs.removeEvent("turbolinks:load",ujs.handleMount),ujs.removeEvent("turbolinks:before-render",ujs.handleUnmount)}}},function(module){module.exports={setup:function(ujs){ujs.handleEvent(Turbolinks.EVENTS.CHANGE,ujs.handleMount),ujs.handleEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,ujs.handleUnmount)},teardown:function(ujs){ujs.removeEvent(Turbolinks.EVENTS.CHANGE,ujs.handleMount),ujs.removeEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,ujs.handleUnmount)}}},function(module){module.exports={setup:function(ujs){Turbolinks.pagesCached(0),ujs.handleEvent("page:change",ujs.handleMount),ujs.handleEvent("page:receive",ujs.handleUnmount)},teardown:function(ujs){ujs.removeEvent("page:change",ujs.handleMount),ujs.removeEvent("page:receive",ujs.handleUnmount)}}},function(module){module.exports=function(reqctx){return function(className){var parts=className.split("."),filename=parts.shift(),keys=parts,component=reqctx("./"+filename);return keys.forEach(function(k){component=component[k]}),component.__esModule&&(component=component["default"]),component}}}])});var react_utils={humanize:function(property){return property.toString().toLowerCase().replace(/[_-]/g," ").replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})}};Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(predicate){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return value;return undefined}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(predicate){"use strict";if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return i;return-1},enumerable:!1,configurable:!1,writable:!1});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ApiCount=function(_React$Component){function ApiCount(props){_classCallCheck(this,ApiCount),_get(Object.getPrototypeOf(ApiCount.prototype),"constructor",this).call(this,props),this.state={data:null}}return _inherits(ApiCount,_React$Component),_createClass(ApiCount,[{key:"componentDidMount",value:function(){this.props.url&&this.getData()}},{key:"getData",value:function(){var that=this;$.getJSON(this.props.url,null,function(data){that.setState({data:data})})}},{key:"render",value:function(){return this.state.data?React.createElement("div",null,React.createElement("div",{className:"value"},this.state.data.total," ",this.props.units)):React.createElement("div",{className:"loading value"},"Loading...")}}]),ApiCount}(React.Component),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Article=function(_React$Component){function Article(){_classCallCheck(this,Article),_get(Object.getPrototypeOf(Article.prototype),"constructor",this).apply(this,arguments)}return _inherits(Article,_React$Component),_createClass(Article,[{key:"getOptions",value:function(){var options=this.props.options;return void 0!==options&&null!=options?options:{}}},{key:"render",value:function(){var detail_item_component=window[this.props.list_item+"Detail"],sidebar_component=window[this.props.list_item+"Sidebar"];return React.createElement("article",{className:"grid_list_slide"},React.createElement(detail_item_component,_extends({item:this.props.article,hide_detail:this.props.hide_detail,change_title:this.props.change_title,options:this.getOptions(),images_loaded:this.props.images_loaded},this.props)),this.props.detail_image_loaded?React.createElement(sidebar_component,_extends({item:this.props.article,initial_items:this.props.initial_items,images_loaded:this.props.images_loaded},this.props,{"class":"grid_list_sidebar"})):null)}}]),Article}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ArticleNav=function(_React$Component){function ArticleNav(props){_classCallCheck(this,ArticleNav),_get(Object.getPrototypeOf(ArticleNav.prototype),"constructor",this).call(this,props);var scroll_value=this.getScrollValue();this.state={scroll_value:scroll_value,detail_centered:!0}}return _inherits(ArticleNav,_React$Component),_createClass(ArticleNav,[{key:"getScrollValue",value:function(){var banner=$("section.main_feature").length>0?$("section.main_feature"):$(".custom_banner_container"),scroll_value=0,custom_scroll=0;return this.props.options&&"undefined"!=this.props.options.custom_scroll&&(custom_scroll=parseFloat(this.props.options.custom_scroll),isNaN(custom_scroll)&&(custom_scroll=.6),banner.length&&(scroll_value=(banner[0].offsetHeight-$("nav.site_nav")[0].offsetHeight)*custom_scroll)),scroll_value}},{key:"componentDidMount",value:function(){var that=this;"undefined"!=this.props.options.custom_scroll&&1==this.props.options.custom_scroll&&window.addEventListener("resize",function(){that.setState({scroll_value:that.getScrollValue()},function(){console.log("resizing")})})}},{key:"onClickPreviousItem",value:function(e){var _this=this;this.state.detail_centered&&function(){_this.setState({detail_centered:!1});var that=_this;e.preventDefault(),_this.slidePrev(function(){that.props.selected_item(that.props.previous_item,function(){that.slideFromLeft()})}),_this.state.scroll_value?$("html, body").animate({scrollTop:_this.state.scroll_value+"px"},700):window.scroll(0,0)}()}},{key:"onClickNextItem",value:function(e){var _this2=this;this.state.detail_centered&&function(){_this2.setState({detail_centered:!1});var that=_this2;e.preventDefault(),_this2.slideNext(function(){that.props.selected_item(that.props.next_item,function(){that.slideFromRight()})}),_this2.state.scroll_value?$("html, body").animate({scrollTop:_this2.state.scroll_value+"px"},700):window.scroll(0,0)}()}},{key:"slideFromRight",value:function(){var that=this;$("article.grid_list_slide").css({left:"25%",opacity:0});var try_slide=setInterval(function(){that.props.detail_image_loaded&&(clearInterval(try_slide),$("article.grid_list_slide").animate({left:"0",opacity:1},200,function(){that.setState({detail_centered:!0})}))},20);setTimeout(function(){var loading=$(".detail_loading");loading.length>0&&loading.spin(main.spinner_opts)},2e3)}},{key:"slideFromLeft",value:function(){var that=this;$("article.grid_list_slide").css({left:"-25%",opacity:0});var try_slide=setInterval(function(){that.props.detail_image_loaded&&(clearInterval(try_slide),$("article.grid_list_slide").animate({left:"0",opacity:1},200,function(){that.setState({detail_centered:!0})}))},20);setTimeout(function(){var loading=$(".detail_loading");loading.length>0&&loading.spin(main.spinner_opts)},2e3)}},{key:"slideNext",value:function(callback){$("article.grid_list_slide").animate({left:"-25%",opacity:0},200,callback)}},{key:"slidePrev",value:function(callback){$("article.grid_list_slide").animate({left:"25%",opacity:0},200,callback)}},{key:"getPreviousHTML",value:function(){var that=this,previous_item=that.props.previous_item;if(previous_item){var image_src=previous_item.list_image_src;return"undefined"!=typeof that.props.options&&that.props.options.external_asset_url&&(image_src=that.props.options.external_asset_url+image_src),React.createElement("a",{onClick:function(e){that.onClickPreviousItem(e)},href:"#",className:"article_nav_block prev"},React.createElement("div",{className:"link_box"},React.createElement("img",{src:"/assets/arrow_left.jpg",alt:"Previous Article"})),React.createElement("div",{className:"article_details",id:"prev_details"},React.createElement("div",{className:"preview_image"},React.createElement("img",{alt:previous_item.job_title,src:image_src})),React.createElement("div",{className:"title"},previous_item.name)))}return null}},{key:"getNextHTML",value:function(){var that=this,next_item=that.props.next_item;if(next_item){var image_src=next_item.list_image_src;return"undefined"!=typeof that.props.options&&that.props.options.external_asset_url&&(image_src=that.props.options.external_asset_url+image_src),React.createElement("a",{onClick:function(e){that.onClickNextItem(e)},href:"#",className:"article_nav_block next"},React.createElement("div",{className:"link_box"},React.createElement("img",{src:"/assets/arrow_right.jpg",alt:"Next Article"})),React.createElement("div",{className:"article_details",id:"next_details"},React.createElement("div",{className:"preview_image"},React.createElement("img",{alt:next_item.job_title,src:image_src})),React.createElement("div",{className:"title"},next_item.name)))}return null}},{key:"render",value:function(){return React.createElement("div",{className:"article_nav"},this.getNextHTML(),this.getPreviousHTML())}}]),ArticleNav}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},BrowseHappier=function(_React$Component){function BrowseHappier(){_classCallCheck(this,BrowseHappier),_get(Object.getPrototypeOf(BrowseHappier.prototype),"constructor",this).apply(this,arguments)}return _inherits(BrowseHappier,_React$Component),_createClass(BrowseHappier,[{key:"getIEVersion",value:function(){var agent=navigator.userAgent,reg=/MSIE\s?(\d+)(?:\.(\d+))?/i,matches=agent.match(reg);return null!=matches?{major:matches[1],minor:matches[2]}:agent.indexOf("Trident/")>0?{major:11,minor:0}:agent.indexOf("Edge/")>0?{major:12,minor:0}:{major:"-1",minor:"-1"}}},{key:"shouldBH",value:function(ie){return!(!this.props.lt||!this.props.gt)&&(ie.major<this.props.lt&&ie.major>this.props.gt)}},{key:"render",value:function(){var ie=this.getIEVersion();return this.shouldBH(ie)?React.createElement("p",{className:"browsehappy"},"You are using an ",React.createElement("strong",null,"outdated")," browser. Please ",React.createElement("a",{href:"http://browsehappy.com/"},"upgrade your browser")," to improve your experience."):null}}]),BrowseHappier}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Carousel=function(_React$Component){function Carousel(props){_classCallCheck(this,Carousel),_get(Object.getPrototypeOf(Carousel.prototype),"constructor",this).call(this,props),this.carousel=null}return _inherits(Carousel,_React$Component),_createClass(Carousel,[{key:"componentDidMount",value:function(){var show=this.props.show?this.props.show:1,infinite=!!this.props.infinite&&this.props.infinite,autoplay=!!this.props.autoplay&&this.props.autoplay,scroll=this.props.scroll?this.props.scroll:1,center=!!this.props.center&&this.props.center,initial=this.props.initial?this.props.initial:0,responsive=this.props.responsive?this.props.responsive:[{}],arrows=!!this.props.arrows&&this.props.arrows;this.props.fancybox_yt&&$(document).ready(function(){var cboxOptionsLandscape={rel:"peopleprofiles",current:"",iframe:!0,width:"80%",height:"80%",maxWidth:"960px",maxHeight:"540px",reposition:!0},cboxOptionsPortrait={rel:"peopleprofiles",current:"",iframe:!0,width:"95%",height:"53%",maxWidth:"960px",maxHeight:"540px",reposition:!0};window.innerHeight>window.innerWidth?$(".video_cbx2").colorbox(cboxOptionsPortrait,function(){$("#colorbox").addClass("cboxTransparentTheme")}):$(".video_cbx2").colorbox(cboxOptionsLandscape,function(){$("#colorbox").addClass("cboxTransparentTheme")}),$(window).resize(function(){window.innerHeight>window.innerWidth?$.colorbox.resize({width:window.innerWidth>parseInt(cboxOptionsPortrait.maxWidth)?cboxOptionsPortrait.maxWidth:cboxOptionsPortrait.width,height:window.innerHeight>parseInt(cboxOptionsPortrait.maxHeight)?cboxOptionsPortrait.maxHeight:cboxOptionsPortrait.height}):$.colorbox.resize({width:window.innerWidth>parseInt(cboxOptionsLandscape.maxWidth)?cboxOptionsLandscape.maxWidth:cboxOptionsLandscape.width,height:window.innerHeight>parseInt(cboxOptionsLandscape.maxHeight)?cboxOptionsLandscape.maxHeight:cboxOptionsLandscape.height})})}),this.carousel=$("#"+this.props.carousel_id).slick({accessibility:!0,adaptiveHeight:!1,autoplay:autoplay,autoplaySpeed:5e3,arrows:arrows,centerMode:center,centerPadding:"0",cssEase:"ease",dots:!1,draggable:!0,fade:!1,focusOnSelect:!1,easing:"linear",edgeFriction:.15,infinite:infinite,initialSlide:initial,mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:responsive,slide:"",slidesToShow:show,slidesToScroll:scroll,speed:300,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!0,vertical:!1,verticalSwiping:!1,rtl:!1}),$(window).resize()}},{key:"componentWillUnmount",value:function(){this.carousel.slick("unslick")}},{key:"buildSlide",value:function(slide){return this.props.fancybox_yt?React.createElement("div",{key:slide.id,className:"slide"},React.createElement("a",{href:slide.embed_video,className:"video_cbx2","data-fancybox-group":"videos",title:slide.title+": "+slide.body,rel:"peopleprofiles"},React.createElement("div",{className:"image_container"},React.createElement("img",{src:slide.image_src,alt:slide.alt_text}),React.createElement("img",{src:"/assets/yt_play_button.png",alt:"",className:"youtube_play_button"}))),React.createElement("div",{className:"slide_description"},React.createElement("h3",{dangerouslySetInnerHTML:{__html:slide.title}}),React.createElement("p",{className:"description_body",dangerouslySetInnerHTML:{__html:slide.body}}))):React.createElement("div",{key:slide.id,className:"slide"},React.createElement("a",{href:slide.link},React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"rollover_description"},slide.body,React.createElement("div",{className:"overlay_arrow"},React.createElement("img",{alt:"More",src:"/assets/overlay-arrow.png"}))),React.createElement("img",{src:slide.image_src,alt:slide.alt_text}))),React.createElement("div",{className:"content_title"},React.createElement("a",{href:slide.link},slide.title)))}},{key:"render",value:function(){this.props.slides;var that=this;return React.createElement("div",{id:this.props.carousel_id,className:"detail_carousel"},this.props.slides.map(function(s){return that.buildSlide(s)}))}}]),Carousel}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x2,_x3,_x4){for(var _again=!0;_again;){var object=_x2,property=_x3,receiver=_x4;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){
if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x2=parent,_x3=property,_x4=receiver,_again=!0,desc=parent=undefined}},CheckboxList=function(_React$Component){function CheckboxList(props){_classCallCheck(this,CheckboxList),_get(Object.getPrototypeOf(CheckboxList.prototype),"constructor",this).call(this,props),this.state={truncation:this.props.more_less,items:this.props.items,search_regex:null}}return _inherits(CheckboxList,_React$Component),_createClass(CheckboxList,[{key:"componentWillReceiveProps",value:function(nextProps){var that=this;if(nextProps.items!==this.state.items){var items=nextProps.items;this.props.filterable&&null!=this.state.search_regex&&(items=items.filter(function(element){return"string"!=typeof element.value?that.state.search_regex.test(element.label):that.state.search_regex.test(element.value)})),this.setState({items:items})}}},{key:"makeId",value:function(str){var delimiter=this.props.delimiter?this.props.delimiter:"-";return this.props.form_section+delimiter+str.toLowerCase().replace(/\W/g,delimiter)}},{key:"formatText",value:function(str){return"sentence"==this.props.text_format?str.charAt(0).toUpperCase()+str.slice(1).toLowerCase():"none"==this.props.text_format?str:this.titleize(str)}},{key:"blurOnEnter",value:function(e){13===e.keyCode&&(e.preventDefault(),$(e.target).blur())}},{key:"titleize",value:function(str){var words=str.split(/[\W^-]/g);return(words=words.map(function(word){return word.charAt(0).toUpperCase()+word.slice(1).toLowerCase()})).join(" ")}},{key:"changeTruncation",value:function(e){(e&&e.preventDefault(),!this.state.truncation&&this.state.items.length>20)&&document.getElementById("form_section_"+this.props.form_section).scrollIntoView(!0);this.setState({truncation:!this.state.truncation})}},{key:"filterCheckboxes",value:function(e){var search=e.target.value;if(""==search)this.setState({items:this.props.items,search_regex:null});else{var search_regex=new RegExp(search,"i"),filtered_items=this.props.items.filter(function(element){return"string"!=typeof element.value?search_regex.test(element.label):search_regex.test(element.value)});this.setState({items:filtered_items,search_regex:search_regex})}}},{key:"getShowAll",value:function(){var _this=this;return this.props.show_all?React.createElement("li",null,React.createElement("label",null,React.createElement("input",{className:"facet_checkbox",type:"checkbox",checked:0==this.props.checked_items.length,name:"show_all",value:"",onChange:function(e){_this.clearItems(e.target)}}),React.createElement("span",{className:"label_text"},"Show all"))):null}},{key:"clearItems",value:function(){var target=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(this.props.clear_items(this.props.form_section),this.props.filterable&&null!=target){this.setState({search_regex:null},function(){$(target).parents("fieldset").find('input[type="text"]').val("")})}}},{key:"whenClicked",value:function(e){this.props.when_clicked&&this.props.when_clicked(e)}},{key:"isChecked",value:function(v){return this.props.checked_items.indexOf(v)>-1}},{key:"render",value:function(){var that=this,fieldset_class=this.props.form_section;fieldset_class+=this.state.truncation?" truncated":" expanded";var show_min=that.props.show_min?that.props.show_min:7;return React.createElement("fieldset",{className:fieldset_class+" facet_section",id:"form_section_"+that.props.form_section},that.props.filterable?React.createElement("input",{className:"search_field wide filter_"+that.props.form_section,onChange:function(e){that.filterCheckboxes(e)},type:"text",placeholder:this.props.placeholder?this.props.placeholder:"filter targets",onKeyUp:this.blurOnEnter}):"",React.createElement("ul",null,this.getShowAll(),that.state.items.map(function(item,i){if("**"==item.value)return React.createElement("li",{className:i>=show_min?"truncatable ":"",key:"li_"+i},React.createElement("h5",{className:"facet_kicker",key:that.makeId(item.label)},item.label));var label_parts=item.label.split(/[\(\)]/),checkbox_class=that.props.checkbox_class?that.props.checkbox_class:"";return React.createElement("li",{className:"facetitem "+(i>=show_min?"truncatable ":"")+checkbox_class,key:"li_"+i,id:that.makeId(item.label)},React.createElement("label",null,React.createElement("input",{className:"facet_checkbox",type:"checkbox",checked:that.isChecked(item.value),name:that.makeId(item.label),value:item.value,onChange:function(e){that.whenClicked(e)}}),React.createElement("span",null,that.formatText(label_parts[0])),item.targetCount&&that.props.show_count?React.createElement("span",{className:"facetitemcount target_count"},"\t("+(that.props.formatNumber?that.props.formatNumber(item.targetCount):item.targetCount)+")"):"",label_parts.length>1?React.createElement("div",{className:"has_tooltip",title:that.titleize(label_parts[1])}):""))})),this.props.more_less&&this.state.items.length>(this.props.show_min?this.props.show_min:7)?React.createElement("a",{href:"#more-options",className:"truncation_toggle",onClick:function(e){that.changeTruncation(e)}}):"")}}]),CheckboxList}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},CherTools=function(_React$Component){function CherTools(props){_classCallCheck(this,CherTools),_get(Object.getPrototypeOf(CherTools.prototype),"constructor",this).call(this,props),this.state={open:!0,visible:!1},this.scroll_fn=null}return _inherits(CherTools,_React$Component),_createClass(CherTools,[{key:"componentDidMount",value:function(){var that,_this=this;this.props.share&&(that=_this,_this.scroll_fn=$(window).scroll(function(){that.state.visible||$(window).scrollTop()/($(document).height()-$(window).height())>.2&&that.setState({visible:!0},function(){$(".wasnt_it_good").show(500)})}))}},{key:"openWindow",value:function(url){var w=undefined,h=undefined,l=undefined,t=undefined;l=(w=window.innerWidth/2)/2,t=(h=window.innerHeight/2)/2,window.open(url,"pop","width="+w+", height="+h+", left="+l+", top="+t+", scrollbars=no")}},{key:"getShareOption",value:function(val,idx){var _this2=this;return"Facebook"==val[0]?React.createElement("div",{key:idx,className:"facebook",onClick:function(){_this2.shareFb()}}):"Twitter"==val[0]?React.createElement("div",{key:idx,className:"twitter",onClick:function(){_this2.shareTwitter()}}):"Pinterest"==val[0]?React.createElement("div",{key:idx,className:"pinterest",onClick:function(){_this2.sharePinterest()}}):"Email"==val[0]?React.createElement("div",{key:idx,className:"email",onClick:function(){_this2.shareEmail()}}):void console.log("Share not implemented.",val)}},{key:"shareFb",value:function(){var share_arr=this.getShareDetails();"undefined"!=typeof gas&&gas("send","event","share","facebook",share_arr[0]);var fb_app_id=document.head.querySelector("meta[property='fb:app_id']").getAttribute("content");if(fb_app_id){var fb_url="https://www.facebook.com/dialog/share?app_id="+fb_app_id+"&display=popup&href="+encodeURIComponent(share_arr[0]);this.openWindow(fb_url)}else this.openWindow("https://www.facebook.com/sharer/sharer.php?u="+share_arr[0])}},{key:"shareTwitter",value:function(){var share_arr=this.getShareDetails();"undefined"!=typeof gas&&gas("send","event","share","twitter",share_arr[0]);var url_params={text:share_arr[1]+" -> "+share_arr[2],url:share_arr[0]};this.openWindow("https://twitter.com/intent/tweet?"+$.param(url_params))}},{key:"sharePinterest",value:function(){var share_arr=this.getShareDetails();"undefined"!=typeof gas&&gas("send","event","share","pinterest",share_arr[0]);var image=this.props.share_image?this.props.share_image:document.head.querySelector("meta[property='og:image']").getAttribute("content"),url="http://pinterest.com/pin/create/button/?url="+share_arr[0]+"&media="+encodeURIComponent(image)+"&description="+encodeURIComponent(share_arr[1]);this.openWindow(url)}},{key:"shareEmail",value:function(){var share_arr=this.getShareDetails(),subject=encodeURIComponent(share_arr[1]),body=""+encodeURIComponent(share_arr[0]);document.location="mailto:?subject="+subject+"&body="+body}},{key:"getShareDetails",value:function(){var url=undefined,og_url=document.head.querySelector("meta[property='og:url']");url=this.props.url?this.props.url:og_url?og_url.getAttribute("content"):window.location.protocol+"//"+window.location.host+"/"+window.location.pathname+window.location.search;var share_title=undefined,og_title=document.head.querySelector("meta[property='og:title']");share_title=this.props.share_text?this.props.share_text:og_title?og_title.getAttribute("content"):document.title;var share_desc=undefined,desc=document.head.querySelector("meta[name='description']");return desc&&(share_desc=desc.getAttribute("content")),[url,share_title,share_desc]}},{key:"follow",value:function(item){"undefined"!=typeof gas&&gas("send","event","follow",item[0].toLowerCase());window.open(item[1],"_blank")}},{key:"getFollowOption",value:function(val,idx){var that=this;return React.createElement("div",{key:idx,className:val[0].toLowerCase()+" icon",onClick:function(){that.follow(val)},style:{cursor:"pointer"}},val[2]?React.createElement("img",{src:val[2],alt:"Follow on "+val[0]}):val[0])}},{key:"getNavTitle",value:function(){if(this.props.title&&""!==this.props.title)return React.createElement("div",{className:"nav_title"},this.props.title)}},{key:"toggleOpen",value:function(){this.setState({open:!this.state.open}),$(".i_found_someone").toggle(300)}},{key:"render",value:function(){var _this3=this,that=this;return this.props.share?React.createElement("div",{className:"wasnt_it_good "+(this.state.open?"all":"nothing")},React.createElement("div",{className:"i_found_someone"},this.props.share.map(function(v,i){return that.getShareOption(v,i)})),React.createElement("div",{className:"where_do_you_go "+(this.state.open?"open":"closed"),onClick:function(){return _this3.toggleOpen()}},React.createElement("span",{className:"icon arrow_down"}))):this.props.follow?React.createElement("div",{className:"social_icons paradise_is_here"},that.getNavTitle(),this.props.follow.map(function(v,i){return that.getFollowOption(v,i)})):void 0}}]),CherTools}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ComponentGallery=function(_React$Component){function ComponentGallery(props){_classCallCheck(this,ComponentGallery),_get(Object.getPrototypeOf(ComponentGallery.prototype),"constructor",this).call(this,props),this.state=this.getInitialState()}return _inherits(ComponentGallery,_React$Component),_createClass(ComponentGallery,[{key:"getInitialState",value:function(){return this.responsive_options=[{title:"mobile",width:"360px"},{title:"tablet",width:"800px"},{title:"desktop",width:"1200px"}],this.template_options=[{title:"Content Page",url_param:"template=content_page"},{title:"Feature",url_param:"template=feature"},{title:"Grid List",url_param:"template=grid_list_page"},{title:"Homepage",url_param:"template=homepage"},{title:"Overlay",url_param:"template=overlay"},{title:"Full Width",url_param:"template=full_width"}],{iframe_w:this.props.responsive?this.responsive_options[2].width:"100%",iframe_src:this.props.items.length>0?this.formatSrc(this.props.items[0].id):null,code:this.props.items.length>0?this.props.items[0].code:null,id:this.props.items.length>0?this.props.items[0].id:null,responsive_input:""}}},{key:"changeWidth",value:function(e,w){this.setState({iframe_w:w})}},{key:"changeResponsive",value:function(e){var v=e.currentTarget.value;this.setState({iframe_w:v+"px",responsive_input:v})}},{key:"getResponsiveOptions",value:function(){var _this=this;if(!this.props.responsive)return null;var that,_ret=(that=_this,{v:React.createElement("div",{className:"responsive"},React.createElement("h2",null," Responsive options "),React.createElement("div",{className:"responsive_options"},_this.responsive_options.map(function(v,i){return React.createElement("a",{key:"ro_"+i,onClick:function(e){that.changeWidth(e,v.width)}},v.title)}),React.createElement("input",{type:"number",value:_this.state.responsive_input,min:320,onChange:function(e){_this.changeResponsive(e)}})))});return"object"==typeof _ret?_ret.v:void 0}},{key:"formatSrc",value:function(id){return"/mbcms/component_gallery_items/"+this.props.parent_id+"/"+id}},{key:"changeSrc",value:function(e,id,code){this.setState({iframe_src:this.formatSrc(id),code:code,id:id})}},{key:"changeTemplate",value:function(e,url_param){var url=this.formatSrc(this.state.id)+"?"+url_param;this.setState({iframe_src:url})}},{key:"getTemplateOptions",value:function(){var that=this;return React.createElement("div",{className:"templates"},React.createElement("h2",null,"Templates"),React.createElement("div",{className:"variation_options"},this.template_options.map(function(v,i){return React.createElement("a",{key:"t_"+i,onClick:function(e){that.changeTemplate(e,v.url_param)}},v.title)})))}},{key:"getVariations",value:function(){var _this2=this;if(!(this.props.items.length>0))return null;var that,_ret2=(that=_this2,{v:React.createElement("div",{className:"variations"},React.createElement("h2",null,"Variations"),React.createElement("div",{className:"variation_options"},_this2.props.items.map(function(v,i){return React.createElement("a",{key:"v_"+i,onClick:function(e){that.changeSrc(e,v.id,v.code)}},v.title)})))});return"object"==typeof _ret2?_ret2.v:void 0}},{key:"render",value:function(){return React.createElement("div",{className:"component_gallery"},this.getResponsiveOptions(),this.getTemplateOptions(),this.getVariations(),React.createElement("div",{className:"demo"},React.createElement("iframe",{src:this.state.iframe_src,width:this.state.iframe_w,scrolling:"true"})),React.createElement("div",{className:"code"},React.createElement("h2",null,"Code"),React.createElement("textarea",{readOnly:!0,value:this.state.code,rows:5,style:{width:"50%"}})))}}]),ComponentGallery}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Countdown=function(_React$Component){function Countdown(props){_classCallCheck(this,Countdown),_get(Object.getPrototypeOf(Countdown.prototype),"constructor",this).call(this,props),this.state={countdown_html:"",completed:!1}}return _inherits(Countdown,_React$Component),_createClass(Countdown,[{key:"componentWillMount",value:function(){this.props.date&&this.startCounting()}},{key:"getDateLabel",value:function(){if(this.props.date&&this.props.show_date&&this.props.date_label)return React.createElement("div",{className:"date_label_container"},React.createElement("span",{className:"countdown_date_label",dangerouslySetInnerHTML:{__html:this.props.date_label+":"}}),React.createElement("span",{className:"countdown_end"},this.props.formatted_date));if(this.props.date_start&&this.props.show_date){var date_start=moment(this.props.date_start).utc(),date_end=moment(this.props.date_end).utc(),date_start_formatted=date_start.format("MMM. D, YYYY"),date_end_formatted=date_end.format("MMM. D, YYYY");return React.createElement("div",{className:"date_label_container"},React.createElement("span",{className:"historic_clock_date_start"},date_start_formatted),"\xa0\u2014\xa0",React.createElement("span",{className:"historic_clock_date_end"},date_end_formatted))}return null}},{key:"getDate",value:function(){if(this.props.show_date&&this.props.date)return null;if(this.props.date_start){var start=moment(this.props.date_start).utc(),end=moment(this.props.date_end).utc(),duration=moment.duration(end.diff(start)),years=this.pad2(duration.get("years")),months=this.pad2(duration.get("months")),days=this.pad2(duration.get("days")),hours=this.pad2(duration.get("hours")),minutes=this.pad2(duration.get("minutes")),seconds=this.pad2(duration.get("seconds"));return console.log(years),React.createElement("div",{className:"clock_time"},years?React.createElement("div",{className:"time_years unit"},years,React.createElement("span",{className:"time_label"},"yrs")):null,years||months?React.createElement("div",{className:"time_years unit"},months,React.createElement("span",{className:"time_label"},"mos")):null,years||months||days?React.createElement("div",{className:"time_years unit"},days,React.createElement("span",{className:"time_label"},"days")):null,years||months||days||hours?React.createElement("div",{className:"time_years unit"},hours,React.createElement("span",{className:"time_label"},"hrs")):null,years||months||days||hours||minutes?React.createElement("div",{className:"time_years unit"},minutes,React.createElement("span",{className:"time_label"},"mins")):null,React.createElement("div",{className:"time_years unit"},seconds,React.createElement("span",{className:"time_label"},"secs")))}return null}},{key:"startCounting",value:function(){var that=this;setInterval(function(){try{if(!that.state.completed){var launch=new Date(that.props.date),count_up=that.props.count_up,now=new Date;if(now<launch||count_up){var diff;Math.abs(launch.getTime()-now.getTime());diff=count_up?moment.preciseDiff(now,launch,!0):moment.preciseDiff(launch,now,!0),year_day="<div class='time_years unit'>"+that.pad2(diff.years)+"<span class='time_label'>yrs</span></div>",year_day+="<div class='time_months unit'>"+that.pad2(diff.months)+"<span class='time_label'>mos</span></div>",year_day+="<div class='time_days unit'>"+that.pad2(diff.days)+"<span class='time_label'>days</span></div>",that.setState({countdown_html:year_day+"<div class='time_hours unit'>"+that.pad2(diff.hours)+"<span class='time_label'>hrs</span></div><div class='time_minutes unit'>"+that.pad2(diff.minutes)+"<span class='time_label'>mins</span></div><div class='time_seconds unit'>"+that.pad2(diff.seconds)+"<span class='time_label'>secs</span></div></div>"})}else that.setState({countdown_html:"<div class='completed'>COMPLETED</div>",completed:!0})}}catch(e){console.log("error in countdown: "+e.message)}},1e3)}},{key:"pad2",value:function(n){return n<10?"0"+n:n}},{key:"render",value:function(){return React.createElement("div",{className:this.props.date?"countdown":"historic_clock"},React.createElement("div",{className:"dividing_line_container line_top"},this.props.subtitle?React.createElement("div",{className:"counter_subtitle"},React.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.subtitle}})):React.createElement("hr",null)),React.createElement("span",{className:"time_and_label_container"},React.createElement("div",{className:"countdown_header"},React.createElement("div",{className:"countdown_title"},this.props.title),this.getDateLabel()),this.getDate(),React.createElement("div",{className:"countdown_time",dangerouslySetInnerHTML:{__html:this.state.countdown_html}})),React.createElement("div",{className:"dividing_line_container line_bottom"},React.createElement("hr",null)))}}]),Countdown}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},DateFilter=function(_React$Component){function DateFilter(){_classCallCheck(this,DateFilter),_get(Object.getPrototypeOf(DateFilter.prototype),"constructor",this).apply(this,arguments)}return _inherits(DateFilter,_React$Component),_createClass(DateFilter,[{key:"initListeners",value:function(is_mobile){var klass=this.props.datepicker_class,that=this;$("input."+klass).datepicker({dateFormat:"yy-mm-dd",showButtonPanel:!0,showOn:is_mobile||this.props.readonly?"both":"button",buttonImage:"/assets/calendar_icon.png",buttonImageOnly:!1,buttonText:"calendar",beforeShow:function(input){return $("#ui-datepicker-div").wrap("<div class='datepicker_mask'></div>"),that.attachClickOutsideCloser(),that.onBeforeDatepickerShow(klass,input)},onChangeMonthYear:function(year,month,instance){setTimeout(function(){var buttonPane=$(instance).datepicker("widget").find(".ui-datepicker-buttonpane");$("<button>",{text:"Clear",click:function(){$.datepicker._clearDate(instance.input)}}).appendTo(buttonPane).addClass("ui-datepicker-clear ui-state-default ui-priority-primary ui-corner-all")},1)},onClose:function(d,i){$("#ui-datepicker-div").unwrap(),""==this.value?this.setAttribute("placeholder",that.props.placeholder):this.setAttribute("placeholder",""),that.props.closeDatePicker&&that.props.closeDatePicker(d,i,this)}})}},{key:"updateMinMaxValue",value:function(klass){return console.log(klass,this.props.min_date,this.props.max_date),{minDate:this.props.min_date,maxDate:this.props.max_date}}},{key:"onBeforeDatepickerShow",value:function(klass,input){var that=this;return this.props.clear&&setTimeout(function(){var buttonPane=$(input).datepicker("widget").find(".ui-datepicker-buttonpane");$("<button>",{text:"Clear",click:that.props.clear}).appendTo(buttonPane).addClass("ui-datepicker-clear ui-state-default ui-priority-primary ui-corner-all")},1),this.updateMinMaxValue(klass)}},{key:"attachClickOutsideCloser",value:function(){if(this.props.onBlur){var that=this;$(document).off("**").on("click touchstart",function(e){var elem=$(e.target);elem.hasClass("hasDatepicker")||elem.hasClass("ui-datepicker")||elem.hasClass("ui-icon")||elem.hasClass("ui-datepicker-current")||elem.hasClass("ui-datepicker-next")||elem.hasClass("ui-datepicker-prev")||$(elem).parents(".ui-datepicker").length||($(".hasDatepicker").datepicker("hide"),that.props.onBlur())})}}},{key:"componentDidMount",value:function(){var is_mobile=mb_utils.mobileAndTabletCheck();this.initListeners(is_mobile),this.disableKeyboard(is_mobile)}},{key:"disableKeyboard",value:function(is_mobile){is_mobile&&$(".calendar_input_binder input").attr("readonly",!0)}},{key:"render",value:function(){return React.createElement("div",{className:"date_option_wrapper"},React.createElement("div",{className:"calendar_input_binder"},React.createElement("label",{className:"preposition"},this.props.preposition),React.createElement("label",{className:"preposition_small"},this.props.preposition_small),React.createElement("input",{className:this.props.datepicker_class,name:this.props.input_name,type:"text",placeholder:""==this.props.date_value?this.props.placeholder:"",value:this.props.date_value,onChange:this.props.changeValue,onKeyPress:this.props.onKeyPress,readOnly:this.props.readonly})))}}]),DateFilter}(React.Component),DocumentListItem=function(props){var item=props.item,item_date=new Date(item.date),item_url=item.url,target=item.target?item.target:"_self";item_url+=props.options&&props.options.href_query_params!=undefined?"?"+props.options.href_query_params:"";var file_name_parts=item&&item.file_file_name?item.file_file_name.split("."):null,file_size=item&&item.file_info?", ("+item.file_info.match(/\(([^)]*)\)[^(]*$/)[1]+")":"",file_link_text=file_name_parts?""+file_name_parts[file_name_parts.length-1].toUpperCase()+file_size:"";return React.createElement("div",{className:"image_and_description_container document_list_container"},React.createElement("a",{href:item_url||"",target:target,style:item_url?{}:{cursor:"default"}},null!=item.list_image?React.createElement("div",{className:"list_image"},React.createElement("img",{src:item.list_image})):null,React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",null,item.title)))),React.createElement("div",{className:"list_text "+(null==item.list_image?"full_width_text":"")},item_date?React.createElement("div",{className:"document_date"},item_date.getUTCMonth()+1+"/"+item_date.getUTCDate()+"/"+item_date.getUTCFullYear()):null,React.createElement("div",{className:"content_title"},item_url?React.createElement("a",{href:item_url,target:item.body&&!item.link?"_self":target},item.title):React.createElement("div",null,item.title)),React.createElement("div",{className:"article_teaser_body"},React.createElement("div",{className:"document_description"},item.authors.length>0?React.createElement("span",{className:"document_authors"},"PI: ",item.authors.map(function(author,i){return React.createElement("span",{key:author.name},i>0?", ":null,React.createElement("a",{className:"document_author",href:author.link},author.name))})):null,React.createElement("div",{className:"document_summary"},item.short_description," "),item.file&&!item.body?React.createElement("a",{className:"document_file_link",href:item.file,target:target},file_link_text):null))))},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ESPublicationListItem=function(_React$Component){function ESPublicationListItem(){_classCallCheck(this,ESPublicationListItem),_get(Object.getPrototypeOf(ESPublicationListItem.prototype),"constructor",this).apply(this,arguments)}return _inherits(ESPublicationListItem,_React$Component),_createClass(ESPublicationListItem,[{key:"render",value:function(){var item=this.props.item,citation=item.citation?item.citation.autoLink():"",use_publication_year=!(!this.props.options||!this.props.options.use_publication_year)&&this.props.options.use_publication_year;return React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"list_text full_width_text"},use_publication_year?React.createElement("div",{className:"content_year"},item.publication_year):null,item.link?React.createElement("div",{className:"content_title"},React.createElement("a",{href:item.link,target:"_blank"},item.title)):React.createElement("div",{className:"content_title"},item.title),React.createElement("div",{className:"article_teaser_body"},React.createElement("div",{className:"citation"},React.createElement("span",{dangerouslySetInnerHTML:{__html:citation}})),item.file_src?React.createElement("a",{className:"list_link",href:item.file_src,download:item.file_file_name},"download article"):"")))}}]),ESPublicationListItem}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},EventDetail=function(_React$Component){function EventDetail(props){_classCallCheck(this,EventDetail),_get(Object.getPrototypeOf(EventDetail.prototype),"constructor",this).call(this,props);var presentations=[],documents=[];this.props.item.documents&&this.props.item.documents.map(function(v){"Presentations"==v.type||"Posters"==v.type||"Discussions"==v.type?presentations.push(v):"Downloads"==v.type&&documents.push(v)}),this.tabs=[],(documents.length>0||null!=this.props.item.body&&""!=this.props.item.body)&&this.tabs.push("Details"),presentations.length>0&&this.tabs.push("Presentations"),1==this.props.item.registration_status&&this.tabs.push("Register"),this.state={tab_name:this.tabs[0],presentations:presentations,documents:documents}}return _inherits(EventDetail,_React$Component),_createClass(EventDetail,[{key:"changeTab",value:function(name){this.setState({tab_name:name})}},{key:"changeSelectTab",value:function(e){this.setState({tab_name:e.currentTarget.value})}},{key:"getNav",value:function(){var _this=this,that=this;return this.tabs.length>1?React.createElement("nav",{className:"event_detail_nav"},React.createElement("div",{className:"desktop_event_detail_nav"},this.tabs.map(function(v,i){return React.createElement("li",{key:"tab_"+i,onClick:function(){_this.changeTab(v)},className:v==_this.state.tab_name?"current":""},that.getNavTitle(v))})),React.createElement("div",{className:"mobile_event_detail_nav"},React.createElement("select",{className:"nav_list",onChange:function(e){_this.changeSelectTab(e)},value:that.state.tab_name
},that.tabs.map(function(v,i){return React.createElement("option",{key:"tab_"+i,value:v,className:v==that.state.tab_name?"current":""},v)})))):null}},{key:"getNavTitle",value:function(title){return"Presentations"==title?title+" ("+this.state.presentations.length+")":title}},{key:"getDocuments",value:function(){var that=this;return this.state.documents.length>0?React.createElement(React.Fragment,null,this.state.documents.map(function(v,i){return React.createElement("li",{key:i},React.createElement("a",{href:v.url,download:that.props.item.title+" - "+v.title},v.title),React.createElement("p",{className:"document_description"},v.short_description))})):null}},{key:"getDocumentsSidebar",value:function(){return this.state.documents.length>0||this.props.agenda||this.props.report?React.createElement("aside",{className:"boxed"},React.createElement("h2",{className:"sidebar_title"},"Downloads"),React.createElement("ul",null,this.props.agenda?React.createElement("li",null,React.createElement("a",{href:this.props.agenda,download:this.props.item.title+" - Agenda"},"Agenda"),React.createElement("p",null)):null,this.props.report?React.createElement("li",null,React.createElement("a",{href:this.props.report,download:this.props.item.title+" - Report"},"Meeting Report"),React.createElement("p",null)):null,this.getDocuments())):null}},{key:"getDetail",value:function(){return React.createElement("div",{className:"event_detail_container"},React.createElement("h2",{className:"event_detail_header"},"About the Meeting"),React.createElement("div",{className:"clearfix",id:"primary_column"},React.createElement("div",{className:"wysiwyg_content"},React.createElement("div",{className:"event_body",dangerouslySetInnerHTML:{__html:this.props.detail.body}}))),React.createElement("div",{className:"",id:"secondary_column"},this.getDetailSidebar(),this.getDocumentsSidebar()))}},{key:"getPresentations",value:function(){return React.createElement("div",{className:"event_detail_container"},React.createElement("h2",{className:"event_detail_header"},"Presentations"),React.createElement("div",{className:"clearfix",id:"primary_column"},React.createElement(EventPresentations,{items:this.state.presentations})),React.createElement("div",{className:"",id:"secondary_column"},this.getDetailSidebar(),this.getDocumentsSidebar()))}},{key:"getRegister",value:function(){return React.createElement("div",{className:"event_detail_container"},React.createElement("h2",{className:"event_detail_header"},"Register"),React.createElement("div",{className:"clearfix",id:"primary_column"},React.createElement(EventRegistration,{event_id:this.props.item.id,authenticity_token:this.props.authenticity_token,recaptcha:this.props.recaptcha,item:this.props.item})),React.createElement("div",{className:"",id:"secondary_column"},this.getDetailSidebar(),this.getDocumentsSidebar()))}},{key:"getDetailSidebar",value:function(){if(this.props.detail.sidebar)return React.createElement("div",{className:"event_wysiwyg_sidebar",dangerouslySetInnerHTML:{__html:this.props.detail.sidebar}})}},{key:"getDetailsForTab",value:function(){switch(console.log("get details for tab",this.state.tab_name),this.state.tab_name){case"Details":return this.getDetail();case"Presentations":return this.getPresentations();case"Register":return this.getRegister();default:return console.error("Unexpected state of tabs. ",this.state.tab_name),null}}},{key:"render",value:function(){return React.createElement("div",{className:"event_detail"},this.getNav(),this.getDetailsForTab())}}]),EventDetail}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},EventListItem=function(_React$Component){function EventListItem(props){_classCallCheck(this,EventListItem),_get(Object.getPrototypeOf(EventListItem.prototype),"constructor",this).call(this,props),"undefined"!=typeof this.props.options?this.options=this.props.options:this.options=null}return _inherits(EventListItem,_React$Component),_createClass(EventListItem,[{key:"dateRange",value:function(start_date,end_date){var months=["January","February","March","April","May","June","July","August","September","October","November","December"];start_date=new Date(Date.parse(start_date)),end_date=new Date(Date.parse(end_date));return(start_date=months[start_date.getUTCMonth()]+" "+start_date.getUTCDate()+", "+start_date.getUTCFullYear())==(end_date=months[end_date.getUTCMonth()]+" "+end_date.getUTCDate()+", "+end_date.getUTCFullYear())?start_date:start_date+" - "+end_date}},{key:"getListLink",value:function(item,asset_url){return this.options&&"undefined"!=typeof this.options.no_list_link&&this.options.no_list_link?null:React.createElement("a",{className:"list_link",href:asset_url+item.link,target:asset_url.length>0?"_blank":"_self"},asset_url.length>0?React.createElement(React.Fragment,null,"view details",React.createElement("span",{className:"external_link_icon"},React.createElement("svg",{display:"inline-block",height:"11",viewBox:"0 0 11 11",width:"11",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"m5.335 4.125 1.485 1.485 2.75-2.75 1.43 1.43v-4.29h-4.29l1.375 1.375zm5.61 1.87-1.045-1.045v4.95h-8.8v-8.8h4.95l-1.1-1.1h-3.85c-.605 0-1.1.495-1.1 1.1v8.8c0 .605.495 1.1 1.1 1.1h8.8c.605 0 1.1-.495 1.1-1.1z",fill:"#388fda",transform:""})))):"view details \u203a")}},{key:"render",value:function(){var item=this.props.item,asset_url="";return this.options&&this.options.external_asset_url&&(asset_url=this.options.external_asset_url),React.createElement("div",{className:"list_content event_list_item image_and_description_container"},React.createElement("a",{href:asset_url+item.link,target:asset_url.length>0?"_blank":"_self"},item.list_image_url?React.createElement("div",{className:"list_image"},React.createElement("img",{src:asset_url+item.list_image_url,alt:item.title})):null,React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",null,item.title)))),React.createElement("div",{className:"list_text"+(item.list_image_url?"":" full_width_text")},React.createElement("div",{className:"date"},this.dateRange(item.start_date,item.end_date)),React.createElement("h3",{className:"list_title"},React.createElement("a",{href:asset_url+item.link,target:asset_url.length>0?"_blank":"_self"},item.title)),item.location?React.createElement("p",null,"Location: ",item.location):null,this.getListLink(item,asset_url)))}}]),EventListItem}(React.Component),EventPresentationListItem=function(props){var item=props.item,item_date=new Date(item.date),url=item.file&&!item.body||item.link?item.url:item.url+"?list=events";return""!=item.body&&null!=item.body||""!=item.link||0!=item.has_slides||null!=item.file||(url=null),React.createElement("li",{className:"slide"},React.createElement("div",{className:"image_and_description_container"},React.createElement("a",{href:url||"javascript:void(0)",style:url?{}:{cursor:"default"},target:item.link||item.file?"_blank":""},null!=item.list_image?React.createElement("div",{className:"list_image"},React.createElement("img",{src:item.list_image,alt:item.title})):null,React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",null,item.title)))),React.createElement("div",{className:"list_text "+(null==item.list_image?"full_width_text":"")},React.createElement("div",{className:"document_date"},item_date.getUTCMonth()+1+"/"+item_date.getUTCDate()+"/"+item_date.getUTCFullYear()),React.createElement("div",{className:"content_title"},url?React.createElement("a",{href:url,target:item.link||item.file&&!item.body?"_blank":""},item.title):React.createElement("div",null,item.title)),React.createElement("div",{className:"article_teaser_body"},React.createElement("div",{className:"document_description"},React.createElement("div",{className:"document_authors"},item.authors.length>0?React.createElement("span",{className:"document_authors"},"PI: ",item.authors.map(function(author,i){return React.createElement("span",{key:i+"-"+author.name},i>0?", ":null,React.createElement("a",{className:"document_author",href:author.link},author.name))})):null),React.createElement("div",{className:"document_contributors"},item.contributors),item.file&&!item.body?React.createElement("a",{className:"document_file_link",href:item.file,target:"_blank"},item.file_info):null)))))},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},EventPresentations=function(_React$Component){function EventPresentations(props){_classCallCheck(this,EventPresentations),_get(Object.getPrototypeOf(EventPresentations.prototype),"constructor",this).call(this,props),this.state={search:"",filtered_items:this.props.items,sort:"date_asc"}}return _inherits(EventPresentations,_React$Component),_createClass(EventPresentations,[{key:"componentDidMount",value:function(){this.filterItems()}},{key:"filterItems",value:function(){var filtered_items=this.filterBySearch();filtered_items=this.sortFilteredItems(filtered_items),this.setState({filtered_items:filtered_items})}},{key:"sortFilteredItems",value:function(filtered_items){var _this=this;return filtered_items.sort(function(a,b){if("date_asc"==_this.state.sort){if(Date.parse(a.date)>Date.parse(b.date))return 1;if(Date.parse(a.date)<Date.parse(b.date))return-1}else{if("date_desc"!=_this.state.sort)return"title_asc"==_this.state.sort?a.title>b.title?1:a.title<b.title?-1:0:"author_asc"==_this.state.sort?a.contributors>b.contributors?1:a.contributors<b.contributors?-1:0:(console.error("SORT undefined for ",_this.state.sort),0);if(Date.parse(a.date)>Date.parse(b.date))return-1;if(Date.parse(a.date)<Date.parse(b.date))return 1}})}},{key:"filterBySearch",value:function(){var search=this.state.search.toLowerCase();return""==search?this.props.items:this.props.items.filter(function(v){var in_title=v.title.toLowerCase().indexOf(search)>-1,in_author=v.contributors.toLowerCase().indexOf(search)>-1,in_short=v.short_description.toLowerCase().indexOf(search)>-1;return in_title||in_author||in_short})}},{key:"search",value:function(e){var _this2=this;console.log("search",e.currentTarget.value),this.setState({search:e.currentTarget.value},function(){_this2.filterItems()})}},{key:"sort",value:function(e){var _this3=this;console.log("sort",e.currentTarget.value),this.setState({sort:e.currentTarget.value},function(){_this3.filterItems()})}},{key:"submitSearch",value:function(e){e.preventDefault(),console.log("search")}},{key:"getFilterBar",value:function(){var _this4=this;return React.createElement("div",{className:"filter_bar_with_sort"},React.createElement("section",{className:"filter_bar"},React.createElement("div",{className:"section_search"},React.createElement("div",{className:"search_binder"},React.createElement("input",{className:"search_field",name:"search",placeholder:"search",type:"text",value:this.state.search,onKeyDown:function(e){_this4.search(e)},onChange:function(e){_this4.search(e)}}),React.createElement("input",{className:"search_submit",type:"submit",value:"",onClick:function(e){_this4.submitSearch(e)}})))),React.createElement("div",{className:"sort_container"},React.createElement("span",{className:"sort_by_label"},"Sort by"),React.createElement("select",{id:"sort",name:"sort",className:"",onChange:function(e){_this4.sort(e)},value:this.state.sort},React.createElement("option",{value:"date_asc"},"Time (Earliest to Latest)"),React.createElement("option",{value:"title_asc"},"Title A-Z"))))}},{key:"render",value:function(){return React.createElement("section",{className:"list_view"},this.getFilterBar(),React.createElement("ul",{className:"item_list"},this.state.filtered_items.map(function(v){return React.createElement(EventPresentationListItem,{item:v,key:"presentation_"+v.id})})),0==this.state.filtered_items.length?"No results":"")}}]),EventPresentations}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},EventRegistration=function(_React$Component){function EventRegistration(props){_classCallCheck(this,EventRegistration),_get(Object.getPrototypeOf(EventRegistration.prototype),"constructor",this).call(this,props),this.state={error:""},this.months=["January","February","March","April","May","June","July","August","September","October","November","December"]}return _inherits(EventRegistration,_React$Component),_createClass(EventRegistration,[{key:"componentDidMount",value:function(){$.getScript("https://www.google.com/recaptcha/api.js?onload=recaptchaLoaded&render=onload")}},{key:"onSubmit",value:function(e){var _this=this;e.preventDefault(),console.log("submit form");var check=this.checkFeedbackForm(),ok=check[0],fields_in_error=check[1];if(ok)this.setState({error:""},function(){_this.submitEventForm()});else{for(var errorString="<div id='result'><strong>Please fill in the following fields: </strong><ul class ='error_list'>",i=0;i<fields_in_error.length;i++)errorString+="<li class = 'error_list_item'>"+mb_utils.humanize(fields_in_error[i])+"</li>";errorString+="</ul><br/></div>",this.setState({error:errorString},function(){$("body, html").animate({scrollTop:0})})}}},{key:"checkFeedbackForm",value:function(){console.log("Submit button pressed");var form=document.forms.new_event_registration,fields=["first_name","last_name","phone","email","address","affiliation"],fields_in_error=[],ok=!0;try{for(var i=0;i<fields.length;i++)null==form["event_registration_"+fields[i]].value||""==form["event_registration_"+fields[i]].value?(ok=!1,$("label[for=event_registration_"+fields[i]+"]").addClass("error"),fields_in_error.push(fields[i])):$("label[for=event_registration_"+fields[i]+"]").removeClass("error");$("input:radio[name='event_registration[citizenship]']").is(":checked")||(ok=!1,fields_in_error.push("citizenship")),$(".registration_days").exists()&&($("input.registration_day").is(":checked")||(ok=!1,fields_in_error.push("dates attending")));var recaptcha=grecaptcha.getResponse();return recaptcha!=undefined&&""!=recaptcha||(ok=!1,fields_in_error.push("recaptcha")),[ok,fields_in_error]}catch(e){console.error("Error checking fields.",e.message)}}},{key:"submitEventForm",value:function(){var form=document.forms.new_event_registration,recaptcha=grecaptcha.getResponse(),data={event_registration:{first_name:form.event_registration_first_name.value,last_name:form.event_registration_last_name.value,phone:form.event_registration_phone.value,email:form.event_registration_email.value,address:form.event_registration_address.value,affiliation:form.event_registration_affiliation.value,event_id:form.event_registration_event_id.value},"g-recaptcha-response":recaptcha};try{form.submit(data,function(){console.log("Submitting form...")})}catch(e){console.log("EVENT REGISTRATION ERROR: "+e)}}},{key:"getRegistrationDays",value:function(){var _this2=this;if(this.props.item.start_date==this.props.item.end_date)return null;for(var current=new Date(this.props.item.start_date),end=new Date(this.props.item.end_date),days=[];current<=end;)days.push(new Date(current.getTime())),current.setDate(current.getDate()+1);return React.createElement("li",null,React.createElement("div",{className:"registration_day_title radio_title"},"Date(s) Attending ",React.createElement("span",{className:"required"},"*")),React.createElement("fieldset",{className:"registration_days radio_buttons"},days.map(function(v,i){return React.createElement("div",{className:"option",key:"option_"+i},React.createElement("input",{type:"checkbox",name:"event_registration[attending][]",id:_this2.formatDate(v),value:_this2.formatDate(v),className:"registration_day"}),React.createElement("label",{htmlFor:_this2.formatDate(v)},_this2.formatDate(v,!0)))})))}},{key:"formatDate",value:function(current,readable){return readable?this.months[current.getMonth()]+" "+current.getDate()+", "+current.getFullYear():current.getFullYear()+"-"+(current.getMonth()+1)+"-"+current.getDate()}},{key:"render",value:function(){var _this3=this;return React.createElement("div",null,React.createElement("div",{className:"error",dangerouslySetInnerHTML:{__html:this.state.error}}),React.createElement("form",{className:"body_form",id:"new_event_registration",action:"/events/"+this.props.event_id+"/submit_registration",acceptCharset:"UTF-8",method:"post"},React.createElement("input",{name:"utf8",type:"hidden",value:"\u2713"}),React.createElement("input",{type:"hidden",name:"authenticity_token",value:this.props.authenticity_token}),React.createElement("input",{value:this.props.event_id,type:"hidden",name:"event_registration[event_id]",id:"event_registration_event_id"}),React.createElement("p",null,"Fields with an asterisk (",React.createElement("span",{className:"required"},"*"),") are required. Registration confirmation will be sent to your email address."),React.createElement("ul",null,React.createElement("li",null,React.createElement("label",{htmlFor:"event_registration_first_name"},"First name ",React.createElement("span",{className:"required"},"*")),React.createElement("input",{type:"text",name:"event_registration[first_name]",id:"event_registration_first_name"})),React.createElement("li",null,React.createElement("label",{htmlFor:"event_registration_last_name"},"Last name ",React.createElement("span",{className:"required"},"*")),React.createElement("input",{type:"text",name:"event_registration[last_name]",id:"event_registration_last_name"})),React.createElement("li",null,React.createElement("label",{htmlFor:"event_registration_affiliation"},"Affiliation ",React.createElement("span",{className:"required"},"*")),React.createElement("input",{type:"text",name:"event_registration[affiliation]",id:"event_registration_affiliation"})),React.createElement("li",null,React.createElement("label",{htmlFor:"event_registration_address"},"Address ",React.createElement("span",{className:"required"},"*")),React.createElement("input",{type:"text",name:"event_registration[address]",id:"event_registration_address"})),React.createElement("li",null,React.createElement("label",{htmlFor:"event_registration_email"},"Email ",React.createElement("span",{className:"required"},"*")),React.createElement("input",{type:"email",name:"event_registration[email]",id:"event_registration_email"})),React.createElement("li",null,React.createElement("label",{htmlFor:"event_registration_phone"},"Phone ",React.createElement("span",{className:"required"},"*")),React.createElement("input",{type:"tel",name:"event_registration[phone]",id:"event_registration_phone"})),React.createElement("li",null,React.createElement("div",{className:"radio_title"},"US Citizen or foreign national? ",React.createElement("span",{className:"required"},"*")),React.createElement("fieldset",{className:"radio_buttons"},React.createElement("div",{className:"option"},React.createElement("input",{type:"radio",value:"us_citizen",name:"event_registration[citizenship]",id:"event_registration_citizenship_us_citizen"}),React.createElement("label",{htmlFor:"event_registration_citizenship_us_citizen"},"US Citizen")),React.createElement("div",{className:"option"},React.createElement("input",{type:"radio",value:"permanent_resident",name:"event_registration[citizenship]",id:"event_registration_citizenship_permanent_resident"}),React.createElement("label",{htmlFor:"event_registration_citizenship_permanent_resident"},"Permanent Resident")),React.createElement("div",{className:"option"},React.createElement("input",{type:"radio",value:"foreign_national",name:"event_registration[citizenship]",id:"event_registration_citizenship_foreign_national"}),React.createElement("label",{htmlFor:"event_registration_citizenship_foreign_national"},"Foreign National")))),this.getRegistrationDays(),React.createElement("li",null,React.createElement("label",{htmlFor:"event_registration_comments"},"Comments"),React.createElement("textarea",{rows:"5",name:"event_registration[comments]",id:"event_registration_comments"})),React.createElement("div",{className:"g-recaptcha","data-sitekey":this.props.recaptcha}),React.createElement("fieldset",{className:"centered"},React.createElement("input",{className:"inline_button button",name:"registration_submit",onClick:function(e){_this3.onSubmit(e)},type:"submit",value:"Submit"}),React.createElement("input",{className:"inline_button button",name:"registration_reset",type:"reset",value:"Reset"})))))}}]),EventRegistration}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x2,_x3,_x4){for(var _again=!0;_again;){var object=_x2,property=_x3,receiver=_x4;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x2=parent,_x3=property,_x4=receiver,_again=!0,desc=parent=undefined}},FacetedSearch=function(_React$Component){function FacetedSearch(props){_classCallCheck(this,FacetedSearch),_get(Object.getPrototypeOf(FacetedSearch.prototype),"constructor",this).call(this,props),this.filters=null,this.facets=null;if(this.props.filters){this.filters=JSON.parse(this.props.filters);var filtering=this.filters.filter(function(f){return""!=f[2][1]}).map(function(f){return{name:f[0],value:f[2][1]}})}else filtering=[];this.filters&&this.filters.map(function(f){if(console.log("checking param",f[0]),/^field/.test(f[0])){var field=f[0].match(/^field_(.+)/)[1],q=location.search.substr(1).split("&").filter(function(p){return new RegExp(field).test(p)});if(q.length>0)var match=q[0].match("condition_\\d+=(.+)(%3A|:)"+field),param=match?match[1]:null;else param=null}else param=mb_utils.getParam(f[0]);if(param&&""!=param){console.log("found param",param);var in_already=!1;filtering.map(function(g){g.name==f[0]&&(in_already=!0,g.value=Array.isArray(param)?param[0]:param)}),in_already||filtering.push({name:f[0],value:Array.isArray(param)?param[0]:param})}});var per_page=mb_utils.getParam("per_page"),page=mb_utils.getParam("page"),search=mb_utils.getParam("search");this.facets={};var fs,ft,fc,current_version,facet_array_object={};mb_utils.getParam("fs")||mb_utils.getParam("ft")||mb_utils.getParam("fc")?(fs=mb_utils.getParam("fs"),ft=mb_utils.getParam("ft"),fc=mb_utils.getParam("fc"),current_version=!0):mb_utils.getParam("tags")||mb_utils.getParam("facet_categories")?(fs=mb_utils.getParam("facet_search"),ft=mb_utils.getParam("tags"),fc=mb_utils.getParam("facet_categories"),current_version=!0):(fs=mb_utils.getParam("facet_search"),ft=mb_utils.getParam("facet_tags%5B%5D"),fc=this._getFacetCategoriesParam(),current_version=!1),this.props.options&&this.props.options.default_query_params&&this.props.options.default_query_params.map(function(v){""==fc&&v.fc?fc=v.fc:""==fs&&v.fs?fs=v.fs:""==ft&&v.ft&&(ft=f[ft])}),facet_array_object=this._populateFacets(fs,ft,fc,current_version);var datepicker_array_object={},datepicker_values={};this.datepickers={};var dp=mb_utils.getParam("dp");dp&&(datepicker_array_object=this._populateDatepickers(dp),datepicker_values=$.extend(!0,{},datepicker_array_object));var sort_options=this.getSortOptions(),order=this.getOrder(sort_options),opts=this.getOptions(),default_view=opts.default_view?opts.default_view:"grid_view";this.state={filtering:filtering,searching:search?search[0].replace("+"," "):"",active_search:search?search[0]:"",filters_opened:null,filters_hidden:null,grid_list_view:default_view,total:0,start_index:0,end_index:0,first_load:!0,page:page?parseInt(page[0]):0,per_page:per_page?parseInt(per_page[0]):50,order:order,page_count:0,sort_options:sort_options,active_facets:facet_array_object,active_datepickers:datepicker_array_object,datepicker_values:datepicker_values,items:[],loading:!1,current_request:null}}return _inherits(FacetedSearch,_React$Component),_createClass(FacetedSearch,[{key:"_getFacetCategoriesParam",value:function(){for(var fc_param=[],i=0;i<this.props.facet_sections.length;i++){var indexed_param=mb_utils.getParam("facet_categories%5B"+i+"%5D%5B%5D");indexed_param&&fc_param.push(indexed_param[0])}return fc_param}},{key:"_populateFacets",value:function(_fs,_ft,_fc,current_version){var facet_array_object={},that=this;if(!current_version){if(_ft&&_ft.length>1){var _ft_not_empty=_ft.filter(function(x){return""!=x});_ft=_ft_not_empty.length>0?[_ft_not_empty.join(",")]:null}if(_fc&&_fc.length>1){var _fc_not_empty=_fc.filter(function(x){return""!=x});_fc=_fc_not_empty.length>0?[_fc_not_empty.join(",")]:null}}return $.each(this.props.facet_sections,function(i,section){if(that.facets[section.name]=[],facet_array_object[section.name]=[],section.search_field&&_fs&&""!=_fs[0]){var search_facets=_fs[0].match(/\.\*\((.+)\)\.\*/)[1].split("|");$.each(search_facets,function(j,f){f=f.replace(/\+/g," "),section.checkboxes.some(function(c){return c.value==f})&&facet_array_object[section.name].push(f)})}else if(section.tags&&_ft&&_ft.length>0&&""!=_ft[0]){var tag_facets=_ft[0].split(/[,:]/g);$.each(tag_facets,function(j,f){f=f.replace(/\+/g," "),section.checkboxes.some(function(c){return c.value==f})&&facet_array_object[section.name].push(f)})}else if(_fc&&_fc.length>0&&""!=_fc[0]){var cat_facets=_fc[0].split(",");$.each(cat_facets,function(j,f){section.checkboxes.some(function(c){return c.value==parseInt(f)})&&facet_array_object[section.name].push(parseInt(f))})}else console.log("No params found for facet section '"+section.name+"'")}),facet_array_object}},{key:"_populateDatepickers",value:function(_dp){var datepicker_array_object={},fs=this.props.facet_sections.filter(function(s){return"undefined"!=typeof s.datepicker}),dps=_dp[0].split(",").filter(function(d){return""!=d});return $.each(dps,function(i,dp_param){var dp_name=dp_param.match(/^([^_]+)_/)[1],dp_value=dp_param.match(/_([^_]+)$/)[1];fs.some(function(f){return f.name==dp_name})&&(datepicker_array_object[dp_name]=dp_value)}),datepicker_array_object}},{key:"componentWillMount",value:function(){this.getData(null,this.state.page>0)}},{key:"componentDidMount",value:function(){var that=this;$("body").on("show_list_view",function(){that.setState({grid_list_view:"list_view"})}),$("body").on("show_grid_view",function(){that.setState({grid_list_view:"grid_view"})}),$(".contact_list_module").length&&(this.appendContactList(),this.setState({has_contact_list:!0})),$(window).resize(this.appendContactList)}},{key:"componentDidUpdate",value:function(prevProps){this.props.facet_sections!==prevProps.facet_sections&&(console.log("updating with new props"),this.getData())}},{key:"appendContactList",value:function(){window.innerWidth<600?$(".contact_list_module").appendTo($("#secondary_column").children(".facets_sidebar")).css("display","block"):$(".contact_list_module").appendTo($("#secondary_column")).css("display","block")}},{key:"getData",value:function(callback,maintain_current_page){this.state.loading&&this.state.current_request.abort();var that=this,params=this.getParams(maintain_current_page),current_request=$.ajax({url:"/api/v1/"+that.props.model+"/",data:params,method:"GET",dataType:"json",success:function(data){console.log("Got items successfully.... ");var d=$.extend(data,{first_load:!1,active_search:that.state.searching,loading:!1});that.setState(d),this.updateIndices(),"function"==typeof callback&&callback.call()}.bind(this),error:function(xhr,status,err){"abort"==status?that.setState({loading:!1,current_request:null}):console.error(status,err.toString())}.bind(this)});this.setState({current_request:current_request,loading:!0})}},{key:"getParams",value:function(maintain_current_page){var page_number=maintain_current_page?this.state.page:0,params={order:this.state.order,per_page:this.state.per_page,page:page_number,search:this.state.searching};$.extend(params,this.getFilters()),$.extend(params,this.getFacets());var facet_search=params.fs,facet_search_str="";$.each(facet_search,function(key,value){facet_search_str.length>0&&(facet_search_str+="+"),facet_search_str+=".*("+value+").*:"+key+":regex"}),params.fs=facet_search_str;var dp_param="";$.each(params.datepickers,function(i,dp){params["condition_"+dp.idx]=dp.value+":"+dp.field+":"+dp.condition;var val=dp.name+"_"+dp.value;dp_param+=dp_param.length>0?","+val:val}),params.dp=dp_param,delete params.datepickers,params.category=this.getCategoryParam(params);var ft=params.ft?params.ft.filter(function(t){return""!=t}).join(":"):null;params.ft=ft;var facet_cats=params.fc.map(function(fc){return fc.filter(function(c){return""!=c}).join(",")}).filter(function(c){return""!=c}).join(",");params.fc=facet_cats,mb_utils.createCookie("faceted_search_filter",$.param(params),365),window.history.replaceState(params,null,"?"+$.param(params)),delete params.ft,delete params.fs,delete params.fc,delete params.dp,delete params.filter_categories,params.tags?params.tags+=ft?":"+ft:"":params.tags=ft;var search_str=params.search||"";return facet_search_str&&(params.search+=search_str.length>0?"+"+facet_search_str:facet_search_str),params}},{key:"updateIndices",value:function(){var start_index=this.state.page*this.state.per_page,end_index=Math.min(this.state.total,start_index+this.state.per_page),page_count=Math.ceil(this.state.total/this.state.per_page);this.setState({start_index:start_index,end_index:end_index,page_count:page_count})}},{key:"getOptions",value:function(){var options=this.props.options;return void 0!==options&&null!=options?options:{}}},{key:"getCategoryParam",value:function(params){var category="",filter_cats=params.filter_categories.join(":"),facet_cats=params.fc.map(function(fc){return fc.filter(function(c){return""!=c
}).join(",")}).filter(function(c){return""!=c}).join(":");return filter_cats.length>0&&facet_cats.length>0?category=filter_cats+":"+facet_cats:0==filter_cats.length&&facet_cats.length>0?category=facet_cats:0==facet_cats.length&&filter_cats.length>0&&(category=filter_cats),category}},{key:"getFilters",value:function(){var that=this,filtering=this.state.filtering,params={},categories=[];if(this.getOptions().must_cat&&categories.push(this.getOptions().must_cat.split(",")),this.getOptions().except_cat){var except=this.getOptions().except_cat.split(",").map(function(c){return"-"+c});categories.push(except)}var conditions_count=that.props.conditions?that.props.conditions.length+1:1;return $.each(filtering,function(i,param){if(console.log("param "+param.name+": "+param.value),""!=param.value)if("date"==param.name)if("publications"==that.props.model)params["condition_"+conditions_count]=param.value+":publication_year",conditions_count+=1;else if("events"==that.props.model)if("upcoming"==param.value){var d=new Date;params["condition_"+conditions_count]=d.getFullYear().toString()+"-"+(d.getMonth()+1).toString()+"-"+d.getDate().toString()+":start_date:gte",conditions_count+=1}else params.year=param.value+":start_date";else"documents"==that.props.model?params.year=param.value+":date":params.year=param.value+":publish_date";else if("scope"==param.name&&"featured"==param.value.toLowerCase())params["condition_"+conditions_count]="1:featured",conditions_count+=1;else if("scope"==param.name&&"all"==param.value.toLowerCase());else if(/^field/.test(param.name)){var field_name=param.name.match(/^field_(.+)/)[1];params["condition_"+conditions_count]=param.value+":"+field_name,conditions_count+=1}else categories.push(param.value)}),params.filter_categories=categories,params}},{key:"changeOrder",value:function(order){this.setState({order:order},this.getData)}},{key:"changePageNumber",value:function(page,callback,maintain_scroll_position){if(console.log("faceted_search.changePageNumber page, maintain_scroll_position",page,maintain_scroll_position),page.toString()!=page)console.log("changePageNumber: page is NaN"),this.setState({page:page});else{var z_page=page-1;if(console.log("page",page,z_page),this.setState({page:z_page},function(){this.getData(callback,!0)}),!maintain_scroll_position)if((document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop)>$(".faceted_search").offset().top){var iev=mb_utils.getIEVersion();iev.major>0&&iev.major<12?document.documentElement.scrollTop=$(".faceted_search").offset().top:window.scrollTo(0,$(".faceted_search").offset().top)}}}},{key:"changePerPage",value:function(per_page){this.setState({per_page:per_page},this.getData)}},{key:"activeFilters",value:function(){var that=this,active=[];return""!=this.state.active_search&&active.push({id:"search",text:"Searching: "+this.state.active_search}),$.each(this.state.filtering,function(i,f){var n=that.getFilterName(f.name,f.value);n&&active.push({id:"filter_"+f.name,text:n})}),$.each(this.state.active_facets,function(key,val){var n=that.getActiveFacetsArray(key,val);active=active.concat(n)}),$.each(this.state.active_datepickers,function(key,val){active.push({id:"datepicker_"+key,text:key+": "+val})}),active}},{key:"getFilterName",value:function(name,value){var sel=this.filters.filter(function(s){return s[0]==name})[0];if(sel)var opt=sel[1].filter(function(o){return o[1].toString()==value})[0];return opt?titleize(singularize(name.replace("field_","").replace("_"," ")))+": "+opt[0]:""}},{key:"getActiveFacetsArray",value:function(name,value){var section=this.props.facet_sections.filter(function(s){return s.name==name})[0];if(section&&section.checkboxes)var facets=section.checkboxes.filter(function(f){return value.indexOf(f.value)>-1}).map(function(f){return{id:"facet_"+section.name+"_"+f.value,text:titleize(name)+": "+f.label}});return facets&&facets.length>0?facets:[]}},{key:"applyFilters",value:function(e){e.preventDefault(),e.stopPropagation();var name,value,params=this.state.filtering;$(e.currentTarget).is("a")?(name=$(e.currentTarget).data("for-select"),value=$(e.currentTarget).data("select-val")):(name=e.target.name,value=e.target.value);var current_filter=params.findIndex(function(p){return p.name==name});-1==current_filter?params.push({name:name,value:value}):params[current_filter].value=value,console.log("FORM PARAMS: ",params),this.setState({filtering:params},function(){console.log("FILTERING: ",this.state.filtering),this.getData(!1)})}},{key:"removeFilter",value:function(e){var filter=e.target.getAttribute("data-filter-id");if(filter){var fm=filter.match(/^([^_]+)_/);switch(fm?fm[1]:filter){case"search":this.setState({searching:""},this.getData);break;case"filter":for(var current_filters=this.state.filtering.slice(),i=0;i<current_filters.length;i++)if(current_filters[i].name==filter.match(/filter_(.+)$/)[1]){current_filters.splice(i,1);break}this.setState({filtering:current_filters},this.getData);break;case"facet":var current_facets=$.extend(!0,{},this.state.active_facets),facet_name=filter.match(/facet_([^_]+)_.+$/)[1],curr_facet_arr=current_facets[facet_name];for(i=0;i<curr_facet_arr.length;i++)if(curr_facet_arr[i].toString()==filter.match(/facet_[^_]+_(.+)$/)[1]){curr_facet_arr.splice(i,1);break}current_facets[facet_name]=curr_facet_arr,this.setState({active_facets:current_facets},this.getData);break;case"datepicker":var current_datepickers=$.extend(!0,{},this.state.active_datepickers);delete current_datepickers[filter.match(/datepicker_([^_]+)$/)[1]],this.setState({active_datepickers:current_datepickers,datepicker_values:current_datepickers},this.getData)}}}},{key:"applySearch",value:function(e,callback){this.setState({searching:e.target.value},function(){callback&&callback.call()})}},{key:"clearFilters",value:function(){var filtering=this.filters.filter(function(f){return""!=f[2][1]}).map(function(f){return{name:f[0],value:f[2][1]}});this.setState({active_facets:$.extend(!0,{},this.facets),active_datepickers:$.extend(!0,{},this.datepickers),datepicker_values:{},filtering:filtering,searching:""},this.getData)}},{key:"clearSearch",value:function(){this.setState({searching:""},function(){this.getData(!1)})}},{key:"setSearch",value:function(){this.setState({},this.getData(!1))}},{key:"getFacets",value:function(){var that=this,facets_obj={},categories=[],tags=[],search={},datepickers=[];return $.each(this.props.facet_sections,function(i,fs){if(fs.datepicker){var active=that.state.active_datepickers[fs.name];active&&datepickers.push({name:fs.name,idx:50+i,field:fs.datepicker.field,condition:fs.datepicker.condition,value:active})}else!function(){var active=that.state.active_facets[fs.name],section_categories=[],section_tags="";$.each(active,function(j,facet){fs.search_field?search[fs.search_field]?search[fs.search_field]+="|"+facet:search[fs.search_field]=facet.toString():fs.tags?section_tags+=section_tags.length>0?","+facet:facet:section_categories.push(facet)}),tags.push(section_tags),categories.push(section_categories)}()}),facets_obj.fs=search,facets_obj.fc=categories,facets_obj.ft=tags,facets_obj.datepickers=datepickers,facets_obj}},{key:"getFacetCounts",value:function(){var _this=this;if(!this.props.facet_sections)return[];var that,sections,_ret2=(that=_this,sections=_this.props.facet_sections.slice(),$.each(sections,function(i,fs){!that.state.first_load&&fs.show_count&&$.each(fs.checkboxes,function(j,box){box.targetCount=that.getCountForFacetSection(fs,box)})}),{v:sections});return"object"==typeof _ret2?_ret2.v:void 0}},{key:"getCountForFacetSection",value:function(fs,box){var _this2=this;if(!fs.search_field)return null;var items_for_facet,search_regex,_ret3=(items_for_facet=_this2.state.items,search_regex=new RegExp(box.value,"i"),{v:items_for_facet.filter(function(item){return search_regex.test(item[fs.search_field])}).length});return"object"==typeof _ret3?_ret3.v:void 0}},{key:"formatNumber",value:function(num){if(num.toString()!=num)return"";for(var numString=num.toString(),formatted="",i=0;i<numString.length;i++)(numString.length-i)%3==0&&i>0&&(formatted+=","),formatted+=numString.charAt(i);return formatted}},{key:"clearItems",value:function(section_name){var current_active_facets=$.extend(this.state.active_facets,{});current_active_facets[section_name]=[],this.setState({active_facets:current_active_facets},this.getData)}},{key:"onCheckBoxChange",value:function(e){var el=e.target,label=el.name.split("_")[0],value=/^\d+$/g.test(el.value)?parseInt(el.value):el.value;this.addRemoveCheckboxItemFromActiveFacets(label,value,el.checked)}},{key:"addRemoveCheckboxItemFromActiveFacets",value:function(label,value){var current_active_facets=$.extend(this.state.active_facets,{}),value_idx=current_active_facets[label].indexOf(value);value_idx>-1?current_active_facets[label].splice(value_idx,1):current_active_facets[label].push(value),this.setState({active_facets:current_active_facets},this.getData)}},{key:"updateActiveDatepickers",value:function(){this.setState({active_datepickers:this.state.datepicker_values},this.getData)}},{key:"clearDatepicker",value:function(name){console.log("clearDatepicker"),this.changeDatepickerValue(name,null,this.updateActiveDatepickers)}},{key:"changeDatepickerValue",value:function(name,value){var callback=arguments.length<=2||arguments[2]===undefined?null:arguments[2];console.log("changeDatepickerValue");var datepicker_values=$.extend(this.state.datepicker_values,{});value?datepicker_values[name]=value:delete datepicker_values[name],this.setState({datepicker_values:datepicker_values},function(){"function"==typeof callback&&callback.call()})}},{key:"datePickerClose",value:function(d,i,foo){if(""!=d){console.log(d,i,foo);var datepicker_values=$.extend(this.state.datepicker_values,{});datepicker_values[i.input.context.name]=d,this.setState({datepicker_values:datepicker_values},this.updateActiveDatepickers())}}},{key:"changeDatepickerOnEnter",value:function(e){e||(e=window.event),"13"==(e.keyCode||e.which)&&(console.log("changeOnEnter: enter pressed in date field"),this.updateActiveDatepickers())}},{key:"openMobileFilters",value:function(){this.setState({filters_opened:!0}),this.setState({filters_hidden:!1})}},{key:"closeMobileFilters",value:function(){this.setState({filters_opened:!1}),this.setState({filters_hidden:!0})}},{key:"toggleSection",value:function(e){$(e.target).parents(".form_section").toggleClass("open")}},{key:"scrollToTop",value:function(){}},{key:"renderFilters",value:function(){var _this3=this,opts=this.getOptions();return this.filters||this.props.search?React.createElement(FilterBar,{select_boxes:this.filters,search:this.props.search,placeholder:opts.placeholder,changeFilters:function(e){_this3.applyFilters(e)},clearSearch:function(){_this3.clearSearch()},changeSearch:function(){_this3.setSearch()},filtering:this.state.filtering,searching:this.state.searching,searchFn:function(e,c){_this3.applySearch(e,c)}}):null}},{key:"renderHeader",value:function(){var opts=this.getOptions();return React.createElement("header",{className:opts.view_toggle?"gallery_header":"gallery_header view_toggle_hidden",id:"faceted_search_header"},React.createElement("h2",{className:"article_title"},this.props.title),this.renderFilters(),opts.view_toggle?React.createElement(ViewToggle,null):"")}},{key:"renderFacetsColumn",value:function(){var that=this,facet_sections=this.props.facet_sections;return React.createElement("div",{id:"secondary_column",className:(this.state.filters_opened?"open":"")+" "+(this.state.has_contact_list?" has_contact_list":"")},React.createElement("aside",{className:"boxed facets_sidebar"},React.createElement("header",null,React.createElement("h2",null,"Filters"),React.createElement("div",{className:"mobile_filter_controls"},React.createElement("a",{className:"clear_filter",href:"javascript:void(0)","data-submit-form":"true",onClick:function(e){that.clearFilters(e)}},"Clear all"),React.createElement("a",{className:"button done",href:"javascript:void(0)",onClick:function(e){that.closeMobileFilters(e)}},"Done"))),facet_sections.map(function(fs,i){if(fs.datepicker){var min_date=fs.datepicker.min_date?fs.datepicker.min_date:null,max_date=fs.datepicker.max_date?fs.datepicker.max_date:null;if(min_date&&/datepicker/.test(min_date)){var mindf=min_date.match(/datepicker_(.+)/)[1];min_date=that.state.active_datepickers[mindf]}if(max_date&&/datepicker/.test(max_date)){var maxdf=max_date.match(/datepicker_(.+)/)[1];max_date=that.state.active_datepickers[maxdf]}return React.createElement("div",{className:"datepicker_section",key:i},React.createElement(DateFilter,{clear:function(){that.clearDatepicker(fs.name)},min_date:min_date,max_date:max_date,closeDatePicker:function(){that.datePickerClose(e)},placeholder:fs.placeholder?fs.placeholder:"yyyy-mm-dd",preposition:fs.name,preposition_small:fs.name,datepicker_class:fs.datepicker.datepicker_class?fs.datepicker.datepicker_class:"fs_datepicker",input_name:fs.name,date_value:that.state.datepicker_values[fs.name]?that.state.datepicker_values[fs.name]:"",changeValue:function(e){that.changeDatepickerValue(fs.name,e.target.value)},onKeyPress:function(){that.changeDatepickerOnEnter(e)}}))}return React.createElement("div",{className:"form_section",id:fs.id,key:i},React.createElement("hr",null),React.createElement("div",{className:"form_section_header",onClick:that.toggleSection},React.createElement("h4",null,fs.name),React.createElement("div",{className:"expand_section"},React.createElement("div",{className:"arrow_down"}))),React.createElement(CheckboxList,{key:i,items:fs.checkboxes,checked_items:that.state.active_facets[fs.name]?that.state.active_facets[fs.name]:[],when_clicked:function(e){that.onCheckBoxChange(e)},show_count:fs.show_count,show_min:fs.show_min,filterable:fs.filterable,placeholder:fs.placeholder,formatNumber:that.formatNumber,more_less:fs.more_less,form_section:fs.name,show_all:fs.show_all,clear_items:function(s){that.clearItems(s)},text_format:"none",delimiter:"_"}))})),this.getAfterFilter())}},{key:"getAfterFilter",value:function(){return this.props.options&&this.props.options.after_filter?React.createElement("div",{className:"after_filter",dangerouslySetInnerHTML:{__html:unescape(unescape(this.props.options.after_filter))}}):null}},{key:"getNoItemsText",value:function(){return this.props.no_items_text?this.props.no_items_text:this.props.options.no_items_text?this.props.options.no_items_text:"There are no items matching these criteria."}},{key:"renderItemList",value:function(){var no_items_text=this.getNoItemsText(),that=this,list_item_component=window[that.props.list_item+"ListItem"];return this.state.items.length>0?React.createElement("ul",{className:"item_list"},that.state.items.map(function(item){return React.createElement("li",{key:item.id,className:"slide"},React.createElement(list_item_component,{item:item,options:that.getOptions()}))})):this.state.first_load?"Loading...":React.createElement("div",{className:"no_items",dangerouslySetInnerHTML:{__html:no_items_text}})}},{key:"getSortOptions",value:function(){return this.getOptions().sort?this.getOptions().sort:[{label:"Date (newest)",value:"created_at desc"},{label:"Date (oldest)",value:"created_at asc"}]}},{key:"getOrder",value:function(sort_options){var order=mb_utils.getParam("order");return order?order[0].replace("+"," "):this.getOptions().order?this.getOptions().order:sort_options.length>0?sort_options[0].value:""}},{key:"render",value:function(){var _this4=this,that=this,per_page_options=[];return per_page_options=this.getOptions().per_page_options?this.getOptions().per_page_options:[{label:"10",value:10},{label:"25",value:25},{label:"50",value:50}],React.createElement("section",{className:"faceted_search grid_layout "+this.state.grid_list_view+" "+(this.state.filters_hidden?"faceted_search_hidden_filters":"")+" "+(this.props.page_class?this.props.page_class:"")+" "+(this.getOptions().klass?this.getOptions().klass:"")},React.createElement("article",null,this.renderHeader(),React.createElement("div",{id:"primary_column"},React.createElement(PaginationCount,{count:this.state.total,start_index:this.state.start_index,end_index:this.state.end_index,first_load:this.state.first_load,formatNumber:this.formatNumber}),React.createElement(PageSort,{per_page_options:per_page_options,initial_pp:this.state.per_page,sort_options:this.state.sort_options,initial_sort:this.state.order,page:this.state.page+1,count:this.state.total,changeSort:function(o){_this4.changeOrder(o)},changePage:function(page,callback,maintain_scroll_position){_this4.changePageNumber(page,callback,maintain_scroll_position)},changePerPage:function(p){_this4.changePerPage(p)},page_count:this.state.page_count,formatNumber:this.formatNumber}),React.createElement("div",{className:"mobile_filter_btn "+(this.state.total<=0?"no_results_filter":"")+" "},that.activeFilters().length>0?React.createElement("a",{className:"mobile_clear_filters",onClick:function(e){that.clearFilters(e)}},"Clear all filters"):null,React.createElement("a",{className:"button",onClick:function(e){_this4.openMobileFilters(e)}},"Filters")),that.activeFilters().length>0?React.createElement("div",{className:"filtering_results"},"Filtering:",React.createElement("span",{className:"applied_filters"},that.activeFilters().map(function(item){return React.createElement("div",{key:item.id,className:"applied_filter"},React.createElement("a",{className:"filter_remove",href:"javascript:void(0)","data-filter-id":item.id,onClick:function(e){that.removeFilter(e)}}),item.text)})),React.createElement("a",{className:"clear_filter",onClick:function(e){that.clearFilters(e)}},"Clear filters")):React.createElement("div",{className:"filtering_results"}),React.createElement("section",{className:"faceted_search_results grid_gallery"},this.renderItemList()),React.createElement("div",{className:"errors"}),React.createElement("footer",{className:"search_footer"},React.createElement("div",{className:"pagination_options"},React.createElement(PageSortPagination,{initial_pp:that.state.per_page,page:this.state.page+1,changePage:function(e){that.changePageNumber(e)},page_count:this.state.page_count,formatNumber:this.formatNumber}),React.createElement("span",{className:"scroll_to_top"},React.createElement("a",{href:"#faceted_search_header",onClick:function(){_this4.scrollToTop()}},"Back to top"))))),this.renderFacetsColumn()))}}]),FacetedSearch}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},FancyAudio=function(_React$Component){function FancyAudio(props){_classCallCheck(this,FancyAudio),_get(Object.getPrototypeOf(FancyAudio.prototype),"constructor",this).call(this,props),this.state={clip:null,playing:!1}}return _inherits(FancyAudio,_React$Component),_createClass(FancyAudio,[{key:"componentDidMount",value:function(){var that=this,audio=document.getElementById(that.props.audio_div).querySelector("audio");this.processAudio(audio),this.setState({clip:audio},function(){that.processProgressBar(audio),that.resetTextReadout(audio)})}},{key:"resetTextReadout",value:function(clip){var elapsed=document.getElementById(this.props.audio_div).querySelector(".controls .duration_elapsed"),remaining=document.getElementById(this.props.audio_div).querySelector(".controls .duration_remaining");elapsed.innerHTML=this.convertDecToTime(0),remaining.innerHTML=this.convertDecToTime(clip.duration)}},{key:"updateTextReadout",value:function(clip){var elapsed=document.getElementById(this.props.audio_div).querySelector(".controls .duration_elapsed"),remaining=document.getElementById(this.props.audio_div).querySelector(".controls .duration_remaining");"undefined"!=typeof clip.currentTime&&0!=clip.currentTime||(remaining=clip.duration,elapsed=0),elapsed.innerHTML=this.convertDecToTime(clip.currentTime),remaining.innerHTML=this.convertDecToTime(clip.duration)}},{key:"convertDecToTime",value:function(value){return isNaN(value)?"":String(parseFloat(value/60).toFixed(2)).replace(".",":")}},{key:"processAudio",value:function(audio){var timer,that=this,percent=0;audio.addEventListener("playing",function(_event){var duration=_event.target.duration;advance(duration,audio)}),audio.addEventListener("pause",function(){clearTimeout(timer)}),audio.ontimeupdate=function(){this.id;var progress_amt=this.currentTime/this.duration*100,progress=document.getElementById(that.props.audio_div).querySelector(".progress");(progress.style.width=progress_amt+"%",this.currentTime==this.duration)&&(this.currentTime=0,progress.style.width="0%",document.getElementById(that.props.audio_div).querySelector(".play_button").classList.remove("active"),that.resetTextReadout(audio),that.setState({playing:!1}))};var advance=function(duration,element){var progress=document.getElementById(that.props.audio_div).querySelector(".progress");that.updateTextReadout(audio),increment=10/duration,percent=Math.min(increment*element.currentTime*10,100),progress.style.width=percent+"%",startTimer(duration,element)},startTimer=function(duration,element){percent<100&&(timer=setTimeout(function(){advance(duration,element)},100))}}},{key:"processProgressBar",value:function(clip){function processClickTouch(mouseEvent,progressBar){console.log(mouseEvent,progressBar);var clip=that.state.clip;clip.currentTime=clip.duration*((mouseEvent.clientX-progressBar.rect.left)/(progressBar.rect.right-progressBar.rect.left)),that.updateTextReadout(clip)}var that=this,progress=document.getElementById(that.props.audio_div).querySelector(".controls .progress_bar");progress.rect=progress.getBoundingClientRect(),progress.clip=clip;var timeDrag=!1;progress.onmousedown=function(xy){timeDrag=!0,processClickTouch(xy,this)},progress.onmousemove=function(xy){timeDrag&&processClickTouch(xy,this)},progress.onmouseup=function(xy){timeDrag&&(timeDrag=!1,processClickTouch(xy,this))},progress.ontouchstart=function(xy){processClickTouch(xy,this)}}},{key:"togglePlay",value:function(e){var btn=(e=e||window.event).target,audio=document.getElementById(this.props.audio_div).querySelector("audio");audio.paused?this.setState({playing:!0},function(){btn.classList.add("active"),audio.play()}):this.setState({playing:!1},function(){btn.classList.remove("active"),audio.pause()})}},{key:"getControls",value:function(){var _this=this;return React.createElement("div",{className:"controls"},React.createElement("div",{className:"play_button",onClick:function(e){_this.togglePlay(e)}},this.getCorrectButton()),React.createElement("div",{className:"duration_elapsed"}),React.createElement("div",{className:"progress_bar"},React.createElement("div",{className:"progress"})),React.createElement("div",{className:"duration_remaining"}))}},{key:"getButtons",value:function(resource){var download=React.createElement("a",{className:"button download",href:this.props.file,download:resource.title},"DOWNLOAD"),link=resource.external_url.length>0?React.createElement("a",{className:"button link",href:resource.external_url},resource.link_text?resource.link_text:"SUBSCRIBE"):null;return React.createElement("footer",{className:"fancy_audio_footer"},download,link)}},{key:"getHeader",value:function(resource){return React.createElement("header",null,React.createElement("h3",{className:"category_title"},React.createElement("span",{className:"fancy_audio_subtitle"},resource.subtitle)),React.createElement("h2",{className:"fancy_audio_title"},resource.title))}},{key:"getDesc",value:function(resource){return React.createElement("div",{className:"fancy_audio_short_description",dangerouslySetInnerHTML:{__html:resource.short_description}})}},{key:"getCorrectButton",value:function(){return this.state.playing?React.createElement("svg",{className:"svg_icon_container",id:"pause_circle"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{d:"M0 0h39v39H0z"}),React.createElement("circle",{cx:"19.5",cy:"19.5",r:"17.5",stroke:"var(--play-stroke)",strokeWidth:"2"}),React.createElement("path",{fill:"#b9d4f0",fillRule:"nonzero",d:"M2.487 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H.43l-.086-.008C.148 10.91 0 10.752 0 10.562V.395L.01.315A.423.423 0 01.43 0zm5.88 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H6.31l-.086-.008c-.196-.037-.344-.196-.344-.386V.395l.009-.08A.423.423 0 016.31 0z",transform:"translate(15 14)"}))):React.createElement("svg",{className:"svg_icon_container",id:"play_circle"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{d:"M0 0h39v39H0z"}),React.createElement("circle",{cx:"19.5",cy:"19.5",r:"17.5",stroke:"var(--play-stroke)",strokeWidth:"2"}),React.createElement("path",{fill:"#b9d4f0",fillRule:"nonzero",d:"M25 19.5a.403.403 0 00-.195-.35l-8.217-5.078a.355.355 0 00-.214-.072c-.206 0-.374.18-.374.4 0 .016.003.03.004.046L16 24.645c.026.2.182.355.374.355.068 0 .132-.02.187-.055l.003.006 8.251-5.1-.003-.005A.404.404 0 0025 19.5z"})))}},{key:"render",value:function(){var that=this,klass=(this.props.audio_div,this.props.klass),resource=this.props.resource;return React.createElement("article",{className:"fancy_audio_container",style:{backgroundImage:"url("+resource.detail_image+")"}},React.createElement("div",{className:"audio_text_area"},that.getHeader(resource),that.getDesc(resource),React.createElement("div",{id:this.props.audio_div,className:"audio_container "+klass},that.getControls(resource),React.createElement("audio",{controls:!1,preload:"true",muted:this.props.user_muted,loop:this.props.autoloop},React.createElement("source",{src:this.props.file,type:/\.mpeg$/.test(this.props.file)?"audio/mpeg":null}),"Your browser does not support the audio tag.")),that.getButtons(resource)),React.createElement("div",{className:"gradient_container_left"}))}}]),FancyAudio}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x3,_x4,_x5){for(var _again=!0;_again;){var object=_x3,property=_x4,receiver=_x5;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x3=parent,_x4=property,_x5=receiver,_again=!0,desc=parent=undefined}},FilterBar=function(_React$Component){function FilterBar(props){_classCallCheck(this,FilterBar),_get(Object.getPrototypeOf(FilterBar.prototype),"constructor",this).call(this,props),this.state={typing:!1,search_changed:!1,advanced_filters:this.props.filtering?this.props.filtering.slice():[]},this.live_search_fn=null}return _inherits(FilterBar,_React$Component),_createClass(FilterBar,[{key:"componentDidMount",value:function(){if(this.props.advanced){for(var count=this.props.advanced_rows?this.props.advanced_rows:5,all_filters=this.state.advanced_filters.slice(),i=0;i<count;i++){var search_item=this.props.select_boxes[0][0]+i;-1==all_filters.findIndex(function(af){return af.name==search_item})&&all_filters.push({name:search_item,value:this.props.select_boxes[0][2][1],advanced:!0});var search_term="searchTerm"+i;-1==all_filters.findIndex(function(af){return af.name==search_term})&&all_filters.push({name:search_term,value:"",advanced:!0});var join_term="joinTerm"+i;-1==all_filters.findIndex(function(af){return af.name==join_term})&&all_filters.push({name:join_term,value:"",advanced:!0})}this.setState({advanced_filters:all_filters})}}},{key:"submitOnEnter",value:function(e){"Enter"===e.key?(this.props.changeSearch(e),$(e.target).blur(),this.setState({search_changed:!1})):this.setState({search_changed:!0})}},{key:"liveSearch",value:function(e){var that=this;e.persist(),this.live_search_fn&&clearTimeout(that.live_search_fn),that.setState({typing:!0},function(){that.live_search_fn=setTimeout(function(){that.props.searchFn(e,function(){that.props.changeSearch(e)}),that.setState({typing:!1})},100)}),"Enter"===e.key&&$(e.target).blur()}},{key:"changeSearch",value:function(e){var that=this;e.persist(),this.setState({search_changed:!1},function(){that.props.changeSearch(e)})}},{key:"getFilterLinkHtml",value:function(select,i,selected){var _this=this,options=select[1],selected_val="object"==typeof selected?selected.value:select[2][1],that=this;return React.createElement("div",{key:99,className:"filter_links"},React.createElement("a",{key:1e3+i,onClick:function(e){_this.props.changeFilters(e)},"data-for-select":select[0],"data-select-val":select[2][1],className:select[2][1]==selected_val?"current":""},select[2][0]),options.map(function(option,j){var option_val=Array.isArray(option)?option[1]:option;return Array.isArray(option)&&3==option.length?React.createElement("a",{key:2e3+j,href:option[1]},option[0]):React.createElement("a",{key:2e3+j,className:option_val==selected_val?"current":"",onClick:function(e){that.props.changeFilters(e)},"data-for-select":select[0],"data-select-val":option_val},Array.isArray(option)?option[0]:option)}))}},{key:"getFirstOption",value:function(select){return select[2]?React.createElement("option",{value:select[2][1]},select[2][0]):null}},{key:"getSelectHtml",value:function(select,i,selected){var _this2=this,on_change=arguments.length<=3||arguments[3]===undefined?null:arguments[3],options=select[1];return React.createElement("select",{key:i,id:select[0],name:select[0],value:"object"==typeof selected?selected.value:select[2][1],className:select[4]?select[4]:"filter",onChange:function(e){"function"==typeof on_change?on_change(e):_this2.props.changeFilters(e)}},this.getFirstOption(select),options.map(function(option,j){return React.createElement("option",{key:j,value:Array.isArray(option)?option[1]:option},Array.isArray(option)?option[0]:option)}))}},{key:"submitAdvanced",value:function(e){e.preventDefault(),this.props.advanced_submit(this.state.advanced_filters)}},{key:"setAdvancedFilters",value:function(e){var filters=this.state.advanced_filters.slice(),changed_filter_idx=filters.findIndex(function(f){return f.name==e.target.name});-1==changed_filter_idx?filters.push({name:e.target.name,value:e.target.value}):filters[changed_filter_idx].value=e.target.value,this.setState({advanced_filters:filters})}},{key:"renderAdvanced",value:function(){for(var count=arguments.length<=0||arguments[0]===undefined?5:arguments[0],rows=[],that=this,filtering=that.state.advanced_filters?that.state.advanced_filters:[],select_boxes=this.props.select_boxes.filter(function(sb){return sb[4]}),i=0;i<count;i++)rows.push(select_boxes[0].slice()),rows[i][0]+=i,rows[i][4]="filter1";return React.createElement("div",{className:"section_search"},rows.map(function(row,i){var selected=filtering.find(function(f){return f.name==row[0]}),search_param=filtering.find(function(f){return f.name=="searchTerm"+i}),selected_conjunction=filtering.find(function(f){return f.name=="joinItem"+i});return React.createElement("div",{className:"search_row",key:i},that.getSelectHtml(row,i,selected,function(e){that.setAdvancedFilters(e,i)}),React.createElement("div",{className:"search_binder"},React.createElement("input",{className:"search_field",name:"searchTerm"+i,id:"searchTerm"+i,type:"text",value:search_param?search_param.value:"",onChange:function(e){that.setAdvancedFilters(e,i)}})),i<rows.length-1?that.getSelectHtml(["joinItem"+i,[["or","or"]],["and","and"],!1,"conjunction"],i+rows.length,selected_conjunction,function(e){
that.setAdvancedFilters(e,i)}):null)}),React.createElement("footer",null,React.createElement("input",{className:"button",type:"submit",value:"Submit",onClick:this.submitAdvanced.bind(this)})))}},{key:"renderAdvancedToggle",value:function(){if(this.props.advanced)return React.createElement("a",{className:"gl_advanced_toggle",href:"#filter_bar",onClick:this.props.toggle_advanced},this.props.is_advanced?"\u203a Basic search":"\u203a Advanced search")}},{key:"render",value:function(){var that=this,filtering=that.props.filtering?that.props.filtering:[],onKeyUp=undefined;if(that.props.search&&"live"==that.props.search){var search_type="live";onKeyUp=function(e){that.liveSearch(e)}}else{search_type="normal";onKeyUp=function(e){that.submitOnEnter(e)}}var select_boxes=null;if(that.props.select_boxes)select_boxes=that.props.select_boxes.filter(function(sb){return sb.length<5||!sb[4]});return React.createElement("section",{className:"filter_bar"+(this.props.advanced?" advanced_search":""),name:"filter_bar"},this.props.advanced&&this.props.is_advanced?this.renderAdvanced(this.props.advanced_rows):React.createElement("div",{className:"section_search"},that.props.search&&("string"==typeof that.props.search&&that.props.search.match(/true|live/)||1==that.props.search)?React.createElement("div",{className:"search_binder"},React.createElement("input",{className:"search_field",name:"search",placeholder:this.props.placeholder?this.props.placeholder:"search",type:"text",value:that.props.searching,onChange:function(e){that.props.searchFn(e)},onKeyUp:onKeyUp}),"normal"==search_type&&that.state.search_changed||""==that.props.searching?React.createElement("input",{className:"search_submit",type:"submit",value:"",onClick:function(e){that.changeSearch(e)}}):React.createElement("div",{className:"search_clear",onClick:function(e){that.props.clearSearch(e)}},React.createElement("div",{className:"search_clear_icon"}))):null,select_boxes?select_boxes.map(function(select,i){var selected=filtering.find(function(f){return f.name==select[0]});return select[3]?that.getFilterLinkHtml(select,i,selected):that.getSelectHtml(select,i,selected)}):null),this.renderAdvancedToggle())}}]),FilterBar}(React.Component),FlickrGroupGallery=function(props){var api_url="https://api.flickr.com/services/rest/?method=flickr.groups.pools.getPhotos&api_key="+props.api_key+"&group_id="+props.group_id+"&per_page="+props.options.per_page+"&format=json&nojsoncallback=1";return React.createElement(PhotoGallery,{title:props.title,api_url:api_url,per_page:props.per_page})},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},GlossaryItemListItem=function(_React$Component){function GlossaryItemListItem(props){_classCallCheck(this,GlossaryItemListItem),_get(Object.getPrototypeOf(GlossaryItemListItem.prototype),"constructor",this).call(this,props),this.state={open:!1}}return _inherits(GlossaryItemListItem,_React$Component),_createClass(GlossaryItemListItem,[{key:"getCredit",value:function(){return""!=this.props.item.credit?React.createElement("div",{className:"credit"},"Source: ",React.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.item.credit}})):null}},{key:"getImageOrVideo",value:function(){return this.props.item.list_view_image_url?React.createElement("figure",{className:"glossary_image"},React.createElement("img",{src:this.props.item.list_view_image_url,alt:this.props.item.list_view_image_alt}),React.createElement("figcaption",{dangerouslySetInnerHTML:{__html:this.props.item.caption}})):this.props.item.video_embed_code?React.createElement("figure",{className:"glossary_image"},React.createElement("div",{className:"glossary_embed",dangerouslySetInnerHTML:{__html:this.props.item.video_embed_code}}),React.createElement("figcaption",{dangerouslySetInnerHTML:{__html:this.props.item.caption}})):null}},{key:"getDefinition",value:function(){var item=this.props.item;if(this.state.open)return React.createElement("div",{className:"definition"},this.getImageOrVideo(),React.createElement("p",{dangerouslySetInnerHTML:{__html:item.definition}}),this.getCredit());var def=item.short_definition?item.short_definition:item.definition;return React.createElement("div",{className:"short_def"},React.createElement("p",{dangerouslySetInnerHTML:{__html:def}}))}},{key:"getToggle",value:function(){var _this=this,item=this.props.item;return item.short_definition||item.list_view_image_url||item.video_embed_code?React.createElement("a",{className:"show_more",onClick:function(e){_this.toggleOpen(e)}},this.state.open?"- less":"+ more"):null}},{key:"toggleOpen",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var item=this.props.item;return React.createElement("div",{className:"image_and_description_container glossary_item"},React.createElement("a",{name:"item_"+item.id}),React.createElement("div",{className:"list_text"},React.createElement("h3",{className:"title"},item.title),this.getDefinition(),this.getToggle()))}}]),GlossaryItemListItem}(React.Component),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},GridListPage=function(_React$Component){function GridListPage(props){_classCallCheck(this,GridListPage),_get(Object.getPrototypeOf(GridListPage.prototype),"constructor",this).call(this,props),this.state={grid_list_view:this.props.default_view}}return _inherits(GridListPage,_React$Component),_createClass(GridListPage,[{key:"componentDidMount",value:function(){var that=this;$("body").on("show_list_view",function(){that.setState({grid_list_view:"list_view"})}),$("body").on("show_grid_view",function(){that.setState({grid_list_view:"grid_view"})}),this.props.options&&"undefined"!=this.props.options.spa&&1==this.props.options.spa&&$("body").addClass("dynamic_grid_list")}},{key:"render",value:function(){var that=this,klass=this.props.options&&1==this.props.options.spa?"grid_gallery module dynamic_grid content_page ":"grid_gallery module content_page ",padding=this.props.options&&!0===this.props.options.no_top_padding?"no_top_padding ":"",subtitle=this.props.options&&this.props.options.subtitle&&""!=this.props.options.subtitle?React.createElement("h3",{className:"grid_list_subtitle"},this.props.options.subtitle):null;return React.createElement("section",{className:klass+padding+that.state.grid_list_view},subtitle,React.createElement(GridList,that.props))}}]),GridListPage}(React.Component),GridList=function(_React$Component2){function GridList(props){_classCallCheck(this,GridList),_get(Object.getPrototypeOf(GridList.prototype),"constructor",this).call(this,props),this.filters=null,this.state=this.getInitialState()}return _inherits(GridList,_React$Component2),_createClass(GridList,[{key:"getInitialState",value:function(){var title=""!=this.props.title?this.props.title:document.title,that=this;if(this.props.filters){this.filters=JSON.parse(this.props.filters);var filtering=this.filters.filter(function(f){return!f[2]||""!=f[2][1]}).map(function(f){var value=f[2]?f[2][1]:f[1][0][1];return{name:f[0],value:value}})}else filtering=[];this.filters&&this.filters.map(function(f){console.log("checking param",f[0]);var param=null;if(that.getOptions().advanced&&1==f[4]){var rows=that.getOptions().rows?that.getOptions().rows:5;filtering=[];for(var i=0;i<rows;i++){var search_item_param=mb_utils.getParam(f[0]+i);search_item_param&&""!=search_item_param&&filtering.push({name:f[0]+i,value:Array.isArray(search_item_param)?search_item_param[0].replace("+"," "):search_item_param,advanced:!0});var search_term_param=mb_utils.getParam("searchTerm"+i);search_term_param&&""!=search_term_param&&filtering.push({name:"searchTerm"+i,value:Array.isArray(search_term_param)?search_term_param[0].replace("+"," "):search_term_param,advanced:!0});var join_item_param=mb_utils.getParam("joinItem"+i);join_item_param&&""!=join_item_param&&filtering.push({name:"joinItem"+i,value:Array.isArray(join_item_param)?join_item_param[0].replace("+"," "):join_item_param,advanced:!0})}}else if(f.length<5||!f[4]){var category_param=mb_utils.getParam(f[0]);if(category_param&&""!=category_param)param=category_param;else if(/^scope/.test(f[0])){that.getRegexParam(/^condition_\d+=1(%3A|:)featured/).length>0&&(param="featured")}else if(/^date/.test(f[0])){var date_param;if("publications"==that.props.model){if((date_param=that.getRegexParam(/^condition_\d+=\d+(%3A|:)publication_year/)).length>0){var match=date_param[0].match(/^condition_\d+=(\d+)(%3A|:)publication_year/);param=match?match[1]:null}}else if((date_param=mb_utils.getParam("year"))&&date_param.length>0){var re="events"==that.props.model?/^(\d+)(%3A|:)start_date/:/^(\d+)(%3A|:)publish_date/;match=Array.isArray(date_param)?date_param[0].match(re):date_param.match(re);param=match?match[1]:null}}else if(/^field/.test(f[0])){var field=f[0].match(/^field_(.+)/)[1],q=that.getRegexParam(field);if(q.length>0){match=q[0].match("condition_\\d+=(.+)(%3A|:)"+field);param=match?match[1]:null}}else if(/^tag/.test(f[0])){var tag_param=mb_utils.getParam("tags");if(tag_param&&tag_param.length>0){var tag_params=Array.isArray(tag_param)?tag_param[0].replace(/\+/g," ").split(":"):tag_param.replace(/\+/g," ").split(":"),tags=f[1].map(function(tag){return tag[1]}).filter(function(n){return-1!==tag_params.indexOf(n)});tags.length>0&&(param=tags[0])}}else{var categories=mb_utils.getParam("category");if(categories&&categories.length>0){var p_cats=(categories=Array.isArray(categories)?categories[0]:categories).split(":"),cats=f[1].map(function(cat){return cat[1].toString()}).filter(function(n){return-1!==p_cats.indexOf(n)});cats.length>1&&console.log("Multiple candidate categories found...setting to first option"),cats.length>0&&(param=cats[0])}}if(param&&""!=param){console.log("found param",param);var in_already=!1;filtering.map(function(g){g.name==f[0]&&(in_already=!0,g.value=Array.isArray(param)?param[0]:param)}),in_already||filtering.push({name:f[0],value:Array.isArray(param)?param[0]:param})}}});var dl=document.location.href.toString(),initial_id=parseInt(dl.slice(dl.indexOf("#")+1)),search=mb_utils.getParam("search");return{items:[],initial_items:[],page:0,per_page:this.props.per_page?this.props.per_page:40,total:0,order:this.props.order?this.props.order:"created_at desc",title:title,grid_list_url:location.pathname,grid_list_page_title:document.title,grid_list_social_image:$('meta[property="og:image"]').attr("content"),grid_list_social_description:$('meta[name="description"]').attr("content"),grid_list_page_updated_at:$('meta[property="og:updated_time"]').attr("content"),article:null,filtering:filtering,searching:search?search[0].replace("+"," "):"",initial_id:initial_id,first_load:!0,view_toggle:!!this.props.view_toggle&&this.props.view_toggle,loading:!1,history_state_loaded:!1,back_clicked:!1,current_request:null,is_advanced:!1}}},{key:"setHistoryStateLoaded",value:function(){this.setState({history_state_loaded:!0})}},{key:"componentWillMount",value:function(){this.getData(!1,main.initListeners)}},{key:"getRegexParam",value:function(regex){return location.search.substr(1).split("&").filter(function(p){return new RegExp(regex).test(p)})}},{key:"getData",value:function(append_items,callback){this.state.loading&&this.state.current_request.abort();var that=this,params={page:append_items?this.state.page+1:0,per_page:this.state.per_page,order:this.state.order};this.getOptions().full_text_search?$.extend(params,{fts:this.state.searching}):$.extend(params,{search:this.state.searching}),$.extend(params,this.props.options),$.extend(params,this.getConditions()),$.extend(params,this.getFilters());var api_url="";api_url=this.props.options&&"undefined"!=typeof this.props.options.external_api_url?this.props.options.external_api_url:"/api/v1/"+that.props.model+"/";var advanced_params,asset_url="";this.props.options&&"undefined"!=typeof this.props.options.external_asset_url&&(asset_url=this.props.options.external_asset_url),this.getOptions().advanced&&this.state.is_advanced?(advanced_params={},that.state.filtering.map(function(ap){advanced_params[ap.name]=ap.value}),window.history.replaceState(params,null,"?"+$.param(params)+"&"+$.param(advanced_params)),$.extend(params,advanced_params)):window.history.replaceState(params,null,"?"+$.param(params)),this.setSessionStore(params);var current_request=$.ajax({url:api_url,data:params,method:"GET",dataType:"json",success:function(data){console.log("Got items successfully.... ");var initial_id=that.state.initial_id,initial_article=undefined;(data.first_load||this.state.first_load)&&(data.initial_items=data.items),void 0!==initial_id&&(initial_article=data.items.find(function(z){return z.id==initial_id}))&&(data.article=initial_article),!that.state.first_load&&that.state.initial_id&&that.setState({initial_id:null});var options=this.getOptions();options&&options.multi_item&&options.multi_item_match&&options.multi_item_sort&&(data.items=this.getMultiItem(data,options.multi_item_match,options.multi_item_sort)),append_items?that.setState({items:that.state.items.concat(data.items),title:that.state.title,total:data.total,per_page:data.per_page,page:data.page,asset_url:asset_url,first_load:!1,loading:!1}):(data.first_load=!1,that.setState($.extend(data,{loading:!1}))),"function"==typeof callback&&callback.call()}.bind(this),error:function(xhr,status,err){"abort"==status?that.setState({loading:!1,current_request:null}):console.error(status,err.toString())}.bind(this)});this.setState({current_request:current_request,loading:!0})}},{key:"getMore",value:function(e){e.preventDefault(),this.getData(!0)}},{key:"getConditions",value:function(){var conditions=this.props.conditions,conditions_obj={};return conditions&&void 0!==conditions&&$.each(conditions,function(i,condition){conditions_obj["condition_"+(i+1)]=condition.value+":"+condition.name}),conditions_obj}},{key:"getOptions",value:function(){var options=this.props.options;return void 0!==options&&null!=options?options:{}}},{key:"getFilters",value:function(){var that=this,filtering=this.state.filtering,params={},categories=that.props.categories?that.props.categories.slice():[],tags=this.getTags(),conditions_count=that.props.conditions?that.props.conditions.length+1:1;return $.each(filtering,function(i,param){if(console.log("param "+param.name+": "+param.value),""!=param.value)if(that.getOptions().advanced&&that.state.is_advanced&&param.advanced)params[param.name]=param.value;else if(!param.advanced)if("date"==param.name)if("publications"==that.props.model)params["condition_"+conditions_count]=param.value+":publication_year",conditions_count+=1;else if("events"==that.props.model)if("upcoming"==param.value){var d=new Date;params["condition_"+conditions_count]=d.getFullYear().toString()+"-"+(d.getMonth()+1).toString()+"-"+d.getDate().toString()+":start_date:gte",conditions_count+=1}else if("past"==param.value){d=new Date;params["condition_"+conditions_count]=d.getFullYear().toString()+"-"+(d.getMonth()+1).toString()+"-"+d.getDate().toString()+":start_date:lte",conditions_count+=1}else params.year=param.value+":start_date";else"documents"==that.props.model?params.year=param.value+":date":params.year=param.value+":publish_date";else if("scope"==param.name&&"featured"==param.value.toLowerCase())params["condition_"+conditions_count]="1:featured",conditions_count+=1;else if("scope"==param.name&&"all"==param.value.toLowerCase());else if(/^field/.test(param.name)){var field_name=param.name.match(/^field_(.+)/)[1];params["condition_"+conditions_count]=param.value+":"+field_name,conditions_count+=1}else/^tag/.test(param.name)?(tags.length>0&&(tags+=":"),tags+=param.value):categories.push(param.value)}),categories.length>0&&(params.category=categories.join(":")),tags.length>0&&(params.tags=tags),params}},{key:"getTags",value:function(){var options=this.getOptions();return options&&options.tags?options.tags:""}},{key:"getBlankScope",value:function(){var options=this.getOptions();return options&&options.blank_scope?options.blank_scope:"All"}},{key:"getOptionName",value:function(name,value){var field=this.filters.find(function(f){return f[0]==name});if(void 0===field)return"";var f=field[1].slice();return f.unshift(field[2]),f.find(function(g){return 2==g.length?g[1].toString()==value:g[0].toString()==value})[0]}},{key:"getTitleFromParams",value:function(params){var title=this.props.title,that=this;if(this.filters){var scope="",type=title,date="",topic="",search="";$.each(params,function(i,param){""!=param.value&&("type"==param.name||"category"==param.name?type=that.getOptionName(param.name,param.value):"scope"==param.name?scope=that.getOptionName(param.name,param.value):"topic"==param.name?topic=that.getOptionName(param.name,param.value):"date"==param.name?"upcoming"!=param.value&&(date="in "+param.value):"search"==param.name&&(search="matching '"+param.value+"'"))}),this.state&&""!=this.state.searching&&(search="matching '"+this.state.searching+"'"),this.props.scope_in_title&&""==scope&&""==topic&&""==date&&""==search&&(scope=this.getBlankScope()),title=[scope,topic,type,date,search].filter(function(p){return""!=p}).join(" ")}return title}},{key:"applySearch",value:function(e,callback){this.setState({searching:e.target.value},function(){callback&&callback.call()})}},{key:"clearFiltersSearch",value:function(callback){var _this=this;this.setState({filters:null,searching:"",article:null},function(){_this.getData(!1,callback)})}},{key:"clearSearch",value:function(){this.setState({searching:""},function(){this.getData(!1)})}},{key:"setSearch",value:function(){this.setState({title:this.getTitleFromParams(this.state.filtering)},this.getData(!1))}},{key:"setSessionStore",value:function(params){"undefined"!=typeof Storage?sessionStorage[this.props.model]=JSON.stringify(params):console.error("No web storage.")}},{key:"applyFilters",value:function(e){e.preventDefault(),e.stopPropagation();var name,value,params=this.state.filtering;$(e.currentTarget).is("a")?(name=$(e.currentTarget).data("for-select"),value=$(e.currentTarget).data("select-val")):(name=e.target.name,value=e.target.value);var current_filter=params.findIndex(function(p){return p.name==name});-1==current_filter?params.push({name:name,value:value}):params[current_filter].value=value,console.log("FORM PARAMS: ",params),this.setState({filtering:params,title:this.getTitleFromParams(params)},function(){console.log("FILTERING: ",this.state.filtering),this.getData(!1)})}},{key:"advancedSubmit",value:function(props){console.log("advancedSubmit"),this.setState({filtering:props},function(){this.getData(!1)})}},{key:"setListSort",value:function(e){this.setState({order:e.target.dataset.value},function(){this.getData(!1)})}},{key:"toggleListSort",value:function(sort_string){this.state.order==sort_string?this.setState({order:this.props.order},function(){this.getData(!1)}):this.setState({order:sort_string},function(){this.getData(!1)})}},{key:"getCorrectTitle",value:function(klass){return this.props.results_in_title?this.getTitle(klass,this.state.title):this.getTitle(klass,this.props.title)}},{key:"getTitle",value:function(klass,title){return title?React.createElement("h2",{className:klass},title):""}},{key:"getMultiItem",value:function(data,match,sort){console.log("matching list items using:",match);for(var match_properties=[],i=0;i<data.items.length;i++)match_properties.push(data.items[i][match]);match_properties=match_properties.filter(function(a,b){return match_properties.indexOf(a)===b});var parent_array=[];for(i=0;i<match_properties.length;i++){for(var sub_array=[],j=0;j<data.items.length;j++)match_properties[i]===data.items[j][match]&&sub_array.push(data.items[j]);sub_array.length>0&&parent_array.push(sub_array)}console.log("sorting list items using: ",sort);var category_title_index=1;for(i=0;i<parent_array.length;i++){var current_sub_array=parent_array[i],sorted_sub_array=[];for(j=0;j<sort.length;j++)for(var sort_string=sort[j],k=0;k<current_sub_array.length;k++)current_sub_array[k].category_titles[category_title_index]&&current_sub_array[k].category_titles[category_title_index]===sort_string&&sorted_sub_array.push(current_sub_array[k]);sorted_sub_array.length>0&&(parent_array[i]=sorted_sub_array)}var items_array=[];for(i=0;i<parent_array.length;i++){var item={id:i,items:parent_array[i]};items_array.push(item)}return items_array}},{key:"toggleAdvanced",value:function(){this.setState({is_advanced:!this.state.is_advanced,searching:"",filtering:[]},this.getData)}},{key:"renderHeader",value:function(){var view_toggle=undefined,gallery_header_klass=(undefined,"");return this.props.view_toggle&&(view_toggle=React.createElement(ViewToggle,null)),this.state.article?$("body").addClass("grid_list_detail"):$("body").removeClass("grid_list_detail"),this.props.options&&"undefined"!=typeof this.props.options.gallery_header_klass&&(gallery_header_klass=this.props.options.gallery_header_klass),this.props.title_below_filters?React.createElement("header",{className:"gallery_header left_align "+gallery_header_klass},this.renderFilters(),this.getCorrectTitle(""),view_toggle):React.createElement("header",{className:"gallery_header "+gallery_header_klass},this.getCorrectTitle("module_title"),this.getOptions().about_text?React.createElement("p",null,this.getOptions().about_text):null,this.renderFilters(),this.renderSortOptions(),view_toggle)}},{key:"renderFilters",value:function(){var _this2=this,opts=this.getOptions();if(this.filters||this.props.search)return React.createElement(FilterBar,{advanced:opts.advanced,advanced_rows:opts.rows,advanced_submit:function(props){_this2.advancedSubmit(props)},is_advanced:this.state.is_advanced,toggle_advanced:function(){_this2.toggleAdvanced()},select_boxes:this.filters,search:this.props.search,placeholder:opts.placeholder,changeFilters:function(e){_this2.applyFilters(e)},changeSearch:function(){_this2.setSearch()},clearSearch:function(){_this2.clearSearch()},filtering:this.state.filtering,searching:this.state.searching,searchFn:function(e,callback){_this2.applySearch(e,callback)}})}},{key:"renderSortOptions",value:function(){var opts=this.getOptions(),that=this;if(opts.sort_options)return React.createElement("div",{className:"sort_options"},opts.sort_options.length>1?React.createElement("div",{className:"sort_select"},opts.sort_options.map(function(sort_opt){var _this3=this;return React.createElement("div",{key:sort_opt.value,className:"sort_option",onClick:function(){_this3.setListSort(e)},"data-value":sort_opt.value},sort_opt.name)})):React.createElement("label",{className:"sort_toggle_label"},React.createElement("input",{type:"checkbox",name:"order",value:opts.sort_options[0].value,onChange:function(){that.toggleListSort(opts.sort_options[0].value)}}),React.createElement("span",{className:"sort_toggle"},opts.sort_options[0].name)))}},{key:"formatNumber",value:function(num){if(num.toString()!=num)return"";for(var numString=num.toString(),formatted="",i=0;i<numString.length;i++)(numString.length-i)%3==0&&i>0&&(formatted+=","),formatted+=numString.charAt(i);return formatted}},{key:"renderTotal",value:function(){if(this.getOptions().show_total&&this.state.total>0){var total=this.formatNumber(this.state.total);return React.createElement("div",{className:"gl_total"},total+" "+("1"==total?"result":"results"))}}},{key:"getNextItem",value:function(){if(!this.state.article)return null;for(var i=0;i<this.state.items.length;i++)if(i<this.state.items.length&&this.state.items[i].id===this.state.article.id&&i+1!=this.state.items.length)return this.state.items[i+1]}},{key:"getPreviousItem",value:function(){if(!this.state.article)return null;for(var i=0;i<this.state.items.length;i++)if(this.state.items[i].id===this.state.article.id&&i>0)return this.state.items[i-1]}},{key:"renderItemList",value:function(){var default_width,no_items_text=this.props.no_items_text?this.props.no_items_text:"There are no items matching these criteria.",that=this,list_item_component=window[that.props.list_item+"ListItem"],columns=!1,column_widths=[];return that.getOptions().list_columns&&(default_width=(100/(columns=that.getOptions().list_columns).length).toString()+"%",column_widths=columns.map(function(c){return c.width?c.width:default_width})),this.state.items.length>0?React.createElement("ul",{className:"item_list "+that.props.class_name+(that.props.left_column?" "+that.props.default_view:"")},columns?React.createElement("li",{className:"gridlist_table_header"},columns.map(function(lc,i){return React.createElement("div",{key:i,className:"list_column column_header",style:{width:column_widths[i]}},lc.text)})):null,that.state.items.map(function(item){return React.createElement("li",{key:item.id,className:"slide"+(columns?" gridlist_table_row":"")},React.createElement(list_item_component,{item:item,selected_item:function(i,c){that.selectedItem(i,c)},options:that.getOptions(),column_widths:column_widths}))})):this.state.first_load?"Loading...":React.createElement("div",{className:"no_items"},no_items_text)}},{key:"selectedItem",value:function(item,callback){console.log("GridList:: selectedItem",item),this.setState({article:item},function(){null==item&&this.setGridListMetas(),"function"==typeof callback&&callback.call()})}},{key:"setGridListMetas",value:function(){if(this.state.grid_list_page_title&&(document.title=this.state.grid_list_page_title),$('meta[property="og:title"]').attr("content",document.title),$('meta[name="twitter:title"]').attr("content",document.title),$('meta[property="og:url"]').attr("content",document.location.href),this.state.grid_list_social_image||this.props.site_share_image){var share_image=this.state.grid_list_social_image?this.state.grid_list_social_image:this.props.site_share_image;$('meta[property="og:image"]').attr("content",share_image),$('meta[name="twitter:image"]').attr("content",share_image),$('link[rel="image_src"]').attr("href",share_image)}if(this.state.grid_list_page_updated_at){this.props.page_updated_at?this.props.page_updated_at:this.state.grid_list_page_updated_at;$('meta[property="og:updated_time"]').attr("content",this.props.page_updated_at)}if(this.props.social_description||this.state.grid_list_social_description){var social_description=this.props.social_description?this.props.social_description:this.state.grid_list_social_description;$('meta[name="description"]').attr("content",social_description),$('meta[name="og:description"]').attr("content",social_description),$('meta[name="twitter:description"]').attr("content",social_description)}}},{key:"hideDetail",value:function(){this.selectedItem(null),this.renderHeader()}},{key:"getItemListOrArticle",value:function(){var _this4=this;if(this.state.article){var detail_item_component=window[this.props.list_item+"Detail"];return React.createElement("div",null,React.createElement(detail_item_component,_extends({item:this.state.detail,options:this.getOptions(),selected_item:function(i,c){_this4.selectedItem(i,c)},hide_detail:function(){_this4.hideDetail()},more_people:this.state.more_people},this.props)))}return this.renderItemList()}},{key:"renderMoreButton",value:function(){var _this5=this,opts=this.getOptions();return(this.state.page+1)*this.state.per_page<this.state.total?React.createElement("footer",{className:"list_footer more_button"},React.createElement("div",{className:"loading"}),React.createElement("a",{className:opts.button_class?opts.button_class:"button",type:"button",href:"#",onClick:function(e){_this5.getMore(e)}},"More")):null}},{key:"renderSpaController",value:function(){var _this6=this;if(this.props.options&&1==this.props.options.spa&&this.state.items.length>0)return React.createElement("div",null,React.createElement(SpaController,_extends({next_item:this.getNextItem(),previous_item:this.getPreviousItem(),selected_item:function(i,c){_this6.selectedItem(i,c)},get_history_state_loaded:this.state.history_state_loaded,set_history_state_loaded:function(){_this6.setHistoryStateLoaded()},initial_id:this.state.initial_id,initial_items:this.state.initial_items,hide_detail:function(){_this6.hideDetail()},article:this.state.article},this.props)))}},{key:"render",value:function(){return React.createElement("div",{className:this.props.left_column?"":"grid_layout"},this.renderSpaController(),React.createElement("article",null,this.renderHeader(),this.renderTotal(),this.getItemListOrArticle(),this.renderMoreButton()))}}]),GridList}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},HiPO=function(_React$Component){function HiPO(props){_classCallCheck(this,HiPO),_get(Object.getPrototypeOf(HiPO.prototype),"constructor",this).call(this,props),this.spinner_opts={lines:8,length:5,width:3,radius:6,color:"#FFF",speed:1,trail:100,shadow:!1,className:"spinner",top:"50%",left:"50%"},this.state={loaded:!1,loading:!1}}return _inherits(HiPO,_React$Component),_createClass(HiPO,[{key:"componentDidMount",value:function(){var _this=this;$("body").on("feed_hipo",function(e,d){_this.checkOverlay(e,d)})}},{key:"checkOverlay",value:function(e,d){var _this2=this;e.stopPropagation();d&&d.url?(console.log("load overlay"),this.setState({loading:!0,content:null},function(){_this2.loadOverlay(d.url)})):console.error("No overlay data to load.")}},{key:"loadOverlay",value:function(url){var that=this,load_url=url+"?layout=empty&override_preview=true";$("#dashboard_modal_content").load(load_url,function(response,status,xhr){"error"==status?(alert("Sorry but there was an error: "+xhr.status+" "+xhr.statusText),that.setState({loading:!1,loaded:!1})):that.setState({loading:!1,loaded:!0},function(){that.afterLoad(url)})})}},{key:"afterLoad",value:function(url){var that=this;$("body").addClass("explore_overlay_open"),$("#dashboard_modal a.close_button, .background_area").click(function(){that.closeOverlay()}),"undefined"!=typeof mb_parallax&&mb_parallax.init(!0),
"undefined"!=typeof mb_utils&&mb_utils.initExpandableElement(),"object"==typeof ReactRailsUJS&&ReactRailsUJS.mountComponents();var title=$("#dashboard_modal_content title").text();"undefined"!=typeof _sendPageview&&_sendPageview(url,title)}},{key:"closeOverlay",value:function(){this.setState({loaded:!1},function(){$("#dashboard_modal_content").empty(),$("body").removeClass("explore_overlay_open")})}},{key:"render",value:function(){return React.createElement("div",{id:"dashboard_modal",className:this.state.loading||this.state.loaded?"visible":"",style:{height:"100%"}},React.createElement(Loader,{loaded:this.state.loaded||!this.state.loading,options:this.spinner_opts,className:"spinner"}),React.createElement("div",{id:"dashboard_modal_content",className:"content "+(this.state.loaded?"visible":"")}))}}]),HiPO}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ImageCarousel=function(_React$Component){function ImageCarousel(props){_classCallCheck(this,ImageCarousel),_get(Object.getPrototypeOf(ImageCarousel.prototype),"constructor",this).call(this,props),this.state={caption:"",link:"",link_text:"",slide:1,is_mobile_width:!1},this.slider=null,this.mobile_width=1024,this.getPreviousSlide=this.getPreviousSlide.bind(this),this.getNextSlide=this.getNextSlide.bind(this)}return _inherits(ImageCarousel,_React$Component),_createClass(ImageCarousel,[{key:"componentDidMount",value:function(){var that=this;this.slider=new MasterSlider;var height=this.props.image_carousel?400:500,width=this.props.image_carousel?document.documentElement.clientWidth:600,autoplay="true"===this.props.autoplay,homepage_slider_options={width:width,height:height,layout:"autofill",space:this.props.image_carousel?5:0,fullwidth:!0,autoHeight:!1,autoplay:autoplay,speed:this.props.image_carousel?20:30,center:!0,mouse:!1,centerControls:!0,fullscreenMargin:0,loop:!0,instantStartLayers:!0};this.props.split_slide_layers||(this.props.items.length>1?(this.slider.control("bullets",{autohide:!this.props.image_carousel&&!this.props.controls_persistence}),this.slider.control("arrows",{autohide:!this.props.image_carousel&&!this.props.controls_persistence})):homepage_slider_options.swipe=!1),this.props.image_carousel?this.slider.setup(this.props.ms_id+" .master-slider",homepage_slider_options):this.slider.setup(this.props.ms_id,homepage_slider_options),this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,function(){var item=that.props.items[that.slider.api.index()];that.setState({title:item.title,caption:item.body,link:item.link,link_text:item.link_text,textbox_category_title:item.textbox_category_title})}),0==this.props.image_carousel&&(this.slider.api.addEventListener(MSSliderEvent.RESIZE,function(){that.setBreakpointClasses(),that.resizeCarousel(),that.setIsMobileWidth(),that.setIsCarouselWiderThanMobileWidth()}),this.props.split_slide_layers&&this.slider.api.addEventListener(MSSliderEvent.CHANGE_START,function(){that.setState({slide:that.slider.api.index()+1})})),this.props.autoplay&&($(".ms-bullet").click(function(){that.stopCarousel()}),$(".ms-nav-prev").click(function(){that.stopCarousel()}),$(".ms-nav-next").click(function(){that.stopCarousel()}),$(".ms-slide .floating_text_area").hover(that.onTextArea.bind(that),that.offTextArea.bind(that))),$(".ms-slide .floating_text_area").hover(this.onTextArea.bind(this),this.offTextArea.bind(this)),0==this.props.image_carousel&&($(".floating_text_area").off().click(function(){$(that).closest(".carousel_module.small, .carousel_module.medium, .carousel_module.medium_mid").exists()&&($(that).toggleClass("open"),$(that).find(".description").slideToggle())}),$(".carousel_module .floating_text_area").css("position","absolute"),$(".carousel_module .floating_text_area").css("visibility","visible"));var item=that.props.items[that.slider.api.index()];that.setState({title:item.title,caption:item.body,link:item.link,textbox_category_title:item.textbox_category_title},function(){that.setBreakpointClasses(),that.setIsMobileWidth(),that.setIsCarouselWiderThanMobileWidth()})}},{key:"isFullOrWideLayout",value:function(){var $carousel_module_container=$("#"+this.props.ms_id).parents(".carousel_module_container"),class_list=$carousel_module_container.length>0?$carousel_module_container[0].classList:null;return!!class_list&&(class_list.contains("wide")||class_list.contains("full-bleed"))}},{key:"onTextArea",value:function(){this.slider.api.pause()}},{key:"offTextArea",value:function(){this.slider.options.stopped||this.slider.api.resume()}},{key:"stopCarousel",value:function(){this.slider.options.stopped=!0,this.slider.api.pause()}},{key:"toggleTextBox",value:function(e){var textBox=$(e.target).parents(".floating_text_area");textBox.find(".description").length>0&&textBox.find(".description")[0].innerText.length>0&&(textBox.toggleClass("open"),textBox.find(".description").animate({height:"toggle"},400))}},{key:"resizeCarousel",value:function(){console.log("resizeCarousel");var w=$("#"+this.props.ms_id+" .ms-container").parent().width();$("#"+this.props.ms_id+" .ms-container").css("max-width",w),$("#"+this.props.ms_id+" .ms-view").css("left","0"),$("#"+this.props.ms_id+" .ms-slide-layers").css("max-width",w),$("#"+this.props.ms_id+" .ms-slide-layers").css("left","0")}},{key:"setBreakpointClasses",value:function(){console.log("setBreakpointClasses");var klass,w=$("#"+this.props.ms_id).width();klass=w<=480?"small":w<=600?"medium":w<=769?"medium_mid":w<=1024?"medium_large":w<=1200?"large":w<=1700?"xlarge":"xxlarge";var $carousel_module=$("#"+this.props.ms_id).parents(".carousel_module");$carousel_module.hasClass(klass)||($carousel_module.removeClass("small medium medium_mid medium_large large xlarge xxlarge").addClass(klass),window.setTimeout(function(){$(window).trigger("resize")},300))}},{key:"setIsCarouselWiderThanMobileWidth",value:function(){$("#"+this.props.ms_id).width()>this.mobile_width?this.setState({is_carousel_wider_than_mobile:!0}):this.setState({is_carousel_wider_than_mobile:!1})}},{key:"setIsMobileWidth",value:function(){window.innerWidth<this.mobile_width?this.setState({is_mobile_width:!0}):this.setState({is_mobile_width:!1})}},{key:"getSlideLayers",value:function(item,idx){return this.props.split_slide_layers?this.getSplitSlideLayers(item,idx):this.getFloatingTextLayers(item)}},{key:"getFloatingTextLayers",value:function(item){var that=this,item_body=item.body,title_class=item_body.length>0||item.more_link.length>0?"media_feature_title":"media_feature_title hide_expand_arrow",initially_expanded=this.isFullOrWideLayout()&&this.state.is_carousel_wider_than_mobile,style=initially_expanded?{display:"block"}:{};if(!this.props.image_carousel)return React.createElement("div",{className:"ms-slide-layers"},React.createElement("div",{className:"floating_text_area ms-layer "+item.category_names+" "+(initially_expanded?"open":""),onClick:that.toggleTextBox.bind(that),"data-duration":"300","data-effect":"right(90)","data-ease":"easeOutQuart","data-type":"text","data-resize":"false"},React.createElement("header",{className:item_body.length>0||item.more_link.length>0?"":"hide_expand_arrow"},React.createElement("h1",{className:title_class,dangerouslySetInnerHTML:{__html:item.title}}),React.createElement("h2",{className:"subtitle",dangerouslySetInnerHTML:{__html:item.textbox_category_title}})),React.createElement("div",{className:"description",style:style},React.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:item.body}}),React.createElement("a",{className:"more_link",href:item.more_link},React.createElement("div",{className:"more_link_text",dangerouslySetInnerHTML:{__html:item.more_link_text}})))))}},{key:"getSplitSlideLayers",value:function(item,idx){var that=this,title_class=item.body.length>0?"media_feature_title":"media_feature_title hide_expand_arrow";if(!this.props.image_carousel)return React.createElement("div",{className:"ms-slide-layers"},React.createElement("div",{className:"split_slide_layer ms-layer "+item.category_names,onClick:that.toggleTextBox.bind(that),"data-duration":"300","data-effect":"right(90)","data-ease":"easeOutQuart","data-type":"text","data-resize":"false"},React.createElement("header",{className:"split mobile"},React.createElement("h1",{className:title_class,dangerouslySetInnerHTML:{__html:item.title}})),this.getSplitContainers(item,idx,title_class)))}},{key:"getSplitContainers",value:function(item,idx,title_class){return this.state.is_mobile_width||idx%2==0?React.createElement(React.Fragment,null,this.getSplitImageContainer(item,idx,!1),this.getSplitTextContainer(item,idx,title_class)):React.createElement(React.Fragment,null,this.getSplitTextContainer(item,idx,title_class),this.getSplitImageContainer(item,idx,!0))}},{key:"getSplitImageContainer",value:function(item,idx,subtitle_right){return React.createElement("div",{className:"split_image_container",alt:"slide "+(idx+1)+" - "+(item.image_alt?item.image_alt:item.title),style:{backgroundImage:"url("+item.image_src+")"}},React.createElement("div",{className:subtitle_right?"subtitle right":"subtitle",dangerouslySetInnerHTML:{__html:item.textbox_category_title}}))}},{key:"getSplitTextContainer",value:function(item,idx,title_class){return React.createElement("div",{className:"split_text_container"},React.createElement("header",{className:"split"},React.createElement("h1",{className:title_class,dangerouslySetInnerHTML:{__html:item.title}})),React.createElement("div",{className:"split_description"},React.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:item.body}})),React.createElement("a",{className:"more_link button",href:item.more_link},React.createElement("div",{className:"more_link_text",dangerouslySetInnerHTML:{__html:item.more_link_text}})))}},{key:"getSources",value:function(item){var sources=[];return item.webm_video_file_name&&sources.push([item.webm_video_src,"video/webm"]),item.mp4_video_file_name&&sources.push([item.mp4_video_src,"video/mp4"]),item.ogv_video_file_name&&sources.push([item.ogv_video_src,"video/ogg"]),sources}},{key:"checkAndCreateVideo",value:function(item){if(item.webm_video_file_name||item.mp4_video_file_name||item.ogv_video_file_name){var videos=this.getSources(item);return React.createElement("video",{"data-autopause":"false","data-fill-mode":"fill","data-loop":"true","data-mute":"true"},videos.map(function(v,i){return React.createElement("source",{key:i,src:v[0],type:v[1]})}))}return item.embed_video?React.createElement("a",{href:item.embed_video+"?hd=1&wmode=opaque&controls=1&showinfo=0","data-type":"video"},"play video"):null}},{key:"getSlideBackgroundContainer",value:function(item,idx){return this.props.split_slide_layers?null:React.createElement("img",{alt:"slide "+(idx+1)+" - "+(item.image_alt?item.image_alt:item.title),"data-src":item.image_src,src:item.image_src})}},{key:"createSlide",value:function(item,idx){var theme=item.theme?item.theme:"dark_background";return React.createElement("article",{key:idx,className:"ms-slide slide-"+(idx+1)+" "+theme,"data-delay":"8","data-fill-mode":"fill"},React.createElement("div",{className:"gradient_container_top"}),this.getSlideBackgroundContainer(item,idx),this.checkAndCreateVideo(item),this.getSlideLayers(item,idx),React.createElement("div",{className:"gradient_container_bottom"}))}},{key:"createSlides",value:function(){var that=this;return React.createElement("div",{className:"master-slider ms-skin-default"},this.props.items.map(function(v,i){return that.createSlide(v,i)}))}},{key:"getCaption",value:function(){return this.state.caption?React.createElement("div",{className:"caption",dangerouslySetInnerHTML:{__html:this.state.caption}}):null}},{key:"getLink",value:function(){return this.state.link&&this.state.link_text?React.createElement("div",{className:"link_container"},React.createElement("a",{href:this.state.link},this.state.link_text)):null}},{key:"getDescription",value:function(){if(this.props.image_carousel)return React.createElement("div",{className:"slider_caption"},this.getCaption(),this.getLink())}},{key:"getCapsuleNav",value:function(){return this.props.split_slide_layers?React.createElement("nav",{className:"capsule_nav_container"},React.createElement("div",{className:"capsule_nav"},React.createElement("div",{className:"arrow_container",onClick:this.getPreviousSlide},React.createElement("div",{className:"arrow arrow_left"},React.createElement("div",{className:"tail"},React.createElement("div",{className:"head"})))),React.createElement("div",{className:"slide_count"},this.state.slide+"/"+this.props.items.length),React.createElement("div",{className:"arrow_container",onClick:this.getNextSlide},React.createElement("div",{className:"arrow arrow_right"},React.createElement("div",{className:"tail"},React.createElement("div",{className:"head"})))))):null}},{key:"getPreviousSlide",value:function(){this.slider.api.previous(),this.setState({slide:this.slider.api.index()+1})}},{key:"getNextSlide",value:function(){this.slider.api.next(),this.setState({slide:this.slider.api.index()+1})}},{key:"render",value:function(){var klass="",that=this;return this.props.image_carousel?React.createElement("div",{id:this.props.ms_id,className:klass},this.createSlides(),this.getDescription()):React.createElement("div",{id:this.props.ms_id,className:"master-slider ms-skin-default"},this.props.items.map(function(v,i){return that.createSlide(v,i)}),this.getDescription(),this.getCapsuleNav())}}]),ImageCarousel}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},TeaserGridItem=function(_React$Component){function TeaserGridItem(props){_classCallCheck(this,TeaserGridItem),_get(Object.getPrototypeOf(TeaserGridItem.prototype),"constructor",this).call(this,props),this.state={modal_open:!1,scroll_position_before_overlay:null}}return _inherits(TeaserGridItem,_React$Component),_createClass(TeaserGridItem,[{key:"closeModal",value:function(e){this.setState({modal_open:!1},function(){$("body").removeClass("explore_overlay_open"),"undefined"!=typeof _atw&&_atw.clb(),null!=window.__mb_shim_image_grid_teaser_scroll_position_before_overlay&&window.__mb_shim_image_grid_teaser_scroll_position_before_overlay>0&&window.scrollY<=0&&(window.scrollTo(0,window.__mb_shim_image_grid_teaser_scroll_position_before_overlay),window.__mb_shim_image_grid_teaser_scroll_position_before_overlay=null)}),e&&e.preventDefault()}},{key:"prevItem",value:function(e){console.log("prev"),this.setState({modal_open:!1},function(){this.props.prev(this.props.idx)}),e.preventDefault()}},{key:"nextItem",value:function(e){console.log("next"),this.setState({modal_open:!1},function(){this.props.next(this.props.idx)}),e.preventDefault()}},{key:"getFeatureHtml",value:function(feature_type){return"video"==feature_type?React.createElement("div",{className:"play"}):""}},{key:"activateFeature",value:function(){this.setState({modal_open:!0},this.loadAddThisListeners)}},{key:"clickedFeature",value:function(e){this.activateFeature(),e.preventDefault()}},{key:"loadAddThisListeners",value:function(){"undefined"!=typeof addthis&&addthis.toolbox($(".addthis_toolbox").get()),$(".addthis_button_compact img").on("mouseover",function(){return!1}),(null==window.__mb_shim_image_grid_teaser_scroll_position_before_overlay||window.__mb_shim_image_grid_teaser_scroll_position_before_overlay<=0)&&(window.__mb_shim_image_grid_teaser_scroll_position_before_overlay=window.scrollY),$("body").hasClass("explore_overlay_open")||$("body").addClass("explore_overlay_open")}},{key:"featureModalHtml",value:function(feature){return feature?"video"==feature.feature_type?this.featureVideoHtml(feature):"image"==feature.feature_type||"news"==feature.feature_type?this.imageHTML(feature):void 0:""}},{key:"featureVideoHtml",value:function(feature){if(feature.embed_video)return React.createElement("div",{className:"embedded_video",dangerouslySetInnerHTML:{__html:feature.embed_video}});var files=[];return feature.webm_video_src&&files.push({file:feature.webm_video_src}),feature.mp4_video_src&&files.push({file:feature.mp4_video_src}),feature.ogv_video_src&&files.push({file:feature.ogv_video_src}),React.createElement("div",null,React.createElement(Video,{files:files,caption:"",poster:feature.image_src,video_div:"upload_video",layout:"full",autostart:"false",vrview:"false"}))}},{key:"getButtons",value:function(){return this.props.item.link&&""!=this.props.item.link?React.createElement("div",{className:"buttons"},React.createElement("a",{className:"button",href:window.location.origin+this.props.item.link},"MORE"),React.createElement("div",{className:"addthis_sharing_toolbox addthis_toolbox addthis_default_style","data-addthis-url":window.location.origin+this.props.item.link,"data-addthis-title":this.props.item.title,"data-addthis-description":this.props.item.body,"data-addthis-media":this.props.item.browse},React.createElement("a",{className:"addthis_button_compact"},React.createElement("img",{src:"/assets/share.png"})))):null}},{key:"imageHTML",value:function(feature){return React.createElement("figure",{className:"main_image"},React.createElement("img",{src:feature.image_src,alt:feature.image_alt?feature.image_alt:""}))}},{key:"render",value:function(){var _this=this,modal_style={position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.5)",top:"0",left:"0",transform:"none",height:"100vh",width:"100vw",overflow:"auto"},modal_background_style={position:"fixed"},download_spinner_opts={lines:9,length:6,width:4,radius:7,scale:1,corners:1,color:"#FFF",opacity:.2,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",left:"50%",shadow:!1,hwaccel:!1,position:"relative"};return React.createElement("li",{key:this.props.item.id,className:"teaser_grid_item teaser_grid_item__"+this.props.item.feature_type+" item_"+this.props.idx+" "+this.props.klass,"data-id":this.props.item.id},React.createElement("a",{href:"",id:"teaser_grid_item_"+this.props.idx,className:"teaser_grid_link image_and_description_container",onClick:function(e){_this.clickedFeature(e)}},React.createElement("div",{className:"grid_image"},this.getFeatureHtml(this.props.item.feature_type),React.createElement("img",{src:this.props.item.image_src})),React.createElement("div",{className:"grid_text"},React.createElement("div",{className:"caption"},React.createElement("div",{className:"grid_title"},this.props.item.title)))),React.createElement(Modal,{isOpen:this.state.modal_open,onClose:function(e){_this.closeModal(e)},className:"modal",width:"100%",style:modal_style,backdropStyle:modal_background_style,containerClassName:"modal_container"},React.createElement("a",{href:"",className:"modal_close",onClick:function(e){_this.closeModal(e)}},React.createElement("span",{className:"modal_close_icon"})),React.createElement("div",{className:"arrow_navigation"},React.createElement("a",{href:"",className:"prev_arrow",onClick:function(e){_this.prevItem(e)}}),React.createElement("a",{href:"",className:"next_arrow",onClick:function(e){_this.nextItem(e)}})),React.createElement(Loader,{loaded:!1,options:download_spinner_opts,className:"spinner"}),React.createElement("div",{className:"modal_content"},this.featureModalHtml(this.props.item),React.createElement("div",{className:"caption"},React.createElement("div",{className:"grid_num"},this.props.idx+1),React.createElement("div",{className:"grid_title"},this.props.item.title)),React.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:this.props.item.body}}),this.getButtons(),React.createElement("a",{href:"",className:"close_button big_button",onClick:function(e){_this.closeModal(e)}},"CLOSE"),React.createElement("div",{className:"after_big_button_shim"}))))}}]),TeaserGridItem}(React.Component),ImageGridTeaser=function(_React$Component2){function ImageGridTeaser(props){_classCallCheck(this,ImageGridTeaser),_get(Object.getPrototypeOf(ImageGridTeaser.prototype),"constructor",this).call(this,props),this.state={show_more:!1},this.options={percentPosition:!0,itemSelector:".teaser_grid_item",layoutMode:"masonry",masonry:{gutter:".teaser_gutter_sizer",horizontalOrder:!0,fitWidth:!0}}}return _inherits(ImageGridTeaser,_React$Component2),_createClass(ImageGridTeaser,[{key:"showMoreItems",value:function(){this.setState({show_more:!0})}},{key:"componentDidMount",value:function(){if(this.props.masonry)var $grid=$(".teaser_grid").imagesLoaded(function(){console.log("masonry teaser loaded"),$grid.isotope(this.options)})}},{key:"getMoreButton",value:function(){return this.props.more_link?React.createElement("a",{className:"big_button",href:this.props.more_link},"MORE"):""}},{key:"prev",value:function(idx){console.log(idx);var new_idx=Math.max(idx-1,0);this.clickItem(new_idx)}},{key:"next",value:function(idx){console.log(idx);var new_idx=Math.min(idx+1,this.props.items.length-1);this.clickItem(new_idx)}},{key:"clickItem",value:function(idx){console.log("click teaser_grid_item_"+idx),$("#teaser_grid_item_"+idx).get(0).click()}},{key:"getTitle",value:function(){return this.props.title&&""!=this.props.title?React.createElement("div",{className:"module_title"},this.props.title):null}},{key:"getDescription",value:function(){return this.props.description&&""!=this.props.description?React.createElement("h3",{className:"module_subtitle"},this.props.description):null}},{key:"render",value:function(){var _this2=this,that=this,layout="b";return this.props.layout&&this.props.layout.indexOf("a")>=0&&(layout="a"),this.props.layout&&this.props.layout.indexOf("c")>=0&&(layout="c"),React.createElement("div",{className:"teaser_grid_container"+(this.state.show_more?" open":"")},this.getTitle(),this.getDescription(),React.createElement("ol",{className:"teaser_grid layout_"+layout},this.props.items.map(function(item,idx){return React.createElement(TeaserGridItem,{key:item.id,item:item,idx:idx,prev:function(e){that.prev(e)},next:function(e){that.next(e)}})})),React.createElement("div",{className:"show_more_button",onClick:function(e){_this2.showMoreItems(e)}},this.props.mobile_more_text),this.getMoreButton())}}]),ImageGridTeaser}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},InfoButton=function(_React$Component){function InfoButton(props){_classCallCheck(this,InfoButton),_get(Object.getPrototypeOf(InfoButton.prototype),"constructor",this).call(this,props),this.state={info_panel_open:!1}}return _inherits(InfoButton,_React$Component),_createClass(InfoButton,[{key:"componentDidMount",value:function(){var that=this,hasInfoPageCover=$(".info_button_page_cover").length;$(".feature_area_container").length?hasInfoPageCover||$(".feature_area_container").prepend("<div class='info_button_page_cover'></div>"):hasInfoPageCover||$("#page").prepend("<div class='info_button_page_cover'></div>"),$(".info_button_page_cover").click(function(e){that.hideInfoText(e)})}},{key:"showInfoText",value:function(){$(".info_button_page_cover").addClass(this.props.page_cover_class).show(),this.setState({info_panel_open:!0})}},{key:"hideInfoText",value:function(){$(".info_button_page_cover").removeClass(this.props.page_cover_class).hide(),this.setState({info_panel_open:!1})}},{key:"toggleInfoText",value:function(){$(".info_button_page_cover").addClass(this.props.page_cover_class).show(),this.setState({info_panel_open:!this.state.info_panel_open})}},{key:"render",value:function(){var _this=this,info_text_position=this.props.position?this.props.position:"left",info_text_class=this.props.info_text_class?this.props.info_text_class:"info_text";return React.createElement("span",{className:this.state.info_panel_open?"info_button open":"info_button",onMouseEnter:function(e){_this.showInfoText(e)},onMouseLeave:function(e){_this.hideInfoText(e)},onClick:function(e){_this.toggleInfoText(e)}},React.createElement("div",{className:"info_icon"},React.createElement("svg",{height:"16",viewBox:"0 0 7 16",width:"7",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{transform:""},React.createElement("path",{d:"m3.697914 4c1.3027495 0 2.302086-1.07875496 2.302086-2.24691874 0-.93503238-.57471882-1.75308126-1.72576182-1.75308126-1.51626237 0-2.27318953 1.28431168-2.27318953 2.21934406-.03050184 1.10967203.60602334 1.78065594 1.69686535 1.78065594z"}),React.createElement("path",{d:"m6.5414814 12.9135625c-.06832231 0-.13208979.0143823-.19054332.0395513-.03795684.0237307-.07591368.0460233-.11387052.0690349 0 .0014382-.00075913.0014382-.00151827.0014382-.63160178.3804114-1.1918447.5645046-1.39301594.5645046-.20041211 0-.28619456-.2502517-.08578246-.9787143l1.13035463-4.1219617c.4296714-1.50726305.28619456-2.4874155-.57314825-2.4874155-.96562195 0-3.13827134.86653243-5.1287279 2.3594132-.0060731.00431469-.01214619.00862937-.01746015.01294406-.10248346.07910254-.16776922.19847547-.16776922.3329498 0 .24018409.20572606.435064.4585186.435064.05389871 0 .10703828-.01006759.15562303-.02660722.04023425-.0208543.07970936-.0409895.12070275-.06184381.61414163-.31209549 1.31482485-.56594275 1.51295955-.56594275.2004121 0 .17232404.25168991 0 .87947648l-.98763692 3.92132894c-.60199545 2.2105566.0288472 2.7132173.88894914 2.7132173.79785273 0 2.7678126-.6500791 4.67248671-2.3090752.01973756-.0179779.03947511-.0352366.05921267-.0517762.0743954-.0769452.11918447-.1797785.11918447-.2919603 0-.2401841-.20496692-.4336258-.4585186-.4336258z"})))),React.createElement("div",{className:info_text_class+" "+info_text_class+"_"+info_text_position},React.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.info_text}}),React.createElement("a",{className:"info_link",href:this.props.info_link},this.props.info_link_text)))}}]),InfoButton}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},LazyArticleNav=function(_React$Component){function LazyArticleNav(props){_classCallCheck(this,LazyArticleNav),_get(Object.getPrototypeOf(LazyArticleNav.prototype),"constructor",this).call(this,props),this.state={prev_item:null,next_item:null,should_show:!0}}return _inherits(LazyArticleNav,_React$Component),_createClass(LazyArticleNav,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var that=this,params=this.getSessionStore();$.ajax("/api/v1/"+this.props.model+"/"+this.props.id+"/prev_next",{dataType:"json",data:params,success:function(data){that.setState({prev_item:data.prev_item,next_item:data.next_item})}})}},{key:"getSessionStore",value:function(){return"undefined"!=typeof Storage?sessionStorage[this.props.model]?JSON.parse(sessionStorage[this.props.model]):(console.log("No stored params for this model"),{}):(console.error("No web storage."),{})}},{key:"getLinkWithSite",value:function(link){return this.props.subsite?link+"?site="+this.props.subsite:link}},{key:"getPrevious",value:function(){if(this.state.prev_item){var url=this.getUrl(this.state.prev_item),thumb=this.getThumb(this.state.prev_item);return React.createElement("a",{className:"article_nav_block prev",href:this.getLinkWithSite(url),target:"_self"},React.createElement("div",{className:"link_box"},React.createElement("img",{alt:"Previous Article",src:"/assets/arrow_left.jpg"})),React.createElement("div",{className:"article_details",id:"prev_details"},React.createElement("div",{className:"img"},React.createElement("img",{alt:"",src:thumb})),React.createElement("div",{className:"title"},this.state.prev_item.title)))}return null}},{key:"getNext",value:function(){if(this.state.next_item){var url=this.getUrl(this.state.next_item),thumb=this.getThumb(this.state.next_item);return React.createElement("a",{className:"article_nav_block next",href:this.getLinkWithSite(url),target:"_self"},React.createElement("div",{className:"link_box"},React.createElement("img",{alt:"Next Article",src:"/assets/arrow_right.jpg"})),React.createElement("div",{className:"article_details",id:"next_details"},React.createElement("div",{className:"img"},React.createElement("img",{alt:"",src:thumb})),React.createElement("div",{className:"title"},this.state.next_item.title)))}return null}},{key:"getUrl",value:function(item){return"resources"==this.props.model?item.link:item.url}},{key:"getThumb",value:function(item){return"resources"==this.props.model?item.list_image_src:item.thumb}},{key:"render",value:function(){return this.state.prev_item||this.state.next_item?React.createElement("div",{className:"article_nav"},this.getPrevious(),this.getNext()):null}}]),LazyArticleNav}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){
if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},LilOverlay=function(_React$Component){function LilOverlay(props){_classCallCheck(this,LilOverlay),_get(Object.getPrototypeOf(LilOverlay.prototype),"constructor",this).call(this,props),this.state={open:!1}}return _inherits(LilOverlay,_React$Component),_createClass(LilOverlay,[{key:"getListItem",value:function(item,idx,list_item_component){if(list_item_component){var component=window[list_item_component];return React.createElement("li",{className:"slide",key:"nli_"+item.id},React.createElement(component,{item:item}))}return null}},{key:"getOverlay",value:function(item){var _this=this,that=this;return React.createElement("div",{className:"lil_overlay"},React.createElement("a",{className:"close_button",onClick:function(e){_this.closeOverlay(e)},title:"close"},React.createElement("span",{className:"close_icon"})),item.sections.map(function(v){return React.createElement("div",{className:"overlay_section grid_view"},React.createElement("h2",null,v.title),React.createElement("ul",{className:"item_list"},v.items.map(function(w,j){return that.getListItem(w,j,v.list_item_component)})),v.buttons?v.buttons.map(function(w){return React.createElement("a",{className:"button",href:w.link,target:w.target},w.title)}):null)}),React.createElement("div",{className:"background_area",onClick:function(e){_this.closeOverlay(e)}}))}},{key:"closeOverlay",value:function(e){e.stopPropagation(),this.setState({open:!1})}},{key:"toggleOverlay",value:function(e){e.preventDefault(),this.setState({open:!this.state.open})}},{key:"render",value:function(){var _this2=this,item=this.props.item;return React.createElement("li",{key:item.id,className:"nav_overlay "+(item.li_class?item.li_class:"")+" "+(this.state.open?"open":"")},React.createElement("div",{className:"nav_title",id:item.id,onClick:function(e){_this2.toggleOverlay(e)}},React.createElement("a",{className:"main_nav_item icon",href:item.link,title:item.name},React.createElement("span",null,item.name),React.createElement("span",{className:"indicator"}))),React.createElement("div",{className:"global_subnav_container"},this.getOverlay(item)),React.createElement("div",{className:"gradient_line"}))}}]),LilOverlay}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Loader=function(_React$Component){function Loader(props){_classCallCheck(this,Loader),Loader.defaultProps={component:"div",loadedClassName:"loadedContent",parentClassName:"loader"},_get(Object.getPrototypeOf(Loader.prototype),"constructor",this).call(this,props,Loader.defaultProps),Loader.propTypes={className:PropTypes.string,color:PropTypes.string,component:PropTypes.any,corners:PropTypes.number,direction:PropTypes.oneOf([1,-1]),hwaccell:PropTypes.bool,left:PropTypes.string,length:PropTypes.number,lines:PropTypes.number,loaded:PropTypes.bool,loadedClassName:PropTypes.string,opacity:PropTypes.number,options:PropTypes.object,parentClassName:PropTypes.string,radius:PropTypes.number,rotate:PropTypes.number,scale:PropTypes.number,shadow:PropTypes.bool,speed:PropTypes.number,top:PropTypes.string,trail:PropTypes.number,width:PropTypes.number,zIndex:PropTypes.number},this.state={loaded:!1,options:{}}}return _inherits(Loader,_React$Component),_createClass(Loader,[{key:"componentDidMount",value:function(){this.updateState(this.props)}},{key:"componentWillReceiveProps",value:function(nextProps){this.updateState(nextProps)}},{key:"updateState",value:function(props){props||(props={});var loaded=this.state.loaded,options=this.state.options;"loaded"in props&&(loaded=!!props.loaded);var allowedOptions=Object.keys(this.constructor.propTypes);allowedOptions.splice(allowedOptions.indexOf("loaded"),1),allowedOptions.splice(allowedOptions.indexOf("options"),1);var propsOrObjectOptions="options"in props?props.options:props;allowedOptions.forEach(function(key){key in propsOrObjectOptions&&(options[key]=propsOrObjectOptions[key])}),this.setState({loaded:loaded,options:options},this.spin)}},{key:"spin",value:function(){if(!("undefined"==typeof window||!window.document||!window.document.createElement)&&!this.state.loaded){var spinner=new Spinner(this.state.options),target=ReactDOM.findDOMNode(this.refs.loader);target.innerHTML="",spinner.spin(target)}}},{key:"render",value:function(){var props,children;return this.state.loaded?(props={key:"content",className:this.props.loadedClassName},children=this.props.children):props={key:"loader",ref:"loader",className:this.props.parentClassName},React.createElement("div",props,children)}}]),Loader}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Meganav=function(_React$Component){function Meganav(props){_classCallCheck(this,Meganav),_get(Object.getPrototypeOf(Meganav.prototype),"constructor",this).call(this,props),this.state=this.getState(),this.openGallerySubnav=this.openGallerySubnav.bind(this),this.closeGallerySubnav=this.closeGallerySubnav.bind(this)}return _inherits(Meganav,_React$Component),_createClass(Meganav,[{key:"getState",value:function(){var nav_items=this.props.nav_items?this.props.nav_items:[],breakpoint_for_desktop_nav=window.getComputedStyle(document.documentElement).getPropertyValue("--breakpoint_for_desktop_nav").split("px")[0],is_desktop_nav=this.isDesktop(),highlightCurrent="undefined"!=typeof this.props.highlight_current&&this.props.highlight_current.highlight,parent_ids=[],current_id=undefined,modal_search_suggestions=this.props.modal_search&&this.props.modal_search.suggestions?this.props.modal_search.suggestions:null;return highlightCurrent&&(parent_ids="undefined"!=typeof this.props.highlight_current.parent_ids?this.props.highlight_current.parent_ids:[],current_id="undefined"!=typeof this.props.highlight_current.current_id?this.props.highlight_current.current_id:undefined),{nav_items:nav_items,search_open:!1,search:"",modal_search_suggestions:modal_search_suggestions,last_meganav_open:null,last_description_open:null,parent_ids:parent_ids,current_id:current_id,opened_subnavs:[],highlight_current:highlightCurrent,no_redirect:"undefined"!=typeof this.props.no_redirect&&this.props.no_redirect.name.toLowerCase(),is_desktop_nav:is_desktop_nav,breakpoint_for_desktop_nav:breakpoint_for_desktop_nav}}},{key:"componentDidMount",value:function(){this.getData(),"undefined"!=typeof nav&&(nav.toggleSubnav=function(){}),"undefined"!=typeof magic_shell_nav&&(magic_shell_nav.toggleSubnav=function(){}),window.innerWidth<this.state.breakpoint_for_desktop_nav&&this.setState({is_desktop_nav:!1}),null!==document.querySelector(".admin_only")&&this.setState({admin_content_page:!0}),$(window).resize(this.resize.bind(this)),$(".site_nav ul.nav").hover(function(){$(".page_cover").addClass("nav_hover_on").fadeIn(100)},function(){$(".page_cover").removeClass("nav_hover_on").stop().fadeOut()})}},{key:"resize",value:function(){var is_desktop_nav=this.isDesktop();is_desktop_nav!=this.state.is_desktop_nav&&this.closeOverlays(),this.setState({is_desktop_nav:is_desktop_nav})}},{key:"getData",value:function(){var that=this;0==this.state.nav_items.length&&$.getJSON(this.props.nav_api_url,null,function(data){that.setState({nav_items:data.items})})}},{key:"isDesktop",value:function(){var bp=getComputedStyle(document.documentElement).getPropertyValue("--breakpoint_for_desktop_nav"),desktopBreakpoint=bp.length>0?bp.replace(/\D/g,""):1024;return window.innerWidth>=desktopBreakpoint}},{key:"closeOverlays",value:function(){this.closeGallerySubnav()}},{key:"forceExternalLink",value:function(link){return!!Array.isArray(this.props.force_external_icon_for)&&!!this.props.force_external_icon_for.includes(link)}},{key:"isExternalLink",value:function(link){return!!/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(link)}},{key:"isCurrent",value:function(item){var parent_ids=this.state.parent_ids,current_id=this.state.current_id,current=!1;return void 0!==current_id&&current_id==item.id?current=!0:(parent_ids.length>0&&parent_ids.map(function(element){if(element==item.id)return current=!0}),current)}},{key:"getExpandableArrow",value:function(){return React.createElement("img",{className:"arrow_expand",src:"/assets/arrow_down.png",alt:"expand arrow",onClick:function(){}})}},{key:"getLinkTitleTarget",value:function(item,main,showSubSubnav){var _this=this,hasSubSubnavItems="undefined"!=typeof item.sections&&"undefined"!=typeof item.sections.items,showSubSubnavItems=void 0!==showSubSubnav&&(showSubSubnav&&hasSubSubnavItems),noRedirect=this.state.no_redirect==item.name.toLowerCase();if("/#missions_gallery_subnav"==item.link){return React.createElement("a",{className:main?"main_nav_item":"",onClick:function(e){_this.toggleGallerySubnav(e)}},item.name,this.getExpandableArrow(),showSubSubnavItems?this.getSubnavItems(item.sections,!1):"")}return"overlay"==item.target?React.createElement("a",{href:"javascript:void(0)",onClick:function(){explore_overlay.init(item.link)}},this.getLinkTitleText(item,main)):noRedirect?React.createElement("a",{className:main?"main_nav_item":"",target:item.target},this.getLinkTitleText(item,main),showSubSubnavItems?this.getSubnavItems(item.sections,!1):""):React.createElement("a",{className:main?"main_nav_item":"",href:item.link,target:item.target},this.getLinkTitleText(item,main),showSubSubnavItems?this.getSubnavItems(item.sections,!1):"")}},{key:"getLinkTitleText",value:function(item,main){var showIcon="undefined"==typeof this.props.show_external_icon||this.props.show_external_icon,forceExternalLink=this.forceExternalLink(item.link),isExternalLink=this.isExternalLink(item.link);return showIcon&&isExternalLink&&!main||forceExternalLink?React.createElement("span",null,React.createElement("span",null,item.name),React.createElement("span",{className:"no_wrap"},"\xa0",this.getExternalLinkIcon())):React.createElement("span",null,item.name)}},{key:"getExternalLinkIcon",value:function(){return React.createElement("span",{className:"external_link_icon"},React.createElement("svg",{display:"inline-block",height:"11",viewBox:"0 0 11 11",width:"11",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"m5.335 4.125 1.485 1.485 2.75-2.75 1.43 1.43v-4.29h-4.29l1.375 1.375zm5.61 1.87-1.045-1.045v4.95h-8.8v-8.8h4.95l-1.1-1.1h-3.85c-.605 0-1.1.495-1.1 1.1v8.8c0 .605.495 1.1 1.1 1.1h8.8c.605 0 1.1-.495 1.1-1.1z",fill:"#388fda",transform:""})))}},{key:"toggleGallerySubnav",value:function(){this.state.missions_gallery_subnav_open?this.closeGallerySubnav():this.openGallerySubnav()}},{key:"openGallerySubnav",value:function(){this.setState({missions_gallery_subnav_open:!0},function(){$(".missions_gallery_subnav").parents("li").addClass("open").find(".global_subnav_container .subnav").addClass("hide"),$(".missions_gallery_subnav_item .arrow_box").addClass("reverse"),$(".site_header_area").addClass("missions_gallery_subnav_open")})}},{key:"closeGallerySubnav",value:function(){this.setState({missions_gallery_subnav_open:!1}),$(".missions_gallery_subnav").parents("li").removeClass("open").find(".global_subnav_container .subnav").removeClass("hide"),$(".missions_gallery_subnav_item .arrow_box").removeClass("reverse"),$(".site_header_area").removeClass("missions_gallery_subnav_open")}},{key:"getGallerySubnav",value:function(item){return"/#missions_gallery_subnav"==item.link&&this.props.gallery_subnav_items?React.createElement(MissionsGallerySubnav,{item:item,gallery_subnav_items:this.props.gallery_subnav_items,open:this.state.missions_gallery_subnav_open,open_gallery_subnav:this.openGallerySubnav,close_gallery_subnav:this.closeGallerySubnav,get_external_link_icon:this.getExternalLinkIcon}):null}},{key:"getNavSection",value:function(item){var _this2=this,that=this,sections=item.sections,columns=!!sections[0].columns&&sections[0].columns,isExpandedMeganav="undefined"!=typeof item.expanded_meganav&&item.expanded_meganav;return React.createElement("div",{className:"meganav "+(isExpandedMeganav?"columnar":"")},sections.map(function(v){return columns&&columns.length>0?React.createElement("div",{key:"sections_container_"+that.getRandomInt()},React.createElement("div",{className:"sections_container"},_this2.getSubnavItems(v)),_this2.getColumnarSection(columns)):React.createElement("div",{key:"sections_container_"+that.getRandomInt(),className:"sections_container"},_this2.getSubnavItems(v,isExpandedMeganav))}),this.getFeaturesHtml(item))}},{key:"getColumnarSection",value:function(item){var _this3=this;return item.map(function(y,i){var sub_items=_this3.sortSubItems(y.sub_items);return React.createElement("div",{className:"meganav_columnar_section",key:i},React.createElement("div",{className:"title"},y.title),_this3.getColumns(sub_items))})}},{key:"getColumns",value:function(sorted_item){var _this4=this;return sorted_item.map(function(sub_items,index){return React.createElement("div",{className:"col",key:index},_this4.getColumnarSubSection(sub_items))})}},{key:"getColumnarSubSection",value:function(sub_items){var _this5=this,that=this;return sub_items.map(function(item,index){var showIcon="undefined"==typeof _this5.props.show_external_icon||_this5.props.show_external_icon,isExternalLink=_this5.isExternalLink(item.link);return React.createElement("span",{className:"nav_item",key:index},React.createElement("a",{href:item.url,onTouchEnd:that.openLinkWithoutHavingToDoubleTap},item.link_text,showIcon&&isExternalLink?that.getExternalLinkIcon(item.link,!0):""))})}},{key:"openLinkWithoutHavingToDoubleTap",value:function(e){var event=e||window.event,target=event.target||event.srcElement;if(target instanceof HTMLAnchorElement){var link=target.getAttribute("href");window.location=link}}},{key:"sortSubItems",value:function(item){var sub_items=[],first_half=[],second_half=[];return void 0!==item&&item.map(function(y,i){i<Math.ceil(item.length/2)?first_half.push(y):second_half.push(y)}),sub_items.push(first_half,second_half),sub_items}},{key:"getFeaturesHtml",value:function(item){var _this6=this;if(item.features&&item.features.length>0){var feature=item.features[0];return React.createElement("div",{className:"detail_container"},React.createElement("div",{className:"feature_info"},React.createElement("div",{className:"single_layout"},React.createElement("a",{className:"image_container",href:feature.link,style:{backgroundImage:"url('"+feature.image_src+"')"}},React.createElement("div",{id:item.id,className:"bottom_description "+(feature.title.length>30?"tall_description":""),onClick:function(e){_this6.showOrGo(e)}},React.createElement("div",{className:"category_title"},feature.categories),React.createElement("div",{className:"content_title"},feature.title),React.createElement("div",{className:"description",dangerouslySetInnerHTML:{__html:feature.body}}))))))}return null}},{key:"getRandomInt",value:function(){return Math.floor(5e6*Math.random())}},{key:"getSubnavItems",value:function(v,showSubSubnav){var that=this;if("undefined"!=typeof v.items)return React.createElement("ul",null,v.items.map(function(w){return that.getSubnavByType(w,showSubSubnav,!0)}))}},{key:"getSubnavByType",value:function(w,showSubSubnav,desktop){return"undefined"!=typeof w.sub_items?this.getSubItemsFromItem(w):React.createElement("li",{key:(desktop?"desktop_subnav_":"mobile_subnav_")+w.id},this.getLinkTitleTarget(w,!1,void 0!==showSubSubnav&&showSubSubnav))}},{key:"getMobileSubnavItems",value:function(v){var that=this;return v.items.map(function(w){return that.getSubnavByType(w,!1,!1)})}},{key:"getSubItemsFromItem",value:function(w){var sub_items=this.sortSubItems(w.sub_items);return React.createElement("li",{key:w.id,className:"meganav_columnar_section"},React.createElement("div",{className:"title"},w.title),this.getColumns(sub_items))}},{key:"getMobileSubnavColumns",value:function(v){return v.columns.map(function(w,j){return React.createElement("li",{key:j,className:"stellarnav_section"},React.createElement("div",{className:"stellarnav_title"},w.title),React.createElement("ul",{className:"top_nav_items"},w.sub_items.map(function(x,k){return React.createElement("li",{className:"nav_item",key:k},React.createElement("a",{href:x.url},x.link_text))})))})}},{key:"getMobileSubnav",value:function(sections){var that=this;return sections.length>0?React.createElement("ul",{className:"subnav"},sections.map(function(v){return v.items&&v.columns?React.createElement("div",{key:"subnav_"+that.getRandomInt()},that.getMobileSubnavItems(v),that.getMobileSubnavColumns(v)):v.items?React.createElement("div",{key:"subnav_"+that.getRandomInt()},that.getMobileSubnavItems(v)):null})):null}},{key:"onClickArrow",value:function(e){var state=this.state;e.currentTarget.parentNode.querySelector(".global_subnav_container");console.log(e.currentTarget);var subnavId=e.currentTarget.parentNode.querySelector(".nav_title").getAttribute("id");state.opened_subnavs.includes(subnavId);e.currentTarget.parentNode.classList.length>0&&e.currentTarget.parentNode.classList[0].includes("missions_gallery_subnav_item")?this.toggleGallerySubnav():$(e.currentTarget).toggleClass("reverse").parent().find(".global_subnav_container").toggle()}},{key:"getSubnavHeight",value:function(targetSubnav,navOpen){var subnavHeight,styleState=[];return(navOpen=navOpen||!1)?subnavHeight=targetSubnav.style.height:(styleState.visibility=targetSubnav.style.visibility,styleState.display=targetSubnav.style.display,targetSubnav.style.visibility="hidden",targetSubnav.style.display="block",subnavHeight=targetSubnav.scrollHeight,targetSubnav.style.visibility=styleState.visibility,targetSubnav.style.display=styleState.display),subnavHeight}},{key:"getOpenAnimation",value:function(targetSubnav){var subnavHeight=this.getSubnavHeight(targetSubnav,!1);requestAnimationFrame(function(){targetSubnav.style.height="0px",targetSubnav.style.transition="height .5s ease-out",requestAnimationFrame(function(){targetSubnav.style.height=subnavHeight+"px"})})}},{key:"getCloseAnimation",value:function(targetSubnav){var subnavHeight=this.getSubnavHeight(targetSubnav,!0),transition=targetSubnav.style.transition;targetSubnav.style.transition="",requestAnimationFrame(function(){targetSubnav.style.height=subnavHeight+"px",targetSubnav.style.transition=transition,requestAnimationFrame(function(){targetSubnav.style.height="0px"})})}},{key:"openSubNavFor",value:function(subnavId){var subnavToOpen=document.getElementById(subnavId).parentNode.querySelector(".global_subnav_container");this.getOpenAnimation(subnavToOpen),subnavToOpen.classList.toggle("expanded")}},{key:"closeSubNavFor",value:function(subnavId){var subnavToClose=document.getElementById(subnavId).parentNode.querySelector(".global_subnav_container");subnavToClose.style.transition;this.getCloseAnimation(subnavToClose),subnavToClose.classList.toggle("expanded")}},{key:"getNavItemHTML",value:function(item,i){var _this7=this,that=this;if(item.style&&"icon"==item.style){if("orrery"==item.name){var key=this.getRandomInt();return React.createElement("li",{className:item.name,id:item.name,key:key},React.createElement("a",{href:"javascript:void(0)",onClick:function(e){_this7.getOrreryOverlay(e)}},React.createElement("span",{className:"orrery_label"},item.name)))}if(item.features&&item.features.length>0)return this.getIconWithFeatures(item);var li_id="li_"+item.id;return React.createElement("li",{className:item.li_class,key:li_id},React.createElement("div",{className:"nav_title"},React.createElement("a",{className:"main_nav_item icon",href:item.link,title:item.name},React.createElement("span",null,item.name))),React.createElement("div",{className:"gradient_line"}))}if(item.style&&"lil_overlay"==item.style)return React.createElement(LilOverlay,{item:item});if(!(item&&item.sections&&item.sections.length>0))return item.short_description&&""!=item.short_description?this.getGoDescription(item):React.createElement("li",{key:item.id,className:this.state.highlight_current&&this.isCurrent(item)?"current":""},React.createElement("div",{className:"nav_title"},this.getLinkTitleTarget(item,!0)),React.createElement("div",{className:"gradient_line"}));var _ret=function(){var li_id="li_"+item.id,has_missions_gallery_subnav="/#missions_gallery_subnav"==item.link&&_this7.props.gallery_subnav_items,missions_gallery_subnav=has_missions_gallery_subnav?"missions_gallery_subnav_item":"",clickGallerySubnav=function(){has_missions_gallery_subnav&&$(".no-touchevents").length&&that.toggleGallerySubnav()},touchEnd=null;return touchEnd=has_missions_gallery_subnav?function(e){_this7.toggleGallerySubnav(e)}:function(e){_this7.openOrGo(e)},{v:React.createElement("li",{key:li_id,className:(item.style?item.style:"")+" "+missions_gallery_subnav+" "+(_this7.state.highlight_current&&_this7.isCurrent(item)?"current":""),onMouseEnter:function(e){_this7.openMegaNav(e)},onMouseLeave:function(e){_this7.closeMegaNav(e)}},React.createElement("div",{className:"arrow_box",onClick:function(e){return _this7.onClickArrow(e)}},React.createElement("span",{className:"arrow_down"})),React.createElement("div",{className:"nav_title",id:li_id,onTouchEnd:touchEnd,onClick:clickGallerySubnav},_this7.getLinkTitleTarget(item,!0)),React.createElement("div",{className:"global_subnav_container"},_this7.getMegaNavForItem(item,i),_this7.getMobileSubnav(item.sections)),_this7.getGallerySubnav(item,i),React.createElement("div",{className:"gradient_line"}))}}();return"object"==typeof _ret?_ret.v:void 0}},{key:"getOrreryOverlay",value:function(e){e.preventDefault();var o=this.props.orrery_url?this.props.orrery_url:"//eyes.nasa.gov/apps/orrery/#/home?close=true",h=$(window).height();explore_overlay.init(o,null,"orrery_iframe",function(){$("#explore_overlay .content iframe").css({"min-width":"100%","overscroll-behavior":"none",margin:0,position:"fixed",top:0,left:0,height:h,width:"100vw"}).attr("scrolling","no")}),window.addEventListener("message",function(event){"close_overlay"===event.data&&explore_overlay.closeModal()}),gas("send","event","orrery","launch")}},{key:"getMegaNavForItem",value:function(item,i){var showWide="undefined"!=typeof item.expanded_meganav&&item.expanded_meganav;return this.props.subnav_only?null:React.createElement("div",{key:i,className:"meganav_container "+(item.features&&item.features.length>0?"":"no_feature")+" "+(item.meganav_style?item.meganav_style:"")+" "+(showWide?"wide":"")},React.createElement("div",{className:"nav_item_indicator"}),this.getNavSection(item,i))}},{key:"getIconWithFeatures",value:function(item){var _this8=this,li_id="li_"+item.id;return React.createElement("li",{key:li_id,className:item.li_class,onMouseEnter:function(e){_this8.openMegaNav(e)},onMouseLeave:function(e){_this8.closeMegaNav(e)}},React.createElement("div",{className:"nav_title",id:li_id,onTouchEnd:function(e){_this8.openOrGo(e)}},React.createElement("a",{className:"main_nav_item icon",href:item.link,title:item.name},React.createElement("span",null,item.name))),React.createElement("div",{className:"global_subnav_container"},this.getMegaNavForIcon(item)),React.createElement("div",{className:"gradient_line"}))}},{key:"getMegaNavForIcon",value:function(item){var _this9=this;return this.props.subnav_only?null:React.createElement("div",{className:"meganav_container "+(item.features&&item.features.length>0?"":"no_feature")+" "+(item.meganav_style?item.meganav_style:""),onClick:function(e){_this9.clearLastDescriptionId(e)}},React.createElement("div",{className:"nav_item_indicator"}),React.createElement("div",{className:"meganav"},this.getSectionDescription(item),this.getFeaturesHtml(item)))}},{key:"getSectionDescription",value:function(item){return item.short_description?React.createElement("div",{className:"sections_container"},React.createElement("h2",{className:"section_title"},item.name),React.createElement("div",{className:"section_description"},item.short_description),React.createElement("a",{className:"button",href:item.link},"GO")):null}},{key:"getGoDescription",value:function(item){var _this10=this,li_id="li_"+item.id;return React.createElement("li",{key:li_id,className:""+(item.style?item.style:""),onMouseEnter:function(e){_this10.openMegaNav(e)},onMouseLeave:function(e){_this10.closeMegaNav(e)}},React.createElement("div",{className:"nav_title",id:li_id,onTouchEnd:function(e){_this10.openOrGo(e)}},this.getLinkTitleTarget(item,!0)),React.createElement("div",{className:"global_subnav_container"},React.createElement("div",{className:"meganav_container "+(item.features&&item.features.length>0?"":"no_feature")+" "+(item.meganav_style?item.meganav_style:""),onClick:function(e){_this10.clearLastDescriptionId(e)}},React.createElement("div",{className:"nav_item_indicator"}),React.createElement("div",{className:"meganav"},this.getSectionDescription(item)),this.getFeaturesHtml(item))),React.createElement("div",{className:"gradient_line"}))}},{key:"closeOpenDropdown",value:function(id,$parentElm){var that=this;if(null!==that.state.last_meganav_open&&that.state.last_meganav_open){var $lastParentElm=$(document.getElementById(that.state.last_meganav_open).parentNode);that.closeMegaNavFor($lastParentElm)}this.openAndSetLastDropdown(id,$parentElm)}},{key:"openAndSetLastDropdown",value:function(id,$parentElm){var that=this;$parentElm&&!$parentElm.hasClass("expanded")&&(that.openMegaNavFor($parentElm),this.setState({last_meganav_open:id}))}},{key:"openOrGo",value:function(e){var $parentElm=$(e.currentTarget.parentNode),matchMore=/(More)/gi,isMoreSSE=null!==e.target.innerText.match(matchMore);if(this.state.is_desktop_nav)if(this.state.last_meganav_open==e.currentTarget.id)isMoreSSE&&(e.preventDefault(),e.stopPropagation(),this.closeMegaNavFor($parentElm));else{if(e.preventDefault(),e.stopPropagation(),null==this.state.last_meganav_open)$(".page_cover").fadeIn("fast"),document.getElementsByClassName("page_cover")[0].addEventListener("touchend",this.removePageCover);this.closeOpenDropdown(e.currentTarget.id,$parentElm)}else{if(!isMoreSSE)return!0;e.preventDefault(),e.stopPropagation()}}},{key:"removePageCover",value:function(){var pageCover=document.getElementsByClassName("page_cover");$(".page_cover").fadeOut(),pageCover.removeEventListener("touchend",this.removePageCover)}},{key:"getMeAnHref",value:function(e){var el;if($(e.target).attr("href"))el=$(e.target);else{var parental_a=$(e.target).parents("a");parental_a.length>0&&(el=parental_a.eq(0))}return el}},{key:"openPageCover",value:function(){var that=this;$(".page_cover").on("click touchevent",function(){if(that.state.last_meganav_open){var $lastParentElm=$(document.getElementById(that.state.last_meganav_open).parentNode);that.closeMegaNavFor($lastParentElm)}else $(".page_cover").fadeIn("fast")})}},{key:"openMegaNav",value:function(e){if(this.state.is_desktop_nav){var $thisItem=$(e.currentTarget);this.props.subnav_only?this.setSubnavPosition($thisItem):this.openMegaNavFor($thisItem)}}},{key:"openMegaNavFor",value:function($thisItem){var $meganavContainer=$thisItem.find(".meganav_container"),$subnavContainer=$thisItem.find(".subnav");$meganavContainer.length>0?($thisItem.addClass("expanded"),$meganavContainer.show(),this.openPageCover(),this.setArrowAndNavPosition($thisItem)):$subnavContainer.length>0&&(this.openPageCover(),this.setSubnavPosition($thisItem))}},{key:"closeMegaNav",value:function(e){if(this.state.is_desktop_nav){var $thisItem=$(e.currentTarget);this.closeMegaNavFor($thisItem)}}},{key:"closeMegaNavFor",value:function($thisItem){var $meganavContainer=$thisItem.find(".meganav_container");$thisItem.removeClass("expanded"),$(".page_cover").off("click touchevent",function(){$(".page_cover").fadeOut()}),$meganavContainer.hide(),this.setState({last_meganav_open:null})}},{key:"showOrGo",value:function(e){var id=e.currentTarget.id,that=this;if(console.log("showOrGo"),this.state.is_desktop_nav&&null!=document.querySelector(".touchevents")){if(this.state.last_description_open==id)return!0;e.preventDefault(),e.stopPropagation(),that.setState({last_description_open:id})}}},{key:"clearLastDescriptionId",value:function(){this.setState({last_description_open:null})}},{key:"setSubnavPosition",value:function($target){var offsetleft=$target.offset().left,subnav_offset=offsetleft+$target.outerWidth()/2-16-$(".subnav").width()/2;$(window).width();if(offsetleft+$target.find(".subnav").width()>$(window).width()){var target_li=[].concat(_toConsumableArray($($target).children())).find(function(e){return"global_subnav_container"==e.className});$(target_li).children().css({left:subnav_offset+20})}}},{key:"setArrowAndNavPosition",value:function($target){var offset=$target.offset().left+$target.outerWidth()/2-16,meganav_width=$(".meganav_container").width()/2,meganav_offset=offset-meganav_width,no_feature_offset=offset-$(".meganav_container.no_feature").width()/2,wide_offset=offset-$(".meganav_container.wide").width()/2;if($(".nav_item_indicator").show(),$(".meganav_container").css({left:meganav_offset+16}),$(".meganav_container.no_feature").css({left:no_feature_offset+16}),$(".meganav_container.wide").css({left:wide_offset+16}),$target.find(".meganav").hasClass("columnar")){var top=$(".meganav.columnar li:first-child").position().top;$(".meganav.columnar li").each(function(index,value){$(value).position().top==top&&$(value).addClass("top")})}var ww=$(window).width(),mw=$target.find(".meganav_container").width(),lt=parseInt($(".meganav_container").css("left")),rt=ww-(lt+mw);$(window).width();rt<10?($(".meganav_container").css({left:"auto",right:"10px"}),$(".nav_item_indicator").css({left:meganav_width-5-rt})):$(".nav_item_indicator").css({left:"calc(50% - 15px)"})}},{key:"openOrSubmit",value:function(e){""!=this.state.search?e.currentTarget.parentElement.submit():this.state.search_open?this.setState({search_open:!1}):this.setState({search_open:!0})}},{key:"changeSearch",value:function(e){var search=e.currentTarget.value;this.setState({search:search})}},{key:"toggleModalSearch",value:function(e){""!=this.state.search?e.currentTarget.parentElement.parentElement.submit():this.state.search_open?this.setState({search_open:!1}):this.setState({search_open:!0})}},{key:"getSearchSuggestions",value:function(){if(this.state.modal_search_suggestions&&"object"==typeof this.state.modal_search_suggestions)return React.createElement("div",{className:"search_suggestions"},React.createElement("h3",null,"Suggestions"),React.createElement("ul",{className:"search_suggestions_list"},this.state.modal_search_suggestions.map(function(v,i){return React.createElement("li",{key:"suggestion_"+i},React.createElement("a",{href:v.link},v.title))})))}},{key:"getSearchHtml",value:function(){var _this11=this,hasPlaceholder=this.props.search_placeholder,use_search=(!this.state.is_desktop_nav||"undefined"==typeof this.props.hide_search_on_desktop||!0!==this.props.hide_search_on_desktop)&&this.props.search
;return use_search&&this.props.modal_search?React.createElement("form",{className:"meganav_overlay_search modal_search meganav_search "+(this.state.search_open?"open":""),action:this.props.search_submit?this.props.search_submit:"/search.html"},React.createElement("div",{className:"modal_search_box"},React.createElement("input",{className:"search_field",name:"q",type:"text",onChange:function(e){_this11.changeSearch(e)},value:this.state.search,placeholder:hasPlaceholder?hasPlaceholder.placeholder:"search"}),React.createElement("div",{className:"search_submit",onClick:function(e){_this11.toggleModalSearch(e)}})),this.getSearchSuggestions(),React.createElement("div",{className:"modal_close",onClick:function(e){_this11.toggleModalSearch(e)}})):use_search?React.createElement("form",{className:"meganav_overlay_search meganav_search",action:this.props.search_submit?this.props.search_submit:"/search.html"},React.createElement("label",{htmlFor:"meganav_search_input",className:"search_field_label",style:{display:"inline-block",textIndent:"-9999px",overflow:"hidden"}},"search"),React.createElement("input",{id:"meganav_search_input",className:"search_field "+(this.state.search_open?"search_open":""),name:"q",type:"text",onChange:function(e){_this11.changeSearch(e)},value:this.state.search,placeholder:hasPlaceholder?hasPlaceholder.placeholder:"search"}),React.createElement("div",{className:"search_submit",onClick:function(e){_this11.openOrSubmit(e)}})):null}},{key:"render",value:function(){var that=this;return React.createElement("span",{style:{visibility:0==this.state.nav_items.length?"hidden":"visible"}},React.createElement("ul",{className:"nav"},this.state.nav_items.map(function(v,i){return that.getNavItemHTML(v,i)})),this.getSearchHtml())}}]),Meganav}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},MegasectionNav=function(_React$Component){function MegasectionNav(props){_classCallCheck(this,MegasectionNav),_get(Object.getPrototypeOf(MegasectionNav.prototype),"constructor",this).call(this,props);var is_touch=$("html").hasClass("touchevents");this.state={sticky:!1,nav_pos:-1,active:!1,active_sub_nav:{},last_clicked_sub_nav:{},is_touch:is_touch},this.stick=this.stick.bind(this)}return _inherits(MegasectionNav,_React$Component),_createClass(MegasectionNav,[{key:"toggleNav",value:function(){this.setState({active:!this.state.active})}},{key:"toggleSubNav",value:function(name){var data=this.state.active_sub_nav,newValue=data[name]?null:name;data[name]=newValue,this.setState({active_sub_nav:data,last_clicked_sub_nav:name})}},{key:"componentDidMount",value:function(){undefined;if($(".magic_shell_subnav").length>0&&$(".magic_shell_subnav").height(),"undefined"!=typeof nav&&(nav.onScroll=null),"undefined"!=typeof magic_shell_nav&&(magic_shell_nav.onScroll=null),this.props.has_feature&&"undefined"!=typeof IntersectionObserver){var options={root:null,rootMargin:"0px",threshold:[0]},observer=new IntersectionObserver(this.stick,options),target=document.querySelector(".main_feature");observer.observe(target)}}},{key:"stick",value:function(entries){var sticky=!entries[0].isIntersecting;this.setState({sticky:sticky},function(){$("body").toggleClass("secondary_nav_is_fixed",sticky)})}},{key:"getCurrentPageName",value:function(){var currentItems=this.props.nav.items.filter(function(item){return item.current});return currentItems.length>0?React.createElement("span",{className:"megasection_page_name"},this.state.sticky||!this.props.has_feature?": ":"",""+currentItems[0].name):""}},{key:"getNavItemHTML",value:function(item,i){return React.createElement("li",{key:i,className:item.current?"current":""},this.getArrowBox(item),React.createElement("div",{className:"nav_title"},this.getLinkTitleTarget(item,!0)),this.getSubnav(item))}},{key:"onArrowBoxClick",value:function(e){console.log("onArrowBoxClick"),this.toggleSubNav(e.target.getAttribute("data-name"))}},{key:"getArrowBox",value:function(item){var that=this;item.name;return item.items&&item.items.length>0&&!this.state.is_touch?React.createElement("button",{type:"button",onClick:function(){that.toggleSubNav(item.name)},className:"arrow_box "+(this.state.active_sub_nav[item.name]?"reverse":"")},React.createElement("span",{className:"arrow_down"},"Expand")):item.items&&item.items.length>0&&this.state.is_touch?React.createElement("button",{type:"button",onMouseDown:function(){that.toggleSubNav(item.name)},className:"arrow_box "+(this.state.active_sub_nav[item.name]?"reverse":"")},React.createElement("span",{className:"arrow_down","data-name":item.name},"Expand")):null}},{key:"getSubnav",value:function(item){var that=this;return item.items&&item.items.length>0?React.createElement("div",{className:"megasection_subnav_container "+(this.state.active_sub_nav[item.name]?"":"megasection_subnav_container--hidden")},React.createElement("ul",{className:"megasection_subnav"},item.items.map(function(v,i){return React.createElement("li",{key:"sub-"+i,className:v.current?"current":""},that.getLinkTitleTarget(v))}))):null}},{key:"getLinkTitleTarget",value:function(item,main){var _this=this;return this.state.is_touch?React.createElement("a",{className:main?"main_nav_item":"","data-href":item.link,onTouchEnd:function(e){return _this.onSubnavClick(e,item,main)},target:item.target},item.name):React.createElement("a",{className:main?"main_nav_item":"","data-href":item.link,onClick:function(e){return _this.onSubnavClick(e,item,main)},target:item.target},item.name)}},{key:"onSubnavClick",value:function(event,item,main){return console.log("onSubnavClick"),$("html").hasClass("touchevents")&&main?(this.toggleSubNav(item.name),this.state.last_clicked_sub_nav===item.name&&void(window.location=item.link)):(this.toggleSubNav(item.name),window.location=item.link,!1)}},{key:"render",value:function(){var _this2=this,that=this;return React.createElement("div",{className:"megasection_nav "+(this.state.sticky?"sticky":"")+" "+(this.state.active?"":"megasection_nav--nav-hidden")},React.createElement("div",{className:"megasection_title_container "+(this.state.active?"":"megasection_title_container--nav-hidden"),onClick:function(){_this2.toggleNav()}},React.createElement("span",{className:"megasection_title"},this.state.sticky||this.state.active||!this.props.has_feature?this.props.nav.title:"",this.getCurrentPageName())),React.createElement("ul",{className:"nav "+(this.state.active?"":"nav--hidden")},this.props.nav.items.map(function(v,i){return that.getNavItemHTML(v,i)})))}}]),MegasectionNav}(React.Component),MissionListItem=function(props){var item=props.item;return React.createElement("div",{className:"image_and_description_container"},React.createElement("a",{href:item.url,target:item.target},React.createElement("div",{className:"rollover_description"},React.createElement("div",{className:"rollover_description_inner"},React.createElement("div",{className:"rollover_description_text"},item.description),React.createElement("div",{className:"link_text_rollover"},item.link_text)),React.createElement("div",{className:"overlay_arrow"},React.createElement("img",{src:"/assets/overlay-arrow.png",alt:"More"}))),props.item.thumb?React.createElement("div",{className:"list_image"},React.createElement("img",{className:"thumb",src:props.item.thumb,alt:props.item.title})):"",React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",null,item.title)))),React.createElement("div",{className:"list_text"},React.createElement("div",{className:"content_title"},React.createElement("a",{href:item.url,target:item.target},item.title)),React.createElement("div",{className:"article_teaser_body",dangerouslySetInnerHTML:{__html:item.description}}),React.createElement("div",{className:"link_text"},React.createElement("a",{href:item.url,target:item.target},item.link_text))))},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Modal=function(_React$Component){function Modal(){_classCallCheck(this,Modal),_get(Object.getPrototypeOf(Modal.prototype),"constructor",this).apply(this,arguments)}return _inherits(Modal,_React$Component),_createClass(Modal,[{key:"render",value:function(){var _this=this;if(!1===this.props.isOpen)return null;var modalStyle={position:"absolute",top:"50vh",left:"50vw",transform:"translate(-50%, -50%)",zIndex:"9999",background:"#fff"};if(this.props.width&&this.props.height&&(modalStyle.width=this.props.width+"px",modalStyle.height=this.props.height+"px",modalStyle.marginLeft="-"+this.props.width/2+"px",modalStyle.marginTop="-"+this.props.height/2+"px",modalStyle.transform=null),this.props.style)for(var key in this.props.style)modalStyle[key]=this.props.style[key];var backdropStyle={position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px",zIndex:"9998",background:"rgba(0, 0, 0, 0.8)"};if(this.props.backdropStyle)for(var key in this.props.backdropStyle)backdropStyle[key]=this.props.backdropStyle[key];return React.createElement("div",{className:this.props.containerClassName},React.createElement("div",{className:this.props.className,style:modalStyle},this.props.children),!this.props.noBackdrop&&React.createElement("div",{className:this.props.backdropClassName,style:backdropStyle,onClick:function(e){return _this.close(e)}}))}},{key:"close",value:function(e){e.preventDefault(),this.props.onClose&&this.props.onClose()}}]),Modal}(React.Component),MultiObjectListItem=function(props){var item=props.item;return React.createElement("div",{className:"image_and_description_container"},React.createElement("a",{href:item.link,target:item.target},React.createElement("div",{className:"rollover_description"},React.createElement("div",{className:"rollover_description_inner"},item.description),React.createElement("div",{className:"overlay_arrow"},React.createElement("img",{src:"/assets/overlay-arrow.png",alt:"More"}))),React.createElement("div",{className:"list_image"},React.createElement("img",{src:item.image_src?item.image_src:"/assets/public/missing.png",alt:item.title})),React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",null,item.title)))),React.createElement("div",{className:"list_text"},React.createElement("div",{className:"list_date"},item.date),React.createElement("div",{className:"content_title"},React.createElement("a",{href:item.link,target:item.target},item.title)),React.createElement("div",{className:"moli_teaser_body"},item.description,item.item_type?React.createElement("p",null,"Item type: ",item.item_type):null)))},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},NewsListItem=function(_React$Component){function NewsListItem(){_classCallCheck(this,NewsListItem),_get(Object.getPrototypeOf(NewsListItem.prototype),"constructor",this).apply(this,arguments)}return _inherits(NewsListItem,_React$Component),_createClass(NewsListItem,[{key:"render",value:function(){var item=this.props.item;return React.createElement("div",{className:"image_and_description_container"},React.createElement("a",{href:item.url,target:item.target},React.createElement("div",{className:"rollover_description"},React.createElement("div",{className:"rollover_description_inner"},item.description),React.createElement("div",{className:"overlay_arrow"},React.createElement("img",{src:"/assets/overlay-arrow.png",alt:"More"}))),React.createElement("div",{className:"list_image"},React.createElement("img",{src:item.thumb,alt:item.main_image_alt})),React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",null,item.title)))),React.createElement("div",{className:"list_text"},React.createElement("div",{className:"list_date"},item.date),React.createElement("div",{className:"content_title"},React.createElement("a",{href:item.url,target:item.target},item.title)),React.createElement("div",{className:"article_teaser_body"},item.description)))}}]),NewsListItem}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},OtpDesktopNav=function(_React$Component){function OtpDesktopNav(props){_classCallCheck(this,OtpDesktopNav),_get(Object.getPrototypeOf(OtpDesktopNav.prototype),"constructor",this).call(this,props),this.sticky_buffer=30,this.sticky_offset=0,this.sticky_bottom_offset=0,this.sticky_threshold_top=0,this.sticky_threshold_bottom=0,this.is_within_sticky_thresholds=!1,this.is_after_sticky_threshold=!1,this.state={anchors:[],is_loaded:!1,desktop_otp_nav_open:!0,desktop_opt_nav_is_fixed:!1,desktop_otp_was_left_open_when_fixed:!0,current_anchor:-1}}return _inherits(OtpDesktopNav,_React$Component),_createClass(OtpDesktopNav,[{key:"componentDidMount",value:function(){var _this=this,that=this;this.setState({anchors:this.getAnchors()},function(){_this.props.column_shim&&$(".content_page").hasClass(_this.props.column_shim)&&_this.state.anchors.length?$("."+_this.props.column_shim).addClass("has_margin_for_otp_nav"):$("."+_this.props.column_shim).addClass("two_column")}),window.addEventListener("scroll",function(){that.queryScrollAndSetPosition()}),window.addEventListener("resize",function(){that.setStickyMeasurementsAndQueryScroll()}),that.queryDocumentReadyStateForComplete()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.queryScrollAndSetPosition),window.removeEventListener("resize",this.setStickyMeasurementsAndQueryScroll)}},{key:"componentWillReceiveProps",value:function(){var that=this;this.setState({anchors:this.getAnchors(),is_loaded:!1},function(){that.queryDocumentReadyStateForComplete()})}},{key:"queryDocumentReadyStateForComplete",value:function(){var that=this,interval=setInterval(function(){"complete"===document.readyState&&(clearInterval(interval),that.setPageIsLoadedState())},600)}},{key:"setPageIsLoadedState",value:function(){var that=this;that.setState({is_loaded:!0},function(){that.setStickyMeasurements(),that.queryScrollAndSetPosition()})}},{key:"getPageNav",value:function(){var anchors=[];return $("a.mb_anchor").each(function(i,el){var atext=$(el).parent().text().trim(),aname=$(el).attr("name");anchors.push({href:aname,text:atext})}),anchors}},{key:"getAnchors",value:function(){return"undefined"!=typeof this.props.page_anchors&&Array.isArray(this.props.page_anchors)?this.props.page_anchors:this.getPageNav()}},{key:"queryScrollAndSetPosition",value:function(){var st=$(window).scrollTop();st<=this.sticky_threshold_top?(this.is_within_sticky_thresholds=!1,this.is_after_sticky_threshold=!1,this.setState({desktop_opt_nav_is_fixed:!1,desktop_otp_nav_open:!0})):st>this.sticky_threshold_top&&st<this.sticky_threshold_bottom?(this.is_within_sticky_thresholds=!0,this.is_after_sticky_threshold=!1,this.setState({desktop_opt_nav_is_fixed:!0}),this.state.desktop_otp_was_left_open_when_fixed||this.setState({desktop_otp_nav_open:!1})):(this.is_within_sticky_thresholds=!1,this.is_after_sticky_threshold=!0,this.setState({desktop_opt_nav_is_fixed:!1}))}},{key:"setStickyMeasurementsAndQueryScroll",value:function(){this.setStickyMeasurements(),this.queryScrollAndSetPosition()}},{key:"setStickyMeasurements",value:function(){var $primary_column=$("#primary_column"),$site_area_header_height=$(".site_header_area").outerHeight(!0);this.sticky_offset=$site_area_header_height+this.sticky_buffer;var $offset_top=$primary_column.offset().top;if(this.sticky_threshold_top=$offset_top-this.sticky_offset,"undefined"!=typeof this.props.sticky_bottom_fn){var stb_arr=this.props.sticky_bottom_fn(this.sticky_offset);this.sticky_threshold_bottom=stb_arr[0],this.sticky_bottom_offset=stb_arr[1]}else{var $primary_column_height=$primary_column.outerHeight(!0),$nav_height=$(".on_this_page_nav_wrapper.desktop").outerHeight(!0),$offset_bottom=$offset_top+$primary_column_height;this.sticky_threshold_bottom=$offset_bottom-$nav_height-this.sticky_offset;var $content_page_padding_top=parseFloat($(".content_page").css("padding-top"));this.sticky_bottom_offset=$content_page_padding_top+$primary_column_height-$nav_height}}},{key:"toggleOnThisPageNavDesktop",value:function(){this.state.desktop_opt_nav_is_fixed&&this.setState({desktop_otp_nav_open:!this.state.desktop_otp_nav_open,desktop_otp_was_left_open_when_fixed:!this.state.desktop_otp_was_left_open_when_fixed})}},{key:"getOTPNavTop",value:function(){return this.state.desktop_opt_nav_is_fixed?{top:this.sticky_offset}:this.is_after_sticky_threshold?{top:this.sticky_bottom_offset}:{}}},{key:"render",value:function(){var _this2=this;return this.state.anchors.length>0?React.createElement("div",{className:"on_this_page_nav_wrapper desktop "+(this.state.desktop_otp_nav_open?"nav_is_open":"")+" "+(this.state.desktop_opt_nav_is_fixed?"nav_is_fixed":"")+" "+(this.state.is_loaded?"":"hidden"),ref:"otp_nav_wrapper_desktop",style:this.getOTPNavTop()},React.createElement("div",{className:"on_this_page_nav"},React.createElement("div",{className:"title_wrapper",ref:"desktop_title_wrapper",onClick:function(){_this2.toggleOnThisPageNavDesktop()}},React.createElement("h4",{className:"page_nav_title"},"On this page"),React.createElement("div",{className:"hamburger"})),React.createElement("ul",null,this.state.anchors.map(function(anchor,i){return React.createElement("li",{key:i},React.createElement("a",{href:"#"+anchor.href},anchor.text))})))):null}}]),OtpDesktopNav}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},OtpMobileNav=function(_React$Component){function OtpMobileNav(props){_classCallCheck(this,OtpMobileNav),_get(Object.getPrototypeOf(OtpMobileNav.prototype),"constructor",this).call(this,props),this.state={mobile_otp_nav_open:!1}}return _inherits(OtpMobileNav,_React$Component),_createClass(OtpMobileNav,[{key:"toggleOnThisPageNavMobile",value:function(){this.setState({mobile_otp_nav_open:!this.state.mobile_otp_nav_open})}},{key:"getPageNav",value:function(){var anchors=[];return $("a.mb_anchor").each(function(i,el){var atext=$(el).parent().text().trim(),aname=$(el).attr("name");anchors.push({href:aname,text:atext})}),anchors}},{key:"render",value:function(){var _this=this,anchors="undefined"!=typeof this.props.page_anchors&&Array.isArray(this.props.page_anchors)?this.props.page_anchors:this.getPageNav();return anchors.length>0?React.createElement("div",{className:"on_this_page_nav_wrapper mobile "+(this.state.mobile_otp_nav_open?"nav_is_open":"")},React.createElement("div",{className:"on_this_page_nav"},React.createElement("div",{className:"title_wrapper",onClick:function(){_this.toggleOnThisPageNavMobile()}},React.createElement("h4",{className:"page_nav_title"},"On this page"),React.createElement("div",{className:"arrow"})),React.createElement("ul",null,anchors.map(function(anchor,i){return React.createElement("li",{key:i},React.createElement("a",{href:"#"+anchor.href},anchor.text))})))):null}}]),OtpMobileNav}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x2,_x3,_x4){for(var _again=!0;_again;){var object=_x2,property=_x3,receiver=_x4;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x2=parent,_x3=property,_x4=receiver,_again=!0,desc=parent=undefined}},PageDashboard=function(_React$Component){function PageDashboard(props){_classCallCheck(this,PageDashboard),_get(Object.getPrototypeOf(PageDashboard.prototype),"constructor",this).call(this,props),this.state={api:[],countdown:[]}}return _inherits(PageDashboard,_React$Component),_createClass(PageDashboard,[{key:"componentDidMount",value:function(){this.props.single_slide||($("#page_dashboard").on("init",function(){$(".dashboard").css("visibility","visible")}),this.carousel=$("#page_dashboard").slick({dots:!1,infinite:!0,speed:300,slide:".dashboard .slide",slidesToShow:5,slidesToScroll:5,centerMode:!1,variableWidth:!1,arrows:!0,onInit:function(){$(".dashboard").css("visibility","visible")},responsive:[{breakpoint:1500,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,centerPadding:"0px"}}]}),$("body").on("dashboard_resize",function(){$("#page_dashboard")[0].slick.refresh()}),window.addEventListener("orientationchange",function(){var clock=undefined;clock=setInterval(function(){$("#page_dashboard")[0].slick.refresh()},500),setTimeout(function(){clearInterval(clock)},3e3)})),document.body.classList.add("has_dashboard")}},{key:"formatThousandsNoRounding",value:function(n,dp){for(var e="",s=e+n,l=s.length,b=n<0?1:0,i=s.lastIndexOf("."),j=-1==i?l:i,r=e,d=s.substr(j+1,dp);(j-=3)>b;)r=","+s.substr(j,3)+r;return s.substr(0,j+3)+r+(dp?"."+d+(d.length<dp?"00000".substr(0,dp-d.length):e):e)}},{key:"convertOption",value:function(item,i,just_the_val){var multi_idx=arguments.length<=3||arguments[3]===undefined?null:arguments[3];return"api"==item.type?this.buildApiSlide(item,i,just_the_val):"calculation"==item.type?this.buildCalcSlide(item,i,just_the_val):"api_count"==item.type?this.buildApiCountSlide(item,i,just_the_val):"countdown"==item.type?this.buildCountdownSlide(item,i,multi_idx):"sols_on_mars"==item.type?this.buildMarsSolsSlide(item,i,just_the_val):"raw_images"==item.type?this.buildRawImagesSlide(item,i,just_the_val):"undefined"!=typeof item.values?this.buildMultipleValuesSlide(item,i):this.buildStaticSlide(item,just_the_val,{suffix:item.suffix})}},{key:"buildMarsSolsSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(SolsOnMars,{deg_east:item.deg_east,sol_0:item.sol_0}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(SolsOnMars,{deg_east:item.deg_east,sol_0:item.sol_0})))}},{key:"buildRawImagesSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(RawImagesDashboard,{mission:item.mission}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(RawImagesDashboard,{mission:item.mission})))}},{key:"buildCalcSlide",value:function(item,i,just_the_val){var suffix=item&&item.suffix?" "+item.suffix:"";return just_the_val?React.createElement("div",{className:"value"},this.calculateForSubtype(item),suffix):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement("div",{className:"value"},Math.round(this.calculateForSubtype(item)).toLocaleString(),suffix)))}},{key:"calculateForSubtype",value:function(item){switch(item.subtype){case"per-day-since":var now=new Date,start_date=new Date(item.since);return(now.getTime()-start_date.getTime())/864e5*parseFloat(item.value);default:return console.error("UNKNOWN Calculation for: ",item.subtype),""}}},{key:"buildApiSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(SpiceAPI,{base_url:"/spice_data",query:item}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(SpiceAPI,{base_url:"/spice_data",query:item})))}},{key:"buildApiCountSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(ApiCount,{url:item.url,units:item.units}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(ApiCount,{url:item.url,units:item.units})))}},{key:"buildCountdownSlide",value:function(item,i,multi_idx){var data=this.state.countdown[i];if("number"==typeof multi_idx&&Array.isArray(data)&&(data=data[multi_idx]),data&&!Array.isArray(data))return React.createElement("div",{className:"image_and_description_container"},React.createElement(Countdown,{count_up:item.count_up,date:data.date,title:data.title,sols:data.sols,sol_0:data.sol_0,deg_east:data.deg_east}));this.getCountdownData(item,i,multi_idx)}},{key:"buildMultipleValuesSlide",value:function(item,i){console.log(item);var that=this;return React.createElement("div",null,React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout multiple"},React.createElement("div",{className:"title"},item.title),item.values.map(function(v,j){return j+1==item.values.length?React.createElement("span",{className:"value_container last"},that.convertOption(v,i,!0,j)):React.createElement("span",{className:"value_container"},that.convertOption(v,i,!0,j))}))))}},{key:"getCountdownData",value:function(item,i,multi_idx){var that=this;$.getJSON("/api/v1/basic_html_elements/"+item.id+"}",function(data){if(data.publish_date){var new_countdown=that.state.countdown;"number"==typeof multi_idx?(Array.isArray(new_countdown[i])||(new_countdown[i]=[]),new_countdown[i][multi_idx]={date:data.publish_date,title:data.title}):new_countdown[i]={date:data.publish_date,title:data.title},that.setState({countdown:new_countdown})}})}},{key:"loadOverlay",value:function(link){$("body").trigger("feed_hipo",{url:link})}},{key:"loadMepOverlay",value:function(e,link){$("html,body").animate({scrollTop:0},280);var url=link+"?layout=empty&override_preview=true",$target=$(e.currentTarget);$target.hasClass("current")&&$("#vital_signs_modal").hasClass("visible")?($target.removeClass("current"),vital_signs.closeModal()):(console.log("open modal!"),$(".vital_signs_menu .slide.overlay").removeClass("current"),$target.addClass("current"),$("#vital_signs_modal").hasClass("visible")?vital_signs.closeModal(function(){$("#vital_signs_modal .loading").show(),vital_signs.loadModal(url)}):($("#vital_signs_modal .loading").show(),vital_signs.loadModal(url)))}},{key:"buildStaticSlide",value:function(item,just_the_val,options){var suffix=options&&options.suffix?" "+options.suffix:"";return just_the_val?React.createElement("div",{className:"value"},item.value,suffix):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement("div",{className:"value"},item.value,suffix)))}},{key:"createSlide",value:function(v,i){var that=this;return v.link?React.createElement("li",{key:i,className:"slide link_to_page"},React.createElement("a",{href:v.link,target:v.target},this.convertOption(v,i),React.createElement("span",{className:"overlay_icon circle_arrow"}))):v.overlay||v.mep_overlay?React.createElement("li",{key:i,className:"slide overlay",onClick:function(e){v.overlay?that.loadOverlay(v.overlay):that.loadMepOverlay(e,v.mep_overlay)}},this.convertOption(v,i),React.createElement("span",{className:"overlay_icon circle_plus"})):React.createElement("li",{key:i,className:"slide"},this.convertOption(v,i))}},{key:"render",value:function(){var that=this;return this.props.single_value?React.createElement("span",null,this.convertOption(this.props.options[0],0,!0)):this.props.single_slide?"api"==this.props.options.type?React.createElement("div",{className:"readout"},this.convertOption(this.props.options,0,!1)):React.createElement("div",{className:"readout"},this.convertOption(this.props.options[0],0,!1)):React.createElement("section",{
className:"dashboard"},React.createElement("div",{className:"slide_container",id:"page_dashboard"},that.props.options.map(function(v,i){return that.createSlide(v,i)})))}}]),PageDashboard}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},PageSort=function(_React$Component){function PageSort(){_classCallCheck(this,PageSort),_get(Object.getPrototypeOf(PageSort.prototype),"constructor",this).apply(this,arguments)}return _inherits(PageSort,_React$Component),_createClass(PageSort,[{key:"getSortBy",value:function(){var _this=this;return this.props.sort_options.length>0?React.createElement("div",{className:"page_option_wrapper sort_by"},React.createElement("label",{htmlFor:"order"},"Sort by"),React.createElement("select",{className:"options_field",id:"order",name:"order",defaultValue:this.props.initial_sort,onChange:function(e){_this.props.changeSort(e.target.value)}},this.props.sort_options.map(function(option){return React.createElement("option",{key:option.value,value:option.value},option.label)}))):null}},{key:"render",value:function(){var _this2=this;return this.props.page_count>0?React.createElement("div",{className:"pagination_options"},React.createElement(PageSortPagination,this.props),React.createElement("div",{className:"options"},this.getSortBy(),React.createElement("div",{className:"page_option_wrapper per_page"},React.createElement("label",{htmlFor:"per_page"},"Per page"),React.createElement("select",{className:"options_field",id:"per_page",name:"per_page",defaultValue:this.props.initial_pp,onChange:function(e){_this2.props.changePerPage(e.target.value)}},this.props.per_page_options.map(function(option){return React.createElement("option",{key:option.value,value:option.value},option.label)}))))):null}}]),PageSort}(React.Component),PageSortPagination=function(_React$Component2){function PageSortPagination(props){_classCallCheck(this,PageSortPagination),_get(Object.getPrototypeOf(PageSortPagination.prototype),"constructor",this).call(this,props),this.state={page_input_val:this.props.page}}return _inherits(PageSortPagination,_React$Component2),_createClass(PageSortPagination,[{key:"componentDidMount",value:function(){$(".page_selector input").val("")}},{key:"prevPage",value:function(e){if(e.preventDefault(),this.props.page>1){var prev=this.props.page-1;this.setState({page_input_val:prev},this.props.changePage(prev)),this.props.logGaEvent&&this.props.logGaEvent("Clicked previous page button",prev)}}},{key:"nextPage",value:function(e){if(e.preventDefault(),this.props.page<this.props.page_count){var next=this.props.page+1;this.setState({page_input_val:next},this.props.changePage(next)),this.props.logGaEvent&&this.props.logGaEvent("Clicked next page button",next)}}},{key:"onPageInput",value:function(e){var val=parseInt(e.target.value);val<1?val=1:val>this.props.page_count&&(val=this.props.page_count),this.setState({page_input_val:val},this.props.changePage(val))}},{key:"blurOnEnter",value:function(e){13===e.keyCode&&(e.preventDefault(),$(e.target).blur())}},{key:"render",value:function(){var _this3=this,prev_disabled=this.props.page<=1,next_disabled=this.props.page>=this.props.page_count;return this.props.page_count>0?React.createElement("div",null,React.createElement("div",{className:"pagination_nav"},React.createElement("nav",{className:"pagination"},React.createElement("span",{className:"prev"+(prev_disabled?" disabled":"")},React.createElement("a",{href:"#",rel:"prev",onClick:function(e){_this3.prevPage(e)}})),React.createElement("div",{className:"page_selector"},React.createElement("input",{className:"page_num",placeholder:this.props.formatNumber?this.props.formatNumber(this.props.page):this.props.page,value:this.props.page,size:"4",type:"number",onChange:function(e){_this3.onPageInput(e)},min:"1",max:this.props.page_count,onKeyUp:function(e){_this3.blurOnEnter(e)}})," of",React.createElement("span",{className:"total_pages"}," ",this.props.formatNumber?this.props.formatNumber(this.props.page_count):this.props.page_count)),React.createElement("span",{className:"next"+(next_disabled?" disabled":"")},React.createElement("a",{href:"#",rel:"next",onClick:function(e){_this3.nextPage(e)}}))))):null}}]),PageSortPagination}(React.Component),PaginationCount=function(_React$Component3){function PaginationCount(){_classCallCheck(this,PaginationCount),_get(Object.getPrototypeOf(PaginationCount.prototype),"constructor",this).apply(this,arguments)}return _inherits(PaginationCount,_React$Component3),_createClass(PaginationCount,[{key:"render",value:function(){return this.props.first_load?React.createElement("div",{className:"pagination_status"},React.createElement("span",null,"Loading...")):0==this.props.count?React.createElement("div",{className:"pagination_status no_results_text"},React.createElement("span",null,"No results found.")):React.createElement("div",{className:"pagination_status"},React.createElement("span",{className:"nonessential"},"Showing"),React.createElement("b",null,React.createElement("span",{className:"start_index"}," ",this.props.formatNumber?this.props.formatNumber(this.props.start_index+1):this.props.start_index+1),"-",React.createElement("span",{className:"end_index"},this.props.formatNumber?this.props.formatNumber(this.props.end_index):this.props.end_index," ")),"of",React.createElement("b",null,React.createElement("span",{className:"total_results"}," ",this.props.formatNumber?this.props.formatNumber(this.props.count):this.props.count," ")),React.createElement("span",{className:"nonessential"},this.props.item_type))}}]),PaginationCount}(React.Component),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},PeopleDetailSubPages=function(_React$Component){function PeopleDetailSubPages(props){_classCallCheck(this,PeopleDetailSubPages),_get(Object.getPrototypeOf(PeopleDetailSubPages.prototype),"constructor",this).call(this,props);var nav_items=[];this.props.meeting_documents_count>0&&nav_items.push({label:"Meeting Presentations ("+this.props.meeting_documents_count+")",value:"meeting_presentations"}),this.props.documents_count>0&&nav_items.push({label:"Documents ("+this.props.documents_count+")",value:"documents"}),this.props.body&&nav_items.unshift({label:"About",value:"body"}),this.props.publications_count>0&&("About"!=nav_items[0].label&&nav_items.unshift({label:"Recent Publications",value:"recent_publications"}),nav_items.push({label:"Publications ("+this.props.publications_count+")",value:"publications"})),this.state={nav_items:nav_items,active_tab:nav_items[0],tab_index:0}}return _inherits(PeopleDetailSubPages,_React$Component),_createClass(PeopleDetailSubPages,[{key:"setActiveTab",value:function(tab_index){this.setState({active_tab:this.state.nav_items[tab_index],tab_index:tab_index})}},{key:"setActiveTabMobile",value:function(e){var tab_index=e.nativeEvent.target.selectedIndex;this.setState({active_tab:this.state.nav_items[tab_index],tab_index:tab_index})}},{key:"renderRecentPublicationsSidebar",value:function(){var that,_this=this;if(this.props.recent_publications.length>0){var _ret=(that=_this,{v:React.createElement("aside",{className:"boxed"},React.createElement("h2",null,"Recent Publications"),React.createElement("ul",{className:"people_publications_sidebar"},_this.props.recent_publications.map(function(rp,i){return React.createElement("li",{className:"recent_publication_list_item",key:i},React.createElement("div",{className:"content "+(i!=that.props.recent_publications.length-1?"with_sep":"")},React.createElement("div",{className:"publication_year"},rp.publication_year),rp.title))}),React.createElement("li",{className:"recent_publication_list_item all_pubs"},React.createElement("a",{onClick:function(){_this.setActiveTab(_this.state.nav_items.length-1)},href:"javascript:void(0)"},"All publications \u203a"))))});if("object"==typeof _ret)return _ret.v}}},{key:"renderActiveTab",value:function(){var _this2=this;if("body"==this.state.active_tab.value)return React.createElement("div",{className:"people_sub_page people_detail_body"},React.createElement("div",{className:"grid_layout"},React.createElement("article",null,React.createElement("header",{className:"page_header"},React.createElement("h1",{className:"article_title"},"About ",this.props.person_tag)),React.createElement("div",{className:"primary_column"},React.createElement("div",{className:"wysiwyg_content",dangerouslySetInnerHTML:{__html:this.props.body}})),React.createElement("div",{className:"secondary_column"},this.renderRecentPublicationsSidebar(),React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.sidebar}})))));if("recent_publications"!=this.state.active_tab.value){var gl_options={default_view:"list_view",model:"documents",view_toggle:!1,search:!0,list_item:"PersonDocument",title:this.state.active_tab.label.match(/(.+)\(/)[1],per_page:10,conditions:[{name:"null",value:":event_id"}],options:{tags:this.props.person_tag},className:"react_grid_list grid_list_container"};return"meeting_presentations"==this.state.active_tab.value?gl_options.conditions=[{name:"notnull",value:":event_id"}]:"publications"==this.state.active_tab.value&&(gl_options.conditions=[],gl_options.model="publications",gl_options.list_item="ESPublication"),React.createElement("div",{className:"people_sub_page"},React.createElement(GridListPage,_extends({className:"grid_gallery",key:this.state.active_tab.value},gl_options)))}var that,_ret2=(that=_this2,{v:React.createElement("div",{className:"people_sub_page"},React.createElement("ul",{className:"people_publications_list"},_this2.props.recent_publications.map(function(rp,i){return React.createElement("li",{className:"recent_publication_list_item",key:i},React.createElement("div",{className:"content "+(i!=that.props.recent_publications.length-1?"with_sep":"")},React.createElement("div",{className:"publication_year"},rp.publication_year),rp.title))}),_this2.props.publications_count>0?React.createElement("li",{className:"recent_publication_list_item all_pubs"},React.createElement("a",{onClick:function(){_this2.setActiveTab(_this2.state.nav_items.length-1)},href:"javascript:void(0)"},"All publications \u203a")):null))});return"object"==typeof _ret2?_ret2.v:void 0}},{key:"render",value:function(){var that=this;return React.createElement("div",{className:"people_sub_pages"},React.createElement("nav",{className:"tertiary_nav people_subnav"},React.createElement("ul",{className:"desktop_people_subnav"},this.state.nav_items.map(function(nav_item,i){return React.createElement("li",{key:i,className:nav_item==that.state.active_tab?"current":"",onClick:function(){return that.setActiveTab(i)}},nav_item.label)})),React.createElement("div",{className:"mobile_people_subnav"},React.createElement("select",{className:"nav_list",onChange:function(e){return that.setActiveTabMobile(e)},value:this.state.tab_index},that.state.nav_items.map(function(nav_item,i){return React.createElement("option",{key:"mobilenav_"+i,value:i,className:nav_item==that.state.active_tab?"current":""},nav_item.label)})))),this.renderActiveTab())}}]),PeopleDetailSubPages}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},PersonDetail=function(_React$Component){function PersonDetail(){_classCallCheck(this,PersonDetail),_get(Object.getPrototypeOf(PersonDetail.prototype),"constructor",this).apply(this,arguments)}return _inherits(PersonDetail,_React$Component),_createClass(PersonDetail,[{key:"componentDidMount",value:function(){this.changeTitle(),this.setSocialTitle(),this.setSocialUrl(),this.setSocialImage(),this.setSocialDescription(),this.setPageUpdatedAt()}},{key:"componentDidUpdate",value:function(prevProps){prevProps&&this.props.item&&prevProps.item&&this.props.item.id!=prevProps.item.id&&(this.loadImages(),this.changeTitle(),this.setSocialTitle(),this.setSocialUrl(),this.setSocialImage(),this.setSocialDescription(),this.setPageUpdatedAt())}},{key:"setSocialTitle",value:function(){$('meta[property="og:title"]').attr("content",document.title),$('meta[name="twitter:title"]').attr("content",document.title)}},{key:"setSocialDescription",value:function(){if(this.props.item&&this.props.item.meta_social_description){var social_description=this.props.item.meta_social_description;$('meta[name="description"]').attr("content",social_description),$('meta[name="og:description"]').attr("content",social_description),$('meta[name="twitter:description"]').attr("content",social_description)}}},{key:"setSocialUrl",value:function(){$('meta[property="og:url"]').attr("content",document.location.href)}},{key:"setSocialImage",value:function(){if(this.props.item){var item=this.props.item,list_image=item.list_image?item.list_image:this.props.site_share_image;$('meta[property="og:image"]').attr("content",list_image),$('meta[name="twitter:image"]').attr("content",list_image),$('link[rel="image_src"]').attr("href",list_image)}}},{key:"setPageUpdatedAt",value:function(){if(this.props.item&&this.props.item.page_updated_at){var page_updated_at=this.props.item.updated_at;$('meta[property="og:updated_time"]').attr("content",page_updated_at)}}},{key:"loadImages",value:function(){$(".person_detail").css("visibility","hidden")}},{key:"imagesLoaded",value:function(){$(".person_detail").css("visibility","visible"),this.props.images_loaded()}},{key:"changeTitle",value:function(){var title=this.getTitleSpaDetail();this.props.change_title&&this.props.change_title(title)}},{key:"getTitleSpaDetail",value:function(){var item=this.props.item,title=this.props.site_title;return void 0!==item&&"undefined"!=typeof item.job_title&&"undefined"!=typeof item.name&&(title=item.name+" | "+item.job_title+" - "+this.props.site_title),title}},{key:"getMainImage",value:function(){var _this=this,item=this.props.item,asset_url="";return"undefined"!=typeof this.props.options&&this.props.options.external_asset_url&&(asset_url=this.props.options.external_asset_url),item.list_image_src&&item.caption?React.createElement("figure",{className:"main_image"},React.createElement("img",{id:"main_image",src:asset_url+item.detail_image_src,onLoad:function(){_this.imagesLoaded()},onError:function(){_this.imagesLoaded()}}),React.createElement("figcaption",{className:"main_image_caption"},item.caption)):item.list_image_src?React.createElement("figure",{className:"main_image"},React.createElement("img",{id:"main_image",src:asset_url+item.detail_image_src,onLoad:function(){_this.imagesLoaded()},onError:function(){_this.imagesLoaded()}})):void this.imagesLoaded()}},{key:"render",value:function(){var item=this.props.item;return this.props.item?React.createElement("div",{className:"person_detail"},React.createElement("header",{className:"dynamic_grid_header"},React.createElement("h2",{className:"category_title"},React.createElement("a",{href:"#",onClick:this.props.hide_detail},"PEOPLE")),React.createElement("h1",{className:"article_title"},item.name),React.createElement("h2",{className:"sub_title"},item.job_title)),React.createElement("div",{className:"clearfix",id:"primary_column"},this.getMainImage(),React.createElement("div",{className:"wysiwyg_content",dangerouslySetInnerHTML:{__html:item.body}}))):React.createElement("div",null)}}]),PersonDetail}(React.Component),PersonDocumentListItem=function(props){var item=props.item,item_date=new Date(item.date),url=item.file?item.url:item.url+"?list=events";""!=item.body&&null!=item.body||""!=item.link||0!=item.has_slides||null!=item.file||(url=null);var target=item.target?item.target:"_self",file_name_parts=item&&item.file_file_name?item.file_file_name.split("."):null,file_size=item&&item.file_info?", ("+item.file_info.match(/\(([^)]*)\)[^(]*$/)[1]+")":"",file_link_text=file_name_parts?""+file_name_parts[file_name_parts.length-1].toUpperCase()+file_size:"";return React.createElement("div",{className:"image_and_description_container document_list_container"},React.createElement("a",{href:url||"javascript:void(0)",style:url?{}:{cursor:"default"},target:target},null!=item.list_image?React.createElement("div",{className:"list_image"},React.createElement("img",{src:item.list_image,alt:item.title})):null,React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",null,item.title)))),React.createElement("div",{className:"list_text "+(null==item.list_image?"full_width_text":"")},item_date?React.createElement("div",{className:"document_date"},item_date.getUTCMonth()+1+"/"+item_date.getUTCDate()+"/"+item_date.getUTCFullYear()):null,React.createElement("div",{className:"content_title"},url?React.createElement("a",{href:item.url,target:target},item.title):React.createElement("div",null,item.title)),React.createElement("div",{className:"article_teaser_body"},React.createElement("div",{className:"document_description"},React.createElement("div",{className:"document_summary"},item.short_description," "),item.file&&!item.body?React.createElement("a",{className:"document_file_link",href:item.file,target:target},file_link_text):null))))},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},PersonListItem=function(_React$Component){function PersonListItem(props){_classCallCheck(this,PersonListItem),_get(Object.getPrototypeOf(PersonListItem.prototype),"constructor",this).call(this,props),"undefined"!=typeof this.props.options?this.options=this.props.options:this.options=null}return _inherits(PersonListItem,_React$Component),_createClass(PersonListItem,[{key:"showDetail",value:function(){"undefined"!=typeof this.props.item.has_detail&&1!=this.props.item.has_detail||(this.options&&this.options.spa?this.props.selected_item(this.props.item,this.scrollToTop):window.location.href=this.props.item.link)}},{key:"scrollToTop",value:function(){window.scroll(0,0)}},{key:"render",value:function(){var _this=this,item=this.props.item,asset_url="";this.options&&this.options.external_asset_url&&(asset_url=this.options.external_asset_url);var hover="undefined"==typeof this.options.hover||"true"==this.options.hover||this.options.hover,has_detail="undefined"==typeof this.props.item.has_detail||1==this.props.item.has_detail;return React.createElement("div",{className:"image_and_description_container person_container "+(has_detail?"has_detail":"")},React.createElement("div",{onClick:function(){_this.showDetail()},target:item.target},hover?React.createElement("div",{className:"rollover_description",style:has_detail?null:{cursor:"default"}},React.createElement("div",{className:"rollover_description_inner",dangerouslySetInnerHTML:{__html:item.short_description}}),React.createElement("div",{className:"overlay_arrow"},React.createElement("img",{src:"/assets/overlay-arrow.png",alt:"More"}))):null,React.createElement("div",{className:"list_image"},React.createElement("img",{src:asset_url+item.list_image_src})),React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",{className:"person_name"},item.name),React.createElement("h4",{className:"person_title"},item.job_title),this.options.show_institution?React.createElement("h4",{className:"person_institution"},item.institution):null,this.options.show_email?React.createElement("h4",{className:"person_email"},React.createElement("a",{href:"mailto:"+item.email},"Email")):null))),React.createElement("div",{className:"list_text"},React.createElement("div",{className:"list_date"},item.date),React.createElement("div",{className:"content_title"},React.createElement("a",{onClick:function(){return _this.showDetail()},target:item.target},item.name)),React.createElement("h4",{className:"person_title"},item.job_title),this.options.show_institution?React.createElement("h4",{className:"person_institution"},item.institution):null,this.options.show_email?React.createElement("h4",{className:"person_email"},React.createElement("a",{href:"mailto:"+item.email},"Email")):null,React.createElement("div",{className:"article_teaser_body",dangerouslySetInnerHTML:{__html:item.short_description}})))}}]),PersonListItem}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},PersonSidebar=function(_React$Component){function PersonSidebar(props){_classCallCheck(this,PersonSidebar),_get(Object.getPrototypeOf(PersonSidebar.prototype),"constructor",this).call(this,props),this.state={loaded:!1,items:null}}return _inherits(PersonSidebar,_React$Component),_createClass(PersonSidebar,[{key:"componentDidMount",value:function(){console.log("PersonSidebar:: componentDidMount"),this.props.initial_items&&this.props.initial_items.length>0?this.setState({loaded:!0,items:this.props.initial_items}):this.getPeople()}},{key:"componentDidUpdate",value:function(prevProps){prevProps&&this.props.item&&prevProps.item&&this.props.item.id!=prevProps.item.id&&console.log("PersonSidebar:: componentDidUpdate")}},{key:"selectedItem",value:function(e){if(this.props.initial_items&&this.props.initial_items.length>0){e.preventDefault(),console.log("PersonSidebar:: selectedItem");var i=parseInt($(e.currentTarget).data("idx"));console.log("PersonSidebar:: selectedItem",i);for(var j=0;j<this.state.items.length;j++)parseInt(this.state.items[j].id)==i&&(console.log("PersonSidebar:: selectedItem",this.state.items[j],i),this.props.selected_item(this.state.items[j]),window.scroll(0,0))}}},{key:"hideDetail",value:function(e){this.props.initial_items&&this.props.initial_items.length>0&&(e.preventDefault(),this.props.hide_detail(e))}},{key:"getPeople",value:function(){console.log("getPeople");var that=this;$.ajax({url:this.props.options.external_api_url,method:"GET",dataType:"json",success:function(data){console.log("Got items successfully.... ",data),that.setState({loaded:!0,items:data.items})},error:function(xhr,status,err){console.error(status,err.toString())}})}},{key:"getMorePeople",value:function(num_of_people){var random_list=[],random_item=undefined;items=this.state.items,item=this.props.article,num_of_people>items.length&&(num_of_people=items.length);for(var i=0;random_list.length<num_of_people;i++)if(random_item=items[Math.floor(Math.random()*items.length)],null==item&&random_list.indexOf(random_item)<0)console.log("adding item "+random_item.id+" to list"),random_list.push(random_item);else if(item&&item.id&&random_item.id!=item.id&&random_list.indexOf(random_item)<0)console.log("adding item "+random_item.id+" to list"),random_list.push(random_item);else{if(i>items.length)return random_list;console.log("Item dupe")}return random_list}},{key:"renderMoreSidebar",value:function(){var more_people,asset_url,title,more_href,_this=this,that=this;if(this.state.loaded){var _ret=(more_people=_this.getMorePeople(3),asset_url="",title="",more_href=_this.props.initial_items&&_this.props.initial_items.length>0?"#":_this.props.people_path,title=_this.props.options&&_this.props.options.more_sidebar_title?_this.props.options.more_sidebar_title:_this.props.short_title?"More "+_this.props.short_title+" People":"More People","undefined"!=typeof _this.props.options&&_this.props.options.external_asset_url&&(asset_url=_this.props.options.external_asset_url),{v:React.createElement("span",null,React.createElement("header",null,React.createElement("h2",{className:"sidebar_title"},title)),React.createElement("ul",null,more_people.map(function(item){var href=that.props.initial_items&&that.props.initial_items.length>0?"#":that.props.people_path+"#"+item.id;return React.createElement("li",{key:item.id,onLoad:that.loadLoad},React.createElement("div",{className:"list_content"},React.createElement("div",{className:"list_image"},React.createElement("a",{href:href,onClick:function(e){that.selectedItem(e)},"data-idx":item.id,target:item.target},React.createElement("img",{src:asset_url+item.list_image_src,alt:item.name}))),React.createElement("div",{className:"list_text"},React.createElement("div",{className:"list_title"},React.createElement("a",{href:href,onClick:function(e){that.selectedItem(e)},"data-idx":item.id,target:item.target},item.name))),React.createElement("div",{className:"list_text"},item.job_title)))})),React.createElement("a",{className:"more_sidebar",href:more_href,onClick:function(e){that.hideDetail(e)}},"view all people \u203a"))});if("object"==typeof _ret)return _ret.v}}},{key:"render",value:function(){var klass=this.props["class"]?this.props["class"]:"";return this.props.initial_items?React.createElement("div",{className:klass+" clearfix",id:"secondary_column"},React.createElement("aside",{className:"list_view_module boxed people_sidebar_module"},this.renderMoreSidebar())):React.createElement("div",null,this.renderMoreSidebar())}}]),PersonSidebar}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},PhotoGallery=function(_React$Component){function PhotoGallery(props){_classCallCheck(this,PhotoGallery),_get(Object.getPrototypeOf(PhotoGallery.prototype),"constructor",this).call(this,props);this.state={photo_items:[],index:null,prev_item:null,next_item:null,total:0,page:0,first_load:!0}}return _inherits(PhotoGallery,_React$Component),_createClass(PhotoGallery,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(){console.log("componentDidUpdate"),this.updateImageBuffer()}},{key:"getData",value:function(append_items,callback){var that=this,n="",page=append_items?this.state.page+1:0;$.ajax({url:this.props.api_url+"&page="+page,success:function(result){console.log(result),n=result;var photo_items=[],total=result.photos.total,_s=n.photos.photo;page=result.photos.page;for(var z=0;z<n.photos.photo.length;z++){var CurrentPhotoUrl="https://farm"+_s[z].farm+".staticflickr.com/"+_s[z].server+"/"+_s[z].id+"_"+_s[z].secret+"_c.jpg";photo_items.push({id:z,url:CurrentPhotoUrl})}append_items?that.setState({photo_items:that.state.photo_items.concat(photo_items),page:page},function(){"function"==typeof callback&&callback.call()}):that.setState({photo_items:photo_items,index:0,total:total,page:page,first_load:!1},function(){})}})}},{key:"renderData",value:function(){console.log("renderData");var no_items_text=this.props.no_items_text?this.props.no_items_text:"There are no items matching these criteria.";if(this.state.photo_items.length>0){var item=this.state.photo_items[this.state.index];return React.createElement("div",{className:"gallery_content responsive_image","data-aspect-ratio":"3/2","data-avoid-crop":!0},React.createElement(PhotoListItem,{key:item.id,item:item,alt:"Photo "+(this.state.index+1)}))}return this.state.first_load?"Loading...":React.createElement("div",{className:"no_items"},no_items_text)}},{key:"loadNext",value:function(){if(console.log("loadNext"),this.state.index<this.state.photo_items.length-1){var index=this.state.index+1;this.setState({index:index})}else this.state.index<this.state.total&&(console.log("loading more data..."),this.getData(!0,this.loadNext))}},{key:"loadPrev",value:function(){if(this.state.index>0){var index=this.state.index-1;this.setState({index:index})}}},{key:"updateImageBuffer",value:function(){}},{key:"renderTitle",value:function(){return this.props.title&&""!=this.props.title?React.createElement("div",{
className:"module_title"},this.props.title):null}},{key:"renderPagination",value:function(){return this.state.total&&0!=this.state.total?React.createElement("div",{className:"photo_index"},this.state.index+1," / ",this.state.total):null}},{key:"prevDisabled",value:function(){return 0==this.state.index?"disabled":""}},{key:"nextDisabled",value:function(){return this.state.index==this.state.photo_items.length-1?"disabled":""}},{key:"render",value:function(){console.log("render");var that=this;return React.createElement("div",null,this.renderTitle(),React.createElement("div",{className:"react_photo_gallery"},that.renderData(),that.renderPagination(),React.createElement("div",{className:"nav_container"},React.createElement("div",{className:"nav"},React.createElement("button",{type:"button",onClick:function(e){that.loadPrev(e)},disabled:that.prevDisabled(),"data-role":"none",className:"prev arrow","aria-label":"Previous",role:"button"}),React.createElement("button",{type:"button",onClick:function(e){that.loadNext(e)},disabled:that.nextDisabled(),"data-role":"none",className:"next arrow","aria-label":"Next",role:"button"})))))}}]),PhotoGallery}(React.Component),PhotoListItem=function(props){return React.createElement("img",{src:props.item.url,alt:props.alt,className:"responsive_image__element"})},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ProjectListItem=function(_React$Component){function ProjectListItem(props){_classCallCheck(this,ProjectListItem),_get(Object.getPrototypeOf(ProjectListItem.prototype),"constructor",this).call(this,props),this.state={show_co_investigators:!1}}return _inherits(ProjectListItem,_React$Component),_createClass(ProjectListItem,[{key:"toggleShowCoInvestigators",value:function(){this.setState({show_co_investigators:!this.state.show_co_investigators})}},{key:"renderPIItem",value:function(item,i){var has_detail="undefined"==typeof item.has_detail||1==item.has_detail;return React.createElement("div",{key:i,className:"investigator_item"},has_detail?React.createElement("a",{className:"name_link",key:i,href:item.url},item.last_name,", ",item.first_name," \u203a"):React.createElement("span",{className:"name_link",key:i},item.last_name,", ",item.first_name),React.createElement("div",{className:"project_info_desc"},item.institution))}},{key:"renderCIItem",value:function(item,i){var has_detail="undefined"==typeof item.has_detail||1==item.has_detail;return React.createElement("div",{key:i,className:"investigator_item"},has_detail?React.createElement("a",{className:"name_link",key:i,href:item.url},item.last_name,", ",item.first_name," \u203a"):React.createElement("span",{className:"name_link",key:i},item.last_name,", ",item.first_name),React.createElement("div",{className:"project_info_desc"},item.institution))}},{key:"render",value:function(){var _this=this,item=this.props.item,list_images=[];item.list_image_file_name?list_images=[item.list_image]:item.principal_investigators.length>0&&(list_images=item.principal_investigators.filter(function(p){return""!=p.list_image}).map(function(p){return p.list_image}));var subject_title=item.category_title?React.createElement("h4",{className:"project_info_title"},"Subject"):null,project_category=item.category_title?React.createElement("div",{className:"project_info_desc"},item.category_title):null;return React.createElement("div",{className:"image_and_description_container project_item_container"},list_images.length>0?React.createElement("div",{className:"list_image"},list_images.map(function(li,idx){return React.createElement("img",{key:idx,src:li})})):null,React.createElement("div",{className:"list_text"+(0==list_images.length?" full_width_text":"")},React.createElement("h2",{className:"project_title"},item.link?React.createElement("a",{href:item.link},item.title):item.title),subject_title,project_category,item.principal_investigators.length>0?React.createElement(React.Fragment,null,React.createElement("h4",{className:"project_info_title"},"Principal Investigator(s)"),item.principal_investigators.map(this.renderPIItem)):null,item.co_investigators.length>0?React.createElement(React.Fragment,null,React.createElement("a",{className:"toggle_co_investigators",onClick:function(e){_this.toggleShowCoInvestigators(e)}},this.state.show_co_investigators?"- Hide Co-Investigators":"+ Show Co-Investigators"),this.state.show_co_investigators?React.createElement("div",{className:"project_coinvestigators"},item.co_investigators.map(this.renderCIItem)):null):null))}}]),ProjectListItem}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},PublicationListItem=function(_React$Component){function PublicationListItem(){_classCallCheck(this,PublicationListItem),_get(Object.getPrototypeOf(PublicationListItem.prototype),"constructor",this).apply(this,arguments)}return _inherits(PublicationListItem,_React$Component),_createClass(PublicationListItem,[{key:"render",value:function(){var item=this.props.item,citation=item.citation?", "+item.citation.autoLink():"",use_publication_year=!(!this.props.options||!this.props.options.use_publication_year)&&this.props.options.use_publication_year;return React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"list_text full_width_text"},use_publication_year?React.createElement("div",{className:"content_year"},item.publication_year):null,item.link?React.createElement("div",{className:"content_title"},React.createElement("a",{href:item.link,target:"_blank"},item.title)):React.createElement("div",{className:"content_title"},item.title),React.createElement("div",{className:"article_teaser_body"},item.authors,React.createElement("div",{className:"citation"},item.periodical&&item.periodical.title?item.periodical.title:"",React.createElement("span",{dangerouslySetInnerHTML:{__html:citation}}))),item.file_src?React.createElement("a",{className:"list_link",href:item.file_src,download:item.file_file_name},"download article"):""))}}]),PublicationListItem}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ResourceListItem=function(_React$Component){function ResourceListItem(){_classCallCheck(this,ResourceListItem),_get(Object.getPrototypeOf(ResourceListItem.prototype),"constructor",this).apply(this,arguments)}return _inherits(ResourceListItem,_React$Component),_createClass(ResourceListItem,[{key:"itemIsFancyboxable",value:function(){var item_is_fancyboxable=this.props.item.fancyboxable,page_is_fancybox=this.props.options&&this.props.options.fancybox;return item_is_fancyboxable&&page_is_fancybox}},{key:"getImageAndDescription",value:function(item){return React.createElement("div",null,React.createElement("div",{className:"rollover_description"},React.createElement("div",{className:"rollover_description_inner",dangerouslySetInnerHTML:{__html:item.short_description}}),React.createElement("div",{className:"overlay_arrow"},React.createElement("img",{src:"/assets/overlay-arrow.png",alt:"More"}))),React.createElement("div",{className:"list_image"},React.createElement("img",{src:item.list_image_src,alt:item.alt_text})),this.getBottomGradient(item))}},{key:"getBottomGradient",value:function(item){return this.props.options&&this.props.options.no_item_title?"":React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",{dangerouslySetInnerHTML:{__html:item.title}})))}},{key:"getLinkedImageAndDescription",value:function(image_and_description){var item=this.props.item,href=item.url;if(this.props.options&&"undefined"!=typeof this.props.options.href_query_params&&(href+="?"+this.props.options.href_query_params),this.props.options.url_prefix&&href.indexOf("//")<0&&(href=this.props.options.url_prefix+href),this.props.options.url_suffix){var suffix=this.props.options.url_suffix;suffix.indexOf("?")&&url.indexOf("?")?href+=suffix.replace("?","&"):href+=suffix}return this.itemIsFancyboxable()?React.createElement("a",{href:href,className:"fancybox_slideshow","data-fancybox-group":"images","data-fancybox-href":item.detail_image,"data-title":item.title,"data-sharedescription":item.share_desc,"data-thumbnail":item.list_image_src,"data-link":href},image_and_description):React.createElement("a",{href:href},image_and_description)}},{key:"render",value:function(){var item=this.props.item,image_and_description=this.getImageAndDescription(item),linked_image_and_desc=this.getLinkedImageAndDescription(image_and_description);return React.createElement("div",{className:"image_and_description_container"},linked_image_and_desc,React.createElement("div",{className:"list_text"},React.createElement("div",{className:"content_title"},React.createElement("a",{href:item.url},item.title)),React.createElement("div",{className:"article_teaser_body",dangerouslySetInnerHTML:{__html:item.short_description}})))}}]),ResourceListItem}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ResourceSwapper=function(_React$Component){function ResourceSwapper(props){_classCallCheck(this,ResourceSwapper),_get(Object.getPrototypeOf(ResourceSwapper.prototype),"constructor",this).call(this,props),this.video_resources=null;var rs_id=Math.ceil(1e5*Math.random());this.rs_id=rs_id;var video_resources=this.props.resources.filter(function(resource){return resource.video_items.length>0});this.video_resources=video_resources,this.state={current_resource:0}}return _inherits(ResourceSwapper,_React$Component),_createClass(ResourceSwapper,[{key:"componentDidMount",value:function(){this.addMoreLessClickListener()}},{key:"componentDidUpdate",value:function(){this.addMoreLessClickListener()}},{key:"addMoreLessClickListener",value:function(){mb_utils.initExpandableElement()}},{key:"toggleSwitchbox",value:function(e){parseInt(e.target.dataset.resource)!=this.state.current_resource&&this.setState({current_resource:0==this.state.current_resource?1:0})}},{key:"getResources",value:function(){return this.video_resources.length?React.createElement(Vid,{sources:this.video_resources[this.state.current_resource].video_items,id:"vid_"+this.rs_id,poster:this.video_resources[this.state.current_resource].detail_image}):React.createElement("div",null,"NO VIDEOS TO SEE HERE")}},{key:"getControls",value:function(){var _this=this;return this.video_resources.length<=1?null:2===this.video_resources.length?React.createElement("div",{className:"switchbox_container",id:"switchbox_"+this.rs_id},React.createElement("form",{className:"switchbox"},React.createElement("input",{type:"radio",id:this.rs_id+"_switch_lt","data-resource":"0",className:"switch_input "+(0===parseInt(this.state.current_resource)?"selected":""),value:this.props.resources[0].title,onChange:function(e){_this.toggleSwitchbox(e)},checked:0==parseInt(this.state.current_resource)||""}),React.createElement("label",{htmlFor:this.rs_id+"_switch_lt",className:"switch_label switch_label_left"},this.props.resources[0].title),React.createElement("input",{type:"radio",id:this.rs_id+"_switch_rt","data-resource":"1",className:"switch_input "+(1===parseInt(this.state.current_resource)?"selected":""),value:this.props.resources[1].title,onChange:function(e){_this.toggleSwitchbox(e)},checked:1==parseInt(this.state.current_resource)||""}),React.createElement("label",{htmlFor:this.rs_id+"_switch_rt",className:"switch_label switch_label_right"},this.props.resources[1].title),React.createElement("span",{className:"switch_indicator"})),React.createElement("div",{className:"switch_line"})):void 0}},{key:"render",value:function(){return React.createElement("section",{className:"resource_swapper",id:"resource_swapper_"+this.rs_id},React.createElement("div",{className:"content_wrapper"},this.getResources()),this.getControls(),React.createElement("div",{className:"long_description_text",dangerouslySetInnerHTML:{__html:this.video_resources[this.state.current_resource].long_description}}))}}]),ResourceSwapper}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},SearchSelectDropdown=function(_React$Component){function SearchSelectDropdown(props){_classCallCheck(this,SearchSelectDropdown),_get(Object.getPrototypeOf(SearchSelectDropdown.prototype),"constructor",this).call(this,props),this.state=this.getInitialState()}return _inherits(SearchSelectDropdown,_React$Component),_createClass(SearchSelectDropdown,[{key:"getInitialState",value:function(){var props=this.props,selected="",filtered_options=props.options_arr?props.options_arr:[],placeholder="Please Select";if(props.selected_id){var selected_arr=filtered_options.filter(function(element){return element[1]==props.selected_id});selected_arr.length>0&&(selected=selected_arr[0][1],placeholder=selected_arr[0][0])}return{options_open:!1,filtered_options:filtered_options,list_scrolling:!1,options_filter:"",placeholder:placeholder,selected:selected}}},{key:"changeSelection",value:function changeSelection(e){var that=this;0==this.state.list_scrolling&&e.currentTarget&&e.currentTarget.dataset&&this.state.filtered_options.map(function(element){if(element[1]==e.currentTarget.dataset.value){var selected="undefined"==typeof e.currentTarget.dataset.value||typeof e.currentTarget.dataset.value==undefined?"":e.currentTarget.dataset.value;return that.setState({selected:selected,placeholder:element[0]}),void that.setOptionsClosed()}}),this.props.onSelectChange&&eval(this.props.onSelectChange+"(e)")}},{key:"setSelectRef",value:function(node){this.select_ref=node}},{key:"setOptionsOpen",value:function(){this.setState({options_open:!0},function(){var _this=this;document.addEventListener("mousedown",function(e){_this.handleClickOutside(e)}),document.addEventListener("touchstart",function(e){_this.handleClickOutside(e)}),$(".change_select").addClass("options_open"),(this.props.selected_id&&this.props.selected_id.length>0||this.state.selected.length>0)&&$(".dropdown_select").find("input").val(this.state.placeholder)})}},{key:"setOptionsClosed",value:function(){var filtered_options=this.props.options_arr;this.setState({options_open:!1,options_filter:"",filtered_options:filtered_options},function(){var _this2=this;document.removeEventListener("mousedown",function(e){_this2.handleClickOutside(e)}),document.removeEventListener("touchstart",function(e){_this2.handleClickOutside(e)}),$(".change_select").removeClass("options_open"),$("input.selected_title").blur()})}},{key:"handleClickOutside",value:function(e){this.select_ref&&!this.select_ref.contains(e.target)&&this.setOptionsClosed()}},{key:"setOptionsFilter",value:function(e){var that=this,filtered_options=this.props.options_arr.filter(function(option){return new RegExp(that.state.options_filter,"i").test(option[0])});this.setState({options_filter:e.target.value,filtered_options:filtered_options})}},{key:"startListScroll",value:function(){this.setState({list_scrolling:!0})}},{key:"stopListScroll",value:function(){this.setState({list_scrolling:!1})}},{key:"blurOnEnter",value:function(e){13===e.keyCode&&(e.preventDefault(),$(e.target).blur())}},{key:"getSelectOptions",value:function(){var _this3=this,that=this;return this.state.options_open?this.state.filtered_options.length>0?React.createElement("div",{className:"dropdown_options",onTouchStart:function(e){_this3.stopListScroll(e)},onTouchMove:function(e){_this3.startListScroll(e)}},this.state.filtered_options.map(function(v,i){return React.createElement("div",{className:"compare_option","data-value":v[1],key:"option_"+i,onClick:function(e){that.changeSelection(e)},onTouchEnd:function(e){that.changeSelection(e)}},v[0])})):React.createElement("div",{className:"dropdown_options"},React.createElement("div",{className:"compare_option unselectable"},React.createElement("i",null,"No options match your search"))):null}},{key:"getDivDropdown",value:function(){var _this4=this;return React.createElement("div",{className:"dropdown"},React.createElement("div",{className:"dropdown_select change_select",ref:function(e){_this4.setSelectRef(e)}},React.createElement("input",{className:"selected_title "+(this.props.is_admin?"admin_select":""),type:"text",onChange:function(e){_this4.setOptionsFilter(e)},onClick:function(e){_this4.setOptionsOpen(e)},onTouchStart:function(e){_this4.setOptionsOpen(e)},placeholder:this.state.placeholder,value:this.state.options_filter,onKeyUp:function(e){_this4.blurOnEnter(e)}}),React.createElement("div",{className:"select_icon"}),this.getSelectOptions()))}},{key:"render",value:function(){this.state;return React.createElement("div",{className:"search_select_dropdown"},React.createElement("div",{className:"field "+(this.props.klass?this.props.klass:"")},React.createElement("div",{className:"right_col"},this.getDivDropdown(),React.createElement("input",{type:"hidden",id:this.props.id,name:this.props.name,value:this.state.selected}))))}}]),SearchSelectDropdown}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ShareButton=function(_React$Component){function ShareButton(props){_classCallCheck(this,ShareButton),_get(Object.getPrototypeOf(ShareButton.prototype),"constructor",this).call(this,props),this.state={share_open:!1,hover:!1}}return _inherits(ShareButton,_React$Component),_createClass(ShareButton,[{key:"toggleShare",value:function(e){e&&e.preventDefault(),this.setState({share_open:!this.state.share_open})}},{key:"toggleHover",value:function(){this.setState({hover:!this.state.hover})}},{key:"getStyle",value:function(){var backgroundColor=this.props.button_color?this.props.button_color:"#396AA2",hoverColor=this.props.hover_color?this.props.hover_color:"#4a81c1";return this.state.hover?{backgroundColor:hoverColor}:{backgroundColor:backgroundColor}}},{key:"getIcon",value:function(){return this.props.use_icon?React.createElement(React.Fragment,null,React.createElement(ShareIcon,this.props)):null}},{key:"getButtonText",value:function(){return this.props.button_text?React.createElement("span",null,this.props.button_text):""===this.props.button_text?null:React.createElement("span",null,"SHARE")}},{key:"getIconAndButton",value:function(){return this.props.icon_first===undefined||!0===this.props.icon_first?React.createElement(React.Fragment,null,this.getIcon(),this.getButtonText()):React.createElement(React.Fragment,null,this.getButtonText(),this.getIcon())}},{key:"getShareHtml",value:function(){return React.createElement("div",{className:"share_bubble"},React.createElement(CherTools,this.props))}},{key:"render",value:function(){var _this=this;return React.createElement("div",{className:"share_button button "+(this.state.share_open?"share_open":"")+" "+(this.props.use_icon?"has_icon":""),style:this.getStyle(),onClick:function(e){_this.toggleShare(e)},onMouseEnter:function(){_this.toggleHover()},onMouseLeave:function(){_this.toggleHover()}},this.getIconAndButton(),this.getShareHtml())}}]),ShareButton}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x2,_x3,_x4){for(var _again=!0;_again;){var object=_x2,property=_x3,receiver=_x4;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x2=parent,_x3=property,_x4=receiver,_again=!0,desc=parent=undefined}},Slideshow=function(_React$Component){function Slideshow(props){_classCallCheck(this,Slideshow),_get(Object.getPrototypeOf(Slideshow.prototype),"constructor",this).call(this,props),this.hammer=null,this.state=this.getInitialState()}return _inherits(Slideshow,_React$Component),_createClass(Slideshow,[{key:"getInitialState",value:function(){var is_mobile=window.innerWidth<=1023,start_slide=mb_utils.getParam("slide");return{loading_thumbs:!0,view_all:!1,is_mobile:is_mobile,detail:start_slide?this.props.items[parseInt(start_slide)]:this.props.items[0],show_description:!0,panning:!1,back_link:"",list_offset:0,image_hidden:!1}}},{key:"componentDidMount",value:function(){"undefined"!=typeof addthis&&(console.log("addthis init"),addthis.toolbox(".addthis_sharing_toolbox")),$(window).on("resize",this.resizeOverlay.bind(this));var back_link=mb_utils.getParam("back");back_link&&this.setState({back_link:Array.isArray(back_link)?back_link[0]:back_link}),this.pushStateToHistoryAndSetMetaContent(),window.addEventListener("keydown",this.handleArrowKeys.bind(this)),this.initSwipe(".slideshow_detail")}},{key:"componentWillUnmount",value:function(){$(window).off("resize",this.resizeOverlay.bind(this)),window.removeEventListener("keydown",this.handleArrowKeys.bind(this))}},{key:"pushStateToHistoryAndSetMetaContent",value:function(){var item=this.state.detail,history_entry="?slide="+this.props.items.indexOf(this.state.detail);""!==this.state.back_link&&(history_entry+="&back="+this.state.back_link),history.pushState(null,"",history_entry);var meta_title=document.title;meta_title=meta_title.replace(/(.+)(\s\|)/g,item.title+"$2");var image_url=location.protocol+"//"+location.hostname+":"+location.port+this.state.detail.image_src;document.title=meta_title,document.head.querySelector("meta[name='description']").setAttribute("content",item.body),document.head.querySelector("meta[property='og:description']").setAttribute("content",item.body),document.head.querySelector("meta[property='og:url']").setAttribute("content",location.href),document.head.querySelector("meta[property='og:title']").setAttribute("content",meta_title),document.head.querySelector("meta[property='og:image']").setAttribute("content",image_url),document.head.querySelector("meta[name='twitter:image']").setAttribute("content",image_url)}},{key:"initSwipe",value:function(el){Hammer.defaults.touchAction="compute";var that=this;this.hammer&&this.hammer.destroy(),this.hammer=new Hammer.Manager($(el)[0],{domEvents:!0,inputClass:Hammer.TouchInput});var $this=$(that.hammer.element),pan=new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:10});this.hammer.add(pan),this.hammer.on("panstart",function(){that.setState({panning:!0})}),this.hammer.on("pan",function(e){$(el).css("transform","translateX("+e.deltaX+"px)")}),this.hammer.on("panend",function(e){that.setState({panning:!1}),e.deltaX>50&&that.state.detail!==that.props.items[0]?that.slidePrev($this,e.deltaX,e):e.deltaX<-50&&that.state.detail!==that.props.items[that.props.items.length-1]?that.slideNext($this,e.deltaX,e):($(el).animate({fakeProp:e.deltaX},0),$(el).animate({fakeProp:0},{step:function(now){$(this).css("transform","translateX("+now+"px)")},duration:200}))})}},{key:"handleArrowKeys",value:function(e){37==e.keyCode?this.prevSlide(null,e):39==e.keyCode&&this.nextSlide(null,e)}},{key:"translateX",value:function(el,start_value,end_value){var callback=arguments.length<=3||arguments[3]===undefined?null:arguments[3];$(el).animate({fakeProp:start_value},0),$(el).animate({fakeProp:end_value},{step:function(now){$(this).css("transform","translateX("+now+"px)")},duration:200,complete:callback})}},{key:"slidePrev",value:function(el,start_x,e){console.log("slidePrev");var that=this;if(this.state.detail!==this.props.items[0]){var ww=window.innerWidth;that.translateX(el,start_x,ww+200,function(){that.prevSlide(function(){that.translateX(el,-200-ww,0)},e)})}}},{key:"slideNext",value:function(el,start_x,e){console.log("slideNext");var that=this;if(this.state.detail!==this.props.items[this.props.items.length-1]){var ww=window.innerWidth;that.translateX(el,start_x,-200-ww,function(){that.nextSlide(function(){that.translateX(el,ww+200,0)},e)})}}},{key:"resizeOverlay",value:function(){if(window.innerWidth>1023){var list_offset=this.getListOffset(this.state.detail);this.setState({is_mobile:!1,list_offset:list_offset})}else this.setState({is_mobile:!0})}},{key:"openViewAll",value:function(){this.setState({view_all:!0})}},{key:"closeViewAll",value:function(){this.setState({view_all:!1})}},{key:"getListOffset",value:function(item){if(!this.state.is_mobile){var item_index=this.props.items.indexOf(item),selectors=".slideshow_footer_carousel .slideshow_thumbs",margin=50,total_thumbs_width=document.querySelector(selectors).scrollWidth+2*margin,visible_thumbs_width=document.querySelector(selectors).clientWidth+2*margin;if(total_thumbs_width===visible_thumbs_width)return 0;var current_thumb=document.querySelector(selectors).children[item_index],$current_thumb_width=$(current_thumb).width(),last_thumb=document.querySelector(selectors).children[this.props.items.length-1],$last_thumb_width=$(last_thumb).width(),$left_thumb_position=$(current_thumb).position().left+margin,view_all_button=document.querySelector(".view_all_btn"),carousel_arrows=document.querySelector(".carousel_arrows"),$left_threshold=$(view_all_button).offset().left+$(view_all_button).width()+margin,$right_threshold=$(carousel_arrows).offset().left-margin,$current_thumb_left=$(current_thumb).offset().left,$current_thumb_right=$current_thumb_left+$current_thumb_width,$last_thumb_left=$(last_thumb).offset().left;return $current_thumb_right>$right_threshold?-($left_thumb_position+$current_thumb_width-(visible_thumbs_width-margin)):$current_thumb_left<$left_threshold?-($left_thumb_position-margin):$last_thumb_left+$last_thumb_width<$right_threshold?-(total_thumbs_width-visible_thumbs_width):this.state.list_offset}return 0}},{key:"viewDetail",value:function(item,callback){var _this=this;callback===undefined&&(callback=null),this.setState({detail:item,view_all:!1,list_offset:this.getListOffset(item),image_hidden:!0},function(){_this.pushStateToHistoryAndSetMetaContent(),_this.setState({image_hidden:!1}),"function"==typeof callback&&callback.call()})}},{key:"prevSlide",value:function(callback,e){callback===undefined&&(callback=null);var detail_idx=this.props.items.indexOf(this.state.detail);0!==detail_idx&&this.viewDetail(this.props.items[detail_idx-1],callback,e)}},{key:"nextSlide",value:function(callback,e){callback===undefined&&(callback=null);var detail_idx=this.props.items.indexOf(this.state.detail);detail_idx!==this.props.items.length-1&&this.viewDetail(this.props.items[detail_idx+1],callback,e)}},{key:"toggleDescription",value:function(){this.state.is_mobile&&window.innerWidth>window.innerHeight&&this.setState({show_description:!this.state.show_description})}},{key:"imagesLoaded",value:function(parentNode){for(var imgElements=[].concat(_toConsumableArray(parentNode.querySelectorAll("img"))),i=0;i<imgElements.length;i++){if(!imgElements[i].complete)return!1}return this.setState({list_offset:this.getListOffset(this.state.detail)}),!0}},{key:"handleImageChange",value:function(){this.setState({loading_thumbs:!this.imagesLoaded(this.carouselElement)})}},{key:"renderThumbsForFooterCarousel",value:function(){var _this2=this;return React.createElement("ul",{className:"slideshow_thumbs",
ref:function(element){_this2.carouselElement=element},style:{left:this.state.list_offset+"px"}},this.props.items.map(function(item){return React.createElement("li",{className:item===_this2.state.detail?"current":"",key:item.id,onClick:function(e){_this2.viewDetail(item,null,e)}},React.createElement("img",{src:item.image_src,onLoad:function(e){return _this2.handleImageChange(e)},onError:function(e){_this2.handleImageChange(e)}}))}))}},{key:"renderThumbsForViewAll",value:function(){var _this3=this;return React.createElement("ul",{className:"slideshow_thumbs",style:{left:"0"}},this.props.items.map(function(item){return React.createElement("li",{className:item===_this3.state.detail?"current":"",key:item.id,onClick:function(e){_this3.viewDetail(item,null,e)}},React.createElement("img",{src:item.image_src}))}))}},{key:"renderViewAll",value:function(){var _this4=this;return this.state.view_all?React.createElement("div",{className:"slideshow_view_all"},React.createElement("div",{className:"view_all_text"},React.createElement(SlideshowBrandArea,{view_all:this.state.view_all}),React.createElement("h1",null,this.props.title),this.props.description?React.createElement("div",{className:"view_all_description",dangerouslySetInnerHTML:{__html:this.props.description}}):null),React.createElement("div",{className:"view_all_items"},this.renderThumbsForViewAll()),React.createElement("footer",{className:"view_all_footer"},React.createElement("div",{className:"close_view_all",onClick:function(e){_this4.closeViewAll(e)}},React.createElement("span",{className:"icon"}),"close"))):null}},{key:"getImage",value:function(){return this.state.image_hidden?null:React.createElement("div",{className:"image_area"},React.createElement("img",{src:this.state.detail.image_src}))}},{key:"render",value:function(){var _this5=this,current_slide_idx=this.props.items.indexOf(this.state.detail)+1,is_first_slide=1==current_slide_idx,is_last_slide=current_slide_idx==this.props.items.length,share_url=window.location.href;return React.createElement("div",{className:"slideshow_container",id:"slideshow_container"},React.createElement("div",null,this.renderViewAll(),React.createElement("div",{className:"slideshow "+(this.state.view_all?"view_all_active":"")},React.createElement("div",{className:"slideshow_header"},this.state.back_link?React.createElement("a",{className:"close_btn",href:this.state.back_link},"BACK"):null,React.createElement("h4",{className:"slideshow_title"},this.props.title),React.createElement(SlideshowBrandArea,{view_all:this.state.view_all})),React.createElement("div",{className:"slideshow_detail",onClick:function(e){_this5.toggleDescription(e)}},this.getImage(),React.createElement("div",{className:"description_area",style:{opacity:this.state.show_description?1:0}},React.createElement("div",{className:"description_text"},React.createElement("h2",{className:"description_title"},this.state.detail.title),React.createElement("div",{className:"detail_description",dangerouslySetInnerHTML:{__html:this.state.detail.body}}),this.state.is_mobile?null:React.createElement("div",{className:"share_button_component"},React.createElement(ShareButton,{share:[["Facebook"],["Twitter"],["Pinterest"],["Email"]],url:share_url,share_text:this.state.detail.title,button_text:"share",button_color:"#ffffff00",hover_color:"#ffffff00",use_icon:!0}))))),React.createElement("div",{className:"slideshow_footer"},React.createElement("div",{className:"view_all_btn",onClick:function(e){_this5.openViewAll(e)}},React.createElement("div",{className:"icon svg_icon_container"},React.createElement("svg",{id:"grid_icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"m0 0h6.85714286v6.85714286h-6.85714286zm8.57142857 0h6.85714283v6.85714286h-6.85714283zm8.57142853 0h6.8571429v6.85714286h-6.8571429zm-17.1428571 8.57142857h6.85714286v6.85714283h-6.85714286zm8.57142857 0h6.85714283v6.85714283h-6.85714283zm8.57142853 0h6.8571429v6.85714283h-6.8571429zm-17.1428571 8.57142853h6.85714286v6.8571429h-6.85714286zm8.57142857 0h6.85714283v6.8571429h-6.85714283zm8.57142853 0h6.8571429v6.8571429h-6.8571429z"}))),React.createElement("span",{className:"view_all_label"},"View All")),this.state.is_mobile?React.createElement("div",{className:"share_button_component"},React.createElement(ShareButton,{share:[["Facebook"],["Twitter"],["Pinterest"],["Email"]],url:share_url,share_text:this.state.detail.title,button_text:"",button_color:"#ffffff00",hover_color:"#ffffff00",use_icon:!0})):React.createElement("div",{className:"slideshow_footer_carousel"},this.renderThumbsForFooterCarousel()),React.createElement("div",{className:"carousel_arrows"},React.createElement("div",{className:"carousel_prev "+(is_first_slide?"disabled":""),onClick:function(e){_this5.prevSlide(null,e)}},React.createElement("div",{className:"icon svg_icon_container"},React.createElement("svg",{width:"24",height:"24",className:"svg_icon"},React.createElement("path",{d:"M.41 12.818L8.897.696l.182.127L.903 12.5l8.176 11.677-.182.127L.41 12.182l-.022.015-.015-.014-.086-.061-.2.286-.087.06.022.032-.022.032.087.06.2.286.086-.06.015-.015z",fillRule:"evenodd",opacity:"1"})))),React.createElement("div",{className:"carousel_count"},current_slide_idx+" /"," ",React.createElement("span",null,""+this.props.items.length)),React.createElement("div",{className:"carousel_next "+(is_last_slide?"disabled":""),onClick:function(e){_this5.nextSlide(null,e)}},React.createElement("div",{className:"icon svg_icon_container"},React.createElement("svg",{width:"24",height:"24",className:"svg_icon"},React.createElement("path",{d:"M.41 12.818L8.897.696l.182.127L.903 12.5l8.176 11.677-.182.127L.41 12.182l-.022.015-.015-.014-.086-.061-.2.286-.087.06.022.032-.022.032.087.06.2.286.086-.06.015-.015z",fillRule:"evenodd",opacity:"1"})))))))))}}]),Slideshow}(React.Component),SlideshowBrandArea=function(){return React.createElement("div",{className:"view_all_brand_area"},React.createElement("div",{className:"brand_1"},React.createElement("a",{className:"nasa_logo",href:"https://www.nasa.gov",target:"blank",title:"visit nasa.gov"})),React.createElement("div",{className:"brand_2"},React.createElement("div",{className:"site_logo"},React.createElement("a",{id:"site_logo",href:"/",title:"Home"},"Home")),React.createElement("div",{className:"sub_logo"})),React.createElement("img",{className:"print_only print_logo",src:"/assets/logo_nasa_trio_white@2x.png",alt:""}))},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x3,_x4,_x5){for(var _again=!0;_again;){var object=_x3,property=_x4,receiver=_x5;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x3=parent,_x4=property,_x5=receiver,_again=!0,desc=parent=undefined}},SpaController=function(_React$Component){function SpaController(props){_classCallCheck(this,SpaController),_get(Object.getPrototypeOf(SpaController.prototype),"constructor",this).call(this,props),this.state={detail_image_loaded:!1,last_pushed_state:null}}return _inherits(SpaController,_React$Component),_createClass(SpaController,[{key:"componentDidMount",value:function(){var _this=this;console.log("SpaController:: componentDidMount"),this.props.article&&this.props.initial_id&&this.selectedItem(this.props.article,function(){}),this.props.get_history_state_loaded||(window.addEventListener("popstate",function(e){return _this.popStateListener(e)}),this.props.set_history_state_loaded())}},{key:"componentDidUpdate",value:function(prevProps){if(this.props.article){document.title;prevProps&&prevProps.article&&this.props.article.id!=prevProps.article.id?this.selectedItem(this.props.article,function(){}):this.props.article.id&&null==prevProps.article&&(console.log("UPDATE..."),this.selectedItem(this.props.article,function(){}))}else prevProps&&null==this.props.article&&prevProps.article}},{key:"popStateListener",value:function(e){var that=this,state=e.state;console.log("SpaController:: popStateListener",state),e.preventDefault(),e.stopPropagation(),null==state?(console.log("POP 1 : NULL : "),this.state.last_pushed_state!=state&&(this.setState({last_pushed_state:state}),that.hideDetail(state,!1))):void 0!==state&&(console.log("POP 2 : state : "),this.setState({last_pushed_state:state}),null!=state.id?that.selectedItem(state,function(){},!1):(console.log("POP 3 : state.id == null : "),this.setState({last_pushed_state:state}),that.hideDetail(null,!1)))}},{key:"setHistoryState",value:function(historyState,historyTitle,historyUrl){document.title=historyTitle,window.history.pushState(historyState,historyTitle,historyUrl),this.setState({last_pushed_state:historyState})}},{key:"hideDetail",value:function(historyState){!(arguments.length<=1||arguments[1]===undefined)&&arguments[1]&&window.history.pushState(historyState,document.title,document.location),this.setState({detail_image_loaded:!1},function(){this.props.hide_detail(historyState)})}},{key:"selectedItem",value:function(item,callback){(arguments.length<=2||arguments[2]===undefined||arguments[2])&&item!=this.state.last_pushed_state&&this.setHistoryState(item,document.title,"#"+item.id),this.setState({detail_image_loaded:!1},function(){this.props.selected_item(item,callback)})}},{key:"changeTitle",value:function(title){this.props.article&&null!=this.props.article&&(document.title=title)}},{key:"imagesLoaded",value:function(){console.log("SpaController:: imagesLoaded"),this.setState({detail_image_loaded:!0})}},{key:"render",value:function(){var _this2=this;return this.props.article?React.createElement("div",null,this.state.detail_image_loaded?null:React.createElement("div",{className:"detail_loading"}),React.createElement(ArticleNav,_extends({detail_image_loaded:this.state.detail_image_loaded},this.props)),React.createElement(Article,_extends({detail_image_loaded:this.state.detail_image_loaded,initial_items:this.props.initial_items,hide_detail:function(a,b){_this2.hideDetail(a,b)},selected_item:function(a,b,c){_this2.selectedItem(a,b,c)},change_title:function(t){_this2.changeTitle(t)},images_loaded:function(){_this2.imagesLoaded()}},this.props))):React.createElement("div",null)}}]),SpaController}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},SpiceAPI=function(_React$Component){function SpiceAPI(props){_classCallCheck(this,SpiceAPI),_get(Object.getPrototypeOf(SpiceAPI.prototype),"constructor",this).call(this,props);var duration=this.props.duration?this.props.duration:3e5,frequency=this.props.frequency?this.props.frequency:1e3,dec=this.props.query.decimals?this.props.query.decimals:0;this.state={frequency:frequency,duration:duration,error:!1,received_data:!1,getting_more_data:!1,data:[],value:"",units:"",decimals:dec,idx:-1,last_error:0,format_units:"standard"},this.interval=null,this.tick=this.tick.bind(this)}return _inherits(SpiceAPI,_React$Component),_createClass(SpiceAPI,[{key:"componentDidMount",value:function(){this.getData(),this.interval=setInterval(this.tick,this.state.frequency);var that=this;(this.props.toggle||this.props.query&&this.props.query.toggle)&&$("body").on("toggle_units",function(e,d){that.setState({format_units:d})})}},{key:"tick",value:function(){var new_i=this.state.idx+1;if(this.state.getting_more_data);else if(this.state.error)now=(new Date).getTime,now>this.state.last_error+3e3&&(console.log("Error timeout up: Trying again."),this.setState({getting_more_data:!0,error:!1},this.getData()));else if(new_i<this.state.data.length){var p=this.state.data[new_i];this.setState({idx:new_i,value:p.value})}else this.setState({getting_more_data:!0},this.getData())}},{key:"componentWillUnmount",value:function(){console.log("UNMOUNT"),this.stopGettingData()}},{key:"stopGettingData",value:function(){clearInterval(this.interval)}},{key:"padZero",value:function(num){return num<10?"0"+num:num}},{key:"getData",value:function(){var that=this;this.setState({received_data:!1,current_idx:-1},function(){var url=that.createURLFromQuery();console.log("Getting more data",url),$.ajax(url,{dataType:"json"}).success(function(data){that.onReceiveData(data)}).error(function(jqxhr,status,error){console.error("SpiceAPI.getData error",error,url)})})}},{key:"onReceiveData",value:function(data){if(data.error)console.log(data.message),this.setState({received_data:!0,error:!0,getting_more_data:!1,last_error:(new Date).getTime()});else{var now_i=this.getIdxForNow(data.items),units=data.units;this.setState({data:data.items,received_data:!0,idx:now_i,getting_more_data:!1,units:units})}}},{key:"createURLFromQuery",value:function(){return"distance"==this.props.query.request?this.props.base_url+this.buildDistanceUrl()+this.buildTimeUrl():"one_way_light_time"==this.props.query.request?this.props.base_url+this.buildLightTimeUrl()+this.buildTimeUrl():void 0}},{key:"buildLightTimeUrl",value:function(){try{return"/getULTfromT1/"+this.props.query.from+"/"+this.props.query.to+"/"}catch(e){console.error("SpiceAPI: error creating distance url: ",e.message)}}},{key:"buildDistanceUrl",value:function(){try{return"/getRangefromT1/"+this.props.query.from+"/"+this.props.query.to+"/"}catch(e){console.error("SpiceAPI: error creating distance url: ",e.message)}}},{key:"buildTimeUrl",value:function(){var now=new Date;return now.setSeconds(0,0),now.toISOString().slice(0,18)+"/"+new Date(now.getTime()+this.state.duration).toISOString().slice(0,18)+"/"+parseInt(this.state.frequency)/1e3+"/"}},{key:"getIdxForNow",value:function(data){for(var now=new Date,i=-1,found=!1;i+1<data.length&&!found;)i++,Date.parse(data[i].date)>=now&&(found=!0);return found?i:-1}},{key:"getFormattedDistance",value:function(num,unit){return this.props.query.toggle_units?[this.formatThousandsNoRounding(num.toFixed(0)),""]:[this.formatThousandsNoRounding(num.toFixed(0)),unit]}},{key:"formatNumber",value:function(num,units){var f_num=parseFloat(num);if(isNaN(f_num))return["",""];if("one_way_light_time"!=this.props.query.request){if("distance"==this.props.query.request){if("standard"==this.state.format_units){var miles=.621371*f_num;return this.getFormattedDistance(miles,"miles")}return this.getFormattedDistance(f_num,"km")}return this.state.decimals>-1?[this.formatThousandsNoRounding(f_num.toFixed(this.state.decimals)),units]:[this.formatThousandsNoRounding(f_num),units]}return f_num<60?[f_num.toFixed(4),"secs"]:[(f_num/60).toFixed(6),"mins"]}},{key:"formatThousandsNoRounding",value:function(n,dp){for(var e="",s=e+n,l=s.length,b=n<0?1:0,i=s.lastIndexOf("."),j=-1==i?l:i,r=e,d=s.substr(j+1,dp);(j-=3)>b;)r=","+s.substr(j,3)+r;return s.substr(0,j+3)+r+(dp?"."+d+(d.length<dp?"00000".substr(0,dp-d.length):e):e)}},{key:"changeUnits",value:function(type){this.setState({format_units:type})}},{key:"getUnitToggle",value:function(){var that=this;return this.props.query.toggle_units&&"distance"==this.props.query.request?React.createElement("span",{className:"toggle_units"},React.createElement("span",{onClick:function(){return that.changeUnits("standard")},className:"unit_toggle "+("standard"==that.state.format_units?"current":"")},"mi"),React.createElement("span",{onClick:function(){return that.changeUnits("metric")},className:"unit_toggle "+("metric"==that.state.format_units?"current":"")},"km")):null}},{key:"render",value:function(){if(this.state.error)return React.createElement("div",{className:"error"},"Sorry, there was an error loading data. Trying again in 30s.");if(this.state.received_data){var val_unit_arr=this.formatNumber(this.state.value,this.state.units);return Array.isArray(val_unit_arr)?React.createElement("div",null,React.createElement("div",{className:"value"},val_unit_arr[0],React.createElement("span",{className:"units"},"\xa0",val_unit_arr[1]),this.getUnitToggle())):React.createElement("div",null,React.createElement("div",{className:"value"},val_unit_arr))}return React.createElement("div",{className:"loading"},"Loading...")}}]),SpiceAPI}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},SplashScreen=function(_React$Component){function SplashScreen(props){_classCallCheck(this,SplashScreen),_get(Object.getPrototypeOf(SplashScreen.prototype),"constructor",this).call(this,props),this.spinner_opts={lines:8,length:5,width:3,radius:6,color:"#FFF",speed:1,trail:100,shadow:!1,className:"spinner",top:"20px",left:"50%"},this.state={spinner:null,open:!0}}return _inherits(SplashScreen,_React$Component),_createClass(SplashScreen,[{key:"componentDidMount",value:function(){var spinner=$("#splash_spinner").spin(this.spinner_opts);this.setState({spinner:spinner})}},{key:"fadeOut",value:function(e){var that=this;$(".splash").fadeOut(this.props.fade_time?this.props.fade_time:400,function(){that.setState({open:!1},function(){that.props.onClose&&that.props.onClose(e)})})}},{key:"render",value:function(){var _this=this;return this.state.open?React.createElement("div",{className:"splash",style:{backgroundImage:"url("+this.props.background_image+")"}},React.createElement("div",{className:"splash_text"},React.createElement("h1",{className:"splash_title"},this.props.title),React.createElement("p",{className:"splash_description"},this.props.description),this.props.loaded?React.createElement("a",{className:"button",onClick:function(e){_this.fadeOut(e)}},this.props.button_text):React.createElement("div",{className:"splash_loading"},React.createElement("div",{id:"splash_spinner"}),"Loading..."),this.props.children)):null}}]),SplashScreen}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},StickyNotice=function(_React$Component){function StickyNotice(props){_classCallCheck(this,StickyNotice),_get(Object.getPrototypeOf(StickyNotice.prototype),"constructor",this).call(this,props);var sticky_cookie=mb_utils.readCookie(props.cookie_name),open=!0;(Array.isArray(sticky_cookie)&&"true"==sticky_cookie[0]||"true"==sticky_cookie)&&(open=!1),this.state={open:open}}return _inherits(StickyNotice,_React$Component),_createClass(StickyNotice,[{key:"close",value:function(e){e.preventDefault(),that=this,this.setState({open:!1},function(){mb_utils.createCookie(that.props.cookie_name,"true",365,!1)})}},{key:"render",value:function(){var _this=this;return!1===this.state.open?null:React.createElement("div",{className:"sticky_notice_container"},React.createElement("div",{className:"sticky_notice_page_cover"}),React.createElement("div",{className:"sticky_notice",style:{backgroundColor:this.props.background_color?this.props.background_color:"#666666"}},React.createElement("div",{className:"close_button",onClick:function(e){_this.close(e)}}),React.createElement("p",null,React.createElement("b",null,this.props.title)),React.createElement("p",{className:"sticky_notice_description",dangerouslySetInnerHTML:{__html:this.props.description}})))}}]),StickyNotice}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},SvgIcon=function(_React$Component){function SvgIcon(props){_classCallCheck(this,SvgIcon),_get(Object.getPrototypeOf(SvgIcon.prototype),"constructor",this).call(this,props),this.state={unique_id:"svg-icon-label-"+this.getUniqueID()}}return _inherits(SvgIcon,_React$Component),_createClass(SvgIcon,[{key:"getRandomInt",value:function(min,max){return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min))+min}},{key:"getUniqueID",value:function(){return this.getRandomInt(0,Math.pow(36,8)).toString(36)}},{key:"render",value:function(){return this.props.label?React.createElement("div",{className:"icon svg_icon_container"},React.createElement("svg",{width:"24",height:"24",className:"svg_icon yyy","aria-labelledby":this.state.unique_id},React.createElement("switch",null,React.createElement("use",{xlinkHref:"#"+this.props.symbol}),React.createElement("foreignObject",{id:this.state.unique_id},this.props.label)))):React.createElement("div",{className:"icon svg_icon_container"},React.createElement("svg",{width:"24",height:"24",className:"svg_icon"},React.createElement("use",{xlinkHref:"#"+this.props.symbol})))}}]),SvgIcon}(React.Component),PlayPause=function(_ref){return _ref.playing?React.createElement("svg",{className:"svg_icon_container",id:"pause_circle"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{d:"M0 0h39v39H0z"}),React.createElement("circle",{cx:"19.5",cy:"19.5",r:"17.5",stroke:"var(--play-stroke)",strokeWidth:"2"}),React.createElement("path",{fill:"#b9d4f0",fillRule:"nonzero",d:"M2.487 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H.43l-.086-.008C.148 10.91 0 10.752 0 10.562V.395L.01.315A.423.423 0 01.43 0zm5.88 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H6.31l-.086-.008c-.196-.037-.344-.196-.344-.386V.395l.009-.08A.423.423 0 016.31 0z",transform:"translate(15 14)"}))):React.createElement("svg",{className:"svg_icon_container",id:"play_circle"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{d:"M0 0h39v39H0z"}),React.createElement("circle",{cx:"19.5",cy:"19.5",r:"17.5",stroke:"var(--play-stroke)",strokeWidth:"2"}),React.createElement("path",{fill:"#b9d4f0",fillRule:"nonzero",d:"M25 19.5a.403.403 0 00-.195-.35l-8.217-5.078a.355.355 0 00-.214-.072c-.206 0-.374.18-.374.4 0 .016.003.03.004.046L16 24.645c.026.2.182.355.374.355.068 0 .132-.02.187-.055l.003.006 8.251-5.1-.003-.005A.404.404 0 0025 19.5z"})))},ShareIcon=function(props){var getTextAndSideClass=function(){return props.button_text||props.button_text===undefined?props.icon_first===undefined||!0===props.icon_first?"has_text left":"has_text right":"no_text"};return React.createElement("svg",{className:"share_icon "+getTextAndSideClass(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},React.createElement("rect",{fill:"none",width:"16",height:"16"}),React.createElement("path",{fill:"currentColor",d:"M.89,3.17A.89.89,0,0,0,0,4.06H0V14.24a.89.89,0,0,0,.89.89H12.76a.89.89,0,0,0,.89-.89h0V9.55a.2.2,0,0,0-.21-.2.17.17,0,0,0-.12.05h0l-.56.52,0,0a.91.91,0,0,0-.29.63h0v2.95a.4.4,0,0,1-.37.38H1.58a.4.4,0,0,1-.37-.38h0V4.76a.41.41,0,0,1,.41-.38H4.06A1.56,1.56,0,0,0,5,4.08L5.11,4h0c.2-.15.39-.3.59-.43a.2.2,0,0,0,.09-.17.2.2,0,0,0-.2-.2H.89ZM11.1.5a.41.41,0,0,0-.41.4h0V2.22h0v0a.9.9,0,0,1-.81.87,3.86,3.86,0,0,0-.49.06A7.55,7.55,0,0,0,6.26,4.38,9.83,9.83,0,0,0,3,8.41.39.39,0,0,0,3.34,9a.39.39,0,0,0,.23-.07h0l.09-.08h0l.22-.2C5.46,7.33,7.42,7,9.78,7H9.9a.89.89,0,0,1,.79.87,0,0,0,0,1,0,.06h0V9.52a.42.42,0,0,0,.41.41.39.39,0,0,0,.27-.11h0l1-1,1.22-1.13,2-1.83.16-.14A.9.9,0,0,0,16,5.15a.93.93,0,0,0-.28-.66h0l-.05,0h0L11.37.6h0A.39.39,0,0,0,11.1.5Z"}))},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},TabsGrid=function(_React$Component){function TabsGrid(props){_classCallCheck(this,TabsGrid),_get(Object.getPrototypeOf(TabsGrid.prototype),"constructor",this).call(this,props),this.state={active_tab:this.props.tabs[0]},TabsGrid.propTypes={tabs:PropTypes.arrayOf(PropTypes.object),title:PropTypes.string}}return _inherits(TabsGrid,_React$Component),_createClass(TabsGrid,[{key:"setActiveTab",value:function(tab){this.setState({active_tab:tab})}},{key:"removeContainer",value:function(html){return html.replace(/^<[^<]+>/g,"").replace(/<[^<]+>$/g,"")}},{key:"render",value:function(){var tabs=this.props.tabs,fields=this.props.options?this.props.options.fields:{},that=this;return React.createElement("section",{className:"tabs_grid"},React.createElement("header",null,React.createElement("h2",null,this.props.title),React.createElement("nav",null,tabs.length>1?tabs.map(function(tab,i){var active=that.state.active_tab==tab;return React.createElement("div",{className:"tab_item_container"},React.createElement("div",{key:i,className:"tab_nav_item"+(active?" current":""),onClick:function(){return that.setActiveTab(tab)}},tab.title))}):null)),React.createElement("div",{className:"tab"},React.createElement("div",{className:"tab_inner grid_layout"},this.state.active_tab.items?this.state.active_tab.items.map(function(item){return React.createElement("a",{className:"tabs_grid_item",key:item.id,href:fields&&fields.url?item[fields.url]:item.link},React.createElement("div",{className:"tabs_grid_img"},React.createElement("img",{src:fields&&fields.image_src?item[fields.image_src]:item.image_src})),React.createElement("div",{className:"tabs_grid_desc"},React.createElement("h3",null,fields&&fields.title?item[fields.title]:item.title),React.createElement("div",{dangerouslySetInnerHTML:{__html:that.removeContainer(fields&&fields.description?item[fields.description]:item.body)}})))}):null)))}}]),TabsGrid}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},TertiaryDesktopNav=function(_React$Component){function TertiaryDesktopNav(props){_classCallCheck(this,TertiaryDesktopNav),_get(Object.getPrototypeOf(TertiaryDesktopNav.prototype),"constructor",this).call(this,props),this.state={current_indicator_left:""}}return _inherits(TertiaryDesktopNav,_React$Component),_createClass(TertiaryDesktopNav,[{key:"componentDidMount",value:function(){if(this.props.indicator){var $curr=$(".tertiary_nav li.current").eq(0),pos=$curr.offset(),w=$curr.width()/2;this.setState({current_indicator_left:pos.left+w+"px"})}}},{key:"getListItem",value:function(v){var current=v.id.toString()==this.props.current_page.id.toString()?"current":"";return React.createElement("li",{key:"tert_"+v.id,className:current},this.getLink(v))}},{key:"getLink",value:function(v){return this.props.is_preview&&(v.id.toString(),this.props.preview_id.toString()),React.createElement("a",{href:v.url},v.subnav_title)}},{key:"render",value:function(){var _this=this;return React.createElement("nav",{className:"tertiary_nav tertiary_nav_desktop"},React.createElement("ul",null,this.props.items.map(function(v,i){return _this.getListItem(v,i)})),this.props.indicator?React.createElement("div",{className:"current_indicator",style:{left:this.state.current_indicator_left}}):null)}}]),TertiaryDesktopNav}(React.Component),ViewToggle=function(){return React.createElement("div",{className:"view_selectors"},React.createElement("a",{href:"#",className:"nav_item ir list_icon",title:"list view",onClick:function(e){e.preventDefault(),$("body").trigger("show_list_view")}},"list view")," ",React.createElement("a",{href:"#",className:"nav_item ir grid_icon",title:"grid view",onClick:function(e){e.preventDefault(),$("body").trigger("show_grid_view")}},"grid view"))},_createClass=function(){
function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Vid=function(_React$Component){function Vid(props){_classCallCheck(this,Vid),_get(Object.getPrototypeOf(Vid.prototype),"constructor",this).call(this,props),this.video=null,this.state={loading:!1},this.onDataLoaded=this.onDataLoaded.bind(this)}return _inherits(Vid,_React$Component),_createClass(Vid,[{key:"componentDidMount",value:function(){this.initListeners()}},{key:"componentWillUnmount",value:function(){var _this=this;this.video.removeEventListener("loadeddata",this.onDataLoaded,!1),this.video.childNodes.forEach(function(child){_this.video.removeChild(child)})}},{key:"initListeners",value:function(){this.video.addEventListener("loadeddata",this.onDataLoaded,!1)}},{key:"onDataLoaded",value:function(){this.setState({loading:!1})}},{key:"componentWillReceiveProps",value:function(_ref){_ref.sources;var that=this;this.pause(),this.setState({loading:!0},function(){that.load()})}},{key:"load",value:function(){this.video.load()}},{key:"play",value:function(){this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"getStyle",value:function(){if(this.state.loading){var _video$getBoundingClientRect=this.video.getBoundingClientRect();return{width:_video$getBoundingClientRect.width+"px",height:_video$getBoundingClientRect.height+"px"}}return{width:"100%",height:"100%"}}},{key:"render",value:function(){var _this2=this;return React.createElement("video",{ref:function(video){_this2.video=video},autoPlay:!1,loop:!0,controls:!0,muted:!0,id:this.props.id,poster:this.props.poster,style:this.getStyle()},this.props.sources.map(function(source,index){return React.createElement("source",{key:_this2.props.id+"_"+index,src:source.file_src,type:source.file_content_type})}))}}]),Vid}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},IsInViewport=function(el){"function"==typeof jQuery&&el instanceof jQuery&&(el=el[0]);var rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},Video=function(_React$Component){function Video(props){_classCallCheck(this,Video),_get(Object.getPrototypeOf(Video.prototype),"constructor",this).call(this,props),this.state={user_paused:!1,controls:"minimal"!=this.props.controls&&"hide"!=this.props.controls}}return _inherits(Video,_React$Component),_createClass(Video,[{key:"loadJwPlayer",value:function(){jwplayer.key="aUHw/vpMvlcbkzWba1bSGOhfZ5nefVNAZYIC037cIbg=";var hash=undefined,stereo=this.props.vrview_stereo&&"true"==this.props.vrview_stereo?"stereoscopic":"monoscopic";hash={primary:"html5",hlshtml:!0,width:"100%",aspectratio:"16:9",repeat:this.props.autoloop,playlist:[{title:this.props.title,image:this.props.poster,stereomode:stereo,sources:this.props.files}]};var player=jwplayer(""+this.props.video_div).setup(hash);player.on("ready",function(){var vrPlugin=player.getPlugin("vr");vrPlugin&&vrPlugin.on("error",function(error){console.log("vr plugin error",error)})})}},{key:"showControls",value:function(){var _this=this;"hide"!=this.props.controls&&(this.state.controls||this.setState({controls:!0},function(){$("#"+_this.props.video_div+" .play_overlay").fadeOut().hide()}))}},{key:"checkAndPlayVideoInView",value:function(video_div){var in_view=IsInViewport($("#"+video_div)),vid=$("#"+video_div+" video")[0];in_view&&vid&&!this.state.user_paused?vid.play():in_view||vid.pause()}},{key:"componentDidMount",value:function(){var vid=$("#"+this.props.video_div+" video")[0],that=this;if(!this.props.vrview||"true"!==this.props.vrview&&!0!==this.props.vrview){if(this.props.autostart&&"false"!=this.props.autostart){var resizeTimer;$(window).on("scroll",function(){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){that.checkAndPlayVideoInView(""+that.props.video_div)},50)}),vid.addEventListener("pause",function(){that.setState({user_paused:!0})})}}else this.loadJwPlayer();if("minimal"==this.props.controls){var play_overlay=$("#"+this.props.video_div+" .play_overlay")[0];$(play_overlay).one("click touchend",function(){vid.play()}),$(vid).one("play",function(){that.showControls()})}}},{key:"getSourceForVttFile",value:function(file,idx){return file.indexOf("vtt")>0?React.createElement("track",{label:"English",kind:"subtitles",srcLang:"en",key:this.props.video_id+"__"+idx,src:file,type:"text/vtt"}):file.indexOf("srt")>0?React.createElement("track",{label:"English",kind:"subtitles",srcLang:"en",key:this.props.video_id+"__"+idx,src:file,type:"text/srt"}):file.indexOf("scc")>0?React.createElement("track",{label:"English",kind:"subtitles",srcLang:"en",key:this.props.video_id+"__"+idx,src:file,type:"text/scc"}):null}},{key:"getSourceForFile",value:function(file,idx){return file.indexOf("mp4")>0||file.indexOf("m4v")>0?React.createElement("source",{key:this.props.video_id+"_"+idx,src:file,type:"video/mp4"}):file.indexOf("ogv")>0||file.indexOf("ogg")>0?React.createElement("source",{key:this.props.video_id+"_"+idx,src:file,type:"video/ogg"}):file.indexOf("webm")>0?React.createElement("source",{key:this.props.video_id+"_"+idx,src:file,type:"video/webm"}):null}},{key:"getPlayOverlay",value:function(){return React.createElement("div",{className:"play_overlay"},React.createElement("div",{className:"svg_icon_container"},React.createElement("svg",{id:"play_circle",viewBox:"0 0 39 39"},React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("circle",{cx:"19.5",cy:"19.5",r:"17.5",stroke:"#ededed",strokeWidth:"2"}),React.createElement("path",{className:"play_triangle",d:"m25 19.5000893c0-.1512083-.0790527-.2811724-.1946298-.3493679l-8.2178118-5.0785984c-.0605404-.0451662-.1339226-.072123-.2133089-.072123-.2066378 0-.3742495.1792362-.3742495.4004252 0 .0155314.0026684.0301703.0043362.0451661l-.0043362 10.1991496c.025517.1997663.1821214.3552591.3742495.3552591.0682121 0 .1312542-.0208871.1862909-.0549848l.0033355.0062483 8.251501-5.0994856-.0033355-.0062483c.1119079-.0692666.1879586-.1972669.1879586-.3454403z",strokeWidth:"0",fill:"#ededed",fillRule:"nonzero"})))))}},{key:"render",value:function(){var caption,video_container,that=this;return caption=""!=this.props.caption&&1==this.props.display_caption?React.createElement("figcaption",null,this.props.caption):"",video_container=this.props.vrview&&("true"===this.props.vrview||!0===this.props.vrview)&&this.props.files.length>0?React.createElement("div",{id:this.props.video_div,className:"video_player"}):this.props.vtt_files?React.createElement("div",{id:this.props.video_div,className:"video_container"},"minimal"==this.props.controls?this.getPlayOverlay():null,React.createElement("video",{controls:this.state.controls,preload:"auto",muted:this.props.autostart&&"false"!=this.props.autostart||this.props.autoplay,poster:this.props.poster,loop:this.props.autoloop,autoPlay:this.props.autoplay},this.props.files.map(function(v,i){return"undefined"!=v.file?that.getSourceForFile(v.file,i):null}),this.props.vtt_files.map(function(v,i){return"undefined"!=v.file?that.getSourceForVttFile(v.file,i):null}),"Your browser does not support the video tag.")):React.createElement("div",{id:this.props.video_div,className:"video_container"},"minimal"==this.props.controls?this.getPlayOverlay():null,React.createElement("video",{controls:this.state.controls,preload:"auto",muted:this.props.autostart&&"false"!=this.props.autostart||this.props.autoplay,poster:this.props.poster,loop:this.props.autoloop,autoPlay:this.props.autoplay},this.props.files.map(function(v,i){return"undefined"!=v.file?that.getSourceForFile(v.file,i):null}),"Your browser does not support the video tag.")),React.createElement("figure",null,video_container,caption)}}]),Video}(React.Component),AppPreloader=createReactClass({download_spinner_opts:{lines:9,length:6,width:4,radius:7,scale:1,corners:1,color:"#FFF",opacity:.2,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",left:"50%",shadow:!1,hwaccel:!1,position:"relative"},getInitialState:function(){return{entered:!1}},clickEnter:function(e){e&&e.preventDefault(),this.props.app_loaded&&this.setState({entered:!0},this.props.on_enter)},getEnterBtn:function(){return this.props.app_loaded||this.state.entered?this.state.entered?"":React.createElement("a",{className:"button",href:"#enter",onClick:this.clickEnter},"ENTER"):React.createElement("div",null,React.createElement(Loader,{loaded:!1,options:this.download_spinner_opts,className:"spinner"}),React.createElement(LoadingMessages,{messages:this.props.loading_messages,interval:2688}))},render:function(){return this.props.is_webgl_enabled?React.createElement("div",{id:"loader",className:(this.props.app_loaded?"loaded":"")+" "+(this.state.entered?"entered":"")},React.createElement("div",{className:"loader_modal eclipse_modal panel"},React.createElement("div",{className:"modal_content"},React.createElement("div",{className:"intro_logo_container",onClick:this.clickEnter},React.createElement("h1",null,React.createElement("img",{src:"/assets/earth_now/nasa.svg",alt:"NASA"}),React.createElement("span",null,React.createElement("svg",{width:"200",height:"26",viewBox:"0 0 118.7 15","aria-labelledby":"svg-icon-label-earth-now-intro",className:"earth_now"},React.createElement("switch",null,React.createElement("g",{fill:"currentColor"},React.createElement("path",{d:"M9.9,0.3v1.6h-8v4.6h7.5v1.6H1.9v5H10v1.6H0V0.3H9.9z"}),React.createElement("path",{d:"M18.5,0.3l5.6,14.4H22l-1.6-4.4h-6.1l-1.6,4.3h-1.9l5.6-14.4H18.5z M19.8,8.7L17.4,2h0L15,8.7H19.8z"}),React.createElement("path",{d:"M32.5,0.3c1.4,0,2.4,0.3,3.2,1s1.2,1.6,1.2,2.8c0,0.9-0.2,1.6-0.6,2.3c-0.4,0.6-1,1.1-1.9,1.4l0,0c0.4,0.1,0.7,0.2,1,0.4 c0.3,0.2,0.5,0.4,0.6,0.7c0.2,0.3,0.3,0.6,0.4,0.9c0.1,0.3,0.1,0.6,0.2,1c0,0.4,0,0.7,0.1,1.1s0,0.7,0.1,1.1c0.1,0.4,0.1,0.7,0.2,1 s0.3,0.6,0.5,0.8h-2.1c-0.1-0.2-0.2-0.4-0.3-0.6c0-0.3-0.1-0.6-0.1-0.8c0-0.3,0-0.6,0-1c0-0.4-0.1-0.7-0.1-1.1s-0.1-0.7-0.2-1 c-0.1-0.3-0.2-0.6-0.4-0.8c-0.2-0.2-0.4-0.4-0.7-0.6c-0.3-0.1-0.6-0.2-1.1-0.2h-4.6v6.1h-1.9V0.3H32.5z M32.9,6.8 c0.4-0.1,0.7-0.2,1.1-0.4c0.3-0.2,0.6-0.5,0.7-0.8C34.9,5.3,35,4.9,35,4.4c0-0.7-0.2-1.3-0.6-1.8c-0.4-0.5-1-0.7-1.9-0.7h-4.7v5h4 C32.1,6.9,32.5,6.9,32.9,6.8z"}),React.createElement("path",{d:"M37.8,1.9V0.3h11.5v1.6h-4.8v12.8h-1.9V1.9H37.8z"}),React.createElement("path",{d:"M53,0.3v6.2h7.6V0.3h1.9v14.4h-1.9V8.1H53v6.6h-1.9V0.3H53z"}),React.createElement("path",{d:"M73.7,0.3L81.2,12h0V0.3h1.8v14.4H81L73.5,3.1h0v11.5h-1.8V0.3H73.7z"}),React.createElement("path",{d:"M86,4.7c0.3-0.9,0.7-1.7,1.3-2.4s1.3-1.3,2.1-1.7c0.8-0.4,1.9-0.6,3-0.6c1.1,0,2.1,0.2,3,0.6c0.8,0.4,1.6,1,2.1,1.7 c0.6,0.7,1,1.5,1.3,2.4c0.3,0.9,0.4,1.9,0.4,2.8s-0.1,1.9-0.4,2.8c-0.3,0.9-0.7,1.7-1.3,2.4c-0.6,0.7-1.3,1.3-2.1,1.7 c-0.8,0.4-1.9,0.6-3,0.6c-1.1,0-2.1-0.2-3-0.6c-0.8-0.4-1.6-1-2.1-1.7c-0.6-0.7-1-1.5-1.3-2.4c-0.3-0.9-0.4-1.9-0.4-2.8 C85.6,6.5,85.7,5.6,86,4.7z M87.8,9.6c0.2,0.7,0.5,1.3,0.9,1.9c0.4,0.6,0.9,1,1.6,1.4c0.6,0.4,1.4,0.5,2.2,0.5 c0.9,0,1.6-0.2,2.2-0.5s1.1-0.8,1.6-1.4c0.4-0.6,0.7-1.2,0.9-1.9c0.2-0.7,0.3-1.4,0.3-2.1s-0.1-1.4-0.3-2.1 c-0.2-0.7-0.5-1.3-0.9-1.9c-0.4-0.6-0.9-1-1.6-1.4c-0.6-0.4-1.4-0.5-2.2-0.5c-0.9,0-1.6,0.2-2.2,0.5s-1.1,0.8-1.6,1.4 C88.2,4,88,4.6,87.8,5.4c-0.2,0.7-0.3,1.4-0.3,2.1C87.5,8.2,87.6,8.9,87.8,9.6z"}),React.createElement("path",{d:"M112.9,14.7l-3.3-12.1h0l-3.3,12.1h-2l-3.7-14.4h1.9l2.8,11.9h0l3.2-11.9h2.1l3.2,11.9h0l2.9-11.9h1.9l-3.8,14.4 L112.9,14.7L112.9,14.7z"})),React.createElement("foreignObject",{id:"svg-icon-label-earth-now-intro"},"Earth Now"))),React.createElement("svg",{width:"52px",height:"22px",viewBox:"0 0 52 22","aria-labelledby":"svg-icon-label-beta-intro",className:"beta"},React.createElement("switch",null,React.createElement("g",{transform:"translate(-339.000000, -252.000000)",fill:"currentColor"},React.createElement("path",{d:"M339.613281,252.847656 L342.005859,252.847656 L342.005859,260.134766 C342.543622,259.432939 343.186194,258.897463 343.933594,258.52832 C344.680993,258.159178 345.492183,257.974609 346.367188,257.974609 C348.190113,257.974609 349.66894,258.601231 350.803711,259.854492 C351.938482,261.107754 352.505859,262.955717 352.505859,265.398438 C352.505859,267.713553 351.945318,269.636711 350.824219,271.167969 C349.703119,272.699226 348.149098,273.464844 346.162109,273.464844 C345.050125,273.464844 344.111332,273.195966 343.345703,272.658203 C342.889972,272.339191 342.402346,271.82878 341.882812,271.126953 L341.882812,273 L339.613281,273 L339.613281,252.847656 Z M346.011719,271.291016 C347.342455,271.291016 348.338213,270.762375 348.999023,269.705078 C349.659834,268.647781 349.990234,267.253264 349.990234,265.521484 C349.990234,263.981112 349.659834,262.705083 348.999023,261.693359 C348.338213,260.681636 347.365241,260.175781 346.080078,260.175781 C344.958979,260.175781 343.976892,260.590491 343.133789,261.419922 C342.290686,262.249353 341.869141,263.616527 341.869141,265.521484 C341.869141,266.897793 342.042316,268.014319 342.388672,268.871094 C343.035811,270.484383 344.243481,271.291016 346.011719,271.291016 Z M360.980492,258.029297 C362.019559,258.029297 363.026711,258.27311 364.001976,258.760742 C364.977241,259.248375 365.720073,259.879553 366.230492,260.654297 C366.722682,261.392582 367.050803,262.253901 367.214867,263.238281 C367.360701,263.912764 367.433617,264.988274 367.433617,266.464844 L356.701195,266.464844 C356.746768,267.950528 357.097676,269.142248 357.753929,270.040039 C358.410183,270.93783 359.426448,271.386719 360.802757,271.386719 C362.08792,271.386719 363.1133,270.962895 363.878929,270.115234 C364.316431,269.623044 364.626324,269.053389 364.808617,268.40625 L367.228539,268.40625 C367.164736,268.944013 366.952824,269.543291 366.592796,270.204102 C366.232769,270.864912 365.829452,271.404946 365.382836,271.824219 C364.635436,272.553389 363.710315,273.045572 362.607445,273.300781 C362.014994,273.446615 361.345079,273.519531 360.597679,273.519531 C358.774754,273.519531 357.229847,272.856452 355.962914,271.530273 C354.69598,270.204095 354.062523,268.347017 354.062523,265.958984 C354.062523,263.60741 354.700537,261.697924 355.976586,260.230469 C357.252634,258.763013 358.920586,258.029297 360.980492,258.029297 Z M364.90432,264.509766 C364.804059,263.443354 364.571639,262.591149 364.207054,261.953125 C363.532572,260.768223 362.406932,260.175781 360.830101,260.175781 C359.699887,260.175781 358.75198,260.583655 357.986351,261.399414 C357.220722,262.215173 356.815127,263.251947 356.769554,264.509766 L364.90432,264.509766 Z M370.453171,254.269531 L372.941452,254.269531 L372.941452,258.357422 L375.279343,258.357422 L375.279343,260.367188 L372.941452,260.367188 L372.941452,269.923828 C372.941452,270.434247 373.114628,270.776041 373.460984,270.949219 C373.652391,271.04948 373.971398,271.099609 374.418015,271.099609 C374.536505,271.099609 374.664108,271.097331 374.800827,271.092773 C374.937547,271.088216 375.09705,271.076823 375.279343,271.058594 L375.279343,273 C374.996789,273.082032 374.702847,273.141276 374.397507,273.177734 C374.092167,273.214193 373.761767,273.232422 373.406296,273.232422 C372.257853,273.232422 371.478564,272.93848 371.068405,272.350586 C370.658247,271.762692 370.453171,270.999354 370.453171,270.060547 L370.453171,260.367188 L368.470749,260.367188 L368.470749,258.357422 L370.453171,258.357422 L370.453171,254.269531 Z M379.132882,269.103516 C379.132882,269.814457 379.392645,270.374998 379.912178,270.785156 C380.431712,271.195315 381.046941,271.400391 381.757882,271.400391 C382.623771,271.400391 383.462305,271.199872 384.273507,270.798828 C385.640701,270.13346 386.324288,269.044278 386.324288,267.53125 L386.324288,265.548828 C386.023505,265.740235 385.636139,265.899739 385.162178,266.027344 C384.688218,266.154949 384.223379,266.246093 383.767647,266.300781 L382.277413,266.492188 C381.384179,266.610678 380.714264,266.797525 380.267647,267.052734 C379.511133,267.481122 379.132882,268.164709 379.132882,269.103516 Z M385.093819,264.126953 C385.658926,264.054036 386.037178,263.817059 386.228585,263.416016 C386.33796,263.197265 386.392647,262.882815 386.392647,262.472656 C386.392647,261.63411 386.094148,261.025718 385.497139,260.647461 C384.900131,260.269204 384.045648,260.080078 382.933663,260.080078 C381.6485,260.080078 380.737051,260.426429 380.199288,261.119141 C379.898505,261.501955 379.702544,262.071611 379.611397,262.828125 L377.314522,262.828125 C377.360095,261.023428 377.945702,259.767907 379.071358,259.061523 C380.197015,258.35514 381.502666,258.001953 382.98835,258.001953 C384.711015,258.001953 386.11009,258.330075 387.185616,258.986328 C388.252028,259.642581 388.785225,260.663405 388.785225,262.048828 L388.785225,270.484375 C388.785225,270.739585 388.837634,270.944661 388.942452,271.099609 C389.04727,271.254558 389.268297,271.332031 389.605538,271.332031 C389.714913,271.332031 389.837959,271.325195 389.974678,271.311523 C390.111398,271.297851 390.25723,271.277344 390.412178,271.25 L390.412178,273.068359 C390.029364,273.177735 389.7377,273.246094 389.537178,273.273438 C389.336657,273.300781 389.063222,273.314453 388.716866,273.314453 C387.869205,273.314453 387.253977,273.013675 386.871163,272.412109 C386.670641,272.093097 386.529366,271.64193 386.447335,271.058594 C385.94603,271.714847 385.225985,272.284503 384.287178,272.767578 C383.348372,273.250653 382.313877,273.492188 381.183663,273.492188 C379.825583,273.492188 378.715894,273.079757 377.854561,272.254883 C376.993229,271.430009 376.562569,270.397793 376.562569,269.158203 C376.562569,267.800123 376.986393,266.7474 377.834053,266 C378.681714,265.2526 379.793682,264.792319 381.169991,264.619141 L385.093819,264.126953 Z"})),React.createElement("foreignObject",{id:"svg-icon-label-beta-intro"},"Beta")))))),React.createElement("div",{className:"description",onClick:this.clickEnter},React.createElement("div",{className:"browser_ok"},React.createElement("p",null,"Fly along with NASA\u2019s fleet of Earth science missions and explore our planet\u2019s vital signs in an immersive, ",React.createElement("span",{className:"avoid-break"},"real-time environment.")))),React.createElement("div",{className:"button_loader_container"},this.getEnterBtn()),React.createElement("div",{className:"intro_notes"}),React.createElement("p",null,React.createElement("a",{href:"/about-earth-now",target:"_blank"},"Recommended platforms"))))):React.createElement("div",{id:"loader"},React.createElement("div",{className:"loader_modal eclipse_modal panel"},React.createElement("div",{className:"modal_content"},React.createElement("div",{className:"intro_logo_container"},React.createElement("h1",null,"EARTH NOW")),React.createElement("div",{className:"description"},React.createElement("div",null,React.createElement("p",null,"It appears your browser does not support WebGL. ",React.createElement("br",null),"Please ",React.createElement("a",{href:"https://get.webgl.org/",target:"_parent"},"visit this site")," for more information and support."),React.createElement("p",null,React.createElement("a",{href:"/about-earth-now"},"Recommended platforms")))))))}}),BeginEndDateFilters=createReactClass({monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],getInitialState:function(){if(this.props.month_year){var valid_years=this.getValidYearsForDataset(),begin=this.getBegin(),end=this.getEnd();return{begin_month:begin[0],begin_year:begin[1],end_month:end[0],end_year:end[1],valid_years:valid_years}}return{}},componentDidMount:function(){this.props.month_year&&(this.changeBegin(),this.changeEnd())},getBegin:function(){var date=this.props.dataset_items[0].date;return this.separateDateIntoMonthYearArray(date)},getEnd:function(){var date=this.props.dataset_items[this.props.dataset_items.length-1].date;return this.separateDateIntoMonthYearArray(date)},separateDateIntoMonthYearArray:function(date){var d=new Date(date);return[d.getUTCMonth(),d.getUTCFullYear()]},getValidYearsForDataset:function(){if(this.props.begin_min_date&&this.props.end_max_date){for(var valid_years=[],start=parseInt(this.props.begin_min_date.substring(0,4)),end=parseInt(this.props.end_max_date.substring(0,4));start<=end;)valid_years.push(start),start++;return valid_years}return[]},setBeginMonth:function(e){this.setState({begin_month:parseInt(e.target.value)},this.changeBegin)},setBeginYear:function(e){this.setState({begin_year:parseInt(e.target.value)},this.changeBegin)},changeBegin:function(){var date_str=new Date(this.state.begin_year,this.state.begin_month,1).toISOString().substring(0,10);this.props.change_begin_date_value(date_str)},changeEnd:function(){var date_str=new Date(this.state.end_year,this.state.end_month+1,0).toISOString().substring(0,10);this.props.change_end_date_value(date_str)},setEndMonth:function(e){this.setState({end_month:parseInt(e.target.value)},this.changeEnd)},setEndYear:function(e){this.setState({end_year:parseInt(e.target.value)},this.changeEnd)},render:function(){return this.props.month_year?React.createElement("div",{className:"monthly_dates"},React.createElement("label",{className:"preposition"},"Start"),React.createElement("div",{className:"my_selects"},React.createElement("select",{className:"mo",id:"begin_month",value:this.state.begin_month,onChange:this.setBeginMonth},this.monthAbbr.map(function(v,i){return React.createElement("option",{value:i,key:"bm_"+i},v)})),React.createElement("select",{className:"yr",id:"begin_year",value:this.state.begin_year,onChange:this.setBeginYear},this.state.valid_years.map(function(v,i){return React.createElement("option",{value:v,key:"ey_"+i},v)}))),React.createElement("label",{className:"preposition"},"End"),React.createElement("div",{className:"my_selects"},React.createElement("select",{className:"mo",id:"end_month",value:this.state.end_month,onChange:this.setEndMonth},this.monthAbbr.map(function(v,i){return React.createElement("option",{value:i,key:"em_"+i},v)})),React.createElement("select",{className:"yr",id:"end_year",value:this.state.end_year,onChange:this.setEndYear},this.state.valid_years.map(function(v,i){return React.createElement("option",{value:v,key:"ey_"+i},v)})))):React.createElement("div",null,React.createElement(DateFilter,{clear:this.props.clear_begin_date,min_date:this.props.begin_min_date,max_date:this.props.begin_max_date,closeDatePicker:this.props.begin_date_picker_close,placeholder:"yyyy-mm-dd",preposition:"Start time",preposition_small:"",datepicker_class:"begin_date",input_name:"begin_date",date_value:this.props.begin_date_input,changeValue:this.props.change_begin_date_value,onKeyPress:this.props.begin_keypress,readonly:!0}),React.createElement(DateFilter,{clear:this.props.clear_end_date,min_date:this.props.end_min_date,max_date:this.props.end_max_date,closeDatePicker:this.props.end_date_picker_close,placeholder:"yyyy-mm-dd",preposition:"End time",preposition_small:"",datepicker_class:"end_date",input_name:"end_date",date_value:this.props.end_date_input,changeValue:this.props.change_end_date_value,onKeyPress:this.props.end_keypress,readonly:!0}))}}),EarthNow=createReactClass({SATELLITE_CAMERA_RADIUS:.035,SMALL_SATTELITE_RADIUS:.01,SMALL_SATTELITE_RADIUS_MIN:.001,SATELLITE_CAMERA_RADIUS_MIN:.02,SATELLITE_CAMERA_RADIUS_MAX:100,EARTH_CAMERA_RADIUS:33333,EARTH_CAMERA_RADIUS_MIN:17e3,EARTH_CAMERA_RADIUS_MAX:5e5,PATCH_CAMERA_ALT:3e3,PATCH_CAMERA_ALT_MAX:15e3,SMALL_SATTELITES:["RainCube"],NORTH_AMERICA_ORIENTATION:[.5139018420911139,-.03690316643694468,-.06138683071259693,.8548536190584621],MISSION_ORIENTATION:[-.2851385187430977,.13198499155402332,.039571405581741444,.9485304902815522],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],patchCamera:null,loadedTextures:{},play_interval:null,datasets_to_load:[],timerates:[-3600,-1800,-600,-300,-120,-30,-10,-1,0,1,10,30,60,120,300,600,1800,3600],HeadLight:{name:"HeadLight",enabled:!0,cameras:[],data:{type:"Light",mode:"direction",direction:[0,0,-1],name:"headlight",irradience:[.75,.75,.75],end:25},transform:{rotate:[0,0,0,1],translate:[0,0,0]}},errorModalStyle:{backgroundColor:"#1D1D1D"},more_items:[{name:"About Earth Now",value:"modal_about"}],events_filters:[{name:"ALL",value:"all"},{name:"TODAY",value:"today"}],vital_signs_filters:[{name:"Key Indicators",value:"key_indicators"}],loading_messages:["Loading NASA satellites ...","Loading events from space ...","Loading latest Earth view ...","Loading global datasets ...","Updating real-time data ...","Loading orbital data ..."],afterEnter:null,getInitialState:function(){var instruction_modal_cookie=mb_utils.readCookie("instruction_modal_closed"),instruction_modal_closed=!1;return instruction_modal_cookie&&(instruction_modal_closed="true"==instruction_modal_cookie),{ranger_loaded:!1,ranger_ready:!1,entered:!1,load_ranger:!0,get_time:!0,view:this.props.vital_signs[1],dataset:null,grid_open:!1,instruction_modal_closed:instruction_modal_closed,info_panel_open:!1,info_panel_aside_open:!1,mobile_nav_open:!1,desktop_nav_open:!1,mobile_options_open:!1,mobile_options_info_tab_selected:!1,open_header_sub_nav:null,view_context_is_open:!1,settings_panel_open:!1,is_webgl_enabled:!0,vital_signs_grid_open:!1,missions_grid_open:!1,target:"Earth",headlight_created:!1,time_rate_panel_open:!1,light_on:!0,date:new Date,dataset_items:null,dataset_item_idx:0,fahrenheit:!0,latest_seven:!1,animating:!1,playing:!1,dataset_group_id:0,in_situ:!1,show_latest_event:!0,previous_view:null,timerate_idx:13,data_patch:null,data_patches:[],dataset_group:null,shaker:0,error_modal_open:!1,error_message:"",datepicker_open:!1,begin_min_date:"2000-01-01",end_min_date:"2000-01-01",begin_max_date:0,end_max_date:0,begin_date_input:null,end_date_input:null,custom_dataset_items:[],untouched:!0,loading_idx:0,playback_speed:1e3}},componentDidMount:function(){this.detectWebgl(),this.initListeners()},initListeners:function(){var that=this;document.getElementsByTagName("BODY")[0].addEventListener("label_click",function(e){console.log("label_click",e,e.detail.node),that.missionChange(e.detail.node.name,null,!0)}),document.getElementsByTagName("BODY")[0].addEventListener("marker_click",function(e){that.eventChange(e.detail.labelData.event.external_id)}),this.initRangerListeners(document.getElementById("ranger-container")),window.onkeydown=function(e){80===(e.keyCode?e.keyCode:e.which)&&__ranger.update({camera:{get:{id:100}}},null,function(m){console.log("&orientation="+m.message.orientation.join(",")+"&radius="+m.message.radius)})},$(window).resize(function(){$(window).width()<769&&that.setState({info_panel_open:!1})})},initRangerListeners:function(ranger){var that=this;ranger.addEventListener("click",function(){that.hideHeaderSubNav()}),ranger.addEventListener("touchstart",function(){that.hideHeaderSubNav()})},_dispatchMessage:function(k,v){this[k]&&"function"==typeof this[k]?this[k].call(k,v):console.error("Unknown method requested from Ranger",k,v)},onMessageFromRanger:function(message){if(message.eclipse){var kv_pair=message.eclipse;$.each(kv_pair,this._dispatchMessage)}else message.success?console.log("ACK!",message):console.error("message does not contain known directive",message)},rangerCheck:function(){var that=this;console.log("check ranger ready!!!!!");var node=__ranger.scene.get("Earth"),node2=__ranger.scene.get("Sun");node&&node.loaded&&node2&&node2.loaded?that.setState({ranger_ready:!0,entered:this.state.entered||this.props.module},function(){$(window).resize(),that.onRangerReady()}):(console.log("Ranger not ready. Try again in 1s"),window.setTimeout(function(){that.rangerCheck()},1e3))},detectWebgl:function(){var ie=mb_utils.getIEVersion();ie.major>0&&ie.major<=11?this.setState({is_webgl_enabled:!1}):this.detector()?this.loadRangerScripts():this.setState({is_webgl_enabled:!1})},detector:function(){try{var canvas=document.createElement("canvas");return!(!window.WebGLRenderingContext||!canvas.getContext("webgl")&&!canvas.getContext("experimental-webgl"))}catch(e){return!1}},loadRangerScripts:function(){var that=this;this.state.load_ranger?$.ajax({url:this.props.ranger_url+"apps/earth-web/dist/startup.js",method:"GET",dataType:"script",crossDomain:!0,beforeSend:function(jqXHR){jqXHR.setRequestHeader("Accept-Encoding","gzip"),jqXHR.setRequestHeader("Accept","*/*")},success:function(){var settings=window.__ranger.settings;settings.scene=settings.scene||{},settings.path=settings.path||{},settings.exo=settings.exo||{},settings.camera=settings.camera||{},settings.title=$("title").text().replace(/[^\w\s]/gi,""),settings.path["static"]=that.props.ranger_url+"apps/earth-web/modules/earth-web/static",settings.path.images=that.props.ranger_url+"apps/earth-web/modules/earth-web/models",settings.path.image=that.props.ranger_url+"apps/earth-web/",settings.path.document=that.props.ranger_url+"apps/earth-web/",settings.path.server=that.props.ranger_url+"apps/earth-web/modules/earth-web",settings.path.models=that.props.ranger_url+"modules/earth-web",settings.path.animation=that.props.ranger_url+"apps/earth-web/",settings.path.module=that.props.ranger_url+"apps/earth-web/dist",settings.mb={},$.ajax({url:that.props.ranger_url+"apps/earth-web/dist/ranger.js",method:"GET",dataType:"script",crossDomain:!0,beforeSend:function(jqXHR){jqXHR.setRequestHeader("Accept-Encoding","gzip"),jqXHR.setRequestHeader("Accept","*/*")},success:function(){$.ajax({url:that.props.ranger_url+"apps/earth-web/dist/earth-web.js",method:"GET",dataType:"script",crossDomain:!0,beforeSend:function(jqXHR){jqXHR.setRequestHeader("Accept-Encoding","gzip"),jqXHR.setRequestHeader("Accept","*/*")},success:function(){console.log("Ranger scripts loaded"),that.setState({ranger_loaded:!0},function(){that.rangerCheck()})}})}})}}):that.setState({ranger_loaded:!0,ranger_ready:!0})},closeAllModals:function(){this.setState({settings_panel_open:!1},function(){$(".search_container").trigger("closeModals")}),this.setState({open_header_sub_nav:null})},onRangerReady:function(){this.state.ranger_ready?(this.setStartTime(),__ranger.setWindowTitle("Earth Now"),__ranger.scene.get("Sun").addTrigger(null,this.rangerHeadLight),this.createEventMarkers(),this.storeInitialTexture(),this.initRangerListeners(document.getElementById("ranger-interactive"))):console.error("Ranger not ready. Should not be here.")},storeInitialTexture:function(){var that=this;__ranger.update({material:{store:{texture:{target:"Renderable",node:"Earth",lod:"model",renderable:"ellipsoid",bindings:["cube0","cube1","cube2","cube3","cube4","cube5"],name:"InitialEarthCubeMapTextures"}}}},null,function(ack){console.log("Store initial Texture",ack),that.checkParamsOrSetDefault()})},checkParamsOrSetDefault:function(){
var that=this,mission=mb_utils.getParam("mission"),vs_name=mb_utils.getParam("vs_name"),event=mb_utils.getParam("event"),dataset_name=mb_utils.getParam("dataset_id"),group_id=mb_utils.getParam("group_id"),anim=mb_utils.getParam("animating"),animating=anim&&"t"==anim[0],start_arr=mb_utils.getParam("start"),start=start_arr&&""!=start_arr[0]?start_arr[0]:null,end_arr=mb_utils.getParam("end"),end=end_arr&&""!=end_arr[0]?end_arr[0]:null,orientation=mb_utils.getParam("orientation"),radius=mb_utils.getParam("radius");mission?this.missionChange(mission[0],null,!1):vs_name&&dataset_name&&group_id?this.viewChange(vs_name[0],group_id[0],dataset_name[0],function(){that.positionGlobe(orientation,radius),animating&&that.loadDatasetsForAnimation(animating,start,end)}):event?this.viewChange(this.state.view.value,null,null,function(){console.log("Wait for event!"),that.afterEnter=function(){window.setTimeout(function(){that.eventChange(event[0])},2e3)}}):this.viewChange(this.state.view.value,null,null,function(){that.positionGlobe(orientation,radius)})},loadDatasetsForAnimation:function(animating,start,end){var _this=this;if(console.log("Animating",{animating:animating,start:start,end:end}),!animating||start&&end)try{!function(){var that=_this;$.datepicker.parseDate("yy-mm-dd",start),$.datepicker.parseDate("yy-mm-dd",end);_this.setState({animating:!0,begin_date_input:start,end_date_input:end},function(){that.applyDates()})}()}catch(e){console.error("Error setting animated date range: "+e)}else this.loadLatestDatasets()},positionGlobe:function(orientation,radius){if(orientation||radius){console.log({orientation:orientation,radius:radius});var o=orientation?orientation[0].split(",").map(function(v){return parseFloat(v)}):this.NORTH_AMERICA_ORIENTATION,r=radius?radius[0]:this.EARTH_CAMERA_RADIUS;__ranger.update({camera:{set:{orientation:o,radius:r,parent:"Earth",minRadius:this.EARTH_CAMERA_RADIUS_MIN,maxRadius:this.EARTH_CAMERA_RADIUS_MAX,doTransition:!1,constrainAroundVector:null,objectBelow:null,verticalLockVector:[0,0,1]}}},null,function(m){console.log(m)})}},getValuesForPreviousView:function(){if("Earth"==this.state.target){var dataset_id=this.state.dataset?this.state.dataset.id:null;return{value:this.state.view.value,dataset_group_id:this.state.dataset_group_id,dataset_id:dataset_id,animating:this.state.animating,begin_date_input:this.state.begin_date_input,end_date_input:this.state.end_date_input}}return{value:null,dataset_group_id:null,dataset:null}},createEventMarkers:function(){var that=this;this.props.events&&this.props.events.slice(0,3).map(function(v){that.createEventMarker(v)})},createEventMarker:function(event){var center=event.center.split(","),lat=parseFloat(center[0]),long=parseFloat(center[1]);__ranger.update({scene:{load:{renderable:{node:"Earth",name:"marker-"+event.external_id,range:{be:0,end:11},data:["$MarkerLabel",{enabled:!0,id:"marker-"+event.external_id,interactable:!0,labelData:{event:event},className:"default-marker",priority:1,eventHandlers:{click:"onMarkerClick"},iconUrl:window.location.origin+"/assets/earth_now/icons/map-marker-off.svg",iconSize:["20px","27px"],transform:{enabled:!0,translate:["$LatLngAltTo3DPoint",{ellipsoid:[6378.14,6378.14,6356.75],latLngAlt:[lat,long,.1]}]}}]}}}},null,function(m){console.log(m)})},getAllRangerMarkers:function(){var all_markers=[];return this.props.events&&this.props.events.map(function(v){all_markers.push({node:"Earth",name:"marker-"+v.external_id})}),all_markers},hideEventMarkers:function(){this.setState({show_latest_event:!1}),__ranger.update({scene:{hide:{renderables:this.getAllRangerMarkers()}}},null,function(){})},showEventMarkers:function(){this.setState({show_latest_event:!0}),__ranger.update({scene:{show:{renderables:this.getAllRangerMarkers()}}},null,function(){})},gridOpen:function(e){switch(e&&e.preventDefault(),$(e.currentTarget).data("show")){case"vital_signs":this.setState({missions_grid_open:!1,vital_signs_grid_open:!0,events_grid_open:!1});break;case"missions":this.setState({missions_grid_open:!0,vital_signs_grid_open:!1,events_grid_open:!1});break;case"events":this.setState({missions_grid_open:!1,vital_signs_grid_open:!1,events_grid_open:!0});break;default:console.error("Unknown grid")}this.setState({open_header_sub_nav:null,mobile_nav_open:!1,desktop_nav_open:!1}),this.hideHeaderSubNav()},openMobileNav:function(e){e&&e.preventDefault(),this.setState({mobile_nav_open:!0})},openDesktopNav:function(e){e&&e.preventDefault(),this.setState({desktop_nav_open:!0})},closeMobileNav:function(e){e&&e.preventDefault(),window.dispatchEvent(new Event("resize")),this.setState({mobile_nav_open:!1})},closeDesktopNav:function(e){e&&e.preventDefault(),window.dispatchEvent(new Event("resize")),this.setState({desktop_nav_open:!1})},isOpenHeaderSubNav:function(name){return!!name&&this.state.open_header_sub_nav===name},toggleHeaderSubNav:function(e){e&&e.preventDefault();var name=e.currentTarget.getAttribute("data-show");(this.state.open_header_sub_nav===name||document.documentElement.classList.contains("onlymouseevents")&&!document.documentElement.classList.contains("touchevents"))&&"more"!==name&&this.gridOpen(e),this.state.open_header_sub_nav===name?this.setState({open_header_sub_nav:null}):this.setState({open_header_sub_nav:name})},openMobileOptions:function(){this.setState({mobile_options_open:!0}),this.deselectMobileOptionsInfoTab()},selectMobileOptionsInfoTab:function(){console.log("selectMobileOptionsInfoTab"),this.setState({mobile_options_info_tab_selected:!0})},deselectMobileOptionsInfoTab:function(){console.log("deselectMobileOptionsInfoTab"),this.setState({mobile_options_info_tab_selected:!1})},closeMobileOptions:function(){this.setState({mobile_options_open:!1})},toggleInfoPanel:function(e){e&&e.preventDefault(),this.setState({info_panel_open:!this.state.info_panel_open})},showInfoPanel:function(){this.setState({info_panel_open:!0})},showHeaderSubNav:function(){},hideHeaderSubNav:function(e){e&&e.preventDefault(),this.setState({open_header_sub_nav:null})},onOpenViewContext:function(e){e&&e.preventDefault(),this.setState({view_context_is_open:!0})},onCloseViewContext:function(e){e&&e.preventDefault(),this.setState({view_context_is_open:!1})},onHome:function(e){e&&e.preventDefault(),this.setRate(13),this.viewChange("visible_earth")},moreClicked:function(e){e&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)||e&&(e.preventDefault(),"modal_about"==e.currentTarget.dataset.value&&(explore_overlay.init(this.props.about_modal_url,null,null,function(){console.log("overlay loaded")}),this.setState({mobile_nav_open:!1})))},onMissionSelect:function(e){console.log("onMissionSelect"),e&&e.preventDefault();var view_name=$(e.currentTarget).data("show"),group_id=$(e.currentTarget).data("dataset-group");this.missionChange(view_name,group_id),this.setState({open_header_sub_nav:null})},zoomToSatellite:function(name){var _this2=this;name=name.split(",")[0],console.log("Zooming to satellite: "+name);var radius=this.SATELLITE_CAMERA_RADIUS,minRadius=this.SATELLITE_CAMERA_RADIUS_MIN;this.SMALL_SATTELITES.indexOf(name)>=0&&(radius=this.SMALL_SATTELITE_RADIUS,minRadius=this.SMALL_SATTELITE_RADIUS_MIN),this.setState({in_situ:!0,mobile_options_open:!1},function(){__ranger.update({camera:{set:{id:100,parent:name,orientation:_this2.MISSION_ORIENTATION,radius:radius,minRadius:minRadius,maxRadius:_this2.SATELLITE_CAMERA_RADIUS_MAX,transitionParams:{avoidCollisionWithThisObject:"Earth"},doTransition:!0,objectBelow:"Earth",constrainAroundVector:null,verticalLockVector:null}}},null,function(m){console.log(m)})})},pullBackToEarth:function(){var _this3=this;this.setState({in_situ:!1,mobile_options_open:!1},function(){__ranger.update({camera:{set:{id:100,parent:"Earth",radius:_this3.EARTH_CAMERA_RADIUS,minRadius:_this3.EARTH_CAMERA_RADIUS_MIN,maxRadius:_this3.EARTH_CAMERA_RADIUS_MAX,doTransition:!0,constrainAroundVector:null,objectBelow:null,verticalLockVector:[0,0,1]}}},null,function(m){console.log(m)})})},removePatch:function(callback){var that=this;this.state.data_patch?(console.log("remove data patch ",this.state.data_patch),__ranger.update({scene:{hide:{renderables:[{node:"Earth",name:this.state.data_patch,lod:"surfacePatches"}]}}},null,function(m){console.log(m),that.setState({data_patch:null},callback)})):(console.log("no patch."),callback&&callback())},onEventSelect:function(e){console.log("onEventSelect"),e&&e.preventDefault();var view_name=$(e.currentTarget).data("show");this.eventChange(view_name),this.setState({open_header_sub_nav:null})},eventChange:function(name){var _this4=this,that=this;this.hideEventMarkers(),this.switchToCubedTexture("InitialEarthCubeMapTextures");var events=this.props.events.filter(function(v){return v.external_id==name});if(events.length>0){var view=events[0],previous_view=this.getValuesForPreviousView();this.setState({view:view,previous_view:previous_view,light_on:!0,target:"Event",dataset:null,missions_grid_open:!1,show_latest_event:!1,vital_signs_grid_open:!1,events_grid_open:!1,mobile_options_open:!1,playing:!1,info_panel_open:!1,view_context_is_open:!1},function(){_this4.setUrlHash(),that.createOrLoadRangerEventPatch()})}else this.setState({error_modal_open:!0,error_message:"The event you are trying to view is no longer available."},function(){that.viewChange(that.state.view.value)})},createOrLoadRangerEventPatch:function(){var that=this;this.removePatch(function(){that.state.data_patches.indexOf(that.state.view.external_id)>=0?that.showRangerEventPatch():that.createRangerEventPatch(),that.rangerHeadLight()})},goBack:function(){var that=this,previous=this.state.previous_view,view=previous.value,group=previous.dataset_group_id,dataset=previous.dataset_id;this.viewChange(view,group,dataset,function(){previous.animating&&that.loadDatasetsForAnimation(previous.animating,previous.begin_date_input,previous.end_date_input)})},showRangerEventPatch:function(){var that=this;__ranger.update({scene:{show:{renderables:[{node:"Earth",name:this.state.view.external_id,lod:"surfacePatches"}],lod:{name:"surfacePatches",node:"Earth"}}}},null,function(m){console.log(m),console.log("show data patch: ",that.state.view.external_id),that.setState({data_patch:that.state.view.external_id},function(){that.setPatchCamera()})})},createRangerEventPatch:function(){var that=this;__ranger.update({scene:{load:{renderables:[{node:"Earth",name:this.state.view.external_id,lod:"surfacePatches",data:["$RenderableTexturedSurfacePatch",{latBounds:[this.state.view.south_boundary,this.state.view.north_boundary],longBounds:[this.state.view.west_boundary,this.state.view.east_boundary],ellipsoid:[6378.14,6378.14,6356.75],texture:window.location.origin+this.state.view.image_src}]}]},show:{lod:{name:"surfacePatches",node:"Earth"}}}},null,function(m){console.log(m),console.log("create data patch: ",that.state.view.external_id),that.setState({data_patch:that.state.view.external_id,data_patches:that.state.data_patches.concat(that.state.view.external_id)},that.setPatchCamera)})},setPatchCamera:function(){var that=this,center=that.state.view.center.split(",");__ranger.update({patchCamera:{set:{altitude:that.PATCH_CAMERA_ALT,id:100,maxAltitude:that.PATCH_CAMERA_ALT_MAX,minAltitude:1e3,latLon:[parseFloat(center[0]),parseFloat(center[1])],node:"Earth",doTransition:!0}}},null,function(m){console.log(m),that.patchCamera=m.message})},missionChange:function(name){var that=this,missions=this.props.missions.filter(function(v){return v.external_id.indexOf(name)>-1});if(missions&&missions.length>0){that.switchToCubedTexture("InitialEarthCubeMapTextures");var view=missions[0];this.hideEventMarkers(),this.hideAllSatellitesExcept(name);var previous_view=this.getValuesForPreviousView();this.setState({view:view,previous_view:previous_view,dataset:null,target:"Mission",missions_grid_open:!1,vital_signs_grid_open:!1,mobile_options_open:!1,in_situ:!0,info_panel_open:!1,events_grid_open:!1,playing:!1,view_context_is_open:!1},function(){console.log("view change - mission!",name),that.zoomToSatellite(name),that.removePatch(),that.setUrlHash()})}else console.error("Mission not found in props.missions",name)},getGroupById:function(view,group_id){try{return view.dataset_groupings.filter(function(g){return g.id==group_id})[0]}catch(e){return null}},viewChange:function(name,group_id,dataset_id,callback){var that=this,view=this.props.vital_signs.filter(function(v){return v.value==name})[0],dataset=undefined,group=undefined,dataset_items=(undefined,undefined),dataset_item_idx=undefined;if(view&&dataset_id&&group_id&&view.dataset_groupings)if((group=that.getGroupById(view,group_id))&&group.datasets_sorted&&group.datasets_sorted.length>0){var datasets=group.datasets_sorted.filter(function(v){return v.id==dataset_id});datasets.length>0&&(dataset_item_idx=(dataset_items=(dataset=datasets[0]).latest_dataset_items).length-1)}else console.error("Given group id not found in view",group_id,name);else view&&group_id&&view.dataset_groupings?(group=that.getGroupById(view,group_id))&&group.datasets_sorted?dataset_item_idx=(dataset_items=(dataset=group.datasets_sorted[0]).latest_dataset_items).length-1:(console.error("Given group id has no datasets",group_id,name),dataset_item_idx=(dataset_items=(dataset=(group=view.dataset_groupings[0]).datasets_sorted[0]).latest_dataset_items).length-1):view&&view.dataset_groupings&&view.dataset_groupings.length>0&&(dataset_item_idx=(dataset_items=(dataset=(group=view.dataset_groupings[0]).datasets_sorted[0]).latest_dataset_items).length-1);var dataset_group_id=group?group.id:0;"satellites"==name&&this.setTimeToNow(),dataset_items&&dataset_item_idx>=0?that.loadTexture(dataset_items[dataset_item_idx]):that.switchToCubedTexture("InitialEarthCubeMapTextures"),this.showHideSatellitesAndEvents(name,dataset);var previous_view=this.getValuesForPreviousView(),dates=this.getDatesForDataset(dataset);this.setState({view:view,previous_view:previous_view,dataset:dataset,dataset_items:dataset_items,dataset_item_idx:dataset_item_idx,dataset_group:group,dataset_group_id:dataset_group_id,latest_seven:!1,animating:!1,playing:!1,target:"Earth",missions_grid_open:!1,info_panel_open:!1,vital_signs_grid_open:!1,events_grid_open:!1,mobile_options_open:!1,begin_date_input:"",end_date_input:"",begin_min_date:dates[0],end_max_date:dates[1],begin_max_date:dates[1],end_min_date:dates[0],custom_dataset_items:[],view_context_is_open:!1,datepicker_open:!1},function(){that.setUrlHash(),window.setTimeout(that.resizeOrama,1e3),__ranger.update({camera:{set:{id:100,parent:"Earth",minRadius:this.EARTH_CAMERA_RADIUS_MIN,maxRadius:this.EARTH_CAMERA_RADIUS_MAX,radius:this.EARTH_CAMERA_RADIUS,doTransition:!1,constrainAroundVector:null,objectBelow:null,verticalLockVector:[0,0,1]}}},null,function(m){console.log(m),that.removePatch(),callback&&callback()})})},getDatesForDataset:function(dataset){var begin=undefined,end=undefined;if(dataset){if(dataset.begin_date){var b=new Date(dataset.begin_date);begin=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()}if(dataset.end_date){var e=new Date(dataset.end_date);end=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}return[begin,end]},showHideSatellitesAndEvents:function(name,dataset){"satellites"==name||"visible_earth"==name?(this.showAllSatellites(),this.showEventMarkers()):(this.hideSatellites(dataset),this.hideEventMarkers())},hideAllSatellitesExcept:function(name){var hide_arr=[],show_arr=[];this.props.all_missions.map(function(v){name.indexOf("GRACE-FO")>-1?v.indexOf("GRACE-FO")>-1?show_arr.push({name:v}):hide_arr.push({name:v}):v!=name?hide_arr.push({name:v}):show_arr.push({name:v})}),this.hideAndShowSatellites(hide_arr,show_arr)},showAllSatellites:function(){var show_arr=this.props.all_missions.map(function(v){return{name:v}});this.hideAndShowSatellites([],show_arr)},hideSatellites:function(dataset){var that=this,hide_arr=[],show_arr=[];this.props.all_missions.map(function(v){that.shouldShowSatellite(v,dataset)?show_arr.push({name:v}):hide_arr.push({name:v})}),this.hideAndShowSatellites(hide_arr,show_arr)},shouldShowSatellite:function(name,dataset){try{var found=!1;return dataset.missions.map(function(x){name.indexOf("GRACE-FO")>-1?x.external_id.indexOf("GRACE-FO")>-1&&(found=!0):x.external_id.indexOf(name)>-1&&(found=!0)}),found}catch(e){return console.log(e.message),!1}},hideAndShowSatellites:function(hide_arr,show_arr){hide_arr.length>0&&__ranger.update({scene:{hide:{nodes:hide_arr}}},null,function(m){console.log(m)}),show_arr.length>0&&__ranger.update({scene:{show:{nodes:show_arr}}},null,function(m){console.log(m)})},loadTexture:function(dataset_item){var name="dataset_"+dataset_item.id;this.loadedTextures[name]&&dataset_item.cubed_prefix&&dataset_item.cubed_suffix?this.switchToCubedTexture(name):dataset_item.cubed_prefix&&dataset_item.cubed_suffix&&this.loadCubedTexture(name,dataset_item.cubed_prefix,dataset_item.cubed_suffix)},switchToCubedTexture:function(name){var that=this;__ranger.update({material:{set:{texture:{target:"Renderable",type:"Cube",node:"Earth",lod:"model",name:name,renderable:"ellipsoid",bindings:["cube0","cube1","cube2","cube3","cube4","cube5"]}}}},null,function(){that.datasets_to_load=that.datasets_to_load.filter(function(){})})},loadCubedTexture:function(name,prefix,suffix){var that=this;__ranger.update({material:{load:{texture:{target:"Renderable",type:"Cube",node:"Earth",lod:"model",name:name,renderable:"ellipsoid",bindings:["cube0","cube1","cube2","cube3","cube4","cube5"],data:{prefix:prefix,suffix:suffix,wrap:"clamp",ignoreAlpha:"true",minification:"linear",magnification:"linear"}}}}},null,function(ack){console.log(ack),that.loadedTextures[name]=!0,that.datasets_to_load=that.datasets_to_load.filter(function(){})})},onViewSelect:function(e){console.log("onViewSelect::"+$(e.currentTarget).data("show")),e&&e.preventDefault();var view_name=$(e.currentTarget).data("show"),group_id=$(e.currentTarget).data("dataset-group"),dataset=$(e.currentTarget).data("dataset");this.setState({open_header_sub_nav:null}),this.viewChange(view_name,group_id,dataset)},closeGrid:function(e){var that=this;e&&e.preventDefault(),window.setTimeout(that.resizeOrama,1e3),this.setState({missions_grid_open:!1,vital_signs_grid_open:!1,events_grid_open:!1})},resizeOrama:function(){var that=this;this.state.shaker>2?this.setState({shaker:0}):this.setState({shaker:this.state.shaker+1},function(){window.dispatchEvent(new Event("resize")),window.setTimeout(that.resizeOrama,1e3)})},changeLight:function(e){e&&e.preventDefault(),this.setState({light_on:!this.state.light_on},this.rangerHeadLight)},rangerHeadLight:function(){var _this5=this;this.state.headlight_created?this.state.light_on?__ranger.update({scene:{show:{fixedRenderable:{name:"HeadLight"}},hide:{renderable:{node:"Sun",name:"light"}}}}):__ranger.update({scene:{hide:{fixedRenderable:{name:"HeadLight"}},show:{renderable:{node:"Sun",name:"light"}}}}):!this.state.headlight_created&&this.state.light_on?__ranger.update({scene:{load:{fixedRenderable:this.HeadLight}}},null,function(m){console.log(m),m.success&&(console.log("created headlight."),__ranger.update({scene:{hide:{renderable:{node:"Sun",name:"light"}}}},null,function(n){console.log(n),console.log("sun "+(n.success?"disabled.":"not disabled."))})),_this5.setState({headlight_created:!0})}):console.log("Headlight not created but light is off... this is unexpected.")},getDatesAndColorbars:function(){var dataset_items=this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items;return this.state.dataset&&dataset_items&&dataset_items.length>0?React.createElement("div",{className:"legend"},React.createElement("p",{className:"date"},this.getDatasetDate(!0)),this.state.animating?React.createElement("p",{className:"range"},"Range: ",this.getRange(!0)):null,this.getColorbar()):""},getBeginAndEnd:function(){var dates,begin,end,dataset_items=this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items;if(dataset_items&&dataset_items.length>0){begin=dataset_items[0].date,end=dataset_items.length>1?dataset_items[dataset_items.length-1].date:dataset_items[0].date;var b=new Date(begin),begin_date=new Date(b.getTime()+6e4*b.getTimezoneOffset()),e=new Date(end);dates={begin_date:begin_date,end_date:new Date(e.getTime()+6e4*e.getTimezoneOffset())}}return dates},getRange:function(abbr){var dates=this.getBeginAndEnd();if(dates){var begin=dates.begin_date,end=dates.end_date;return abbr?begin.getMonth()+1+"/"+begin.getDate()+"/"+begin.getFullYear()+" \u2013 "+(end.getMonth()+1)+"/"+end.getDate()+"/"+end.getFullYear():this.formatDate(begin)+" \u2013 "+this.formatDate(end)}return""},changeColorbar:function(e){e&&e.preventDefault(),this.setState({fahrenheit:!this.state.fahrenheit})},getColorbar:function(){if(this.state.dataset&&this.state.dataset.colorbar_urls&&this.state.dataset.colorbar_urls.length>0){if(2==this.state.dataset.colorbar_urls.length){var idx=this.state.fahrenheit?0:1;return React.createElement("div",{className:"colorbar"},React.createElement("img",{src:this.state.dataset.colorbar_urls[idx],onClick:this.changeColorbar,alt:""}),React.createElement("a",{href:"#toggle-units",className:"toggle_units",onClick:this.changeColorbar},"Toggle Units"))}return React.createElement("div",{className:"colorbar"},React.createElement("img",{src:this.state.dataset.colorbar_urls[0],alt:""}))}return null},renderLatestEvent:function(){if(!(this.props.events&&this.props.events.length>0&&this.state.show_latest_event))return null;var latestEvent=this.props.events[0];return this.props.events.length>0?React.createElement("div",{className:"announcement"},React.createElement("a",{href:"#","data-show":latestEvent.external_id,onClick:this.onEventSelect},"LATEST EVENT: ",latestEvent.title)):void 0},loadLatestDataset:function(){var _this6=this;this.clickPause();var idx=this.state.dataset_items.length-1;this.setState({custom_dataset_items:[],latest_seven:!1,animating:!1,dataset_item_idx:idx,mobile_options_open:!1,datepicker_open:!1},function(){var next_texture=_this6.state.dataset_items[idx];_this6.switchToCubedTexture("dataset_"+next_texture.id),_this6.setUrlHash()})},loadLatestDatasets:function(){var that=this;this.state.dataset_items?(this.state.dataset_items.map(function(v){var name="dataset_"+v.id;that.datasets_to_load.push(name),that.loadTexture(v)}),this.setState({custom_dataset_items:[],latest_seven:!0,animating:!0,mobile_options_open:!1,datepicker_open:!1},this.allDatasetsLoaded())):console.error("No dataset items.")},allDatasetsLoaded:function(){0==this.datasets_to_load.length?(this.clickPlay(),this.setUrlHash()):window.setTimeout(this.allDatasetsLoaded,200)},clickLatestDatasets:function(){this.loadLatestDatasets()},clickBack:function(e){var _this7=this,dataset_items=this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items;e&&e.preventDefault(),console.log("click back");var idx=this.state.dataset_item_idx-1<0?dataset_items.length-1:this.state.dataset_item_idx-1;this.setState({dataset_item_idx:idx},function(){var next_texture=dataset_items[idx];_this7.switchToCubedTexture("dataset_"+next_texture.id),_this7.clickPause()})},clickForward:function(e){var _this8=this,dataset_items=this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items;e&&e.preventDefault();var idx=this.state.dataset_item_idx+1>dataset_items.length-1?0:this.state.dataset_item_idx+1;this.setState({dataset_item_idx:idx},function(){var next_texture=dataset_items[idx];_this8.switchToCubedTexture("dataset_"+next_texture.id),void 0!==e&&_this8.clickPause()})},clickPlay:function(e){var _this9=this;e&&e.preventDefault(),this.setState({playing:!0},function(){_this9.clickForward(),_this9.play()})},clickPause:function(e){var _this10=this;e&&e.preventDefault(),this.play_interval&&this.state.playing&&this.setState({playing:!1},function(){clearTimeout(_this10.play_interval)})},play:function(){var _this11=this;this.play_interval=setTimeout(function(){_this11.state.playing&&(_this11.clickForward(),_this11.play())},1e3)},getPlayControls:function(){var only_one=this.state.custom_dataset_items&&1==this.state.custom_dataset_items.length;return React.createElement("div",{className:"event_time_controls"},React.createElement("a",{href:"#back",className:"squircle_button "+(only_one?"disabled":""),onClick:this.clickBack},React.createElement(SvgIcon,{symbol:"fast_backward",label:"back"})),this.state.playing?React.createElement("a",{href:"#pause",className:"squircle_button "+(only_one?"disabled":""),onClick:this.clickPause},React.createElement(SvgIcon,{symbol:"pause",label:"pause"})):React.createElement("a",{href:"#play",className:"squircle_button "+(only_one?"disabled":""),onClick:this.clickPlay},React.createElement(SvgIcon,{symbol:"play",label:"play"})),React.createElement("a",{href:"#forward",className:"squircle_button "+(only_one?"disabled":""),onClick:this.clickForward},React.createElement(SvgIcon,{symbol:"fast_forward",label:"forward"})),React.createElement("a",{href:"#calendar",className:"squircle_button dataset_calendar",onClick:this.toggleDatePicker},React.createElement(SvgIcon,{symbol:"calendar",label:"calendar"})))},getLoadOrPlay:function(){return this.state.animating?this.getPlayControls():React.createElement("div",null,React.createElement("button",{type:"button",className:"button compact_button",onClick:this.clickLatestDatasets},"Animate",React.createElement("br",null),"This Data"))},onDataGroupSelect:function(e){e&&e.preventDefault();var vs_id=$(e.currentTarget).data("vs-id"),group=$(e.currentTarget).data("dataset-group"),vs=this.props.vital_signs.filter(function(v){return v.id==parseInt(vs_id)});vs.length>0?this.viewChange(vs[0].value,parseInt(group)):console.error("No vital sign with id",vs_id)},onDatasetSelect:function(e){var name=$(e.currentTarget).find(":selected").data("vs-name"),group=$(e.currentTarget).find(":selected").data("dataset-group"),dataset=$(e.currentTarget).find(":selected").data("dataset");this.viewChange(name,group,dataset)},getDatasetSelectLoad:function(){var _this12=this,that=this;if(!(this.state.view&&this.state.dataset_group_id&&this.state.dataset))return null;var group,_ret2=(group=_this12.getGroupById(_this12.state.view,_this12.state.dataset_group_id))&&group.datasets_sorted&&group.datasets_sorted.length>1?{v:React.createElement("div",{className:"datasets_tools"},React.createElement("select",{className:"dataset_switcher",value:_this12.state.dataset.id,onChange:that.onDatasetSelect},group.datasets_sorted.map(function(dataset,i){return React.createElement("option",{key:group.id+"-"+i,"data-dataset-group":group.id,"data-dataset":dataset.id,"data-vs-name":that.state.view.value,value:dataset.id},dataset.menu_title)})),_this12.getDatePickers(),_this12.getLoadOrPlay())}:{v:React.createElement("div",{className:"datasets_tools"},_this12.getDatePickers(),_this12.getLoadOrPlay())};return"object"==typeof _ret2?_ret2.v:void 0},getDatePickers:function(){return this.state.datepicker_open&&!this.props.module?React.createElement("div",{className:"datepickers"},React.createElement("header",{className:"datepickers_header"},React.createElement("a",{className:"close_btn",onClick:this.closeDatePicker},React.createElement(SvgIcon,{symbol:"close",label:"close"})),React.createElement("button",{className:"toggler",onClick:this.loadLatestDataset},"LATEST",React.createElement("br",null),"DATASET"),React.createElement("button",{className:"toggler",onClick:this.checkLoadLatest},"LATEST 7",React.createElement("br",null),"DATASETS")),React.createElement(BeginEndDateFilters,{clear_begin_date:this.clearBeginDate,begin_min_date:this.state.begin_min_date,begin_max_date:this.state.begin_max_date,begin_date_picker_close:this.beginDatePickerClose,begin_date_input:this.state.begin_date_input,change_begin_date_value:this.changeBeginDateValue,begin_keypress:this.changeOnEnter,clear_end_date:this.clearEndDate,end_min_date:this.state.end_min_date,end_max_date:this.state.end_max_date,end_date_picker_close:this.endDatePickerClose,end_date_input:this.state.end_date_input,change_end_date_value:this.changeEndDateValue,end_keypress:this.changeOnEnter,month_year:"month"==this.state.dataset.average,dataset_items:this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items}),React.createElement("button",{className:"submit",onClick:this.applyDates},"APPLY"),React.createElement("button",{className:"submit",onClick:this.closeDatePicker},"CANCEL")):null},checkLoadLatest:function(){this.state.latest_seven?this.closeDatePicker():this.loadLatestDatasets()},closeDatePicker:function(){this.setState({datepicker_open:!1})},applyDates:function(){var _this13=this,that=this;this.clickPause(),this.datasets_to_load=[],this.setUrlHash(),$.getJSON("/api/v1/datasets/"+this.state.dataset.id+"/"+this.state.begin_date_input+"/"+this.state.end_date_input,function(data){data.items&&data.items.length>0?(data.items.map(function(v){var name="dataset_"+v.id;that.datasets_to_load.push(name),that.loadTexture(v)}),that.setState({custom_dataset_items:data.items,datepicker_open:!1,mobile_options_open:!1,dataset_item_idx:0,latest_seven:!1,animating:!0},that.allDatasetsLoaded)):that.setState({begin_date_input:"",end_date_input:"",error_modal_open:!0,error_message:"Sorry, there were no datasets found for the range "+_this13.state.begin_date_input+" to "+_this13.state.end_date_input+". Defaulting to latest seven datasets.",custom_dataset_items:[],datepicker_open:!1,mobile_options_open:!1,dataset_item_idx:0,latest_seven:!1,animating:!0},that.allDatasetsLoaded)})},toggleDatePicker:function(e){e&&e.preventDefault();var datepicker_open=!this.state.datepicker_open;this.setState({datepicker_open:datepicker_open})},renderViewToolbar:function(){return"Earth"==this.state.target?React.createElement("div",{className:"view_toolbar"},this.getDatasetSelectLoad()):"Event"==this.state.target&&this.state.dataset?React.createElement("div",{className:"view_toolbar"},React.createElement("div",{className:"event_control_switch"},React.createElement("span",null,"Event Details"),React.createElement("hr",null),React.createElement("span",null,"Related Dataset"))):"Mission"==this.state.target?React.createElement("div",{className:"view_toolbar"},this.state.in_situ?React.createElement("button",{className:"zoom_out squircle_button",onClick:this.onSatelliteZoom},React.createElement(SvgIcon,{symbol:"zoom_out",label:"zoom_out"})):React.createElement("button",{className:"zoom_in squircle_button",onClick:this.onSatelliteZoom},React.createElement(SvgIcon,{symbol:"zoom_in",label:"zoom_in"}))):null},beginDatePickerClose:function(d){if(""!=d){var correctMinDate=new Date(d);correctMinDate.setDate(correctMinDate.getDate()+1);var dataset_end=new Date(this.state.dataset.end_date),max_date=new Date(new Date(d).getTime()+7776e6);max_date>dataset_end&&(max_date=dataset_end),this.setState({end_min_date:correctMinDate,begin_date_input:d,end_max_date:max_date})}},endDatePickerClose:function(d){if(""!=d){var correctMaxDate=new Date(d);correctMaxDate.setDate(correctMaxDate.getDate());var min_date=new Date(new Date(d).getTime()-7776e6),dataset_begin=new Date(this.state.dataset.begin_date);min_date<dataset_begin&&(min_date=dataset_begin),this.setState({begin_max_date:correctMaxDate,end_date_input:d,begin_min_date:min_date})}},clearBeginDate:function(){var dates=this.getDatesForDataset(this.state.dataset);this.setState({begin_min_date:dates[0],begin_date_input:"",end_min_date:dates[0]},function(){$(".begin_date").datepicker("hide")})},clearEndDate:function(){var dates=this.getDatesForDataset(this.state.dataset);this.setState({end_max_date:dates[1],end_date_input:"",begin_max_date:dates[1]},function(){$(".end_date").datepicker("hide")})},changeEndDateValue:function(e){var end_date_input=undefined;end_date_input="string"==typeof e?e:e.target.value,console.log("changeendDateValue",end_date_input),this.setState({end_date_input:end_date_input})},changeOnEnter:function(e){e||(e=window.event),"13"==(e.keyCode||e.which)&&(console.log("changeOnEnter: enter pressed in date field"),this.applyDates())},changeBeginDateValue:function(e){var begin_date_input=undefined;begin_date_input="string"==typeof e?e:e.target.value,console.log("changeBeginDateValue",begin_date_input),this.setState({begin_date_input:begin_date_input})},onSatelliteZoom:function(){this.state.in_situ?this.pullBackToEarth():this.zoomToSatellite(this.state.view.external_id)},padZero:function(num){return num<10?"0"+num:num},getFormattedDate:function(){var date=this.state.date,hour=date.getHours(),meridiem=hour>=12?"PM":"AM",datetimeAttribute=date.toISOString();return React.createElement("time",{dateTime:datetimeAttribute},React.createElement("span",null,React.createElement("abbr",{
title:this.monthNames[date.getMonth()]},this.monthAbbr[date.getMonth()])," ",date.getDate(),", ",date.getFullYear())," ",React.createElement("span",null,this.padZero((hour+11)%12+1),":",this.padZero(date.getMinutes()),":",this.padZero(date.getSeconds())," ",meridiem))},setRangerRate:function(){__ranger.update({time:{rate:this.timerates[this.state.timerate_idx]}},null,function(m){console.log(m)})},changeRate:function(e){e&&e.preventDefault();var value=$(e.currentTarget).data("value");switch(console.log("changeRate "+value),value){case"minus":this.setRate(Math.max(this.state.timerate_idx-1,0));break;case"plus":this.setRate(Math.min(this.state.timerate_idx+1,this.timerates.length-1));break;case"real":this.setTimeToNow();break;case"two":this.setRate(13)}},setStartTime:function(){var _this14=this,date=new Date;this.setState({date:date,timerate_idx:this.state.timerate_idx},function(){__ranger.update({time:{time:date.getTime()/1e3+" UNIX",rate:_this14.timerates[_this14.state.timerate_idx]}},null,function(m){console.log(m)})})},setTimeToNow:function(){var date=new Date;this.setState({date:date,timerate_idx:9},function(){__ranger.update({time:{time:date.getTime()/1e3+" UNIX",rate:1}},null,function(m){console.log(m)})})},setRate:function(idx){this.setState({timerate_idx:idx},this.setRangerRate)},getMobileFooterOptions:function(){return"Earth"==this.state.target&&this.state.animating?React.createElement("div",{className:"mobile_play_controls"},this.getPlayControls(),React.createElement("p",{className:"range mobile_range"},"Range: ",this.getRange(!0))):"Event"!=this.state.target||!this.state.previous_view||"satellites"!=this.state.previous_view.value&&"visible_earth"!=this.state.previous_view.value?null:React.createElement("div",{className:"back_container"},React.createElement("button",{className:"back_btn",onClick:this.goBack},React.createElement(SvgIcon,{symbol:"arrow_left"})," BACK"))},getDatasetDate:function(forceBreak){var dataset_items=this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items;if(this.state.dataset&&dataset_items&&dataset_items.length>0&&dataset_items[this.state.dataset_item_idx]){var dataset_item=dataset_items[this.state.dataset_item_idx];return this.state.dataset.average?forceBreak?this.calculateDatasetItemRange(dataset_item.date,this.state.dataset.average,dataset_item.formatted_date).replace("-","- \n").split("\n").map(function(item,key){return React.createElement("span",{key:key},item," ",React.createElement("br",null))}):this.calculateDatasetItemRange(dataset_item.date,this.state.dataset.average,dataset_item.formatted_date):dataset_item.formatted_date}return null},calculateDatasetItemRange:function(date,average,formatted_date){var d=new Date(date),d_utc=new Date(d.getTime()+6e4*d.getTimezoneOffset()),p=new Date;switch(average){case"three_day":return p.setTime(d_utc.getTime()-1728e5),this.formatDate(p)+" - "+this.formatDate(d_utc);case"seven_day":return p.setTime(d_utc.getTime()-5184e5),this.formatDate(p)+" - "+this.formatDate(d_utc);case"eight_day":return p.setTime(d_utc.getTime()-6048e5),this.formatDate(p)+" - "+this.formatDate(d_utc);case"ten_day":return p.setTime(d_utc.getTime()-7776e5),this.formatDate(p)+" - "+this.formatDate(d_utc);case"sixteen_day":return p.setTime(d_utc.getTime()-1296e6),this.formatDate(p)+" - "+this.formatDate(d_utc);case"month":return this.monthNames[d.getUTCMonth()]+" "+d.getUTCFullYear();default:return formatted_date}},formatDate:function(date){return this.monthNames[date.getMonth()]+" "+date.getDate()+", "+date.getFullYear()},toggleTimeRatePanel:function(e){e.preventDefault(),this.setState({time_rate_panel_open:!this.state.time_rate_panel_open},function(){})},isTimeRateActive:function(){return"satellites"===this.state.view.value||"Mission"==this.state.target},onEnter:function(){var _this15=this;this.setState({entered:!0},function(){_this15.afterEnter&&_this15.afterEnter()})},closeErrorModal:function(){this.resizeOrama(),this.setState({error_modal_open:!1,error_message:""})},removeHint:function(){this.state.untouched&&this.setState({untouched:!1})},getTouchHint:function(){return this.state.untouched?React.createElement("div",{className:"touch_hint"},React.createElement("div",{className:"touch_img"})):null},getSplashScreen:function(){return this.props.module?!this.state.ranger_ready||this.state.untouched?React.createElement("div",{className:"module_loading "+(this.state.untouched?"":"touched")},this.getTouchHint(),this.state.ranger_ready?"":React.createElement(LoadingMessages,{messages:this.loading_messages,interval:2688})):null:this.state.entered?null:React.createElement(AppPreloader,{app_loaded:this.state.ranger_loaded,module:this.props.module,loading_messages:this.loading_messages,is_webgl_enabled:this.state.is_webgl_enabled,on_enter:this.onEnter})},getDatasetTitle:function(){var _this16=this;if(!this.state.dataset)return"";if("string"==typeof this.state.dataset.title)return this.state.dataset.title;var dataset_items=this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items;if(!(dataset_items.length>0))return"";var item,d,titles,_ret3=(item=dataset_items[_this16.state.dataset_item_idx],d=new Date(item.date),(titles=_this16.state.dataset.title.filter(function(v){return new Date(v.date)>=d})).length>0?{v:titles[0].title}:{v:""});return"object"==typeof _ret3?_ret3.v:void 0},setUrlHash:function(){var url_params={};switch(this.state.target){case"Earth":url_params={vs_name:this.state.view.value,dataset_id:this.state.dataset?this.state.dataset.id:"",group_id:this.state.dataset_group_id,animating:this.state.animating?"t":"f",start:this.state.begin_date_input,end:this.state.end_date_input};break;case"Mission":url_params={mission:this.state.view.external_id};break;case"Event":url_params={event:this.state.view.external_id};break;default:console.error("Unexpected state for url hash",this.state.target)}var ranger=mb_utils.getParam("ranger");ranger&&$.extend(url_params,{ranger:ranger[0]});var url_string="?"+$.param(url_params);window.history.replaceState(null,"Earth Now",url_string)},getHeader:function(){return this.state.ranger_ready?this.props.module?React.createElement("header",{className:"earth_now_header"},React.createElement("div",{className:"page_tools"},React.createElement(Fullscreen,{is_webgl_enabled:this.state.is_webgl_enabled,app_selector:"#earth_now_app",always_show:!0,post_message:!0}))):React.createElement(EwHeader,{more_items:this.more_items,grid_nav_items:this.props.grid_nav_items,on_more_click:this.moreClicked,about_modal_url:this.props.about_modal_url,grid_open_fn:this.gridOpen,target:this.state.target,on_mission_select:this.onMissionSelect,on_event_select:this.onEventSelect,on_home:this.onHome,on_view_select:this.onViewSelect,mobile_nav_open:this.openMobileNav,mobile_nav_close:this.closeMobileNav,desktop_nav_open:this.openDesktopNav,desktop_nav_close:this.closeDesktopNav,desktop_open:this.state.desktop_nav_open,mobile_open:this.state.mobile_nav_open,change_light:this.changeLight,light_is_on:this.state.light_on,is_open_sub_nav:this.isOpenHeaderSubNav,toggle_sub_nav:this.toggleHeaderSubNav,show_sub_nav:this.showHeaderSubNav,hide_sub_nav:this.hideHeaderSubNav,site_nav:this.props.site_nav}):null},getGrids:function(){return this.props.module?null:React.createElement("div",{className:"grids"},React.createElement(EwGrid,{title:"Vital Signs",default_filter:"key_indicators",grid_filters:this.vital_signs_filters,items:this.props.vital_signs,grid_close_fn:this.closeGrid,grid_open:this.state.vital_signs_grid_open,on_select:this.onViewSelect,display_order:this.props.vital_signs_subcategory_order,subcat_display_names:this.props.subcategory_display_names}),React.createElement(EwGrid,{title:"Missions",default_filter:"all",default_select:"operating",grid_filters:this.props.mission_filters,items:this.props.missions,grid_close_fn:this.closeGrid,grid_open:this.state.missions_grid_open,on_select:this.onMissionSelect}),React.createElement(EwGrid,{title:"Events",grid_filters:this.events_filters,items:this.props.events,grid_close_fn:this.closeGrid,grid_open:this.state.events_grid_open,on_select:this.onEventSelect}))},getQuickMenu:function(){return this.props.module?null:React.createElement(EwQuickMenu,{expander_position:"above",expander_icon:"stack",expander_label:"View",view:this.state.view,target:this.state.target,view_items:this.props.vital_signs,all_missions:this.props.all_missions,missions:this.props.missions,events:this.props.events?this.props.events.slice(0,3):[],grid_open_fn:this.gridOpen,on_mission_select:this.missionChange,on_event_select:this.eventChange,on_earth_select:this.viewChange})},getFooter:function(){return this.props.module?null:React.createElement(EwFooter,{view_items:this.props.vital_signs,missions:this.props.missions,events:this.props.events?this.props.events.slice(0,3):[],view:this.state.view,target:this.state.target,on_view_select:this.onViewSelect,on_datagroup_select:this.onDataGroupSelect,on_event_select:this.onEventSelect,is_webgl_enabled:this.state.is_webgl_enabled,change_light:this.changeLight,light_is_on:this.state.light_on,time_rate_panel_active:this.isTimeRateActive(),time_rate_panel_open:this.state.time_rate_panel_open,toggle_time_rate_panel:this.toggleTimeRatePanel,on_open_view_context:this.onOpenViewContext,on_close_view_context:this.onCloseViewContext,view_context_is_open:this.state.view_context_is_open,ranger_ready:this.state.ranger_ready})},getTimePanel:function(){return this.props.module?null:React.createElement(EwTimeRatePanel,{timerate:this.timerates[this.state.timerate_idx],change_rate:this.changeRate,open:this.state.time_rate_panel_open,toggle:this.toggleTimeRatePanel})},getModuleBackBtn:function(){return this.props.module&&"Mission"==this.state.target?React.createElement("div",{className:"back_button_container"},React.createElement("div",{className:"back_button",onClick:this.goBack},React.createElement("span",{className:"icon"},React.createElement(SvgIcon,{symbol:"arrow_left",label:"Back"})),React.createElement("span",{className:"btn_text"},"BACK"))):null},getInfoPanel:function(){return this.state.ranger_ready?React.createElement(InfoPanel,{view:this.state.view,target:this.state.target,range:this.getRange(!1),colorbar:this.getColorbar(),dataset:this.state.dataset,on_mission_dataset_group:this.onDataGroupSelect,panel_open:this.state.info_panel_open,dataset_date:this.getDatasetDate(),open_mobile_options:this.openMobileOptions,formatted_date:this.getFormattedDate(),toggle_panel:this.toggleInfoPanel,dataset_title:this.getDatasetTitle(),module:this.props.module},this.getMobileFooterOptions()):null},render:function(){return React.createElement("div",{id:"earth_now_app",onClick:this.removeHint,onTouchStart:this.removeHint,onDragStart:this.removeHint},React.createElement("div",{className:"gradient_container_top"}),React.createElement("div",{className:"gradient_container_bottom"}),this.props.module?null:React.createElement(PleaseRotate,null),this.getSplashScreen(),React.createElement(Modal,{isOpen:this.state.error_modal_open,onClose:this.closeErrorModal,style:this.errorModalStyle,className:"modal error_modal"},React.createElement("header",null,React.createElement("a",{className:"close_btn",onClick:this.closeErrorModal},"\u2a2f")),React.createElement("p",{className:"error"},this.state.error_message),React.createElement("footer",null,React.createElement("div",{className:"button",onClick:this.closeErrorModal},"OK"))),this.getHeader(),this.renderLatestEvent(),this.getGrids(),this.getDatesAndColorbars(),this.renderViewToolbar(),this.getModuleBackBtn(),this.getInfoPanel(),React.createElement(EwOptionsMenu,{view:this.state.view,target:this.state.target,dataset:this.state.dataset,in_situ:this.state.in_situ,on_zoom:this.onSatelliteZoom,dataset_group:this.state.dataset_group,on_mission_dataset_group:this.onDataGroupSelect,latest_seven:this.state.latest_seven,on_load_latest_7:this.loadLatestDatasets,load_latest:this.loadLatestDataset,on_home:this.onHome,on_view_select:this.onViewSelect,open:this.state.mobile_options_open,info_tab_selected:this.state.mobile_options_info_tab_selected,select_info_tab:this.selectMobileOptionsInfoTab,deselect_info_tab:this.deselectMobileOptionsInfoTab,timerate:this.timerates[this.state.timerate_idx],change_rate:this.changeRate,on_close:this.closeMobileOptions,begin_min_date:this.state.begin_min_date,end_min_date:this.state.end_min_date,begin_max_date:this.state.begin_max_date,end_max_date:this.state.end_max_date,begin_date_input:this.state.begin_date_input,end_date_input:this.state.end_date_input,datepicker_open:this.state.datepicker_open,toggle_date_picker:this.toggleDatePicker,clear_begin_date:this.clearBeginDate,clear_end_date:this.clearEndDate,begin_date_picker_close:this.beginDatePickerClose,change_begin_date_value:this.changeBeginDateValue,end_date_picker_close:this.beginDatePickerClose,change_end_date_value:this.changeEndDateValue,apply_dates:this.applyDates,loaded_latest:this.state.loaded_latest,dataset_title:this.getDatasetTitle(),module:this.props.module,dataset_date:this.getDatasetDate(),dataset_items:this.state.custom_dataset_items.length>0?this.state.custom_dataset_items:this.state.dataset_items}),this.getQuickMenu(),this.getTimePanel(),this.getFooter(),React.createElement("div",{id:"ranger-container",onClick:this.closeAllModals}))}}),EwFooter=createReactClass({monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],scrollable_element:null,scrollable_list_element:null,scrollable_list_items:[],updateScrollableTimeout:null,clock_interval:null,getInitialState:function(){return{can_scroll_forward:!1,can_scroll_backward:!1,date:new Date}},componentDidMount:function(){var that=this;this.updateScrollableState(),window.addEventListener("resize",this.updateScrollableState),this.clock_interval=window.setInterval(function(){that.props.ranger_ready&&__ranger.update({time:{}},null,function(m){if(m.success){var et=1e3*m.message.unix,date=new Date(et);$("body").trigger("earth_now_date",date),that.setState({date:date})}})},500)},componentWillUnmount:function(){this.scrollable_element&&this.scrollable_element.removeEventListener("scroll",this.updateScrollableState),window.removeEventListener("resize",this.updateScrollableState),window.clearInterval(this.clock_interval)},setScrollableRef:function(element){this.scrollable_element&&this.scrollable_element.removeEventListener("scroll",this.updateScrollableState),this.scrollable_element=element,this.scrollable_element.addEventListener("scroll",this.updateScrollableState),this.updateScrollableState()},setScrollableListRef:function(element){this.scrollable_list_element=element,this.scrollable_list_items=[],this.updateScrollableState()},addScrollableItemRef:function(element){this.scrollable_list_items.push(element),this.updateScrollableState()},updateScrollableState:function(){var that=this;if(null===this.updateScrollableTimeout){this._updateScrollableState();var wait_for=100;clearTimeout(this.updateScrollableTimeout),this.updateScrollableTimeout=setTimeout(function(){that._updateScrollableState(),clearTimeout(that.updateScrollableTimeout),that.updateScrollableTimeout=null},wait_for)}},_updateScrollableState:function(){this.setState({can_scroll_forward:this.canScrollForward()}),this.setState({can_scroll_backward:this.canScrollBackward()})},canScrollForward:function(){if(!this.scrollable_element||!this.scrollable_list_element)return!1;var MARGIN=25,list=(this.scrollable_element.querySelector("li:last-child"),this.scrollable_list_element),scrolledRight=this.scrollable_element.scrollLeft+this.scrollable_element.offsetWidth>=list.offsetWidth-MARGIN,nothingToScroll=this.scrollable_element.offsetWidth>=list.offsetWidth;return!(scrolledRight||nothingToScroll)},canScrollBackward:function(){if(!this.scrollable_element||!this.scrollable_list_element)return!1;var MARGIN=25,list=(this.scrollable_element.querySelector("li:first-child"),this.scrollable_list_element),scrolledLeft=this.scrollable_element.scrollLeft+0<=MARGIN,nothingToScroll=this.scrollable_element.offsetWidth>=list.offsetWidth;return!(scrolledLeft||nothingToScroll)},scrollForward:function(){var scrollable=this.scrollable_element;if(scrollable){var scrollPosition,item=scrollable.querySelector("li:last-child");item&&(scrollPosition=scrollable.scrollLeft,item.scrollIntoView({behavior:"smooth",block:"end",inline:"end"}),setTimeout(function(){scrollable.scrollLeft===scrollPosition&&(scrollable.scrollLeft+=scrollable.offsetWidth/2)},100)),this.updateScrollableState()}},scrollBackward:function(){var scrollable=this.scrollable_element;if(scrollable){var scrollPosition,item=scrollable.querySelector("li:first-child");item&&(scrollPosition=scrollable.scrollLeft,item.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}),setTimeout(function(){scrollable.scrollLeft===scrollPosition&&(scrollable.scrollLeft-=scrollable.offsetWidth/2)},100)),this.updateScrollableState()}},getViewsOrContext:function(){var that=this;return"Mission"==this.props.target&&this.props.view.dataset_groupings?0==this.props.view.dataset_groupings.length?React.createElement("ul",{className:"view_list"},React.createElement("li",null,React.createElement("span",{className:"no_data_message"},"No datasets currently available in Earth Now."))):React.createElement("ul",{className:"view_list",ref:this.setScrollableListRef},this.props.view.dataset_groupings.map(function(v,i){return React.createElement("li",{key:"m"+i,className:"nav_item",ref:that.addScrollableItemRef},React.createElement("a",{href:"#",className:"view_selector","data-dataset-group":v.id,"data-vs-id":v.earth_now_vital_sign_id,onClick:that.props.on_datagroup_select},v.title))})):"Event"==this.props.target?React.createElement("ul",{className:"view_list",ref:this.setScrollableListRef},this.props.events.map(function(v,i){var current=v.external_id==that.props.view.external_id;return React.createElement("li",{key:"e"+i,className:"nav_item "+(current?"current":""),ref:that.addScrollableItemRef},React.createElement("a",{href:"#",className:"view_selector","data-show":v.external_id,onClick:that.props.on_event_select},v.title))})):"Earth"==this.props.target?React.createElement("ul",{className:"view_list",ref:this.setScrollableListRef},this.props.view_items.map(function(v,i){var current=v.value==that.props.view.value;return React.createElement("li",{key:"v"+i,className:"nav_item "+(current?"current":""),ref:that.addScrollableItemRef},React.createElement("a",{href:"#",className:"view_selector","data-show":v.value,onClick:that.props.on_view_select},v.title))})):void 0},getViewListTitle:function(){return"Mission"==this.props.target&&this.props.view.dataset_groupings?React.createElement("h2",{className:"view_list_title"},"Datasets"):"Event"==this.props.target?React.createElement("h2",{className:"view_list_title"},"More like this"):void 0},getFormattedDate:function(){var date=this.state.date,hour=date.getHours(),meridiem=hour>=12?"PM":"AM",datetimeAttribute=date.toISOString();return React.createElement("time",{dateTime:datetimeAttribute},React.createElement("span",null,React.createElement("abbr",{title:this.monthNames[date.getMonth()]},this.monthAbbr[date.getMonth()])," ",date.getDate(),", ",date.getFullYear())," ",React.createElement("span",null,this.padZero((hour+11)%12+1),":",this.padZero(date.getMinutes()),":",this.padZero(date.getSeconds())," ",meridiem))},padZero:function(num){return num<10?"0"+num:num},render:function(){return React.createElement("footer",{className:"site_footer_area is_toggleable "+(this.state.view_context_is_open?"active":"")},this.getViewListTitle(),React.createElement("ul",{className:"view_list_controls"},React.createElement("li",{className:"forward "+(this.state.can_scroll_forward?"":"invisible")},React.createElement("button",{type:"button",onClick:this.scrollForward},React.createElement(SvgIcon,{symbol:"chevron_right",label:"Scroll forward"}))),React.createElement("li",{className:"backward "+(this.state.can_scroll_backward?"":"invisible")},React.createElement("button",{type:"button",onClick:this.scrollBackward},React.createElement(SvgIcon,{symbol:"chevron_left",label:"Scroll backward"})))),React.createElement("div",{className:"view_context",ref:this.setScrollableRef},this.getViewsOrContext()),React.createElement("div",{className:"app_tools"},React.createElement("h2",null,"Options"),React.createElement("ul",null,React.createElement("li",null,React.createElement("a",{href:"#time-rate","aria-expanded":this.props.time_rate_panel_open?"true":"false",onClick:this.props.toggle_time_rate_panel,className:"date_time_container\n\t\t\t\t\t\t\t\t\t"+(this.props.time_rate_panel_active?"current":"")+"\n\t\t\t\t\t\t\t\t\t"+(this.props.time_rate_panel_open?"open":"")},this.getFormattedDate(),React.createElement(SvgIcon,{symbol:"satellite",label:"Satellite"}))),"Event"!=this.props.target?React.createElement("li",null,React.createElement("a",{href:"#light",className:"light "+(this.props.light_is_on?"current":""),onClick:this.props.change_light},React.createElement(SvgIcon,{symbol:"light",label:this.props.light_is_on?"Light is on":"Light is off"}))):"",screenfull.enabled?React.createElement("li",null,React.createElement(Fullscreen,{is_webgl_enabled:this.props.is_webgl_enabled,app_selector:"body"})):null)))}}),EwGrid=createReactClass({download_spinner_opts:{lines:9,length:6,width:4,radius:7,scale:1,corners:1,color:"#FFF",opacity:.2,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",left:"50%",shadow:!1,hwaccel:!1,position:"relative"},getInitialState:function(){var select_filter=this.props.default_select?this.props.default_select:"";return{link_filter:this.props.default_filter?this.props.default_filter:"",select_filter:select_filter}},componentDidMount:function(){$(document).on("set_grid",function(){})},componentWillUnmount:function(){$(document).off("set_grid")},getHumanReadableDate:function(datetime){var months=["January","February","March","April","May","June","July","August","September","October","November","December"],date=new Date(datetime);return months[date.getMonth()]+" "+date.getDate()+", "+date.getFullYear()},getGridGalleryHtml:function(){return"Missions"==this.props.title?this.getMissionsHtml():"Vital Signs"==this.props.title?this.getVitalSignsHtml():"Events"==this.props.title?this.getEventsHtml():void 0},changeFilter:function(e){e.preventDefault();var filter=e.currentTarget.dataset.filter;this.setState({link_filter:filter})},shouldShow:function(subcategories){var sub_cats=Array.isArray(subcategories)?subcategories:subcategories.split(","),has_link_filter=this.state.link_filter,has_select_filter=this.state.select_filter,in_link_filter=has_link_filter&&(sub_cats.indexOf(this.state.link_filter)>-1||"all"==this.state.link_filter),in_select_filter=has_select_filter&&(sub_cats.indexOf(this.state.select_filter)>-1||"all"==this.state.select_filter);return has_link_filter&&has_select_filter?in_select_filter&&in_link_filter:!has_select_filter&&has_link_filter?in_link_filter:!(has_select_filter&&!has_link_filter)||in_select_filter},getEventsHtml:function(){var that=this;return React.createElement("ul",{className:"item_list"},this.props.items.map(function(v){return React.createElement("li",{key:v.external_id,className:"event"},React.createElement("a",{href:"#event",className:"default_dataset","data-show":v.external_id,onClick:that.props.on_select},React.createElement("span",{className:"responsive_image","data-aspect-ratio":"1/1"},React.createElement("img",{src:v.list_image_src,alt:""})),React.createElement("h4",{className:"event_date"},React.createElement("time",{dateTime:v.date},that.getHumanReadableDate(v.date))),React.createElement("p",{className:"event_title"},v.title)))}))},getMissionsHtml:function(){var that=this;return React.createElement("ul",{className:"item_list"},this.props.items.map(function(v,i){if(!that.shouldShow(v.categories))return null;if(!v.dataset_groupings||0==v.dataset_groupings.length)return React.createElement("li",{key:i,className:"mission"},React.createElement("a",{href:"#",className:"default_dataset","data-show":v.external_id,onClick:that.props.on_select},React.createElement("span",{className:"responsive_image","data-aspect-ratio":"4/3"},React.createElement("img",{src:v.image_src,alt:""})),React.createElement("h4",{className:"link_indicator"},that.withDecorativeSymbol(v.title,"\u203a")),React.createElement("p",{className:"description"},v.time_in_orbit?"Time in orbit: "+v.time_in_orbit:"")));if(v.dataset_groupings&&v.dataset_groupings.length>0){var default_dataset=v.dataset_groupings[0];v.dataset_groupings.slice(1);return React.createElement("li",{key:i,className:"mission"},React.createElement("a",{href:"#mission",className:"default_dataset","data-show":v.external_id,"data-dataset-group":default_dataset.id,onClick:that.props.on_select},React.createElement("span",{className:"responsive_image","data-aspect-ratio":"4/3"},React.createElement("img",{src:v.image_src,alt:""})),React.createElement("h4",{className:"link_indicator"},that.withDecorativeSymbol(v.title,"\u203a")),React.createElement("p",{className:"description"},v.time_in_orbit?"Time in orbit: "+v.time_in_orbit:"")))}}))},withDecorativeSymbol:function(string,symbol){var string_without_last_word=string.split(" ").slice(0,-1).join(" "),string_last_word=string.split(" ").slice(-1);return React.createElement("span",null,string_without_last_word," ",React.createElement("span",{className:"avoid-break"},string_last_word,React.createElement("span",{role:"presentation"},"\xa0",symbol)))},getVitalSignsHtml:function(){var that=this;return React.createElement("ul",{className:"item_list"},this.props.items.map(function(v,i){var order=that.props.display_order[v.value];if(order&&0==order.length)return React.createElement("li",{key:i,className:"vital_sign"},React.createElement("a",{href:"#vital-sign",className:"default_dataset","data-show":v.value,onClick:that.props.on_select},React.createElement("span",{className:"responsive_image","data-aspect-ratio":"1/1"},React.createElement("img",{src:v.image_src,alt:""})),React.createElement("h4",{className:"title"},v.title),React.createElement("p",{className:"description"},v.description)));if(order&&order.length>0){var group=that.props.display_order[v.value],display_name=group[0][0],dataset_group_id=group[0][1],image_src=group[0][2],description=group[0][3]?group[0][3]:v.description,more_dataset_cats=order.slice(1);return React.createElement("li",{key:i,className:"vital_sign"},React.createElement("input",{type:"checkbox",id:"more_datasets_"+i}),React.createElement("label",{htmlFor:"more_datasets_"+i},"Show more datasets"),React.createElement("a",{href:"#vital-sign",className:"default_dataset","data-show":v.value,"data-dataset-group":dataset_group_id,onClick:that.props.on_select},React.createElement("span",{className:"responsive_image","data-aspect-ratio":"1/1"},React.createElement("img",{src:image_src,alt:""})),React.createElement("h4",{className:"title"},v.title),React.createElement("h5",{className:"link_indicator"},that.withDecorativeSymbol(display_name,"\u203a")),React.createElement("p",{className:"description"},description)),that.getMoreDatasetsHtml(v,more_dataset_cats))}return""}))},getMoreDatasetsHtml:function(parent,more){var _this=this;if(!(more.length>0))return"";var that,_ret=(that=_this,{v:React.createElement("section",{className:"section"},React.createElement("h6",{className:"more"},"MORE"),React.createElement("ul",null,more.map(function(v,i){var display_name=v[0],dataset_group_id=v[1];return React.createElement("li",{key:i},React.createElement("a",{href:"#more",className:"link_indicator","data-show":parent.value,"data-dataset-group":dataset_group_id,onClick:that.props.on_select},that.withDecorativeSymbol(display_name,"\u203a")))})))});return"object"==typeof _ret?_ret.v:void 0},onSelectFilter:function(e){var select_filter=this.state.select_filter=e.currentTarget.value;this.setState({select_filter:select_filter})},getSelectFilter:function(v,i){return"Missions"==this.props.title?null:React.createElement("li",{key:"select_"+i,className:"select_container"},React.createElement("select",{key:v.name,name:v.name,onChange:this.onSelectFilter,value:this.state.select_filter},v.value.map(function(v,i){return React.createElement("option",{key:"o"+i,value:v.value},v.name)})))},render:function(){var that=this;return React.createElement("div",{className:"overlay "+(this.props.grid_open?"open":"")},React.createElement("header",{className:"filter_bar"},React.createElement("h2",{className:"grid_title"},this.props.title),React.createElement("ul",{className:"categories desktop"},this.props.grid_filters.map(function(v,i){return Array.isArray(v.value)?that.getSelectFilter(v,i):React.createElement("li",{key:i},React.createElement("a",{href:"#filter",className:that.state.link_filter==v.value?"active":"","data-filter":v.value,onClick:that.changeFilter},v.name))})),React.createElement("button",{className:"close",type:"button",onClick:this.props.grid_close_fn},React.createElement(SvgIcon,{symbol:"close_light",label:"Close"}))),React.createElement("div",{className:"main_overlay_section grid_gallery"},this.getGridGalleryHtml()))}}),EwHeader=createReactClass({getInitialState:function(){$("#menu_button").is(":hidden");return{last_meganav_open:null}},closeModal:function(){this.setState({searching:!1},function(){this.props.mobile_nav_close()})},clickedSearchResult:function(model,id){this.setState({searching:!1},function(){this.props.clicked_search_result(model,id)})},getLightingHtml:function(){return"Event"!=this.props.target?React.createElement("li",{className:"nav_item"},React.createElement("a",{href:"#light",onClick:this.props.change_light},"Lighting"," ",React.createElement("span",{className:"light "+(this.props.light_is_on?"current":"")},React.createElement(SvgIcon,{symbol:"light"})," ",this.props.light_is_on?"On":"Off"))):null},getOnClick:function(nav_type){switch(nav_type){case"view":return this.props.on_view_select;case"mission":return this.props.on_mission_select;case"event":return this.props.on_event_select;case"menu":return this.props.grid_open_fn;default:return console.log("error: getSelectFn unexpected value",nav_type),function(){}}},openOrGo:function(e){if(this.state.is_desktop_nav&&null!=document.querySelector(".touchevents")){return this.state.last_meganav_open==e.currentTarget.id||(this.setState({last_meganav_open:e.currentTarget.id}),e.preventDefault(),e.stopPropagation(),!1)}return!0},getMeAnHref:function(e){var el;if($(e.target).attr("href"))el=$(e.target);else{var parental_a=$(e.target).parents("a");parental_a.length>0&&(el=parental_a.eq(0))}return el},openMegaNav:function(e){if($("#menu_button").is(":hidden")){var $thisItem=$(e.currentTarget);this.openMegaNavFor($thisItem)}},openMegaNavFor:function($thisItem){var $meganavContainer=$thisItem.find(".meganav_container");$meganavContainer.length>0&&($thisItem.addClass("expanded"),$meganavContainer.show(),$(".page_cover").show(),this.setArrowAndNavPosition($thisItem))},closeMegaNav:function(e){if($("#menu_button").is(":hidden")){var $thisItem=$(e.currentTarget),$meganavContainer=$thisItem.find(".meganav_container");$thisItem.removeClass("expanded"),$(".page_cover").hide(),$meganavContainer.hide(),this.setState({last_meganav_open:null})}},submitSearch:function(e){$(e.currentTarget).parent("form")[0].submit()},getDesktopNavHtml:function(){return this.props.desktop_open?React.createElement("div",{className:"desktop_nav_container desktop_overlay_nav open"},React.createElement("div",{className:"site_nav_spacer"}),React.createElement("nav",{className:"site_nav"},React.createElement("a",{href:"#",className:"modal_close",onClick:this.props.desktop_nav_close,id:"modal_close"},React.createElement(SvgIcon,{symbol:"close",label:"Close navigation"})),React.createElement("div",{className:"overlay_nav_container"},React.createElement("ul",{className:"nav earth_now_adds"},React.createElement("li",{className:"nav_item close_item"},React.createElement("a",{onClick:this.props.desktop_nav_close},"Back to Earth Now")),React.createElement("li",{className:"nav_item"},React.createElement("a",{href:"/",target:"_self"},"Global Climate Change Home"))),React.createElement(SiteNavOverlay,{nav_items:this.props.site_nav}),React.createElement("div",{className:"search_and_social_nav"},React.createElement("div",{className:"follow_nav"},React.createElement("div",{className:"nav_title"},"FOLLOW GLOBAL CLIMATE CHANGE"),React.createElement(FollowBar,{twitter:"//twitter.com/NASAClimate",facebook:"http://www.facebook.com/NASAClimateChange",instagram:"http://instagram.com/nasaclimatechange",
rss:"https://climate.nasa.gov/news/rss.xml"}))),React.createElement("form",{action:"/search.html",className:"overlay_search"},React.createElement("input",{className:"search_field search_open",name:"q",type:"text",placeholder:"search"}),React.createElement("div",{className:"search_submit",onClick:this.submitSearch},React.createElement(SvgIcon,{symbol:"magnifying_glass",label:"search"})))))):null},setArrowAndNavPosition:function($target){var offset=$target.offset().left+$target.outerWidth()/2-16,$meganav_container=$target.find(".meganav_container"),meganav_width=$meganav_container.width()/2,meganav_offset=offset-meganav_width;$target.find(".nav_item_indicator").show(),$meganav_container.css({left:meganav_offset+16});var ww=$(window).width(),mw=2*meganav_width,lt=parseInt($meganav_container.css("left")),rt=ww-(lt+mw);$(window).width();rt<10?($(".meganav_container").css({left:"auto",right:"10px"}),$(".nav_item_indicator").css({left:meganav_width-5-rt})):$(".nav_item_indicator").css({left:"calc(50% - 15px)"})},render:function(){var _this=this,that=this;return React.createElement("div",{className:"site_header_area "+(that.props.mobile_open?"nav_overlay_true":"")},React.createElement("header",{className:"site_header"},React.createElement("div",{className:"brand_area"},React.createElement("div",{className:"brand_1"},React.createElement("a",{className:"nasa_logo",href:"https://www.nasa.gov",target:"blank",title:"visit nasa.gov"},"NASA")),React.createElement("div",{className:"brand_2"},React.createElement("a",{href:"/",title:"Global Climate Change - Vital Signs of the Planet",className:"gcc_logo"},"Global Climate Change")),React.createElement("div",{className:"brand_3"},React.createElement("a",{href:"#home",title:"Home",onClick:function(){_this.props.mobile_nav_close(),_this.props.on_home()}},"Earth Now"))),React.createElement("div",{className:"nav_area"},React.createElement("div",{className:"views_search_container"},React.createElement("ul",{className:"view_selectors view_selectors--has-home-link"},React.createElement("li",{className:"home_icon nav_item","data-show":"home"},React.createElement("a",{href:"#home-items",className:"view_selector","data-show":"home",onClick:this.props.on_home},React.createElement(SvgIcon,{symbol:"earth",label:"Home"}),React.createElement("span",{className:"icon_text"},"HOME")),React.createElement("div",{className:"global_subnav_container"},React.createElement("div",{className:"meganav_container"},React.createElement("div",{className:"nav_item_indicator"}),React.createElement("div",{className:"meganav"},React.createElement("div",{className:"sections_container"},React.createElement("ul",null,React.createElement("li",null,React.createElement("a",{href:"#home","data-show":"visible_earth",onClick:this.props.on_home},"Visible Earth (Home)"))))))))),React.createElement("ul",{className:"view_selectors"},this.props.grid_nav_items.map(function(v,i){return React.createElement("li",{key:i,className:"nav_item "+v.value,"data-show":v.value,onMouseEnter:that.openMegaNav,onMouseLeave:that.closeMegaNav},React.createElement("a",{href:"#",className:"view_selector","data-show":v.value,onClick:that.props.toggle_sub_nav},v.name),v.subnav_items?React.createElement("div",{className:"global_subnav_container"},React.createElement("div",{className:"meganav_container"},React.createElement("div",{className:"nav_item_indicator"}),React.createElement("div",{className:"meganav"},React.createElement("div",{className:"sections_container"},v.description?React.createElement("div",{className:"section_description"},v.description):null,React.createElement("ul",{className:"meganav_subnav_items"},v.subnav_items.map(function(sub_item,j){var onclick=that.getOnClick(sub_item.nav_type);return React.createElement("li",{key:j},React.createElement("a",{href:"#","data-show":sub_item.value,"data-dataset-group":sub_item.dataset_group_id,onClick:onclick},sub_item.name))})),v.featured_item?React.createElement("div",{className:"detail_container"},React.createElement("div",{className:"feature_info"},React.createElement("div",{className:"single_layout"},React.createElement("a",{href:"#",className:"image_container","data-show":v.featured_item.value,"data-dataset-group":v.featured_item.dataset_group_id,onClick:that.getOnClick(v.featured_item.nav_type),style:{backgroundImage:"url("+v.featured_item.image+")"}},React.createElement("div",{className:"bottom_description"},React.createElement("div",{className:"category_title"},"Featured"),React.createElement("div",{className:"content_title"},v.featured_item.name),React.createElement("div",{className:"description"},v.featured_item.description)))))):null)))):null)}),React.createElement("li",{className:"nav_item","data-show":"more",onMouseEnter:this.openMegaNav,onMouseLeave:this.closeMegaNav},React.createElement("a",{href:"#more-items",className:"view_selector","data-show":"more",onClick:this.props.toggle_sub_nav},"More"),React.createElement("div",{className:"global_subnav_container",id:"more-items"},React.createElement("div",{className:"meganav_container"},React.createElement("div",{className:"nav_item_indicator"}),React.createElement("div",{className:"meganav"},React.createElement("div",{className:"sections_container"},React.createElement("ul",null,this.props.more_items.map(function(v,i){var item_url="modal_about"==v.value?that.props.about_modal_url:"#";return React.createElement("li",{key:i},React.createElement("a",{href:item_url,"data-value":v.value,onClick:that.props.on_more_click},v.name))}))))))))),React.createElement("div",{className:"nav_toggle",onClick:this.props.desktop_nav_open}),React.createElement("a",{href:"#",className:"menu_button",onClick:this.props.mobile_nav_open,id:"menu_button"},React.createElement(SvgIcon,{symbol:"hamburger",label:"Open navigation"})))),this.getDesktopNavHtml(),React.createElement("div",{className:"mobile_nav_container "+(that.props.mobile_open?"open":"")},React.createElement("a",{href:"#",className:"modal_close",onClick:this.props.mobile_nav_close,id:"modal_close"},React.createElement(SvgIcon,{symbol:"close",label:"Close navigation"})),React.createElement("nav",{className:"site_nav"},React.createElement("ul",{className:"nav"},this.props.grid_nav_items.map(function(v,i){return"events"===v.value?null:React.createElement("li",{key:i,className:"nav_item"},React.createElement("a",{href:"#",className:"view_selector","data-show":v.value,onClick:that.props.grid_open_fn},v.name),React.createElement("div",{className:"nav_item_indicator"}))}),React.createElement("li",{className:"nav_item"},this.props.more_items.map(function(v,i){return React.createElement("a",{key:i,href:"#",className:"view_selector",onClick:that.props.on_more_click,"data-value":v.value},v.name)})),this.getLightingHtml(),React.createElement("li",{className:"go_home"},React.createElement("a",{href:"/",target:"_self"},"Global Climate Change Home"))))))}}),EwInfo=createReactClass({getDatasetDescription:function(){return this.props.dataset?React.createElement("div",null,React.createElement("h3",null,"About this Dataset"),React.createElement("div",{className:"body",dangerouslySetInnerHTML:{__html:this.props.dataset.long_description}})):null},getMobileEarthHeading:function(){return this.props.dataset?React.createElement("div",{className:"mobile_options"},React.createElement("div",{className:"dataset_title"},this.props.dataset_title),React.createElement("div",{className:"dataset_date"},this.props.dataset.range)):null},getInfo:function(){if("Event"==this.props.target){var date=new Date(this.props.view.date),date_str=date.getMonth()+1+"/"+date.getDate()+"/"+date.getFullYear();return React.createElement("div",{className:"full_info"},React.createElement("h2",{className:"date"},date_str),React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.view.description}}),this.getExploreHtml())}if("Earth"==this.props.target)return React.createElement("div",{className:"full_info"},React.createElement("h2",null,this.getMobileEarthHeading),React.createElement("h3",null,"About ",this.props.view.title),React.createElement("div",{className:"body",dangerouslySetInnerHTML:{__html:this.props.view.description}}),this.getDatasetDescription());if("Mission"==this.props.target){var launch_vehicle=this.props.view.launch_vehicle?React.createElement("div",{className:"launch_vehicle"},React.createElement("h3",null,"Launch vehicle"),React.createElement("p",null,this.props.view.launch_vehicle)):null,launch_location=this.props.view.launch_location?React.createElement("div",{className:"launch_location"},React.createElement("h3",null,"Launch location"),React.createElement("p",null,this.props.view.launch_location)):null;return React.createElement("div",{className:"full_info"},React.createElement("h2",{className:"time_in_orbit"},"Time in orbit: ",this.props.view.time_in_orbit),launch_vehicle,launch_location,React.createElement("h3",null,"About ",this.props.view.title),React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.view.long_description}}),this.getExploreHtml())}return this.props.view&&this.props.view.category&&this.props.view.name?React.createElement("div",{className:"left_section"},React.createElement("div",{className:"category_title"},this.props.view.category),React.createElement("div",{className:"title_container"},React.createElement("h1",{className:"image_title"},this.props.view.name))):null},onExploreClick:function(){var that=this;explore_overlay.init(this.props.explore_link,null,null,function(){that.props.overlay_callback&&that.props.overlay_callback.call()})},getExploreHtml:function(){return this.props.explore_link?React.createElement("a",{className:"explore",onClick:this.onExploreClick}):""},render:function(){return this.getInfo()}}),EwOptionsMenu=createReactClass({onOptionsClick:function(e){e&&e.preventDefault(),this.props.deselect_info_tab()},onInfoClick:function(e){e&&e.preventDefault(),this.props.select_info_tab()},getSatelliteTimeRateOptions:function(){return React.createElement("ul",{className:"menu_options"},React.createElement("li",null,React.createElement("p",null,"Satellite Time Rate"),React.createElement("button",{type:"button",className:1==this.props.timerate?"current":"null",onClick:this.props.change_rate,"data-value":"real"},"Real time"),"\xa0",React.createElement("button",{type:"button",className:1!=this.props.timerate?"current":"null",onClick:this.props.change_rate,"data-value":"two"},"2 ",React.createElement("abbr",{title:"minutes per second"},"min/sec"))))},getDatasetOptions:function(){return React.createElement("div",null,React.createElement("div",{className:"full_info"},React.createElement("h2",null,this.props.dataset_title)),React.createElement("ul",{className:"menu_options"},React.createElement("li",{className:this.props.loaded_latest?"current":""},React.createElement("a",{href:"#",onClick:this.props.load_latest},"Latest Dataset")),React.createElement("li",{className:this.props.latest_seven?"current":""},React.createElement("a",{href:"#",onClick:this.props.on_load_latest_7},"Latest 7 Datasets")),React.createElement("li",{className:"mobile_datepicker "+(this.props.datepicker_open?"open":"")},React.createElement("a",{className:"expandable_nav_item",onClick:this.props.toggle_date_picker},React.createElement("span",{className:"calendar_icon"},React.createElement(SvgIcon,{symbol:"calendar",label:"calendar"})),React.createElement("span",{className:"arrow_box"},React.createElement("span",{className:"arrow_down"})),"Choose Dates"),this.getDatePickers())))},getDatePickers:function(){return this.props.datepicker_open?React.createElement("div",{className:"datepickers"},React.createElement("header",{className:"datepickers_header"},React.createElement("button",{className:(this.props.loaded_latest?"current":"")+" toggler",onClick:this.props.load_latest},"LATEST",React.createElement("br",null),"DATASET"),React.createElement("button",{className:(this.props.latest_seven?"current":"")+" toggler",onClick:this.props.on_load_latest_7},"LATEST 7",React.createElement("br",null),"DATASETS")),React.createElement(BeginEndDateFilters,{clear_begin_date:this.props.clear_begin_date,begin_min_date:this.props.begin_min_date,begin_max_date:this.props.begin_max_date,begin_date_picker_close:this.props.begin_date_picker_close,begin_date_input:this.props.begin_date_input,change_begin_date_value:this.props.change_begin_date_value,clear_end_date:this.props.clear_end_date,end_min_date:this.props.end_min_date,end_max_date:this.props.end_max_date,end_date_picker_close:this.props.end_date_picker_close,end_date_input:this.props.end_date_input,change_end_date_value:this.props.change_end_date_value,month_year:"month"==this.props.dataset.average,dataset_items:this.props.dataset_items}),React.createElement("button",{className:"submit",onClick:this.props.apply_dates},"APPLY")):null},getCompareOptions:function(){return"Mission"==this.props.target?React.createElement("ul",{className:"menu_options"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.__temporary__onClick},"Compare",React.createElement(SvgIcon,{symbol:"caret_right"}))),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.__temporary__onClick}," Datamaps",React.createElement(SvgIcon,{symbol:"caret_right"})))):null},changeRate:function(){console.log("change rate!")},getEarthOptions:function(){return this.props.info_tab_selected?React.createElement("div",{className:"mobile_options_info"},React.createElement(EwInfo,{dataset_title:this.props.dataset_title,view:this.props.view,target:this.props.target,dataset:this.props.dataset})):React.createElement("div",null,this.getDatasetOptions(),this.getViewButton(),this.getDatamaps())},getDatasetDescription:function(){return this.props.dataset?React.createElement("div",null,React.createElement("h3",null,"About this Dataset"),React.createElement("div",{className:"body",dangerouslySetInnerHTML:{__html:this.props.dataset.long_description}})):null},getDatamaps:function(){var that=this;return this.props.dataset_group&&this.props.dataset_group.datasets_sorted&&this.props.dataset_group.datasets_sorted.length>1?React.createElement("ul",{className:"menu_options more_datasets"},React.createElement("li",{className:"title"},React.createElement("details",null,React.createElement("summary",null,"More Datasets"),React.createElement("ul",null,this.props.dataset_group.datasets_sorted.map(function(v,i){return React.createElement("li",{key:"dg"+i},that.linkDatasetsOrNot(v))}))))):null},getViewButton:function(){return"Earth"==this.props.target&&"satellites"==this.props.view.value?React.createElement("ul",{className:"menu_options"},React.createElement("li",null,React.createElement("button",{type:"button","data-show":"visible_earth",onClick:this.props.on_view_select},"Visible Earth"))):"Earth"==this.props.target&&"visible_earth"==this.props.view.value?React.createElement("ul",{className:"menu_options"},React.createElement("li",null,React.createElement("button",{type:"button","data-show":"satellites",onClick:this.props.on_view_select},"Satellites Now"))):null},toLinkOrNotToLink:function(v){return this.props.module?React.createElement("div",null,React.createElement("span",{className:"responsive_image","data-aspect-ratio":"2/1"},React.createElement("img",{src:v.map_image_src,alt:""})),React.createElement("span",{className:"m_text"},v.title)):React.createElement("a",{href:"#","data-vs-id":v.earth_now_vital_sign_id,"data-dataset-group":v.id,onClick:this.props.on_mission_dataset_group},React.createElement("span",{className:"responsive_image","data-aspect-ratio":"2/1"},React.createElement("img",{src:v.map_image_src,alt:""})),React.createElement("span",{className:"text"},v.title))},linkDatasetsOrNot:function(v){return this.props.module?React.createElement("span",{className:"m_text"},v.menu_title):React.createElement("a",{href:"#",className:v.title===this.props.dataset_title?"current":"","data-show":this.props.view.value,"data-dataset-group":this.props.dataset_group.id,"data-dataset":v.id,onClick:this.props.on_view_select},React.createElement("span",{className:"text"},v.menu_title))},getDatagroups:function(){var _this=this;if(!(this.props.view.dataset_groupings&&this.props.view.dataset_groupings.length>0))return null;var that,_ret=(that=_this,{v:React.createElement("ul",{className:"menu_options"},React.createElement("li",{className:"title"},_this.props.view.title," Datamaps",React.createElement("ul",null,_this.props.view.dataset_groupings.map(function(v,i){return React.createElement("li",{key:"dg"+i},that.toLinkOrNotToLink(v))}))))});return"object"==typeof _ret?_ret.v:void 0},getMissionOptions:function(){return this.props.info_tab_selected?React.createElement("div",{className:"mobile_options_info"},React.createElement(EwInfo,{view:this.props.view,target:this.props.target,dataset_title:this.props.dataset_title})):React.createElement("div",null,this.getSatelliteTimeRateOptions(),"Mission"==this.props.target?React.createElement("ul",{className:"menu_options"},React.createElement("li",null,React.createElement("label",null,React.createElement("span",null,"Satellite Zoom"),React.createElement("input",{type:"checkbox",checked:this.props.in_situ,onChange:this.props.on_zoom}),React.createElement("span",{className:"pseudo_checkbox"})))):null,this.getViewButton(),this.getDatagroups())},getEventOptions:function(){return React.createElement("div",{className:"mobile_options_info"},React.createElement(EwInfo,{view:this.props.view,target:this.props.target,dataset_title:this.props.dataset_title}))},getTabs:function(){return"Event"==this.props.target?React.createElement("ul",{className:"menu_tabs"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.onInfoClick,className:"current"},"Info"))):React.createElement("ul",{className:"menu_tabs"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.onOptionsClick,className:this.props.info_tab_selected?"":"current"},"Options")),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.onInfoClick,className:this.props.info_tab_selected?"current":""},"Info")))},getMenuOptions:function(){return"Mission"==this.props.target||"Earth"==this.props.target&&"satellites"==this.props.view.value?this.getMissionOptions():"Earth"==this.props.target?this.getEarthOptions():this.getEventOptions()},getOptions:function(){return this.props.open?React.createElement("div",{className:"eox_quick_menu mobile"},React.createElement("div",{className:"filter_panel open full_width"},React.createElement("div",{className:"modal_background",onClick:this.props.on_close}),React.createElement("div",{className:"menu"},React.createElement("header",null,React.createElement("span",null,this.props.view.title),React.createElement("button",{type:"button",className:"close_btn simple_button",onClick:this.props.on_close},React.createElement(SvgIcon,{symbol:"close",label:"Close"}))),this.getTabs(),this.getMenuOptions()))):null},render:function(){return React.createElement("div",{className:"quick_menus"},React.createElement("div",{className:"eox_quick_menu mobile"},this.getOptions()))}}),EwQuickMenu=createReactClass({getInitialState:function(){return{mobile_open:!1,nav_level:0}},onMissionSelect:function(e){var _this=this;e&&e.preventDefault();var view_name=$(e.currentTarget).data("show");this.setState({mobile_open:!1},function(){_this.props.on_mission_select(view_name)})},onEventSelect:function(e){var _this2=this;e&&e.preventDefault();$(e.currentTarget).data("show");this.setState({mobile_open:!1},function(){_this2.props.on_event_select(e)})},onEarthSelect:function(e){var _this3=this;e&&e.preventDefault();var view_name=$(e.currentTarget).data("show");this.setState({mobile_open:!1},function(){_this3.props.on_earth_select(view_name)})},onGridOpen:function(e){this.props.grid_open_fn(e),this.setState({mobile_open:!1})},getMobileMenu:function(){var that=this;return"Mission"==this.props.target?(console.log("getViewsOrContext :: missions"),React.createElement("ul",{className:"menu_options"},this.props.all_missions.map(function(v,i){var current=v==that.props.view.external_id;return React.createElement("li",{key:"m"+i,className:"nav_item "+(current?"current":"")},React.createElement("a",{href:"#",className:"view_selector","data-show":v,onClick:that.onMissionSelect},v))}),React.createElement("li",{key:"m_full_menu",className:"full_menu"},React.createElement("a",{href:"#missions","data-show":"missions",onClick:that.onGridOpen},"Full menu")))):"Event"==this.props.target?React.createElement("ul",{className:"menu_options"},this.props.events.map(function(v,i){var current=v.value==that.props.view.value;return React.createElement("li",{key:"e"+i,className:"nav_item "+(current?"current":"")},React.createElement("a",{href:"#",className:"view_selector","data-show":v.external_id,onClick:that.onEventSelect},v.title))}),React.createElement("li",{key:"e_full_menu",className:"full_menu"},React.createElement("a",{href:"#events","data-show":"events",onClick:that.onGridOpen},"Full menu"))):"Earth"==this.props.target&&"satellites"==this.props.view.value?React.createElement("ul",{className:"menu_options"},this.props.all_missions.map(function(v,i){return React.createElement("li",{key:"mi"+i,className:"nav_item"},React.createElement("a",{href:"#",className:"view_selector","data-show":v,onClick:that.onMissionSelect},v))}),React.createElement("li",{key:"mi_full_menu",className:"full_menu"},React.createElement("a",{href:"#missions","data-show":"missions",onClick:that.onGridOpen},"Full menu"))):"Earth"==this.props.target?React.createElement("ul",{className:"menu_options"},this.props.view_items.map(function(v,i){var current=v.value==that.props.view.value;return React.createElement("li",{key:"v"+i,className:"nav_item "+(current?"current":"")},React.createElement("a",{href:"#",className:"view_selector","data-show":v.value,onClick:that.onEarthSelect},v.title))}),React.createElement("li",{key:"v_full_menu",className:"full_menu"},React.createElement("a",{href:"#vital-signs","data-show":"vital_signs",onClick:that.onGridOpen},"Full menu"))):void 0},openMobileFilter:function(){console.log("openMobileFilter"),this.setState({mobile_open:!0})},closeMobileFilter:function(){console.log("closeMobileFilter"),this.setState({mobile_open:!1})},goBack:function(){console.log("goBack"),this.setState({menu_options:this.props.views,nav_level:0})},getFilterTitle:function(){return"Mission"==this.props.target||"Earth"==this.props.target&&"satellites"==this.props.view.value?"MISSIONS":"Earth"==this.props.target?"VITAL SIGNS":this.props.target.toUpperCase()},getFilterSvg:function(){return"Mission"==this.props.target||"Earth"==this.props.target&&"satellites"==this.props.view.value?React.createElement(SvgIcon,{symbol:"satellite",label:"Satellites"}):React.createElement(SvgIcon,{symbol:"stack",label:"View"})},getMobileHeader:function(){return 0==this.state.nav_level?React.createElement("span",null,this.getFilterSvg(),React.createElement("span",{className:"filter_title"},this.getFilterTitle())):React.createElement("span",{className:"filter_title back",onClick:this.goBack})},getExpander:function(){return"Event"==this.props.target?null:"Mission"==this.props.target||"Earth"==this.props.target&&"satellites"==this.props.view.value?React.createElement("button",{type:"button",className:"expander "+this.props.expander_position,onClick:this.openMobileFilter},React.createElement(SvgIcon,{symbol:"satellite",label:"Satellites"})):React.createElement("button",{type:"button",className:"expander "+this.props.expander_position,onClick:this.openMobileFilter},React.createElement(SvgIcon,{symbol:this.props.expander_icon,label:this.props.expander_label}))},render:function(){return React.createElement("div",{className:"quick_menus"},React.createElement("div",{className:"eox_quick_menu mobile"},this.getExpander(),React.createElement("div",{className:"filter_panel "+(this.state.mobile_open?"open":"")},React.createElement("div",{className:"modal_background",onClick:this.closeMobileFilter}),React.createElement("div",{className:"menu"},React.createElement("header",null,this.getMobileHeader(),React.createElement("button",{type:"button",className:"close_btn simple_button",onClick:this.closeMobileFilter},React.createElement(SvgIcon,{symbol:"close",label:"Close"}))),this.getMobileMenu()))))}}),EwTimeRatePanel=createReactClass({getFrequencyForDisplay:function(rate){var rate_display=undefined,rate_display_text=undefined,rate_display_text_abbreviated=undefined;return rate>86400||rate<-86400?(rate_display=rate/86400,rate_display_text="days per second",rate_display_text_abbreviated="days/sec"):rate>=3600||rate<=-3600?(rate_display=rate/3600,rate_display_text="hours per second",rate_display_text_abbreviated="hr/sec"):rate>=60||rate<=-60?(rate_display=rate/60,rate_display_text="minutes per second",rate_display_text_abbreviated="min/sec"):1==rate?(rate_display=1,rate_display_text="seconds per second",rate_display_text_abbreviated="sec/sec"):(rate_display=rate,rate_display_text="seconds per second",rate_display_text_abbreviated="sec/sec"),React.createElement("p",{className:"current",role:"status","aria-live":"polite"},React.createElement("span",{className:"number"},rate_display)," ",React.createElement("abbr",{title:rate_display_text},rate_display_text_abbreviated))},render:function(){return React.createElement("section",{className:"satellite_time_rate "+(this.props.open?"":"satellite_time_rate_hidden"),id:"time-rate"},React.createElement("h2",null,"Satellite Time Rate"),React.createElement("div",{className:"options"},this.getFrequencyForDisplay(this.props.timerate),React.createElement("a",{href:"#rate-increase",className:"minus button",onClick:this.props.change_rate,"data-value":"minus"},React.createElement(SvgIcon,{symbol:"minus",label:"Decrease rate"})),React.createElement("a",{href:"#rate-decrease",className:"plus button",onClick:this.props.change_rate,"data-value":"plus"},React.createElement(SvgIcon,{symbol:"plus",label:"Increase rate"})),React.createElement("a",{href:"#real-time",className:"real button",onClick:this.props.change_rate,"data-value":"real"},"Real time")),React.createElement("button",{type:"button",className:"close",onClick:this.props.toggle},React.createElement(SvgIcon,{symbol:"close",label:"Close"})))}}),FollowBar=createReactClass({render:function(){return React.createElement("div",{className:"follow_bar"},React.createElement("a",{className:"button_twitter_follow icon",href:this.props.twitter,target:"_blank",title:"Follow on Twitter"},React.createElement("img",{alt:"twitter",src:"/assets/twitter_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"Twitter")),React.createElement("a",{className:"button_facebook_follow icon",href:this.props.facebook,target:"_blank",title:"Follow on Facebook"},React.createElement("img",{alt:"facebook",src:"/assets/facebook_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"Facebook")),React.createElement("a",{className:"button_instagram_follow icon",href:this.props.instagram,target:"_blank",title:"Follow on Instagram"},React.createElement("img",{alt:"instagram",src:"/assets/instagram_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"Instagram")),React.createElement("a",{className:"button_rss_follow icon",href:this.props.rss,target:"_blank",title:"Follow on RSS"},React.createElement("img",{alt:"rss",src:"/assets/rss_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"RSS")))}}),Fullscreen=createReactClass({getInitialState:function(){return{fullscreen:!1}},componentDidMount:function(){var that=this;document.addEventListener("keydown",function(e){27==e.keyCode&&that.setState({fullscreen:!1})},!1),document.addEventListener("fullscreenchange",function(){setTimeout(function(){that.state.fullscreen&&!$("body").hasClass("fullscreen_element")&&that.setState({fullscreen:!1})},50)},!1),screenfull&&screenfull.enabled?document.addEventListener(screenfull.raw.fullscreenchange,function(){!screenfull.isFullscreen&&$("body").hasClass("fullscreen_element")&&($("#fullscreen").removeClass("active"),$("body").removeClass("fullscreen_element"))}):mb_utils.mobileAndTabletCheck()?$("body").addClass("motanf"):this.props.always_show?(console.log("show fullscreen even though not fs"),$("body").addClass("not_fsable")):$("#fullscreen").hide()},toggleFullscreen:function(e){e&&e.preventDefault();var $btn=$(e.currentTarget),$app=$(this.props.app_selector);screenfull.enabled&&!$btn.hasClass("active")?(screenfull.request($app[0]),$app.css({height:"100vh",width:"100vw"}),$btn.addClass("active"),$("body").addClass("fullscreen_element"),this.setState({fullscreen:!0})):!$("body").hasClass("motanf")&&!$("body").hasClass("not_fsable")||$btn.hasClass("active")?screenfull.enabled&&$btn.hasClass("active")?(screenfull.exit(),$app.css({height:"",width:""}),$btn.removeClass("active"),$("body").removeClass("fullscreen_element"),this.setState({fullscreen:!1})):(this.contractForNonFullscreenable($btn),this.setState({fullscreen:!1})):(this.expandForNonFullscreenable($btn),this.setState({fullscreen:!0}))},contractForNonFullscreenable:function($btn){$btn.removeClass("active"),$("body").removeClass("fullscreen_element"),this.props.post_message&&(console.log("disable fullscreen"),window.parent&&window.parent.postMessage("toggle_fullscreen","*")),this.setState({fullscreen:!1})},expandForNonFullscreenable:function($btn){$btn.addClass("active"),$("body").addClass("fullscreen_element"),this.props.post_message&&(console.log("enable fullscreen!"),window.parent&&window.parent.postMessage("toggle_fullscreen","*")),this.setState({fullscreen:!1})},getCorrectButton:function(){return this.state.fullscreen?React.createElement(SvgIcon,{symbol:"fullscreen_in",label:"Exit Fullscreen"}):React.createElement(SvgIcon,{symbol:"fullscreen",label:"Fullscreen"})},render:function(){return React.createElement("a",{href:"#fullscreen",id:"fullscreen",className:"fullscreen "+(this.props.is_webgl_enabled?"":"hidden"),onClick:this.toggleFullscreen},this.getCorrectButton())}}),InfoPanel=createReactClass({monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],getInitialState:function(){return{date:new Date}},componentDidMount:function(){var that=this;$("body").on("earth_now_date",function(e,date){that.setState({date:date})})},getIcon:function(){return this.props.panel_open?React.createElement(SvgIcon,{symbol:"chevron_down",label:"Hide details"}):React.createElement(SvgIcon,{symbol:"chevron_up",label:"Show details"})},getInfoToggleOrOptions:function(){return"Earth"==this.props.target&&"satellites"==this.props.view.value?React.createElement("div",null,this.getInfoToggleAndOptions(null,this.props.view.title),React.createElement("div",{className:"current_date"},this.getFormattedDate())):React.createElement("div",null,this.getInfoToggleAndOptions("Vital Signs",this.props.view.title),this.props.dataset?React.createElement("div",{className:"dataset_title"},this.props.dataset_title):"",React.createElement("div",{className:"current_date"},this.props.dataset_date))},getFormattedDate:function(){var date=this.state.date,hour=date.getHours(),meridiem=hour>=12?"PM":"AM",datetimeAttribute=date.toISOString();return React.createElement("time",{dateTime:datetimeAttribute},React.createElement("span",null,React.createElement("abbr",{title:this.monthNames[date.getMonth()]},this.monthAbbr[date.getMonth()])," ",date.getDate(),", ",date.getFullYear())," ",React.createElement("span",null,this.padZero((hour+11)%12+1),":",this.padZero(date.getMinutes()),":",this.padZero(date.getSeconds())," ",meridiem))},padZero:function(num){return num<10?"0"+num:num},getLeftSectionForEvent:function(){return React.createElement("div",{className:"left_section"},this.getInfoToggleAndOptions("Events",this.props.view.title),React.createElement("div",{className:"date"},this.props.view.formatted_date),React.createElement("div",{className:"mobile_options"},this.props.children),React.createElement(EwInfo,{target:this.props.target,view:this.props.view,dataset_title:this.props.dataset_title}))},getInfoToggleAndOptions:function(category,title){var category_html=undefined;return category&&(category_html=React.createElement("div",{className:"category_title"},category)),React.createElement("div",{className:"toggle_options_container"},React.createElement("a",{href:"#toggle-info",className:"info_toggle",onClick:this.props.toggle_panel},category_html,React.createElement("div",{className:"title_container"},React.createElement("h1",{className:"image_title"},title),React.createElement("span",{className:"toggle"},this.getIcon()))),React.createElement("a",{className:"mobile_options",
onClick:this.props.open_mobile_options},React.createElement("div",{className:"title_container"},React.createElement("h1",{className:"image_title"},title),React.createElement("span",{className:"open_options"},React.createElement(SvgIcon,{symbol:"plus",label:"Show options"})))))},getLeftSectionForEarth:function(){return React.createElement("div",{className:"left_section"},this.getInfoToggleOrOptions(),this.props.children,React.createElement(EwInfo,{view:this.props.view,dataset:this.props.dataset,target:this.props.target,dataset_title:this.props.dataset_title}))},getLeftSectionForMission:function(){return React.createElement("div",{className:"left_section"},this.getInfoToggleAndOptions("Missions",this.props.view.title),React.createElement("div",{className:"time_in_orbit desktop"},"Time in orbit: ",this.props.view.time_in_orbit),React.createElement("div",{className:"mobile_options"},React.createElement("div",{className:"current_date"},this.getFormattedDate())),React.createElement(EwInfo,{view:this.props.view,target:this.props.target,dataset_title:this.props.dataset_title}))},getLeftSection:function(){return"Event"==this.props.target?this.getLeftSectionForEvent():"Earth"==this.props.target?this.getLeftSectionForEarth():"Mission"==this.props.target?this.getLeftSectionForMission():this.props.view&&this.props.view.category&&this.props.view.name?React.createElement("div",{className:"left_section"},React.createElement("div",{className:"category_title"},this.props.view.category),React.createElement("div",{className:"title_container"},React.createElement("h1",{className:"image_title"},this.props.view.name))):void 0},getRightSection:function(){var _this=this;if(this.props.dataset&&"Earth"==this.props.target)return React.createElement("div",{className:"right_section"},React.createElement("div",{className:"minimap_container"},React.createElement("img",{src:this.props.dataset.latest_dataset_items[this.props.dataset.latest_dataset_items.length-1].thumb_src}),this.props.colorbar));if(!("Mission"==this.props.target&&this.props.view.dataset_groupings&&this.props.view.dataset_groupings.length>0))return null;var that,_ret=(that=_this,{v:React.createElement("div",{className:"right_section"},React.createElement("div",{className:"minimap_container"},React.createElement("h3",null,"Datasets"),React.createElement("ul",{className:"dataset_grid"},_this.props.view.dataset_groupings.map(function(v,i){return React.createElement("li",{className:"grid_item",key:"dg"+i},that.linkMission(v))}))))});return"object"==typeof _ret?_ret.v:void 0},linkMission:function(v){return this.props.module?React.createElement("span",null,React.createElement("span",{className:"responsive_image","data-aspect-ratio":"2/1"},React.createElement("img",{src:v.map_image_src,alt:""})),React.createElement("span",{className:"m_title"},v.title)):React.createElement("a",{href:"#","data-vs-id":v.earth_now_vital_sign_id,"data-dataset-group":v.id,onClick:this.props.on_mission_dataset_group},React.createElement("span",{className:"responsive_image","data-aspect-ratio":"2/1"},React.createElement("img",{src:v.map_image_src,alt:""})),React.createElement("span",{className:"title"},v.title))},render:function(){return React.createElement("div",{id:"info_panel",className:this.props.panel_open?"open":""},React.createElement("div",{className:"grid_layout"},this.getLeftSection(),this.getRightSection()))}}),InfoPanelAside=createReactClass({render:function(){return React.createElement("div",{className:"panel_close_container light"},React.createElement("button",{type:"button",className:"close_btn"},React.createElement(SvgIcon,{symbol:"arrow_right",label:"Close"})),React.createElement("div",{className:"info_panel open"},React.createElement("div",{className:"content"},React.createElement("figure",null,React.createElement("img",{src:"https://solarsystem.nasa.gov/system/internal_resources/details/original/310_MarsMantle640.jpg"}),React.createElement("figcaption",{className:"image_caption"},React.createElement("p",null,"This artist's concept depicts the stationary NASA Mars lander known by the acronym InSight at work studying the interior of Mars"))),React.createElement("div",{className:"body"},React.createElement("h1",{className:"locations_title"},"Mantle"),React.createElement("a",{className:"info_close"},React.createElement("div",{className:"icon"})),React.createElement("p",{className:"description"},"Some of Mars' best kept secrets, long buried beneath the surface of the red planet, have been revealed by instruments on NASA's Mars Global Surveyor spacecraft. NASA's InSight mission will deploy two instruments to the ground using a robotic arm: a seismometer (contributed by the French space agency Centre National d'Etudes Spatiales, or CNES) to measure the microscopic ground motions from distant marsquakes, providing detailed information about the interior structure of Mars. The mission will also track the lander's radio to measure wobbles in the planet's rotation that relate to the size of its core and will include a camera and a suite of environmental sensors to monitor the weather and variations in the magnetic field.")),React.createElement("div",{className:"info_panel_sources"},React.createElement("h3",null,"Sources:"),React.createElement("a",{className:"info_panel_link",href:"https://svs.gsfc.nasa.gov/stories/MOLA/index.html",target:"_blank"},"Rapid Cooling and Buried Channels")))))}}),LoadingMessages=createReactClass({getInitialState:function(){return{idx:0}},componentDidMount:function(){this.getFaded()},getFaded:function(){var that=this;$("#loading_messages").animate({opacity:0},that.props.interval,function(){var $this=$(this),idx=that.state.idx+1>that.props.messages.length-1?0:that.state.idx+1;(idx>0||this.props.loop)&&that.setState({idx:idx},function(){$this.css("opacity",1),that.getFaded()})})},render:function(){return React.createElement("div",{id:"loading_messages"},React.createElement("span",{className:"fadeout"},this.props.messages[this.state.idx]))}}),LocationInfo=createReactClass({onClick:function(e){e&&e.preventDefault(),console.log("clicked a location info window")},render:function(){return React.createElement("section",{className:"location_info",style:{top:this.props.x+"px",left:this.props.y+"px"}},React.createElement("a",{href:"#",onClick:this.onClick},React.createElement("div",null,React.createElement("img",{width:"100",height:"75",alt:"",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEsBAMAAAAfmfjxAAAAG1BMVEXMzMy+vr6qqqqcnJyWlpbFxcWxsbGjo6O3t7f6Rey5AAAC/ElEQVR4AezBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBmzJjHaSCIwk4SB5cWRCdKnwh9hIygjO1n+8oVFwGlCwvaFJZoU+SHo9nxWi+6bL37FeYriDTv1jPe3QCsPjXPZD7Sv+W3q+r78kvOFpp3SIQRwEDm4QOA3ojtAHQJW2BucMWgY3vICsJXlxcDW1hS2CB7CDnbIzYQ6iVSxRaWtQYp8Tk94EjmWb7v5gkwEqk2P9AkbEHZ2yArdPJSVWQPmRojPxnmx4icLSglYNflImXWZA9B5/7zobeDomALyQ6jBNlqezRsD3u9lae8eKjeWkjOzRZL4VsYsgdkttwUJ1c4WrKgTJUNcqv1k3IlE1LYRGXj1q+Yg2TWkumFLCBShQ1y6LTOgcwyimSYq8z+XefXaD1/QjqykLzCbKF/T41FZtmglQc1gK7LvGS3miwkh5fEBikr7eULmSVD/Wa27nFNNsit9mQBWeF4H+RIpkwwKe6KfEKTLOU3ZMHQcjRIq619JFP2KHY8kTLda21gdOiRBWSsEw2CufwTmbJGdUZxH+S6zOczyMKRonVBtG6cyJQU/QHmPkg3/0r+IQuGDhz/iiijFH4fBENcK6KTxt8jygbixO8JbVw9ohPKP7WUzPYEs0MX2dTCTO8Lokotokx9tEHc9/xCtjQSioTQot33vCeLIYjbYRVkMzc6xv78o1tmLDusmiyGIJ7dr1D26J2fkeuojWv3q/B5BDmZskM1Lqm2avvGNREqstBB6IQINuUVlzOOS78M2g/LufBEFkMQ/5l9RC7jVtFdV1p28Z3ZNYj/FsXufEsYN4ol4C+08d2iaBD/vdZair5hcJ2PZ/OxxCW+ey0N4r9p3KPQY6Jyg8VEdtNIQdYA0LEpkxZdL90uvIgexAa28EH8t/GZRpjmFdKimzzK2/j/InZ+BCbpQtr8yCgAtAcHAgAAAABA/q+NoKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqoA9vz13VWB0dsAAAAASUVORK5CYII="})),React.createElement("div",null,React.createElement("h6",null,this.props.title),React.createElement("time",{dateTime:""},"July 7, 2017"))),React.createElement("button",{type:"button","class":"simple_button"},React.createElement(SvgIcon,{symbol:"close",label:"Close"})))}}),PleaseRotate=createReactClass({render:function(){return React.createElement("div",{id:"rotate_warning"},React.createElement("div",{className:"rotate_message"},React.createElement("div",{className:"rotate_icon"}),React.createElement("span",null)))}}),SiteNavOverlay=createReactClass({onClickArrow:function(e){$(e.currentTarget).toggleClass("reverse").parent().find(".subnav").toggle()},getSubnavItem:function(item){return React.createElement("li",{key:item.id},React.createElement("a",{href:item.link,target:item.target},item.name," ",React.createElement("span",null,"\xa0")," ",this.getExternalLinkIcon(item.link)))},getSubnav:function(item){var that=this;return item.sections?React.createElement("ul",{className:"subnav"},item.sections.map(function(v,i){return React.createElement("ul",{className:"section",key:"section_"+item.id+"_"+i},v.items.map(function(w){return that.getSubnavItem(w)}))})):null},getNavItem:function(item){return React.createElement("li",{className:"nav_item",key:item.id},React.createElement("div",{className:"arrow_box",onClick:this.onClickArrow},React.createElement("span",{className:"arrow_down"})),React.createElement("a",{href:item.link,target:item.target},item.name),this.getSubnav(item))},isExternalLink:function(link){return!!/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(link)},getExternalLinkIcon:function(link){if(this.isExternalLink(link))return React.createElement("span",{className:"external_link_icon"},React.createElement("svg",{display:"inline-block",height:"11",viewBox:"0 0 11 11",width:"11",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"m5.335 4.125 1.485 1.485 2.75-2.75 1.43 1.43v-4.29h-4.29l1.375 1.375zm5.61 1.87-1.045-1.045v4.95h-8.8v-8.8h4.95l-1.1-1.1h-3.85c-.605 0-1.1.495-1.1 1.1v8.8c0 .605.495 1.1 1.1 1.1h8.8c.605 0 1.1-.495 1.1-1.1z",fill:"#388fda",transform:""})))},render:function(){var that=this;return React.createElement("ul",{className:"nav"},this.props.nav_items.map(function(v){return that.getNavItem(v)}))}}),SvgIcon=createReactClass({getInitialState:function(){return{unique_id:"svg-icon-label-"+this.getUniqueID()}},getRandomInt:function(min,max){return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min))+min},getUniqueID:function(){return this.getRandomInt(0,Math.pow(36,8)).toString(36)},render:function(){return this.props.label?React.createElement("svg",{width:"100%",height:"100%",className:"svg_icon","aria-labelledby":this.state.unique_id},React.createElement("switch",null,React.createElement("use",{xlinkHref:"#icon_"+this.props.symbol}),React.createElement("foreignObject",{id:this.state.unique_id},this.props.label))):React.createElement("svg",{width:"24",height:"24",className:"svg_icon"},React.createElement("use",{xlinkHref:"#icon_"+this.props.symbol}))}}),FollowBar=createReactClass({render:function(){return React.createElement("div",{className:"follow_bar"},React.createElement("a",{className:"button_twitter_follow icon",href:this.props.twitter,target:"_blank",title:"Follow on Twitter"},React.createElement("img",{alt:"twitter",src:"/assets/twitter_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"Twitter")),React.createElement("a",{className:"button_facebook_follow icon",href:this.props.facebook,target:"_blank",title:"Follow on Facebook"},React.createElement("img",{alt:"facebook",src:"/assets/facebook_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"Facebook")),React.createElement("a",{className:"button_instagram_follow icon",href:this.props.instagram,target:"_blank",title:"Follow on Instagram"},React.createElement("img",{alt:"instagram",src:"/assets/instagram_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"Instagram")),React.createElement("a",{className:"button_rss_follow icon",href:this.props.rss,target:"_blank",title:"Follow on RSS"},React.createElement("img",{alt:"rss",src:"/assets/rss_icon@2x.png"}),React.createElement("span",{className:"follow_label"},"RSS")))}}),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ImagesOfChange=function(_React$Component){function ImagesOfChange(props){_classCallCheck(this,ImagesOfChange),_get(Object.getPrototypeOf(ImagesOfChange.prototype),"constructor",this).call(this,props),this.minimap_resize_count=0,this.state=this.getInitialState()}return _inherits(ImagesOfChange,_React$Component),_createClass(ImagesOfChange,[{key:"getInitialState",value:function(){return{view:"image",mobile:this.mobileAndTabletcheck(),grid_open:!1,map_open:!1,nav_open:!1,info_panel_open:!1,about_open:!1,lookup_failed_open:!1,items:[],filtered_items:[],filter:"",detail_idx:-1,fullscreenable:!0,filtered_idx:-1,search:""}}},{key:"componentDidMount",value:function(){mb_utils.mouseCheck(),this.getData(),this.checkFullScreen(),$.getScript(addthis_loader.script_src,addthis_loader.scriptLoaded)}},{key:"getData",value:function(){var that=this;$.getJSON(this.props.data_url,{order:"image_date desc, created_at desc",per_page:500},function(data){that.setState({items:data.items,filtered_items:data.items},function(){that.findImageFromHash()})})}},{key:"findImageFromHash",value:function(){if(""!=window.location.hash)if(window.location.hash.search(/(\.jpg|\.png|\.gif)$/)>=0){console.log("legacy lookup..."),$.grep(main.images_of_change,function(e){return e.image_main_file_name==window.location.hash.substring(1)}).length>0?this.setState({detail_idx:0,filtered_idx:0},this.setUrlHash):this.setState({lookup_failed_open:!0,detail_idx:0,filtered_idx:0},this.setUrlHash)}else{var id=window.location.hash.substring(1).match(/^\d+/g)[0];id?(id=parseInt(id),this.changeLocation(id)):(console.log("ID missing from hash and not image name"),this.setState({detail_idx:0,filtered_idx:0},this.setUrlHash))}else this.setState({detail_idx:0,filtered_idx:0},this.setUrlHash)}},{key:"mobileAndTabletcheck",value:function(){var a,check=!1;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check}},{key:"checkFullScreen",value:function(){screenfull&&screenfull.enabled?document.addEventListener(screenfull.raw.fullscreenchange,function(){return function(){$("body").toggleClass("fullscreen",screenfull.isFullscreen),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&-1==navigator.userAgent.indexOf("Android")&&$(window).trigger("resize.twentytwenty")}}):this.state.mobile?$("body").addClass("motanf"):this.setState({fullscreenable:!1})}},{key:"getAboutModalHtml",value:function(){var _this=this;return React.createElement("div",{className:"modal_contents"},React.createElement("div",{className:"close_btn",onClick:function(e){_this.closeAboutModal(e)}},React.createElement("div",{className:"icon"})),React.createElement("header",null,React.createElement("h1",null,this.props.about.title)),React.createElement("section",{dangerouslySetInnerHTML:{__html:this.props.about.body}}),React.createElement("footer",null))}},{key:"getFailedLookupModalContents",value:function(){return React.createElement("div",{className:"modal_contents"},React.createElement("div",{className:"close_btn simplemodal-close"},React.createElement("div",{className:"icon"})),React.createElement("header",null,React.createElement("h1",null,"Sorry")),React.createElement("section",null,React.createElement("p",null,"There was an error loading this image. It is not available in our new format."),React.createElement("p",null,"We took the liberty of loading our most recent image.")))}},{key:"changeLocation",value:function(id){for(var idx=-1,filtered_idx=-1,i=0;i<this.state.items.length;i++)if(this.state.items[i].id==id){idx=i;break}for(i=0;i<this.state.filtered_items.length;i++)if(this.state.filtered_items[i].id==id){filtered_idx=i;break}idx>-1?this.setState({view:"curtain_view",map_open:!1,grid_open:!1,detail_idx:idx,filtered_idx:filtered_idx},this.setUrlHash):console.error("No location for id: "+id)}},{key:"updateAddthis",value:function(url,title,description){"undefined"!=typeof addthis&&(addthis.toolbox(".addthis_toolbox"),url&&addthis.update("share","url",url),title&&addthis.update("share","title",title),description&&addthis.update("share","description",description))}},{key:"setUrlHash",value:function(){var item=this.state.items[this.state.detail_idx],url_string="?id="+item.id.toString()+"#"+item.id.toString()+"-";url_string+=item.image_title.toLowerCase().trim().replace(/\s/g,"-").replace(/[^(a-z|\-)]/,""),window.history.replaceState(null,item.image_title,url_string),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this.updateAddthis(window.location.origin+"/images-of-change/"+url_string,item.image_title,item.og_description)}},{key:"openMap",value:function(){this.og_filter=this.state.filter,this.setState({map_open:!0})}},{key:"openGrid",value:function(){this.og_filter=this.state.filter,this.setState({grid_open:!0})}},{key:"openNav",value:function(e){e&&e.preventDefault(),this.setState({nav_open:!0})}},{key:"closeMap",value:function(){this.setFilterAndItems(this.og_filter),this.setState({map_open:!1})}},{key:"closeGrid",value:function(){this.setFilterAndItems(this.og_filter),this.setState({grid_open:!1})}},{key:"closeNav",value:function(e){e&&e.preventDefault(),this.setState({nav_open:!1})}},{key:"toggleInfoPanel",value:function(){var that=this;this.state.info_panel_open?($(".minimap_container").hide(),$(".full_info").slideUp(400,function(){that.setState({info_panel_open:!1}),$(".right_section ul").slideDown(200)})):(that.setState({info_panel_open:!0}),$(".full_info").slideDown(400,function(){}),$(".right_section ul").hide(),$(".minimap_container").slideDown(400,function(){that.minimap_resize_count=0,window.setTimeout(function(){that.minimap_resize_count<3&&(that.minimap_resize_count=that.minimap_resize_count+1,that.triggerMinimapResize())},300)}))}},{key:"triggerMinimapResize",value:function(){$(document).trigger("minimap_resize")}},{key:"closeFailedModal",value:function(){this.setState({lookup_failed_open:!1})}},{key:"closeAboutModal",value:function(){this.setState({about_open:!1})}},{key:"openAboutModal",value:function(){this.setState({about_open:!0})}},{key:"previousItem",value:function(){var idx=Math.max(0,this.state.filtered_idx-1);this.changeLocation(this.state.filtered_items[idx].id)}},{key:"nextItem",value:function(){var idx=Math.min(this.state.filtered_idx+1,this.state.filtered_items.length-1);this.changeLocation(this.state.filtered_items[idx].id)}},{key:"clickMiniMap",value:function(e){this.toggleInfoPanel(e),this.setState({map_open:!0},function(){$(document).trigger("minimap_click")})}},{key:"changeMobile",value:function(e){this.setFilterAndItems(e.currentTarget.value)}},{key:"getItems",value:function(filter,search){undefined;var that=this;return""!=filter&&""!=search&&search!=undefined?this.state.items.filter(function(v){return that.hasAndIs(v,"image_category",filter)&&(that.hasAndIs(v,"image_title",search)||that.hasAndIs(v,"meta_search",search))}):""!=filter&&filter!=undefined?this.state.items.filter(function(v){return that.hasAndIs(v,"image_category",filter)}):""!=search&&search!=undefined?this.state.items.filter(function(v){return that.hasAndIs(v,"image_title",search)||that.hasAndIs(v,"meta_search",search)}):this.state.items}},{key:"hasAndIs",value:function(item,el,search){return null!=item[el]&&item[el].toLowerCase().indexOf(search.toLowerCase())>-1}},{key:"setFilterAndItems",value:function(filter){var items=this.getItems(filter,this.state.search);this.setState({filter:filter,filtered_items:items})}},{key:"clickFilter",value:function(e){var filter=e.currentTarget.dataset.filter;this.setFilterAndItems(filter)}},{key:"hasPrev",value:function(){return this.state.filtered_idx>0}},{key:"hasNext",value:function(){return this.state.filtered_idx<this.state.filtered_items.length-1}},{key:"filterBySearch",value:function(search){var items=this.getItems(this.state.filter,search);this.setState({search:search,filtered_items:items})}},{key:"render",value:function(){var _this2=this,iocModalStyle={};return React.createElement("div",null,React.createElement("div",{className:"gradient_container_top"}),React.createElement(IocHeader,{open_map:function(e){_this2.openMap(e)},open_grid:function(e){_this2.openGrid(e)},open_nav:function(e){_this2.openNav(e)},close_nav:function(e){_this2.closeNav(e)},nav_open:this.state.nav_open,site_nav:this.props.site_nav}),React.createElement("div",{id:"layers"},React.createElement("div",{id:"panels",className:"ioc_overlays"},React.createElement(Modal,{id:"about_panel",isOpen:this.state.about_open,onRequestClose:function(e){_this2.closeAboutModal(e)},style:iocModalStyle,className:"panel modal"},this.getAboutModalHtml()),React.createElement(Modal,{id:"lookup_failed",isOpen:this.state.lookup_failed_open,onRequestClose:function(e){_this2.closeFailedModal(e)},style:iocModalStyle,className:"panel modal"},this.getAboutModalHtml()),this.state.detail_idx>=0?React.createElement(IocMap,{detail:this.state.items[this.state.detail_idx],detail_idx:this.state.detail_idx,change_filter:function(e){_this2.changeMobile(e)},change_loc:function(e){_this2.changeLocation(e)},mobile:this.state.mobile,items:this.state.items,open:this.state.map_open,close:function(e){_this2.closeMap(e)},filter:this.state.filter}):null,this.state.detail_idx>=0?React.createElement(IocGrid,{change_loc:function(e){_this2.changeLocation(e)},filter:this.state.filter,filtered_items:this.state.filtered_items,change_mobile:function(e){_this2.changeMobile(e)},click_filter:function(e){_this2.clickFilter(e)},search:this.state.search,categories:this.props.categories,close:function(e){_this2.closeGrid(e)},open:this.state.grid_open,filter_search:function(e){_this2.filterBySearch(e)}}):null),this.state.detail_idx>=0?React.createElement(IocImageDetail,{map_click:function(e){_this2.clickMiniMap(e)},fullscreenable:this.state.fullscreenable,change_loc:this.changeLocation,change_view:function(e){_this2.changeView(e)},detail:this.state.items[this.state.detail_idx],toggle_info_panel:function(e){_this2.toggleInfoPanel(e)},info_panel_open:this.state.info_panel_open}):"",React.createElement("div",{className:"nav_arrows"},React.createElement("a",{className:"prev_item icon "+(this.hasPrev()?"":"disabled"),onClick:function(e){_this2.previousItem(e)}},"Previous"),React.createElement("a",{className:"next_item icon "+(this.hasNext()?"":"disabled"),onClick:function(e){_this2.nextItem(e)}},"Next"))),React.createElement(IocFooter,{about_text:"About Images of Change",site_url:"/",site_text:"Global Climate Change",open_about:function(e){_this2.openAboutModal(e)}}))}}]),ImagesOfChange}(React.Component),IocFooter=createReactClass({render:function(){return React.createElement("footer",{id:"ioc_footer"},React.createElement("nav",null,React.createElement("a",{className:"about",onClick:this.props.open_about},this.props.about_text),":",React.createElement("a",{href:this.props.site_url},this.props.site_text)))}}),IocGrid=createReactClass({changeSearch:function(e){var search=e.currentTarget.value;this.props.filter_search(search)},getItemHtml:function(v,i){var _this=this,categories=v.image_category?v.image_category.split(","):[];return React.createElement("li",{key:i,className:"slide "+categories.join(" ")},React.createElement("a",{onClick:function(){_this.props.change_loc(v.id)}},React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"img"},React.createElement("img",{className:"thumb",src:v.image_thumb})),React.createElement("div",{className:"list_text_content"},React.createElement("div",{className:"content_title"},v.image_title),React.createElement("div",{className:"subtitle"},v.image_subtitle)))))},render:function(){var _this2=this,that=this;return React.createElement("div",{className:"panel overlay "+(this.props.open?"open":""),id:"grid_view"},React.createElement("header",{className:"filter_bar"},React.createElement("ul",{className:"categories desktop"},React.createElement("li",{onClick:that.props.click_filter,className:""==this.props.filter?"active":"","data-filter":""},"All"),this.props.categories.map(function(v,i){return React.createElement("li",{key:i,className:that.props.filter==v?"active":"","data-filter":v,onClick:that.props.click_filter},v)})),React.createElement("select",{className:"categories mobile",onChange:this.props.change_mobile,value:this.props.filter},React.createElement("option",{value:""},"All Categories"),this.props.categories.map(function(v,i){return React.createElement("option",{key:i,value:v},v)})),React.createElement("div",{className:"meganav_overlay_search meganav_search"},React.createElement("input",{className:"search_field",name:"q",type:"text",value:this.props.search,onChange:this.changeSearch,placeholder:"search"}),React.createElement("div",{className:"search_submit"},React.createElement(SvgIcon,{symbol:"magnifying_glass",label:"magnifying_glass"}))),React.createElement("div",{className:"close_btn panel_close_button",onClick:this.props.close},React.createElement("div",{className:"icon"}))),React.createElement("section",{className:"main_overlay_section grid_gallery"},React.createElement("div",{className:"grid_layout"},React.createElement("ul",{className:"articles item_list"},this.props.filtered_items.map(function(v,i){return _this2.getItemHtml(v,i)})))))}}),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},IocHeader=function(_React$Component){function IocHeader(){_classCallCheck(this,IocHeader),_get(Object.getPrototypeOf(IocHeader.prototype),"constructor",this).apply(this,arguments)}return _inherits(IocHeader,_React$Component),_createClass(IocHeader,[{key:"getNav",value:function(){return this.props.nav_open?React.createElement("div",{className:"desktop_nav_container desktop_overlay_nav open"},React.createElement("div",{className:"site_nav_spacer"}),React.createElement("header",{className:"overlay_site_header",style:{width:"100%"}},React.createElement("div",{className:"brand_2"},React.createElement("a",{className:"gcc_logo",href:"/",title:"Global Climate Change - Vital Signs of the Planet"},"Global Climate Change"))),React.createElement("nav",{className:"site_nav"},React.createElement("a",{href:"#",className:"modal_close",onClick:this.props.close_nav,id:"modal_close"},React.createElement("span",{className:"modal_close_icon"})),React.createElement("div",{className:"overlay_nav_container"},React.createElement("ul",{className:"nav ioc_now_adds"},React.createElement("li",{className:"nav_item close_item",key:"manualkeya"},React.createElement("a",{onClick:this.props.close_nav},"Back to Images of Change")),React.createElement("li",{className:"nav_item",key:"manualkeyb"},React.createElement("a",{href:"/",target:"_self"},"Global Climate Change Home")),React.createElement("li",{className:"nav_item earth_now",key:"manualkeyc"},React.createElement("a",{href:"/earth-now/",title:"Earth Now"},React.createElement("span",{className:"animated_icon"}),React.createElement("span",null,"Earth Now")))),React.createElement(SiteNavOverlay,{nav_items:this.props.site_nav}),React.createElement("div",{className:"search_and_social_nav"},React.createElement("div",{className:"follow_nav"},React.createElement("div",{className:"nav_title"},"Follow Global Climate Change"),React.createElement(FollowBar,{twitter:"//twitter.com/NASAClimate",facebook:"http://www.facebook.com/NASAClimateChange",instagram:"http://instagram.com/nasaclimatechange",rss:"https://climate.nasa.gov/news/rss.xml"}))),React.createElement("form",{action:"/search.html",className:"overlay_search"},React.createElement("input",{className:"search_field search_open",name:"q",type:"text",placeholder:"search"}),React.createElement("div",{className:"search_submit",onClick:this.submitSearch},React.createElement(SvgIcon,{symbol:"magnifying_glass",label:"search"})))))):null}},{key:"render",value:function(){return React.createElement("div",{className:"site_header_area "+(this.props.nav_open?"nav_overlay_true":"")},React.createElement("header",{id:"site_header",style:{width:"100%"}},React.createElement("div",{className:"brand_area"},React.createElement("div",{className:"brand_1"},React.createElement("a",{className:"nasa_logo",href:"https://www.nasa.gov",target:"blank",title:"visit nasa.gov"},"NASA")),React.createElement("div",{className:"brand_2"},React.createElement("a",{className:"gcc_logo",href:"/",title:"Global Climate Change - Vital Signs of the Planet"},"Global Climate Change")),React.createElement("div",{className:"brand_3"},React.createElement("a",{className:"brand_logo",href:"/images-of-change",title:"Images of Change home"},"Images of Change"))),React.createElement("div",{className:"view_selectors",style:{position:"relative",display:"inline-block",float:"right"}},React.createElement("a",{className:"view_selector map_icon",onClick:this.props.open_map},"MAP VIEW"),React.createElement("a",{className:"view_selector grid_icon",onClick:this.props.open_grid},"GRID VIEW"),React.createElement("div",{className:"nav_toggle",onClick:this.props.open_nav}),React.createElement("a",{
className:"menu_button",href:"#",onClick:this.props.open_nav,id:"menu_button"},React.createElement("span",{className:"menu_icon"})))),this.getNav())}}]),IocHeader}(React.Component),IocImageDetail=createReactClass({slider:null,$panzoom_el:null,download_spinner_opts:{lines:9,length:6,width:4,radius:7,scale:1,corners:1,color:"#FFF",opacity:.2,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",left:"50%",shadow:!1,hwaccel:!1,position:"relative"},getInitialState:function(){return{view:"curtain_view",toggle:"before",zoomed:!1,loading:!0}},componentWillReceiveProps:function(nextProps){("undefined"==typeof this.props.detail||nextProps.detail&&nextProps.detail.id!=this.props.detail.id)&&($(".twentytwenty-overlay,.twentytwenty-handle").remove(),this.loadCurtain(.5))},componentDidMount:function(){var _this=this;this.setState({loading:!0},function(){_this.loadCurtain(0),_this.initTooltips()})},initTooltips:function(){console.log("init JS tooltips -------------"),$(".glossary_link").tooltipster({content:"Loading...",contentAsHTML:!0,maxWidth:320,minWidth:320,onlyOne:!0,interactive:!0,updateAnimation:!1,position:"top-right",functionInit:function(){$(".glossary_link").on("setPosition",function(event,e){gl_offset=$(this).offset(),$(this).tooltipster("option","offsetX",e.pageX-gl_offset.left-$(this).innerWidth()),$(this).tooltipster("option","offsetY",gl_offset.top-e.pageY+14),$(this).tooltipster("reposition")}),$(".glossary_link").on("mouseenter",function(e){$(this).trigger("setPosition",[e])})},functionAfter:function(origin){$(origin).removeClass("open"),$(origin).on("setPosition",function(event,e){gl_offset=$(this).offset(),$(this).tooltipster("option","offsetX",e.pageX-gl_offset.left-$(this).innerWidth()),$(this).tooltipster("option","offsetY",gl_offset.top-e.pageY+14),$(this).tooltipster("reposition")})},functionReady:function(origin){$(origin).off("setPosition")},functionBefore:function(origin,continueTooltip){if(continueTooltip(),"cached"!==origin.data("ajax")){var url="/api/v1/glossary_items/",href=$(origin).attr("href"),matches=href.match(/ss_id=(\d+)/);if(1==matches.length)return;url+=matches[1],$.ajax({type:"GET",url:url,success:function(data){var html="<div class='glossary_tooltip' data-href='"+href+"'><h3>"+data.title+"</h3><div class='definition'>"+data.definition+"</div>";"undefined"!=typeof data.credit&&""!=data.credit?html+="<div class='credit'>Source: "+data.credit+"</div></div>":html+="</div>",origin.tooltipster("content",html).data("ajax","cached"),$(".glossary_tooltip").click(function(e){e.preventDefault(),window.location=$(this).data("href")}),$(".glossary_tooltip a").click(function(e){e.preventDefault(),e.stopPropagation(),window.location=$(this).attr("href")})}})}}});var a,check=!1;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check},loadCurtain:function(offset){var that=this;this.setState({view:"curtain_view",toggle:"before",loading:!0},function(){setTimeout(function(){$(".before_and_after").imagesLoaded(function(){var _this2=this;that.setState({loading:!1},function(){_this2.slider=$(".before_and_after").twentytwenty({default_offset_pct:offset}),0==offset&&that.slideIn()})})},30)})},slideIn:function(){console.log("slide in"),$(window).trigger("slidein",50)},getChromelessToggle:function(){return React.createElement("div",{className:"chromeless_toggle mini_view_container",style:"toggle_view"==this.state.view&&this.state.zoomed?{display:"block"}:{display:"none"}},React.createElement("a",{className:"mini_view",onClick:this.toggleView},React.createElement("div",{className:"mini_before "+("before"==this.state.toggle?"":"inactive")},React.createElement("div",{className:"image_thumb"},React.createElement("img",{src:this.props.detail.image_mobile_1_url}))),React.createElement("div",{className:"mini_after "+("before"==this.state.toggle?"inactive":"")},React.createElement("div",{className:"image_thumb"},React.createElement("img",{src:this.props.detail.image_mobile_2_url})))))},changeView:function(e){var view=e.currentTarget.id;this.setState({view:view})},toggleView:function(e){e.preventDefault();var toggle="before"==this.state.toggle?"after":"before";this.setState({toggle:toggle})},panZoom:function(){var _this3=this;this.state.zoomed?this.setState({zoomed:!1},function(){_this3.$panzoom_el.panzoom("setMatrix",[1,0,0,1,0,0]),_this3.$panzoom_el.panzoom("disable"),$("body").removeClass("chromeless zoomable"),$(".twentytwenty-handle").removeClass("vanish")}):this.setState({zoomed:!0},function(){$("body").addClass("chromeless zoomable"),_this3.$panzoom_el?_this3.$panzoom_el.panzoom("enable"):_this3.$panzoom_el=$(".before_and_after").panzoom({increment:1.5}),$(".twentytwenty-handle").addClass("vanish")})},getLoading:function(){return this.state.loading?React.createElement(Loader,{loaded:!1,options:this.download_spinner_opts,className:"spinner"}):null},getImageContainer:function(){return React.createElement("div",{className:"image_height_wrapper"},React.createElement("div",{className:"image_tools "+(this.state.zoomed?"":"zoom"),onClick:this.panZoom}),React.createElement("div",{className:"image_container "+this.state.view+" "+this.state.toggle},React.createElement("div",null,this.getLoading()),React.createElement("div",{className:"before_and_after twentytwenty-container "+(this.state.loading?"loading":"")},React.createElement("img",{id:"before_image",src:this.props.detail.image_mobile_1_url}),React.createElement("img",{id:"after_image",src:this.props.detail.image_mobile_2_url}))))},render:function(){return React.createElement("div",{className:"image_detail_view",id:"image_detail_view"},this.getChromelessToggle(),this.getImageContainer(),React.createElement(IocInfoPanel,{map_click:this.props.map_click,fullscreenable:this.props.fullscreenable,toggle_view:this.toggleView,toggle:this.state.toggle,change_view:this.changeView,view:this.state.view,detail:this.props.detail,open_state:this.props.info_panel_open,toggle_info_panel:this.props.toggle_info_panel}))}}),IocInfoPanel=createReactClass({getInitialState:function(){var fullscreen=!1;return this.props.fullscreenable&&screenfull.enabled?fullscreen=screenfull.isFullscreen:this.props.fullscreenable&&(fullscreen=$("body").hasClass("fullscreen")),{fullscreen:fullscreen,marker_array:[]}},componentDidMount:function(){var that=this;this.loadMinimap(),$(document).on("minimap_resize",function(){google.maps.event.trigger(that.minimap,"resize"),that.minimap.setCenter(that.getCenter(that.props.detail))})},componentWillReceiveProps:function(nextProps){nextProps.detail&&nextProps.detail.id!=this.props.detail.id&&this.resetMinimap(nextProps.detail)},loadMinimap:function(){var mapOptions={backgroundColor:"#000000",draggable:!1,scrollwheel:!1,streetViewControl:!1,zoomControl:!1,mapTypeControl:!1,fullscreenControl:!1,center:this.getCenter(this.props.detail),zoom:8,mapTypeId:google.maps.MapTypeId.HYBRID};this.minimap=new google.maps.Map(document.getElementById("minimap_canvas"),mapOptions),this.setState({marker:this.createMarker(this.props.detail)})},createMarker:function(loc){var point=this.getCenter(loc),icon="/assets/images_of_change/map-marker-on.png";return new google.maps.Marker({position:point,map:this.minimap,icon:icon,loc_id:loc.id})},resetMinimap:function(loc){this.minimap.setCenter(this.getCenter(loc)),this.state.marker.setMap(null),this.setState({marker:this.createMarker(loc)})},getCenter:function(loc){return new google.maps.LatLng(loc.image_map_latitude,loc.image_map_longitude)},getFullscreenHtml:function(){return this.props.fullscreenable?React.createElement("li",{className:"ui_button "+(this.state.fullscreen?"active":""),id:"fullscreen",onClick:this.toggleFullScreen},React.createElement("div",{className:"icon"})):null},toggleFullScreen:function(){this.setState({fullscreen:!this.state.fullscreen},function(){screenfull.enabled?screenfull.toggle():$("body").toggleClass("fullscreen")})},renderCherTools:function(){var share=[["Facebook"],["Twitter"],["Pinterest"],["Email"]],share_text="Image of "+titleize(this.props.detail.image_title),share_image=window.location.origin+this.props.detail.image_mobile_1_url;return React.createElement("div",{className:"horizontal_cher_tools"},React.createElement(CherTools,{share:share,share_text:share_text,share_image:share_image}))},render:function(){return React.createElement("div",{id:"info_panel",className:this.props.open_state?"open":""},React.createElement("div",{className:"grid_layout"},React.createElement("div",{className:"left_section"},React.createElement("a",{className:"info_toggle",onClick:this.props.toggle_info_panel},React.createElement("div",{className:"title_container"},React.createElement("h1",{className:"image_title"},this.props.detail.image_title),React.createElement("div",{className:"caret"})),React.createElement("h3",{className:"date"},this.props.detail.image_date1," - ",this.props.detail.image_date2)),React.createElement("div",{className:"full_info "+(this.props.open_state?"open":"")},React.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.detail.image_caption}}),React.createElement("div",{className:"credits"},React.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.detail.image_credit}})),React.createElement("p",null,React.createElement("strong",null,"Download images:"),React.createElement("span",{className:"download_links"},React.createElement("a",{href:this.props.detail.image_mobile_1_url,target:"_blank"},"image 1"),"\u2022",React.createElement("a",{href:this.props.detail.image_mobile_2_url,target:"_blank"},"image 2"))),this.renderCherTools())),React.createElement("div",{className:"right_section"},React.createElement("ul",{className:"view_options"},React.createElement("li",{className:"ui_button "+("curtain_view"==this.props.view?"active":""),id:"curtain_view",onClick:this.props.change_view},React.createElement("div",{className:"icon"},"Curtain")),React.createElement("li",{className:"ui_button "+("toggle_view"==this.props.view?"active":""),id:"toggle_view",onClick:this.props.change_view},React.createElement("div",{className:"icon"},"Toggle")),React.createElement("li",{className:"ui_button "+("two_up_view"==this.props.view?"active":""),id:"two_up_view",onClick:this.props.change_view},React.createElement("div",{className:"icon"},"2-Up")),this.getFullscreenHtml()),React.createElement("div",{className:"mini_view_container "+("toggle_view"==this.props.view?"open":"")},React.createElement("a",{className:"mini_view",onClick:this.props.toggle_view},React.createElement("div",{className:"mini_before "+("before"!=this.props.toggle?"inactive":"")},React.createElement("div",{className:"image_thumb"},React.createElement("img",{src:this.props.detail.image_mobile_1_url}))),React.createElement("div",{className:"mini_after "+("after"!=this.props.toggle?"inactive":"")},React.createElement("div",{className:"image_thumb"},React.createElement("img",{src:this.props.detail.image_mobile_2_url}))))),React.createElement("div",{className:"minimap_container",onClick:this.props.map_click},React.createElement("div",{className:"minimap",id:"minimap_canvas"})))))}}),IocMap=createReactClass({regions:{africa:{bounds:[[-37.5341571,-26.586899899999935],[37.9615,60.5566]]},asia:{bounds:[[-12,25],[70,175]]},australia:{bounds:[[-46.526369,103.67267100000004],[-9.315742,162.82306100000005]]},europe:{bounds:[[34,-11],[65,55]]},north_america:{bounds:[[5,-170],[70,-50]]},south_america:{bounds:[[-56.5474001,-93.97710000000001],[13.0771915,-32.58539989999997]]},middle_east:{bounds:[[11.7975,24.696775000000002],[42.3666999,63.33333659999994]]},all_regions:{bounds:[[-70,-175],[73,160]]}},marker_off:"/assets/images_of_change/map-marker-off.png",marker_on:"/assets/images_of_change/map-marker-on.png",last_opened_marker:null,the_map:null,getInitialState:function(){return{region:"all_regions",marker_array:[],minimap_marker_array:[],category:""}},componentDidMount:function(){var that=this;this.loadMap(),$(document).on("minimap_click",function(){window.setTimeout(function(){that.the_map.setZoom(6),that.the_map.setCenter(new google.maps.LatLng(that.props.detail.image_map_latitude,that.props.detail.image_map_longitude))},300)})},componentWillReceiveProps:function(nextProps){("undefined"==typeof this.props.detail&&"undefined"!=typeof nextProps.detail||"undefined"!=typeof nextProps.detail&&nextProps.detail.id!=this.props.detail.id)&&this.setCurrentMarker(nextProps.detail.id),nextProps.filter!=this.props.filter&&this.filterMarkers(nextProps.filter)},loadMap:function(){var that=this,region=this.regions.all_regions,mapOptions={backgroundColor:"#000000",draggable:!0,scrollwheel:!0,streetViewControl:!1,minZoom:$(window).width()<1300?2:3,mapTypeId:google.maps.MapTypeId.HYBRID,fullscreenControl:!1};this.the_map=new google.maps.Map(document.getElementById("map_canvas"),mapOptions),this.the_map.fitBounds(this.constructGoogleBounds(region.bounds)),google.maps.event.addDomListener(window,"resize",function(){var center=that.the_map.getCenter();google.maps.event.trigger(that.the_map,"resize"),that.the_map.setCenter(center)}),this.createMarkers(!0),this.props.mobile&&this.the_map.addListener("click",function(){console.log("clicked map"),null!=that.last_opened_marker&&that.closeMarker(that.last_opened_marker)})},setCurrentMarker:function(loc_id){var that=this;$.each(this.state.marker_array,function(k,v){loc_id==v.loc_id?v.setIcon(that.marker_on):v.setIcon(that.marker_off)})},createMarkers:function(show_info){var _this=this,markers=[],curr_loc_id=this.props.items[this.props.detail_idx].id;this.props.items.map(function(v){if(v.image_map_latitude&&v.image_map_longitude){var marker_icon=v.id==curr_loc_id?_this.marker_on:_this.marker_off;_this.createMarker(v,_this.the_map,show_info,markers,marker_icon)}}),this.setState({marker_array:markers})},createMarker:function(loc,map,show_info,marker_array,marker_icon){var that=this,point=new google.maps.LatLng(loc.image_map_latitude,loc.image_map_longitude),marker=new google.maps.Marker({position:point,map:map,icon:marker_icon,categories:loc.image_category,loc_id:loc.id});if(marker_array.push(marker),show_info){var infowindow=this.createInfoWindow(loc);this.props.mobile?(google.maps.event.addListener(marker,"click",function(){that.openMarker(marker,infowindow)}),google.maps.event.addListener(infowindow,"domready",function(){$(".marker").click(function(){that.closeMarker(that.last_opened_marker),that.props.change_loc(loc.id)})})):(google.maps.event.addListener(marker,"mouseover",function(){that.openMarker(marker,infowindow)}),google.maps.event.addListener(marker,"mouseout",function(){that.closeMarker(marker)}),google.maps.event.addListener(marker,"click",function(){that.setCurrentMarker(loc.id),that.props.change_loc(loc.id)})),google.maps.event.addListener(infowindow,"closeclick",function(){that.closeMarker(marker)})}},createInfoWindow:function(loc){var info="\n      <div class='marker'>        \n        <img src="+loc.image_thumb+" />\n        <div class='title'>\n          "+loc.thumbnail_title+"\n        </div>\n        <div class='subtitle'>\n          "+loc.thumbnail_subtitle+"\n        </div>\n      </div>\n    ";return new google.maps.InfoWindow({content:info,maxWidth:150})},openMarker:function(marker,infowindow){this.marker_init_z=marker.setZIndex(),marker.setZIndex(google.maps.Marker.MAX_ZINDEX+1),null!=this.last_opened_info_window&&null!=this.last_opened_marker&&this.closeMarker(this.last_opened_marker),infowindow.open(this.the_map,marker),this.last_opened_info_window=infowindow,this.last_opened_marker=marker,marker.setIcon(this.marker_on)},constructGoogleBounds:function(bounds){var se=new google.maps.LatLng(bounds[0][0],bounds[0][1]),nw=new google.maps.LatLng(bounds[1][0],bounds[1][1]);return new google.maps.LatLngBounds(se,nw)},setCurrentMarker:function(loc_id){var that=this;this.current_ioc_id=loc_id,this.state.marker_array.map(function(v){loc_id==v.loc_id?v.setIcon(that.marker_on):v.setIcon(that.marker_off)})},closeMarker:function(marker){marker.loc_id==this.current_ioc_id?marker.setIcon(this.marker_on):marker.setIcon(this.marker_off),marker.setZIndex(this.marker_init_z),this.last_opened_info_window.close(),this.last_opened_marker=null},centerMapByAddress:function(address){var that=this;geocoder=new google.maps.Geocoder,geocoder.geocode({address:address},function(results,status){status==google.maps.GeocoderStatus.OK?null!=this.the_map&&(console.log("recenter map! bounds: "+results[0].geometry.viewport),results[0].geometry.viewport&&this.the_map.fitBounds(results[0].geometry.viewport)):status==google.maps.GeocoderStatus.ZERO_RESULTS?(console.log("no results."),this.setState({search_error:"No locations found"}),window.setTimeout(function(){that.setState({search_error:""})},3e3)):console.log("Error geocoding: "+address+", error: "+status)})},filterMarkers:function(category){var that=this;""==category?$(this.state.marker_array).each(function(k,v){v.setMap(that.the_map)}):$(this.state.marker_array).each(function(k,v){-1!=v.categories.search(category)?v.setMap(that.the_map):v.setMap(null)})},onSearch:function(e){e.preventDefault(),this.centerMapByAddress(e.currentTarget.q.value),this.hideKeyboard($(e.currentTarget.q))},hideKeyboard:function(element){element.attr("readonly","readonly"),element.attr("disabled","true"),setTimeout(function(){element.blur(),element.removeAttr("readonly"),element.removeAttr("disabled")},100)},centerMapByAddress:function(address){var that=this;geocoder=new google.maps.Geocoder;var search_error="";geocoder.geocode({address:address},function(results,status){status==google.maps.GeocoderStatus.OK?null!=that.the_map&&(console.log("recenter map! bounds: "+results[0].geometry.viewport),results[0].geometry.viewport&&that.the_map.fitBounds(results[0].geometry.viewport)):status==google.maps.GeocoderStatus.ZERO_RESULTS?(console.log("no results."),search_error="No locations found"):(search_error="Error geocoding: "+address+", error: "+status,console.error(search_error)),that.setState({search_error:search_error},function(){setTimeout(that.setState({search_error:""}),3e3)})})},render:function(){return React.createElement("div",{className:"panel overlay "+(this.props.open?"open":""),id:"map_view"},React.createElement("header",{className:"filter_bar map_search"},React.createElement("select",{name:"category_select",id:"category_select",onChange:this.props.change_filter,value:this.props.filter},React.createElement("option",{value:""},"All categories"),React.createElement("option",{value:"cities"},"cities"),React.createElement("option",{value:"extreme events"},"extreme events"),React.createElement("option",{value:"ice"},"ice"),React.createElement("option",{value:"human impact"},"human impact"),React.createElement("option",{value:"land cover"},"land cover"),React.createElement("option",{value:"water"},"water"),React.createElement("option",{value:"top picks"},"top picks")),React.createElement("form",{className:"search_binder",onSubmit:this.onSearch},React.createElement("input",{className:"search_field",name:"q",placeholder:"search map",results:"10",type:"text"}),React.createElement("div",{className:"search_submit"},React.createElement(SvgIcon,{symbol:"magnifying_glass",label:"magnifying_glass"})),React.createElement("div",{className:"search_error"},this.state.search_error)),React.createElement("div",{className:"close_btn panel_close_button",onClick:this.props.close},React.createElement("div",{className:"icon"}))),React.createElement("section",{className:"main_overlay_section"},React.createElement("div",{id:"map_canvas",style:{position:"relative",overflow:"hidden"}}),React.createElement("div",{id:"minimap_mover"})))}}),SiteNavOverlay=createReactClass({onClickArrow:function(e){$(e.currentTarget).toggleClass("reverse").parent().find(".subnav").toggle()},getSubnavItem:function(item,i){return React.createElement("li",{key:"subnav"+item.id+"_"+i},React.createElement("a",{href:item.link,target:item.target},item.name," ",React.createElement("span",null,"\xa0")," ",this.getExternalLinkIcon(item.link)))},getSubnav:function(item){var that=this;return item.sections?React.createElement("ul",{className:"subnav"},item.sections.map(function(v,i){return React.createElement("ul",{className:"section",key:"section_"+item.id+"_"+i},v.items.map(function(w){return that.getSubnavItem(w,i)}))})):null},getNavItem:function(item){return React.createElement("li",{className:"nav_item",key:item.id},React.createElement("div",{className:"arrow_box",onClick:this.onClickArrow},React.createElement("span",{className:"arrow_down"})),React.createElement("a",{href:item.link,target:item.target},item.name),this.getSubnav(item))},isExternalLink:function(link){return!!/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(link)},getExternalLinkIcon:function(link){if(this.isExternalLink(link))return React.createElement("span",{className:"external_link_icon"},React.createElement("svg",{display:"inline-block",height:"11",viewBox:"0 0 11 11",width:"11",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"m5.335 4.125 1.485 1.485 2.75-2.75 1.43 1.43v-4.29h-4.29l1.375 1.375zm5.61 1.87-1.045-1.045v4.95h-8.8v-8.8h4.95l-1.1-1.1h-3.85c-.605 0-1.1.495-1.1 1.1v8.8c0 .605.495 1.1 1.1 1.1h8.8c.605 0 1.1-.495 1.1-1.1z",fill:"#388fda",transform:""})))},render:function(){var that=this;return React.createElement("ul",{className:"nav"},this.props.nav_items.map(function(v){return that.getNavItem(v)}))}}),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x2,_x3,_x4){for(var _again=!0;_again;){var object=_x2,property=_x3,receiver=_x4;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x2=parent,_x3=property,_x4=receiver,_again=!0,desc=parent=undefined}},PageDashboard=function(_React$Component){function PageDashboard(){_classCallCheck(this,PageDashboard),_get(Object.getPrototypeOf(PageDashboard.prototype),"constructor",this).apply(this,arguments)}return _inherits(PageDashboard,_React$Component),_createClass(PageDashboard,[{key:"getInitialState",value:function(){return{api:[],countdown:[]}}},{key:"componentDidMount",value:function(){this.props.single_slide||($("#page_dashboard").on("init",function(){$(".dashboard").css("visibility","visible")}),this.carousel=$("#page_dashboard").slick({dots:!1,infinite:!0,speed:300,slide:".dashboard .slide",slidesToShow:5,slidesToScroll:5,centerMode:!1,variableWidth:!1,arrows:!0,onInit:function(){$(".dashboard").css("visibility","visible")},responsive:[{breakpoint:1500,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,centerPadding:"0px"}}]}),$("body").on("dashboard_resize",function(){$("#page_dashboard")[0].slick.refresh()}),window.addEventListener("orientationchange",function(){var clock=undefined;clock=setInterval(function(){$("#page_dashboard")[0].slick.refresh()},500),setTimeout(function(){clearInterval(clock)},3e3)})),document.body.classList.add("has_dashboard")}},{key:"formatThousandsNoRounding",value:function(n,dp){for(var e="",s=e+n,l=s.length,b=n<0?1:0,i=s.lastIndexOf("."),j=-1==i?l:i,r=e,d=s.substr(j+1,dp);(j-=3)>b;)r=","+s.substr(j,3)+r;return s.substr(0,j+3)+r+(dp?"."+d+(d.length<dp?"00000".substr(0,dp-d.length):e):e)}},{key:"convertOption",value:function(item,i,just_the_val){var multi_idx=arguments.length<=3||arguments[3]===undefined?null:arguments[3];return"api"==item.type?this.buildApiSlide(item,i,just_the_val):"calculation"==item.type?this.buildCalcSlide(item,i,just_the_val):"vitalsign"==item.type?this.buildVitalSignSlide(item,i,just_the_val):"countdown"==item.type?this.buildCountdownSlide(item,i,multi_idx):"sols_on_mars"==item.type?this.buildMarsSolsSlide(item,i,just_the_val):"raw_images"==item.type?this.buildRawImagesSlide(item,i,just_the_val):"undefined"!=typeof item.values?this.buildMultipleValuesSlide(item,i):this.buildStaticSlide(item,just_the_val,{suffix:item.suffix})}},{key:"buildMarsSolsSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(SolsOnMars,{deg_east:item.deg_east,sol_0:item.sol_0}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(SolsOnMars,{deg_east:item.deg_east,sol_0:item.sol_0})))}},{key:"buildVitalSignSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(VitalSignDashboard,{item_id:item.id,abbreviated:item.abbr,absolute_value:item.absolute_value,downcase:item.downcase}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(VitalSignDashboard,{item_id:item.id,abbreviated:item.abbr,absolute_value:item.absolute_value,downcase:item.downcase})))}},{key:"buildRawImagesSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(RawImagesDashboard,{mission:item.mission}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(RawImagesDashboard,{mission:item.mission})))}},{key:"buildCalcSlide",value:function(item,i,just_the_val){var suffix=item&&item.suffix?" "+item.suffix:"";return just_the_val?React.createElement("div",{className:"value"},this.calculateForSubtype(item),suffix):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement("div",{className:"value"},Math.round(this.calculateForSubtype(item)).toLocaleString(),suffix)))}},{key:"calculateForSubtype",value:function(item){switch(item.subtype){case"per-day-since":var now=new Date,start_date=new Date(item.since);return(now.getTime()-start_date.getTime())/864e5*parseFloat(item.value);default:return console.error("UNKNOWN Calculation for: ",item.subtype),""}}},{key:"buildApiSlide",value:function(item,i,just_the_val){return just_the_val?React.createElement(SpiceAPI,{base_url:"/spice_data",query:item}):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement(SpiceAPI,{base_url:"/spice_data",query:item})))}},{key:"buildCountdownSlide",value:function(item,i,multi_idx){var data=this.state.countdown[i];if("number"==typeof multi_idx&&Array.isArray(data)&&(data=data[multi_idx]),data&&!Array.isArray(data))return React.createElement("div",{className:"image_and_description_container"},React.createElement(Countdown,{count_up:item.count_up,date:data.date,title:data.title,sols:data.sols,sol_0:data.sol_0,deg_east:data.deg_east}));this.getCountdownData(item,i,multi_idx)}},{key:"buildMultipleValuesSlide",value:function(item,i){console.log(item);var that=this;return React.createElement("div",null,React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout multiple"},React.createElement("div",{className:"title"},item.title),item.values.map(function(v,j){return j+1==item.values.length?React.createElement("span",{className:"value_container last"},that.convertOption(v,i,!0,j)):React.createElement("span",{className:"value_container"},that.convertOption(v,i,!0,j))}))))}},{key:"getCountdownData",value:function(item,i,multi_idx){var that=this;$.getJSON("/api/v1/basic_html_elements/"+item.id+"}",function(data){if(data.publish_date){var new_countdown=that.state.countdown;"number"==typeof multi_idx?(Array.isArray(new_countdown[i])||(new_countdown[i]=[]),new_countdown[i][multi_idx]={date:data.publish_date,title:data.title}):new_countdown[i]={date:data.publish_date,title:data.title},that.setState({countdown:new_countdown})}})}},{key:"loadOverlay",value:function(link){$("body").trigger("feed_hipo",{url:link})}},{key:"loadMepOverlay",value:function(e,link){$("html,body").animate({scrollTop:0},280);var url=link+"?layout=empty&override_preview=true",$target=$(e.currentTarget);$target.hasClass("current")&&$("#vital_signs_modal").hasClass("visible")?($target.removeClass("current"),vital_signs.closeModal()):(console.log("open modal!"),$(".vital_signs_menu .slide.overlay").removeClass("current"),$target.addClass("current"),$("#vital_signs_modal").hasClass("visible")?vital_signs.closeModal(function(){$("#vital_signs_modal .loading").show(),vital_signs.loadModal(url)}):($("#vital_signs_modal .loading").show(),vital_signs.loadModal(url)))}},{key:"buildStaticSlide",value:function(item,just_the_val,options){var suffix=options&&options.suffix?" "+options.suffix:"";return just_the_val?React.createElement("div",{className:"value"},item.value,suffix):React.createElement("div",{className:"image_and_description_container"},React.createElement("div",{className:"readout"},React.createElement("div",{className:"title"},item.title),React.createElement("div",{className:"value"},item.value,suffix)))}},{key:"createSlide",value:function(v,i){var that=this;return v.link?React.createElement("li",{key:i,className:"slide link_to_page"},React.createElement("a",{href:v.link,target:v.target},this.convertOption(v,i),React.createElement("span",{className:"overlay_icon circle_arrow"}))):v.overlay||v.mep_overlay?React.createElement("li",{key:i,className:"slide overlay",onClick:function(e){v.overlay?that.loadOverlay(v.overlay):that.loadMepOverlay(e,v.mep_overlay)}},this.convertOption(v,i),React.createElement("span",{className:"overlay_icon circle_plus"})):React.createElement("li",{key:i,className:"slide"},this.convertOption(v,i))}},{key:"render",value:function(){var that=this
;return this.props.single_value?React.createElement("span",null,this.convertOption(this.props.options[0],0,!0)):this.props.single_slide?"api"==this.props.options.type?React.createElement("div",{className:"readout"},this.convertOption(this.props.options,0,!1)):React.createElement("div",{className:"readout"},this.convertOption(this.props.options[0],0,!1)):React.createElement("section",{className:"dashboard"},React.createElement("div",{className:"slide_container",id:"page_dashboard"},that.props.options.map(function(v,i){return that.createSlide(v,i)})))}}]),PageDashboard}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ResourceListItem=function(_React$Component){function ResourceListItem(){_classCallCheck(this,ResourceListItem),_get(Object.getPrototypeOf(ResourceListItem.prototype),"constructor",this).apply(this,arguments)}return _inherits(ResourceListItem,_React$Component),_createClass(ResourceListItem,[{key:"itemIsFancyboxable",value:function(){var item_is_fancyboxable=this.props.item.fancyboxable,page_is_fancybox=this.props.options&&this.props.options.fancybox;return item_is_fancyboxable&&page_is_fancybox}},{key:"getImageAndDescription",value:function(item){return React.createElement("div",null,React.createElement("div",{className:"rollover_description"},React.createElement("div",{className:"rollover_description_inner",dangerouslySetInnerHTML:{__html:item.short_description}}),React.createElement("div",{className:"overlay_arrow"},React.createElement("img",{src:"/assets/overlay-arrow.png",alt:"More"}))),React.createElement("div",{className:"list_image"},React.createElement("img",{src:item.list_image_src,alt:item.alt_text})),this.getBottomGradient(item))}},{key:"getBottomGradient",value:function(item){return this.props.options&&this.props.options.no_item_title?"":React.createElement("div",{className:"bottom_gradient"},React.createElement("div",null,React.createElement("h3",{dangerouslySetInnerHTML:{__html:item.title}})))}},{key:"getLinkedImageAndDescription",value:function(image_and_description){var item=this.props.item,href=item.url;return this.props.options&&"undefined"!=typeof this.props.options.href_query_params&&(href+="?"+this.props.options.href_query_params),this.itemIsFancyboxable()?React.createElement("a",{href:href,className:"fancybox_slideshow","data-fancybox-group":"images","data-fancybox-href":item.detail_image,"data-title":item.title,"data-sharedescription":item.share_desc,"data-thumbnail":item.list_image_src,"data-link":href},image_and_description):React.createElement("a",{href:href},image_and_description)}},{key:"render",value:function(){var item=this.props.item,image_and_description=this.getImageAndDescription(item),linked_image_and_desc=this.getLinkedImageAndDescription(image_and_description);return React.createElement("div",{className:"image_and_description_container"},linked_image_and_desc,React.createElement("div",{className:"list_text"},React.createElement("div",{className:"content_title"},React.createElement("a",{href:item.url},item.title)),React.createElement("div",{className:"article_teaser_body",dangerouslySetInnerHTML:{__html:item.short_description}})))}}]),ResourceListItem}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Scrollygler=function(_React$Component){function Scrollygler(props){_classCallCheck(this,Scrollygler),_get(Object.getPrototypeOf(Scrollygler.prototype),"constructor",this).call(this,props),this.vid=null,this.animation_request=null;var site_hdr_ht=$(".site_header_area").height(),view_ht=window.innerHeight-site_hdr_ht,chunk_height=(this.props.options&&this.props.options.animation_height?this.props.options.animation_height:1)*view_ht;this.state={frame:0,webgl_pos:0,chunk_height:chunk_height,is_webgl_enabled:!0},this.initScrollMagic=this.initScrollMagic.bind(this)}return _inherits(Scrollygler,_React$Component),_createClass(Scrollygler,[{key:"componentDidMount",value:function(){var that=this;$("body").addClass("scrollyteller_present"),$("#"+that.props.container_id).css("width","100%");var resizeId,view_ht=window.innerHeight-$(".site_header_area").height(),site_hdr_ht=$(".site_header_area").height();$("#"+that.props.container_id+" .bg").css("top",site_hdr_ht+"px"),$("#"+that.props.container_id+" .webgl_container").css("height",view_ht+"px"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height",view_ht+"px"),this.props.options&&this.props.options.embed&&$("body").addClass("iframe_embed"),this.detectWebgl(),$(window).on("resize fullscreenchange",function(e){clearTimeout(resizeId),resizeId=setTimeout(that.resizeScrollyGling(e),500)}),$(window).one("scroll",function(){console.log("iframe mouse interaction >>>"),window.parent&&window.parent.postMessage("scroll_into_view","*")});var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),trident=ua.indexOf("Trident/");(msie>0||trident>0)&&(console.log("IE Found"),$("body").addClass("ms_ie")),this.initStickyFallback();var element_top=$("#"+this.props.container_id).offset().top;this.setState({scrollyteller_top:element_top})}},{key:"resizeScrollyGling",value:function(e){var that=this,site_hdr_ht=$(".site_header_area").height(),view_ht=window.innerHeight-site_hdr_ht,animation_height=this.props.options&&this.props.options.animation_height?this.props.options.animation_height:1,chunk_height=animation_height*view_ht;$("#"+that.props.container_id+" .chunk").height(chunk_height),$("body").hasClass(".ms_ie")?($("#"+that.props.container_id+" .webgl_container").css("height","100vh"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height","100vh")):e!=undefined&&"fullscreenchange"==e.type?($("#"+that.props.container_id+" .webgl_container").css("height","100vh"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height","100vh")):($("#"+that.props.container_id+" .bg").css("top",site_hdr_ht+"px"),$("#"+that.props.container_id+" .webgl_container").css("height",view_ht+"px"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height",view_ht+"px")),that.setState({chunk_height:chunk_height})}},{key:"detectWebgl",value:function(){var that=this;that.detector()?that.initWebgl():that.setState({is_webgl_enabled:!1},function(){that.initWebglFallback()})}},{key:"detector",value:function(){try{var canvas=document.createElement("canvas");return!(!window.WebGLRenderingContext||!canvas.getContext("webgl")&&!canvas.getContext("experimental-webgl"))}catch(e){return!1}}},{key:"initWebgl",value:function(){var scene=Scenes[this.props.webgl_scene];if(scene){var useStats=!(!this.props.options||!this.props.options.indicators);scene.init(this.props.webgl_config,this.mobileAndTabletCheck(),useStats,this.initScrollMagic)}}},{key:"initWebglFallback",value:function(){var fallbackScene=Scenes[this.props.webgl_scene+"Fallback"];fallbackScene&&fallbackScene.init(this.props.webgl_config,this.mobileAndTabletCheck(),this.initScrollMagic)}},{key:"initScrollMagic",value:function(animations){function getDuration(){return durationValueCache}function updateDuration(){durationValueCache=$("#"+that.props.container_id+" .chunk").height()}var durationValueCache,that=this,scrollController=new ScrollMagic.Controller;window.scrollController=scrollController,$(window).on("resize",updateDuration),$(window).triggerHandler("resize"),animations.forEach(function(a,i){var scrollScene=new ScrollMagic.Scene({triggerElement:"#scrollygler_chunk_"+i}).triggerHook(1).setTween(a.value).addTo(scrollController).duration(getDuration);that.props.options&&that.props.options.indicators&&scrollScene.addIndicators({name:a.name})})}},{key:"scrollPlay",value:function(){var $el=$("#"+this.props.container_id),element_top=$el.offset().top,viewport_top=($el.outerHeight(),$(window).scrollTop()),yoff=($(window).height(),viewport_top-element_top),rate=this.state.playback_speed/this.props.playback_speed,frame=yoff/this.state.playback_speed*rate;this.vid.currentTime=frame}},{key:"isStuck",value:function(){return $("#"+this.props.container_id+" .bg").offset().top==$(window).scrollTop()}},{key:"getScrollComponent",value:function(){return this.props.webgl_config?this.state.is_webgl_enabled?React.createElement("div",{className:"scrollContent"},React.createElement(WebglContainer,{locations:this.props.webgl_config.locations,animations:this.props.webgl_config.animations})):React.createElement("div",{className:"scrollContent"},React.createElement(WebglFallbackContainer,{animations:this.props.webgl_config.animations})):null}},{key:"getForeground",value:function(){var that=this;return this.props.options.chunks?React.createElement("div",{className:"chunks"},this.props.options.chunks.map(function(v,i){var title=v.title?React.createElement("h3",{className:"title",dangerouslySetInnerHTML:{__html:v.title}}):null,subtitle=v.subtitle?React.createElement("h4",{className:"subtitle",dangerouslySetInnerHTML:{__html:v.subtitle}}):null,image=v.image_src?React.createElement("img",{className:"chunk_image",src:v.image_src}):null,text=v.text?React.createElement("p",{className:"chunk_text",dangerouslySetInnerHTML:{__html:v.text}}):null,image_credit=v.image_credit?React.createElement("p",{className:"image_credit",dangerouslySetInnerHTML:{__html:v.image_credit}}):null,klass=v.klass?v.klass:"";return React.createElement("div",{key:"chunk_"+i,id:"scrollygler_chunk_"+i,className:"chunk "+klass,style:{height:that.state.chunk_height+"px"}},React.createElement("div",{className:"wrap"},title,subtitle,image,text,image_credit))})):null}},{key:"toggleFullscreen",value:function(){$("#fullscreen").length>0&&$("#fullscreen")[0].click()}},{key:"skipDown",value:function(){if($("body.fullscreen_element").length>0)console.log("skipDown fullscreen present"),this.toggleFullscreen();else{var scrollTell=$("#"+this.props.container_id),scrollTellHt=scrollTell.height(),scrollTellTop=scrollTell.offset().top,scrollSpeed=1800-1800*(((document.documentElement.scrollTop||document.body.scrollTop)-scrollTellTop)/scrollTellHt),scrollDest=scrollTellTop+scrollTellHt-(null!=$(".site_header_area").height()?$(".site_header_area").height():0);$("html, body").animate({scrollTop:scrollDest},scrollSpeed,function(){})}}},{key:"getSkipper",value:function(){var _this=this;return React.createElement("div",{className:"skipper"},React.createElement("a",{className:"skip_dn",onClick:function(e){_this.skipDown(e)}},React.createElement("span",{className:"svg_icon_container svg_icon"},React.createElement("svg",{display:"none",width:"0",height:"0",viewBox:"0 0 10 10"},React.createElement("g",{id:"Page-1"},React.createElement("g",{id:"1_scrolly_title",transform:"translate(-20.000000, -783.000000)"},React.createElement("g",{id:"continue-copy",transform:"translate(20.000000, 781.000000)"},React.createElement("path",{d:"M2.99961687,6 L2.99961687,2.523 C2.99961687,2.247 3.22361687,2 3.49961687,2 L4.49961687,2 C4.77561687,2 4.99961687,2.247 4.99961687,2.523 L4.99961687,6 L7.33961687,6 C7.95961687,6 8.17961687,6.441 7.83961687,6.941 L4.61961687,11.628 C4.27961687,12.128 3.71961687,12.11 3.37961687,11.62 L0.15961687,6.939 C-0.18038313,6.451 0.0396168697,6 0.65961687,6 L2.99961687,6 Z",id:"Down_3"})))))),React.createElement("span",{className:"text"},"continue to article")))}},{key:"initStickyFallback",value:function(){var that=this;if($("body").hasClass("ms_ie")){var elementStuck=document.querySelector(".bg .webgl_container"),elementPosition=elementStuck.getBoundingClientRect(),placeholder=document.createElement("div");placeholder.style.width=elementPosition.width+"px",placeholder.style.height=elementPosition.height+"px";var isAdded=!1;$("#"+that.props.container_id+" .webgl_container").css("height","100vh"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height","100vh");var skipper=document.querySelector(".skipper"),feature=$("#"+that.props.container_id+" .fg");feature.css("overflow","hidden");var featureBottom=feature.offset().top+feature.height()-window.innerHeight;window.addEventListener("scroll",function(){window.pageYOffset<elementPosition.top&&isAdded?(elementStuck.classList.remove("sticky"),skipper.classList.remove("sticky"),elementStuck.parentNode.removeChild(placeholder),isAdded=!1):window.pageYOffset>=elementPosition.top&&!isAdded&&window.pageYOffset<featureBottom?(elementStuck.classList.add("sticky"),skipper.classList.add("sticky"),elementStuck.parentNode.insertBefore(placeholder,elementStuck),isAdded=!0):window.pageYOffset>featureBottom&&isAdded&&(elementStuck.classList.remove("sticky"),skipper.classList.remove("sticky"),elementStuck.parentNode.removeChild(placeholder),isAdded=!1)})}}},{key:"getFullscreenComponent",value:function(){var that=this;if(this.props.options&&this.props.options.embed){var poster=this.props.options.embed_poster?this.props.options.embed_poster:"",title_text=this.props.options.embed_title?this.props.options.embed_title:"",title=React.createElement("h3",{className:"embed_title"},title_text),button_text=this.props.options.embed_button_text?this.props.options.embed_button_text:"LAUNCH FEATURE",button=React.createElement("button",{className:"embed_button",onClick:function(e){that.toggleFullscreen(e)}},button_text);return React.createElement("div",{className:"fullscreen_container",style:{backgroundImage:"url("+poster+")"}},React.createElement("div",{className:"embed_text"},title,button),React.createElement(Fullscreen,{is_webgl_enabled:this.state.is_webgl_enabled,callback:this.resizeScrollyGling,app_selector:"#page",always_show:!0,post_message:!0}))}return null}},{key:"mobileAndTabletCheck",value:function(){var a,check=!1;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check}},{key:"render",value:function(){return React.createElement("div",{id:this.props.container_id},React.createElement("div",{className:"bg"},this.getScrollComponent(),this.getSkipper()),React.createElement("div",{className:"fg"},this.getForeground()),this.getFullscreenComponent())}}]),Scrollygler}(React.Component),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},ScrollyStory=function(_React$Component){function ScrollyStory(props){_classCallCheck(this,ScrollyStory),_get(Object.getPrototypeOf(ScrollyStory.prototype),"constructor",this).call(this,props),this.vid=null,this.animation_request=null;var site_hdr_ht=$(".site_header_area").height(),view_ht=window.innerHeight-site_hdr_ht,chunk_height=(this.props.options&&this.props.options.chunk_coefficient?this.props.options.chunk_coefficient:1)*view_ht;this.state={first_load:!0,frame:0,webgl_pos:0,chunk_height:chunk_height,visible_sections:[0],last_scroll_top:0}}return _inherits(ScrollyStory,_React$Component),_createClass(ScrollyStory,[{key:"componentDidMount",value:function(){var that=this;$(".chunk_body *[data-react-class]").each(function(i,component){var $component=$(component),component_name=$component.data("react-class"),component_props=$component.data("react-props"),component_class=$component.attr("class"),component_tag=$component[0].tagName.toLowerCase(),component_jsx=React.createElement(window[component_name],component_props),wrapper=document.createElement(component_tag);wrapper.className=component_class,$component.replaceWith(wrapper),ReactDOM.render(component_jsx,wrapper)}),$.each(this.props.chunks,function(i,chunk){for(var chunk_scripts_re=/<script>([\s\S]*)<\/script>/gi,chunk_scripts=[];null!==(chunk_scripts=chunk_scripts_re.exec(chunk.body));){var script_content=chunk_scripts[1],s=document.createElement("script");s.type="text/javascript",s.innerHTML=script_content,that.instance.appendChild(s)}}),$("body").addClass("scrollystory_present"),this.initScrollListeners(),this.initClickListeners(),this.sniffForMicrosoft();var fireResize=debounce(function(e){console.log("resize / fullscreenchange",e),that.resizeScrollyStory(e)},500).bind(this);window.addEventListener("resize fullscreenchange",fireResize);var element_top=$("#"+this.props.container_id).offset().top;this.setState({scrollystory_top:element_top})}},{key:"sniffForMicrosoft",value:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),trident=ua.indexOf("Trident/"),edge=ua.indexOf("Edge");(msie>0||trident>0||edge>0)&&(console.log("IE Found"),$("body").addClass("ms_ie"))}},{key:"initClickListeners",value:function(){var that=this,audio_clip=".audio_clip";$(".audio_icon").on("click touchstart",function(){$(this).closest("section").find(audio_clip).prop("currentTime",0),$(this).closest("section").find(audio_clip).prop("volume",1),$(this).closest("section").find(audio_clip).get(0).play(),$(audio_clip).hasClass("scroll_on_click")&&$("html,body").animate({scrollTop:that.state.chunk_height},1e3)}).bind(this)}},{key:"initScrollListeners",value:function(){var that=this;$(document).on("scroll",function(){var visible_sections;that.state.last_scroll_top!=$(window).scrollTop()&&(visible_sections=[],$("#"+that.props.container_id+" .section_container > section").each(function(i,el){if(Utils.isScrolledIntoView(el)){var el_id=parseInt(el.id.replace("sticky_section_",""));visible_sections.push(el_id)}}),that.setState({visible_sections:visible_sections,last_scroll_top:$(window).scrollTop()},function(){var site_header_area_ht=$(".site_header_area").height(),scroll_y=$(window).scrollTop()+that.state.chunk_height+site_header_area_ht,fadeout_distance=that.props.fadeout_distance?that.props.fadeout_distance:1e3;$("#"+that.props.container_id+" section.visible").each(function(i,el){var $el=$(el),fade_end=$el.offset().top+$el.innerHeight()+(that.props.fadeout_buffer?that.props.fadeout_buffer:0);if(scroll_y>fade_end-fadeout_distance){var bg_opacity=scroll_y>fade_end?0:(fade_end-scroll_y)/fadeout_distance;$el.find(".background_video").first().css("opacity",bg_opacity)}else $el.find(".background_video").first().css("opacity",1)})}))}).bind(this)}},{key:"resizeScrollyStory",value:function(){var that=this;document.body.height=window.innerHeight;var chunk_coefficient=this.props.options&&this.props.options.chunk_coefficient?this.props.options.chunk_coefficient:1,site_header_area_ht=$(".site_header_area").height(),view_ht=window.innerHeight-site_header_area_ht,chunk_height=chunk_coefficient*view_ht;$("#"+this.props.container_id+" .chunk").css("min-height",chunk_height),$("#"+this.props.container_id+" .section_elements").height(view_ht),$("body").hasClass(".ms_ie")&&($("#"+that.props.container_id+" .section_elements").css("height","100vh"),$("#"+that.props.container_id+" .chunk").css("height","100vh")),that.setState({chunk_height:chunk_height})}},{key:"getStickySections",value:function(){var _this=this;if(this.props.chunks){var _ret2=function(){_this.props.chunks;var sections=[];return _this.props.chunks.map(function(v,i){var json_blob=v.json_blob?JSON.parse(v.json_blob):null;if(null!=json_blob){var section_title_present=json_blob.hasOwnProperty("section_title"),section_marker_present=!!json_blob.hasOwnProperty("section_marker")&&1==json_blob.section_marker,story_title_present=json_blob.hasOwnProperty("story_title");(section_title_present||section_marker_present||story_title_present)&&sections.push(i)}}),{v:sections}}();if("object"==typeof _ret2)return _ret2.v}}},{key:"getChunks",value:function(x,y){var that=this,hide_chunk_titles=!(!this.props.options||!this.props.options.hide_chunk_titles)&&this.props.options.hide_chunk_titles,chunks=this.props.chunks.slice(x,y);return React.createElement("div",{className:"chunks"},chunks.map(function(v,i){i+=x;var title=!hide_chunk_titles&&v.title?React.createElement("h3",{className:"chunk_title",dangerouslySetInnerHTML:{__html:v.title}}):null,body=v.body?React.createElement("div",{className:"chunk_body",dangerouslySetInnerHTML:{__html:v.body}}):null,json_blob=v.json_blob?JSON.parse(v.json_blob):null,klass=null!=json_blob&&json_blob.hasOwnProperty("klass")?json_blob.klass:"";return React.createElement("div",{key:"chunk_"+i,id:"scrollystory_chunk_"+i,className:"chunk "+klass,style:{minHeight:that.state.chunk_height+"px"}},React.createElement("div",{className:"wrap"},title,body))}))}},{key:"getSections",value:function(){var _this2=this,that=this,sticky_sections=this.getStickySections();if(this.props.chunks&&this.state.first_load)return React.createElement("div",{className:"section_container"},this.props.chunks.map(function(v,i){var json_blob=v.json_blob?JSON.parse(v.json_blob):null,section_title=null!=json_blob&&json_blob.hasOwnProperty("section_title")?React.createElement("h2",{className:"section_title"},json_blob.section_title):null,story_title=null!=json_blob&&json_blob.hasOwnProperty("story_title")?React.createElement("h1",{className:"story_title"},json_blob.story_title):null,audio_clip_scroll=null!=json_blob&&json_blob.hasOwnProperty("audio_clip_scroll")&&1==json_blob.audio_clip_scroll?" scroll_on_click ":"",audio_clip=null!=json_blob&&json_blob.hasOwnProperty("audio_clip")?React.createElement("audio",{className:"audio_clip "+audio_clip_scroll+" hidden",controls:!0},React.createElement("source",{src:json_blob.audio_clip})):null,background_video_opacity=null!=json_blob&&json_blob.hasOwnProperty("background_video_opacity")?json_blob.background_video_opacity:1,background_video=(null!=json_blob&&json_blob.hasOwnProperty("background_poster")&&json_blob.background_poster,null!=json_blob&&json_blob.hasOwnProperty("background_video")?React.createElement("div",{className:"background_video",dangerouslySetInnerHTML:{__html:"<video key="+i+" id=background_video-"+i+' muted autoplay loop style="opacity: '+background_video_opacity+'" poster='+json_blob.background_poster+"><source src="+json_blob.background_video+' type="video/mp4"></source></video>'}}):null),background_image=null!=json_blob&&json_blob.hasOwnProperty("background_image")?React.createElement("div",{className:"background_image_container",style:{backgroundImage:"url("+json_blob.background_image+")"}}):null,section_klass=null!=json_blob&&json_blob.hasOwnProperty("section_klass")?json_blob.section_klass:"";section_klass+=background_video||background_image?" bg_present":" no_bg";null==json_blob||!json_blob.hasOwnProperty("scrollygler")||json_blob.scrollygler;if(sticky_sections.includes(i)){var x=i,z=sticky_sections.indexOf(x),y=sticky_sections[z+1]!=undefined?sticky_sections[z+1]:_this2.props.chunks.length,ce_ht=window.innerHeight-$(".site_header_area").height(),chunks=that.getChunks(x,y);return React.createElement("section",{key:"ss_section_"+z,className:section_klass+" scrollystory_section "+(_this2.state.visible_sections.includes(z)?"visible":""),id:"sticky_section_"+z},React.createElement("div",{className:"section_elements",style:{height:ce_ht+"px"}},story_title,section_title,audio_clip,background_video,background_image),chunks)}}))}},{key:"render",value:function(){var _this3=this;return React.createElement("div",{className:"feature_pages",id:this.props.container_id,ref:function(el){return _this3.instance=el}},this.getSections())}}]),ScrollyStory}(React.Component),Utils={isScrolledIntoView:function(el){var rect=el.getBoundingClientRect(),elemTop=rect.top,elemBottom=rect.bottom;return isVisible=elemTop<window.innerHeight&&elemBottom>=0,isVisible}},ScrollyTeller=createReactClass({vid:null,animation_request:null,getInitialState:function(){return{frame:0,webgl_pos:0,chunk_height:this.props.options&&this.props.options.animation_height?this.props.options.animation_height*$(window).height():$(window).height(),is_webgl_enabled:!0}},componentDidMount:function(){var _this=this,that=this;$("body").addClass("scrollyteller_present"),$("#"+that.props.container_id).css("width","100%");var resizeId,setVideoPosition,viewHeight=window.innerHeight-$(".site_header_area").height(),siteHeaderHt=$(".site_header_area").height();($("#"+that.props.container_id+" .bg").css("top",siteHeaderHt+"px"),$("#"+that.props.container_id+" .webgl_container").css("height",viewHeight+"px"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height",viewHeight+"px"),this.props.options&&this.props.options.embed&&$("body").addClass("iframe_embed"),this.props.feature)?(setVideoPosition=function(){var vid_height=$("#"+that.props.container_id+" .bg video").height(),view_height=document.documentElement.clientHeight+$(".site_header_area").height(),bg_padding=(document.documentElement.clientHeight,$(".site_header_area").height(),(view_height-vid_height)/2);$("#"+that.props.container_id+" .bg").css("padding-top",bg_padding+"px")},_this.vid=$("#"+_this.props.container_id+" .bg video")[0],_this.vid.addEventListener("loadedmetadata",function(){var duration=that.vid.duration,playback_speed=that.props.options&&that.props.options.playback_speed?that.props.options.playback_speed:that.props.playback_speed,chunk_height=Math.floor(duration)*playback_speed/that.props.options.chunks.length;that.setState({chunk_height:chunk_height,playback_speed:playback_speed}),setVideoPosition()}),$(window).on("resize",function(){setVideoPosition()}),$(window).on("resize scroll",function(){_this.props.feature&&(_this.isStuck()?_this.animation_request=window.requestAnimationFrame(_this.scrollPlay):_this.animation_request&&(window.cancelAnimationFrame(_this.animation_request),requestId=null))})):(this.detectWebgl(),$(window).on("resize fullscreenchange",function(e){console.log("resize / fullscreenchange : : : : : : : : : : : : : : : : : ",e),clearTimeout(resizeId),resizeId=setTimeout(that.resizeScrollyGling(e),300)}),$(window).one("scroll",function(){console.log("iframe mouse interaction >>>"),window.parent&&window.parent.postMessage("scroll_into_view","*")}));var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),trident=ua.indexOf("Trident/");(msie>0||trident>0)&&(console.log("IE Found"),$("body").addClass("ms_ie")),this.initStickyFallback();var element_top=$("#"+this.props.container_id).offset().top;this.setState({scrollyteller_top:element_top})},resizeScrollyGling:function(e){var that=this,animation_height=this.props.options&&this.props.options.animation_height?this.props.options.animation_height:1,chunk_height=animation_height*document.documentElement.clientHeight;if($(".chunk").height(chunk_height),$("body").hasClass(".ms_ie"))$("#"+that.props.container_id+" .webgl_container").css("height","100vh"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height","100vh");else if(e!=undefined&&"fullscreenchange"==e.type)$("#"+that.props.container_id+" .webgl_container").css("height","100vh"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height","100vh");else{var viewHeight=window.innerHeight-$(".site_header_area").height(),siteHeaderHt=$(".site_header_area").height();$("#"+that.props.container_id+" .bg").css("top",siteHeaderHt+"px"),$("#"+that.props.container_id+" .webgl_container").css("height",viewHeight+"px"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height",viewHeight+"px")}that.setState({chunk_height:chunk_height})},detectWebgl:function(){var that=this;that.detector()?that.initWebgl():that.setState({is_webgl_enabled:!1},function(){that.initWebglFallback()})},detector:function(){try{var canvas=document.createElement("canvas");return!(!window.WebGLRenderingContext||!canvas.getContext("webgl")&&!canvas.getContext("experimental-webgl"))}catch(e){return!1}},initWebgl:function(){if(impactsOfGlobalWarming){var useStats=!(!this.props.options||!this.props.options.indicators);impactsOfGlobalWarming.init(this.props.webgl_config,this.mobileAndTabletCheck(),useStats,this.initScrollMagic)}},initWebglFallback:function(){impactsOfGlobalWarmingFallback&&impactsOfGlobalWarmingFallback.init(this.props.webgl_config,this.mobileAndTabletCheck(),this.initScrollMagic)},initScrollMagic:function(animations){function getDuration(){return durationValueCache}function updateDuration(){durationValueCache=$(".chunk").height()}var durationValueCache,that=this,scrollController=new ScrollMagic.Controller;window.scrollController=scrollController,$(window).on("resize",updateDuration),$(window).triggerHandler("resize"),animations.forEach(function(a,i){var scrollScene=new ScrollMagic.Scene({triggerElement:"#chunk_"+i}).triggerHook(1).setTween(a.value).addTo(scrollController).duration(getDuration)
;that.props.options&&that.props.options.indicators&&scrollScene.addIndicators({name:a.name})})},scrollPlay:function(){var $el=$("#"+this.props.container_id),element_top=$el.offset().top,viewport_top=($el.outerHeight(),$(window).scrollTop()),yoff=($(window).height(),viewport_top-element_top),rate=this.state.playback_speed/this.props.playback_speed,frame=yoff/this.state.playback_speed*rate;this.vid.currentTime=frame},isStuck:function(){return $("#"+this.props.container_id+" .bg").offset().top==$(window).scrollTop()},getSourceFor:function(type){return this.props.feature[type+"_video_src"]?React.createElement("source",{type:"video/"+type,src:this.props.feature[type+"_video_src"]}):null},getScrollComponent:function(){return this.props.feature?React.createElement("video",{tabIndex:0,preload:!0,muted:!0},this.getSourceFor("webm"),this.getSourceFor("mp4"),React.createElement("img",{src:this.props.feature.image_src,alt:this.props.feature.image_alt})):this.props.webgl_config?this.state.is_webgl_enabled?React.createElement("div",{className:"scrollContent"},React.createElement(WebglContainer,{locations:this.props.webgl_config.locations,animations:this.props.webgl_config.animations})):React.createElement("div",{className:"scrollContent"},React.createElement(WebglFallbackContainer,{animations:this.props.webgl_config.animations})):null},getForeground:function(){var that=this;return this.props.options.chunks?React.createElement("div",{className:"chunks"},this.props.options.chunks.map(function(v,i){var title=v.title?React.createElement("h3",{className:"title",dangerouslySetInnerHTML:{__html:v.title}}):null,subtitle=v.subtitle?React.createElement("h4",{className:"subtitle",dangerouslySetInnerHTML:{__html:v.subtitle}}):null,image=v.image_src?React.createElement("img",{className:"chunk_image",src:v.image_src}):null,text=v.text?React.createElement("p",{className:"chunk_text",dangerouslySetInnerHTML:{__html:v.text}}):null,image_credit=v.image_credit?React.createElement("p",{className:"image_credit",dangerouslySetInnerHTML:{__html:v.image_credit}}):null,klass=v.klass?v.klass:"";return React.createElement("div",{key:"chunk_"+i,id:"chunk_"+i,className:"chunk "+klass,style:{height:that.state.chunk_height+"px"}},React.createElement("div",{className:"wrap"},title,subtitle,image,text,image_credit))})):null},toggleFullscreen:function(){$("#fullscreen").length>0&&$("#fullscreen")[0].click()},skipDown:function(){if($("body.fullscreen_element").length>0)console.log("skipDown fullscreen present"),this.toggleFullscreen();else{var scrollTell=$("#"+this.props.container_id),scrollTellHt=scrollTell.height(),scrollTellTop=scrollTell.offset().top,scrollSpeed=1800-1800*(((document.documentElement.scrollTop||document.body.scrollTop)-scrollTellTop)/scrollTellHt),scrollDest=scrollTellTop+scrollTellHt-(null!=$(".site_header_area").height()?$(".site_header_area").height():0);$("html, body").animate({scrollTop:scrollDest},scrollSpeed,function(){})}},getSkipper:function(){return React.createElement("div",{className:"skipper"},React.createElement("a",{className:"skip_dn",onClick:this.skipDown},React.createElement("span",{className:"svg_icon_container svg_icon"},React.createElement("svg",{display:"none",width:"0",height:"0",viewBox:"0 0 10 10"},React.createElement("g",{id:"Page-1"},React.createElement("g",{id:"1_scrolly_title",transform:"translate(-20.000000, -783.000000)"},React.createElement("g",{id:"continue-copy",transform:"translate(20.000000, 781.000000)"},React.createElement("path",{d:"M2.99961687,6 L2.99961687,2.523 C2.99961687,2.247 3.22361687,2 3.49961687,2 L4.49961687,2 C4.77561687,2 4.99961687,2.247 4.99961687,2.523 L4.99961687,6 L7.33961687,6 C7.95961687,6 8.17961687,6.441 7.83961687,6.941 L4.61961687,11.628 C4.27961687,12.128 3.71961687,12.11 3.37961687,11.62 L0.15961687,6.939 C-0.18038313,6.451 0.0396168697,6 0.65961687,6 L2.99961687,6 Z",id:"Down_3"})))))),React.createElement("span",{className:"text"},"continue to article")))},initStickyFallback:function(){var that=this;if($("body").hasClass("ms_ie")){var elementStuck=document.querySelector(".bg .webgl_container"),elementPosition=elementStuck.getBoundingClientRect(),placeholder=document.createElement("div");placeholder.style.width=elementPosition.width+"px",placeholder.style.height=elementPosition.height+"px";var isAdded=!1;$("#"+that.props.container_id+" .webgl_container").css("height","100vh"),$("#"+that.props.container_id+" .webgl_fallback_container").css("height","100vh");var skipper=document.querySelector(".skipper"),feature=$(".fg");feature.css("overflow","hidden");var featureBottom=feature.offset().top+feature.height()-window.innerHeight;window.addEventListener("scroll",function(){window.pageYOffset<elementPosition.top&&isAdded?(elementStuck.classList.remove("sticky"),skipper.classList.remove("sticky"),elementStuck.parentNode.removeChild(placeholder),isAdded=!1):window.pageYOffset>=elementPosition.top&&!isAdded&&window.pageYOffset<featureBottom?(elementStuck.classList.add("sticky"),skipper.classList.add("sticky"),elementStuck.parentNode.insertBefore(placeholder,elementStuck),isAdded=!0):window.pageYOffset>featureBottom&&isAdded&&(elementStuck.classList.remove("sticky"),skipper.classList.remove("sticky"),elementStuck.parentNode.removeChild(placeholder),isAdded=!1)})}},getFullscreenComponent:function(){var that=this;if(this.props.options&&this.props.options.embed){var poster=this.props.options.embed_poster?this.props.options.embed_poster:"",title_text=this.props.options.embed_title?this.props.options.embed_title:"",title=React.createElement("h3",{className:"embed_title"},title_text),button_text=this.props.options.embed_button_text?this.props.options.embed_button_text:"LAUNCH FEATURE",button=React.createElement("button",{className:"embed_button",onClick:that.toggleFullscreen},button_text);return React.createElement("div",{className:"fullscreen_container",style:{backgroundImage:"url("+poster+")"}},React.createElement("div",{className:"embed_text"},title,button),React.createElement(Fullscreen,{is_webgl_enabled:this.state.is_webgl_enabled,callback:this.resizeScrollyGling,app_selector:"#page",always_show:!0,post_message:!0}))}return null},mobileAndTabletCheck:function(){var a,check=!1;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check},render:function(){return React.createElement("div",{id:this.props.container_id},React.createElement("div",{className:"bg"},this.getScrollComponent(),this.getSkipper()),React.createElement("div",{className:"fg"},this.getForeground()),this.getFullscreenComponent())}}),SlideshowBrandArea=createReactClass({render:function(){return React.createElement("div",{className:"view_all_brand_area",style:this.props.view_all?{maxWidth:"344px"}:{maxWidth:"262px"}},React.createElement("div",{className:"brand_1"},React.createElement("a",{className:"nasa_logo",href:"https://www.nasa.gov",target:"blank",title:"visit nasa.gov"})),React.createElement("div",{className:"brand_2"},React.createElement("div",{className:"site_logo",style:{height:"100%"}},React.createElement("a",{id:"site_logo",href:"/",title:"Global Climate Change Home"},"Global Climate Change"))),React.createElement("img",{className:"print_only print_logo",src:"/assets/logo_nasa_trio_white@2x.png",alt:""}))}}),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},co2_rate=1079.267625,TimerAndFormula=function(_React$Component){function TimerAndFormula(props){_classCallCheck(this,TimerAndFormula),_get(Object.getPrototypeOf(TimerAndFormula.prototype),"constructor",this).call(this,props),this.state={time:0,start:0},this.startTimer=this.startTimer.bind(this)}return _inherits(TimerAndFormula,_React$Component),_createClass(TimerAndFormula,[{key:"componentDidMount",value:function(){console.log("TimerAndFormula:: didMount"),this.startTimer()}},{key:"startTimer",value:function(){var _this=this;this.setState({time:this.state.time,start:Date.now()-this.state.time}),this.timer=setInterval(function(){return _this.setState({time:Date.now()-_this.state.start})},1)}},{key:"formatWithCommas",value:function(formula){return formula.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"calculateFormula",value:function(){return this.state.time/1e3*co2_rate}},{key:"render",value:function(){return React.createElement("div",{className:"timer_and_formula"},React.createElement("p",null,"In the ",React.createElement("span",{className:"seconds_calc"},(this.state.time/1e3).toFixed(0))," seconds that you've been on this page,"),React.createElement("div",{className:"calculation_result"},this.formatWithCommas(this.calculateFormula().toFixed(0))," "),React.createElement("p",null,"metric tons of CO\u2082 have been released worldwide due to burning fossil fuels."))}}]),TimerAndFormula}(React.Component),VitalSignDashboard=createReactClass({getInitialState:function(){return{value:null,units:null,abbr:null}},componentWillMount:function(){var that=this;$.getJSON("/api/v1/vital_signs/"+this.props.item_id,function(data){that.setState({value:data.value,units:data.units,abbr:data.unit_abbr,increasing:data.rate_is_increasing})})},render:function(){if(this.state.value&&this.state.units){var units=this.props.downcase?this.state.units.toLowerCase():this.state.units;return React.createElement("div",{className:"value"},this.props.absolute_value?Math.abs(this.state.value):this.state.value," ",this.props.abbreviated&&this.state.abbr?this.state.abbr:units)}return null}});